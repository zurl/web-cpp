parcelRequire=function(e,t,n,r){var i="function"==typeof parcelRequire&&parcelRequire,s="function"==typeof require&&require;function o(n,r){if(!t[n]){if(!e[n]){var a="function"==typeof parcelRequire&&parcelRequire;if(!r&&a)return a(n,!0);if(i)return i(n,!0);if(s&&"string"==typeof n)return s(n);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}l.resolve=function(t){return e[n][1][t]||t},l.cache={};var c=t[n]=new o.Module(n);e[n][0].call(c.exports,l,c,c.exports,this)}return t[n].exports;function l(e){return o(l.resolve(e))}}o.isParcelRequire=!0,o.Module=function(e){this.id=e,this.bundle=o,this.exports={}},o.modules=e,o.cache=t,o.parent=i,o.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]};for(var a=0;a<n.length;a++)o(n[a]);if(n.length){var u=o(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}return o}({"Y+NE":[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],iWlY:[function(e,t,n){var r=e("./base64");n.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},n.decode=function(e,t,n){var i,s,o,a,u=e.length,c=0,l=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&s),c+=(s&=31)<<l,l+=5}while(i);n.value=(a=(o=c)>>1,1==(1&o)?-a:a),n.rest=t}},{"./base64":"Y+NE"}],XUQW:[function(e,t,n){n.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,i=/^data:.+\,.+$/;function s(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var t=e,r=s(e);if(r){if(!r.path)return e;t=r.path}for(var i,a=n.isAbsolute(t),u=t.split(/\/+/),c=0,l=u.length-1;l>=0;l--)"."===(i=u[l])?u.splice(l,1):".."===i?c++:c>0&&(""===i?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return""===(t=u.join("/"))&&(t=a?"/":"."),r?(r.path=t,o(r)):t}n.urlParse=s,n.urlGenerate=o,n.normalize=a,n.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=s(t),r=s(e);if(r&&(e=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),o(n);if(n||t.match(i))return t;if(r&&!r.host&&!r.path)return r.host=t,o(r);var u="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return r?(r.path=u,o(r)):u},n.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(r)},n.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var u=!("__proto__"in Object.create(null));function c(e){return e}function l(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function p(e,t){return e===t?0:e>t?1:-1}n.toSetString=u?c:function(e){return l(e)?"$"+e:e},n.fromSetString=u?c:function(e){return l(e)?e.slice(1):e},n.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)||n?r:0!=(r=e.generatedColumn-t.generatedColumn)?r:0!=(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},n.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!=(r=e.generatedColumn-t.generatedColumn)||n?r:0!=(r=e.source-t.source)?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},n.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=p(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:p(e.name,t.name)}},{}],"dgh+":[function(e,t,n){var r=e("./util"),i=Object.prototype.hasOwnProperty,s="undefined"!=typeof Map;function o(){this._array=[],this._set=s?new Map:Object.create(null)}o.fromArray=function(e,t){for(var n=new o,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},o.prototype.size=function(){return s?this._set.size:Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(e,t){var n=s?e:r.toSetString(e),o=s?this.has(e):i.call(this._set,n),a=this._array.length;o&&!t||this._array.push(e),o||(s?this._set.set(e,a):this._set[n]=a)},o.prototype.has=function(e){if(s)return this._set.has(e);var t=r.toSetString(e);return i.call(this._set,t)},o.prototype.indexOf=function(e){if(s){var t=this._set.get(e);if(t>=0)return t}else{var n=r.toSetString(e);if(i.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},o.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},o.prototype.toArray=function(){return this._array.slice()},n.ArraySet=o},{"./util":"XUQW"}],AUTm:[function(e,t,n){var r=e("./util");function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,s,o,a;t=this._last,n=e,i=t.generatedLine,s=n.generatedLine,o=t.generatedColumn,a=n.generatedColumn,s>i||s==i&&a>=o||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=i},{"./util":"XUQW"}],"1Wwh":[function(e,t,n){var r=e("./base64-vlq"),i=e("./util"),s=e("./array-set").ArraySet,o=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new o,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)}),n},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),s=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,s),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:s})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var o=this._sourceRoot;null!=o&&(r=i.relative(o,r));var a=new s,u=new s;this._mappings.unsortedForEach(function(t){if(t.source===r&&null!=t.originalLine){var s=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=s.source&&(t.source=s.source,null!=n&&(t.source=i.join(n,t.source)),null!=o&&(t.source=i.relative(o,t.source)),t.originalLine=s.line,t.originalColumn=s.column,null!=s.name&&(t.name=s.name))}var c=t.source;null==c||a.has(c)||a.add(c);var l=t.name;null==l||u.has(l)||u.add(l)},this),this._sources=a,this._names=u,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=o&&(t=i.relative(o,t)),this.setSourceContent(t,r))},this)},a.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,s,o=0,a=1,u=0,c=0,l=0,p=0,h="",f=this._mappings.toArray(),m=0,d=f.length;m<d;m++){if(e="",(t=f[m]).generatedLine!==a)for(o=0;t.generatedLine!==a;)e+=";",a++;else if(m>0){if(!i.compareByGeneratedPositionsInflated(t,f[m-1]))continue;e+=","}e+=r.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(s=this._sources.indexOf(t.source),e+=r.encode(s-p),p=s,e+=r.encode(t.originalLine-1-c),c=t.originalLine-1,e+=r.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-l),l=n)),h+=e}return h},a.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=a},{"./base64-vlq":"iWlY","./util":"XUQW","./array-set":"dgh+","./mapping-list":"AUTm"}],rdpJ:[function(e,t,n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,t,r,i){if(0===t.length)return-1;var s=function e(t,r,i,s,o,a){var u=Math.floor((r-t)/2)+t,c=o(i,s[u],!0);return 0===c?u:c>0?r-u>1?e(u,r,i,s,o,a):a==n.LEAST_UPPER_BOUND?r<s.length?r:-1:u:u-t>1?e(t,u,i,s,o,a):a==n.LEAST_UPPER_BOUND?u:t<0?-1:t}(-1,t.length,e,t,r,i||n.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===r(t[s],t[s-1],!0);)--s;return s}},{}],lFls:[function(e,t,n){function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n,s){if(n<s){var o=n-1;r(e,(l=n,p=s,Math.round(l+Math.random()*(p-l))),s);for(var a=e[s],u=n;u<s;u++)t(e[u],a)<=0&&r(e,o+=1,u);r(e,o+1,u);var c=o+1;i(e,t,n,c-1),i(e,t,c+1,s)}var l,p}n.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],fmOz:[function(e,t,n){var r=e("./util"),i=e("./binary-search"),s=e("./array-set").ArraySet,o=e("./base64-vlq"),a=e("./quick-sort").quickSort;function u(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new p(t):new c(t)}function c(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),o=r.getArg(t,"names",[]),a=r.getArg(t,"sourceRoot",null),u=r.getArg(t,"sourcesContent",null),c=r.getArg(t,"mappings"),l=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map(function(e){return a&&r.isAbsolute(a)&&r.isAbsolute(e)?r.relative(a,e):e}),this._names=s.fromArray(o.map(String),!0),this._sources=s.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=c,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function p(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new s,this._names=new s;var o={line:-1,column:0};this._sections=i.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<o.line||n===o.line&&i<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new u(r.getArg(e,"map"))}})}u.fromSourceMap=function(e){return c.fromSourceMap(e)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},u.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(e,t,n){var i,s=t||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:i=this._generatedMappings;break;case u.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=o&&(t=r.join(o,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,s)},u.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var s=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(void 0===e.column)for(var u=a.originalLine;a&&a.originalLine===u;)s.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==c;)s.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return s},n.SourceMapConsumer=u,c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.fromSourceMap=function(e){var t=Object.create(c.prototype),n=t._names=s.fromArray(e._names.toArray(),!0),i=t._sources=s.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var o=e._mappings.toArray().slice(),u=t.__generatedMappings=[],p=t.__originalMappings=[],h=0,f=o.length;h<f;h++){var m=o[h],d=new l;d.generatedLine=m.generatedLine,d.generatedColumn=m.generatedColumn,m.source&&(d.source=i.indexOf(m.source),d.originalLine=m.originalLine,d.originalColumn=m.originalColumn,m.name&&(d.name=n.indexOf(m.name)),p.push(d)),u.push(d)}return a(t.__originalMappings,r.compareByOriginalPositions),t},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e},this)}}),c.prototype._parseMappings=function(e,t){for(var n,i,s,u,c,p=1,h=0,f=0,m=0,d=0,g=0,y=e.length,w=0,A={},E={},T=[],S=[];w<y;)if(";"===e.charAt(w))p++,w++,h=0;else if(","===e.charAt(w))w++;else{for((n=new l).generatedLine=p,u=w;u<y&&!this._charIsMappingSeparator(e,u);u++);if(s=A[i=e.slice(w,u)])w+=i.length;else{for(s=[];w<u;)o.decode(e,w,E),c=E.value,w=E.rest,s.push(c);if(2===s.length)throw new Error("Found a source, but no line and column");if(3===s.length)throw new Error("Found a source and line, but no column");A[i]=s}n.generatedColumn=h+s[0],h=n.generatedColumn,s.length>1&&(n.source=d+s[1],d+=s[1],n.originalLine=f+s[2],f=n.originalLine,n.originalLine+=1,n.originalColumn=m+s[3],m=n.originalColumn,s.length>4&&(n.name=g+s[4],g+=s[4])),S.push(n),"number"==typeof n.originalLine&&T.push(n)}a(S,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,a(T,r.compareByOriginalPositions),this.__originalMappings=T},c.prototype._findMapping=function(e,t,n,r,s,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,s,o)},c.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var s=r.getArg(i,"source",null);null!==s&&(s=this._sources.at(s),null!=this.sourceRoot&&(s=r.join(this.sourceRoot,s)));var o=r.getArg(i,"name",null);return null!==o&&(o=this._names.at(o)),{source:s,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},c.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(i>=0){var s=this._originalMappings[i];if(s.source===n.source)return{line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=c,p.prototype=Object.create(u.prototype),p.prototype.constructor=u,p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),p.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:t.generatedLine-(s.generatedOffset.generatedLine-1),column:t.generatedColumn-(s.generatedOffset.generatedLine===t.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},p.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},p.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],s=i.consumer._generatedMappings,o=0;o<s.length;o++){var u=s[o],c=i.consumer._sources.at(u.source);null!==i.consumer.sourceRoot&&(c=r.join(i.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var l=i.consumer._names.at(u.name);this._names.add(l),l=this._names.indexOf(l);var p={source:c,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(p),"number"==typeof p.originalLine&&this.__originalMappings.push(p)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)},n.IndexedSourceMapConsumer=p},{"./util":"XUQW","./binary-search":"rdpJ","./array-set":"dgh+","./base64-vlq":"iWlY","./quick-sort":"lFls"}],Qm02:[function(e,t,n){var r=e("./source-map-generator").SourceMapGenerator,i=e("./util"),s=/(\r?\n)/,o="$$$isSourceNode$$$";function a(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[o]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,o=e.split(s),u=0,c=function(){return e()+(e()||"");function e(){return u<o.length?o[u++]:void 0}},l=1,p=0,h=null;return t.eachMapping(function(e){if(null!==h){if(!(l<e.generatedLine)){var t=(n=o[u]).substr(0,e.generatedColumn-p);return o[u]=n.substr(e.generatedColumn-p),p=e.generatedColumn,f(h,t),void(h=e)}f(h,c()),l++,p=0}for(;l<e.generatedLine;)r.add(c()),l++;if(p<e.generatedColumn){var n=o[u];r.add(n.substr(0,e.generatedColumn)),o[u]=n.substr(e.generatedColumn),p=e.generatedColumn}h=e},this),u<o.length&&(h&&f(h,c()),r.add(o.splice(u).join(""))),t.sources.forEach(function(e){var s=t.sourceContentFor(e);null!=s&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,s))}),r;function f(e,t){if(null===e||void 0===e.source)r.add(t);else{var s=n?i.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,s,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[o]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[o]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][o]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,s=null,o=null,a=null,u=null;return this.walk(function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(s===r.source&&o===r.line&&a===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),s=r.source,o=r.line,a=r.column,u=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),s=null,i=!1);for(var c=0,l=e.length;c<l;c++)10===e.charCodeAt(c)?(t.line++,t.column=0,c+1===l?(s=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},n.SourceNode=a},{"./source-map-generator":"1Wwh","./util":"XUQW"}],aRf0:[function(e,t,n){n.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-generator":"1Wwh","./lib/source-map-consumer":"fmOz","./lib/source-node":"Qm02"}],HcQt:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class Symbol{}var r;n.Symbol=Symbol,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.LOCAL=1]="LOCAL",e[e.LOCAL_REF=2]="LOCAL_REF",e[e.STACK=3]="STACK",e[e.MEMORY_DATA=4]="MEMORY_DATA",e[e.MEMORY_BSS=5]="MEMORY_BSS",e[e.MEMORY_EXTERN=6]="MEMORY_EXTERN",e[e.RVALUE=7]="RVALUE",e[e.CONSTANT=8]="CONSTANT",e[e.GLOBAL_SP=9]="GLOBAL_SP"}(r=n.AddressType||(n.AddressType={}));n.Variable=class Variable extends Symbol{constructor(e,t,n,r,i,s){super(),this.name=e,this.fullName=t,this.fileName=n,this.type=r,this.addressType=i,this.location=s}toString(){return`${this.name}:${this.type.toString()}`}isDefine(){return this.addressType!==r.MEMORY_EXTERN}getType(){return this.type}};n.FunctionEntity=class FunctionEntity extends Symbol{constructor(e,t,n,r,i,s,o){super(),this.name=e,this.fullName=t,this.fileName=n,this.type=r,this.isLibCall=i,this.hasDefine=s,this.$sp=0,this.parametersSize=r.parameterTypes.map(e=>e.length).reduce((e,t)=>e+t,0),this.accessControl=o}isDefine(){return this.hasDefine}getType(){return this.type}}},{}],Rt13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/symbol");var i;n.Type=class Type extends r.Symbol{constructor(){super(),this.isExtern=!1,this.isStatic=!1,this.isConst=!1,this.isVirtual=!1}equals(e){return this.constructor===e.constructor}compatWith(e){return this.constructor===e.constructor}isDefine(){return!1}getType(){return this}},function(e){e[e.Public=0]="Public",e[e.Private=1]="Private",e[e.Protected=2]="Protected"}(i=n.AccessControl||(n.AccessControl={})),n.getAccessControlFromString=function(e){return"public"===e?i.Public:"protected"===e?i.Protected:i.Private}},{"../common/symbol":"HcQt"}],YvD4:[function(e,t,n){t.exports=i;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function s(e){return!0===(e&&e.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=s;var o={},a={};function u(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?A:w;if(t){if(e<0)return A;if(e>=d)return C}else{if(e<=-g)return x;if(e+1>=g)return v}return e<0?c(-e,t).neg():l(e%m|0,e/m|0,t)}function l(e,t,n){return new i(e,t,n)}i.fromInt=u,i.fromNumber=c,i.fromBits=l;var p=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return w;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var i=c(p(n,8)),s=w,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+a),n);if(a<8){var l=c(p(n,a));s=s.mul(l).add(c(u))}else s=(s=s.mul(i)).add(c(u))}return s.unsigned=t,s}function f(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=h,i.fromValue=f;var m=4294967296,d=m*m,g=d/2,y=u(1<<24),w=u(0);i.ZERO=w;var A=u(0,!0);i.UZERO=A;var E=u(1);i.ONE=E;var T=u(1,!0);i.UONE=T;var S=u(-1);i.NEG_ONE=S;var v=l(-1,2147483647,!1);i.MAX_VALUE=v;var C=l(-1,-1,!0);i.MAX_UNSIGNED_VALUE=C;var x=l(0,-2147483648,!1);i.MIN_VALUE=x;var _=i.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(p(e,6),this.unsigned),s=this,o="";;){var a=s.div(i),u=(s.sub(a.mul(i)).toInt()>>>0).toString(e);if((s=a).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1==(1&this.low)},_.isEven=function(){return 0==(1&this.low)},_.equals=function(e){return s(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(s(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(E)},_.neg=_.negate,_.add=function(e){s(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,p=0,h=0,m=0;return h+=(m+=i+(65535&e.low))>>>16,p+=(h+=r+u)>>>16,c+=(p+=n+a)>>>16,c+=t+o,l((h&=65535)<<16|(m&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},_.subtract=function(e){return s(e)||(e=f(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return w;if(s(e)||(e=f(e)),r)return l(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return w;if(this.eq(x))return e.isOdd()?x:w;if(e.eq(x))return this.isOdd()?x:w;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,p=e.low>>>16,h=65535&e.low,m=0,d=0,g=0,A=0;return g+=(A+=o*h)>>>16,d+=(g+=i*h)>>>16,g&=65535,d+=(g+=o*p)>>>16,m+=(d+=n*h)>>>16,d&=65535,m+=(d+=i*p)>>>16,d&=65535,m+=(d+=o*u)>>>16,m+=t*h+n*p+i*u+o*a,l((g&=65535)<<16|(A&=65535),(m&=65535)<<16|(d&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(s(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?A:w;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return A;if(e.gt(this.shru(1)))return T;i=A}else{if(this.eq(x))return e.eq(E)||e.eq(S)?x:e.eq(x)?E:(t=this.shr(1).div(e).shl(1)).eq(w)?e.isNegative()?E:S:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(x))return this.unsigned?A:w;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=w}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:p(2,o-48),u=c(t),h=u.mul(e);h.isNegative()||h.gt(n);)h=(u=c(t-=a,this.unsigned)).mul(e);u.isZero()&&(u=E),i=i.add(u),n=n.sub(h)}return i},_.div=_.divide,_.modulo=function(e){return s(e)||(e=f(e)),r?l((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return l(~this.low,~this.high,this.unsigned)},_.and=function(e){return s(e)||(e=f(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return s(e)||(e=f(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return s(e)||(e=f(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(s(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},{}],URi4:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),s=e("./error");class Position{constructor(e,t,n){this.offset=e,this.line=t,this.column=n}toString(){return`(${this.line}:${this.column})`}}n.Position=Position;class SourceLocation{constructor(e,t,n,r){this.fileName=e,this.source=t,this.start=n,this.end=r}toString(){return`${this.start.line}(${this.start.column}) - ${this.end.line}(${this.end.column})`}}n.SourceLocation=SourceLocation;const o=new SourceLocation("","",new Position(1,-1,1),new Position(1,-1,1));class Node{static getEmptyLocation(){return o}constructor(e){this.location=e}codegen(e){throw new s.InternalError("no_impl at "+this.constructor.name)}preprocess(e){throw new s.InternalError("no_impl at "+this.constructor.name)}}n.Node=Node;class Expression extends Node{constructor(e){super(e)}codegen(e){return super.codegen(e)}deduceType(e){throw new s.InternalError(`not impl at ${this.constructor.name}`)}}n.Expression=Expression;n.Identifier=class Identifier extends Expression{constructor(e,t){super(e),this.name=t}};n.TypeID=class TypeID extends Node{constructor(e,t,n){super(e),this.specs=t,this.decl=n}};n.TypeIdentifier=class TypeIdentifier extends Node{constructor(e,t){super(e),this.name=t}};n.TemplateFuncIdentifier=class TemplateFuncIdentifier extends Node{constructor(e,t){super(e),this.name=t}};n.TemplateClassIdentifier=class TemplateClassIdentifier extends Node{constructor(e,t){super(e),this.name=t}};class Constant extends Expression{constructor(e){super(e)}}n.Constant=Constant;class IntegerConstant extends Constant{static getZero(){return a}static getOne(){return u}static getNegOne(){return c}static fromNumber(e,t){return new IntegerConstant(e,10,i.fromInt(t),t.toString(),null)}constructor(e,t,n,r,i){super(e),this.base=t,this.value=n,this.raw=r,this.suffix=i}}n.IntegerConstant=IntegerConstant;const a=IntegerConstant.fromNumber(o,0),u=IntegerConstant.fromNumber(o,1),c=IntegerConstant.fromNumber(o,-1);n.FloatingConstant=class FloatingConstant extends Constant{constructor(e,t,n,r){super(e),this.value=t,this.raw=n,this.suffix=r}};n.CharacterConstant=class CharacterConstant extends Constant{constructor(e,t,n){super(e),this.value=t,this.prefix=n}};n.StringLiteral=class StringLiteral extends Expression{constructor(e,t,n){super(e),this.prefix=t,this.value=n}};n.ParenthesisExpression=class ParenthesisExpression extends Expression{constructor(e,t){super(e),this.expression=t}};n.SubscriptExpression=class SubscriptExpression extends Expression{constructor(e,t,n){super(e),this.array=t,this.subscript=n}};n.CallExpression=class CallExpression extends Expression{constructor(e,t,n){super(e),this.callee=t,this.arguments=n}};n.ConstructorCallExpression=class ConstructorCallExpression extends Expression{constructor(e,t,n){super(e),this.name=t,this.arguments=n}};n.MemberExpression=class MemberExpression extends Expression{constructor(e,t,n,r){super(e),this.object=t,this.pointed=n,this.member=r,this.forceDynamic=!1}};n.PostfixExpression=class PostfixExpression extends Expression{constructor(e,t,n){super(e),this.operand=t,this.decrement=n}};n.UnaryExpression=class UnaryExpression extends Expression{constructor(e,t,n){super(e),this.operator=t,this.operand=n}};n.CastExpression=class CastExpression extends Expression{constructor(e,t,n){super(e),this.typeName=t,this.operand=n}};n.BinaryExpression=class BinaryExpression extends Expression{constructor(e,t,n,r){super(e),void 0===t[1]?this.operator=t[0]:this.operator=t,this.left=n,this.right=r}};n.ConditionalExpression=class ConditionalExpression extends Expression{constructor(e,t,n,r){super(e),this.test=t,this.consequent=n,this.alternate=r}};n.AssignmentExpression=class AssignmentExpression extends Expression{constructor(e,t,n,r){super(e),this.operator=t,this.left=n,this.right=r,this.isInitExpr=!1}};n.Declaration=class Declaration extends Node{constructor(e,t,n){super(e),this.specifiers=t,this.initDeclarators=n}getTypedefName(){return[]}};n.BaseSpecifier=class BaseSpecifier extends Node{constructor(e,t,n){super(e),this.accessControl=t,this.className=n}};n.ClassSpecifier=class ClassSpecifier extends Node{constructor(e,t,n,r,i){super(e),this.typeName=t,this.identifier=n,this.declarations=r,this.inherits=i}};n.EnumSpecifier=class EnumSpecifier extends Node{constructor(e,t,n){super(e),this.identifier=t,this.enumerators=n}};n.Enumerator=class Enumerator extends Node{constructor(e,t,n){super(e),this.identifier=t,this.value=n}};n.InitDeclarator=class InitDeclarator extends Node{constructor(e,t,n){super(e),this.declarator=t,this.initializer=n,this.isObjectDeclarator=!0}};n.ObjectInitializer=class ObjectInitializer extends Node{constructor(e,t){super(e),this.argus=t}};class Declarator extends Node{constructor(e,t){super(e),this.declarator=t}}n.Declarator=Declarator;n.PointerDeclarator=class PointerDeclarator extends Declarator{constructor(e,t,n){super(e,t),this.pointer=n}};n.Pointer=class Pointer extends Node{constructor(e,t,n,r){super(e),this.qualifiers=t,this.pointer=n,this.type=r}};n.IdentifierDeclarator=class IdentifierDeclarator extends Declarator{constructor(e,t){super(e,null),this.identifier=t}};n.ArrayDeclarator=class ArrayDeclarator extends Declarator{constructor(e,t,n,r,i,s){super(e,t),this.static=n,this.qualifiers=r,this.length=i,this.variableLength=s}};n.FunctionDeclarator=class FunctionDeclarator extends Declarator{constructor(e,t,n){super(e,t),this.parameters=n}};n.ParameterList=class ParameterList extends Node{constructor(e,t=[],n=!1){super(e),this.parameters=t,this.variableArguments=n}codegen(e){return{types:[],names:[],inits:[],isVariableArguments:!1}}};n.ParameterDeclaration=class ParameterDeclaration extends Node{constructor(e,t,n,r){super(e),this.specifiers=t,this.declarator=n,this.init=r}};n.TypeName=class TypeName extends Expression{constructor(e,t,n){super(e),this.specifierQualifiers=t,this.declarator=n}};class AbstractDeclarator extends Node{constructor(e,t){super(e),this.declarator=t}}n.AbstractDeclarator=AbstractDeclarator;n.AbstractPointerDeclarator=class AbstractPointerDeclarator extends AbstractDeclarator{constructor(e,t,n){super(e,t),this.pointer=n}};class AbstractArrayDeclarator extends AbstractDeclarator{constructor(e,t,n,r,i,s){super(e,t),this.static=n,this.qualifiers=r,this.length=i,this.variableLength=s}}n.AbstractArrayDeclarator=AbstractArrayDeclarator;n.AbstractFunctionDeclarator=class AbstractFunctionDeclarator extends AbstractDeclarator{constructor(e,t,n){super(e,t),this.parameters=n}};n.InitializerListItem=class InitializerListItem extends Node{constructor(e,t,n){super(e),this.designators=t,this.initializer=n}};n.InitializerList=class InitializerList extends Node{constructor(e,t){super(e),this.items=t}};class Designator extends Node{constructor(e){super(e)}}n.Designator=Designator;n.SubscriptDesignator=class SubscriptDesignator extends Designator{constructor(e,t){super(e),this.subscript=t}};n.MemberDesignator=class MemberDesignator extends Designator{constructor(e,t){super(e),this.member=t}};class Statement extends Node{constructor(e){super(e)}}n.Statement=Statement;n.CaseStatement=class CaseStatement extends Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}};n.LabeledStatement=class LabeledStatement extends Statement{constructor(e,t,n){super(e),this.label=t,this.body=n}};n.CompoundStatement=class CompoundStatement extends Statement{constructor(e,t,n,r){super(e),this.leftBraceLocation=t,this.rightBraceLocation=n,this.body=r}};n.ExpressionStatement=class ExpressionStatement extends Statement{constructor(e,t){super(e),this.expression=t}};n.IfStatement=class IfStatement extends Statement{constructor(e,t,n,r){super(e),this.test=t,this.consequent=n,this.alternate=r}};n.SwitchStatement=class SwitchStatement extends Statement{constructor(e,t,n){super(e),this.discriminant=t,this.body=n}};n.WhileStatement=class WhileStatement extends Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}};n.DoWhileStatement=class DoWhileStatement extends Statement{constructor(e,t,n){super(e),this.body=t,this.test=n}};n.ForStatement=class ForStatement extends Statement{constructor(e,t,n,r,i){super(e),this.init=t,this.test=n,this.update=r,this.body=i}};n.GotoStatement=class GotoStatement extends Statement{constructor(e,t){super(e),this.label=t}};n.ContinueStatement=class ContinueStatement extends Statement{constructor(e){super(e),this.surroundingStatement=null}};n.BreakStatement=class BreakStatement extends Statement{constructor(e){super(e),this.surroundingStatement=null}};n.ReturnStatement=class ReturnStatement extends Statement{constructor(e,t){super(e),this.argument=t}};n.TranslationUnit=class TranslationUnit extends Node{constructor(e,t){super(e),this.body=t}};n.FunctionDefinition=class FunctionDefinition extends Node{constructor(e,t,n,r,i){super(e),this.specifiers=t,this.declarator=n,this.declarations=r,this.body=i,this.parameterNames=[],this.name=""}};n.ConstructorOrDestructorDeclaration=class ConstructorOrDestructorDeclaration extends Node{constructor(e,t,n,r,i,s,o){super(e),this.isCtor=t,this.name=n,this.param=r,this.initList=i,this.body=s,this.isVirtual=o}};n.ConstructorInitializeItem=class ConstructorInitializeItem extends Node{constructor(e,t,n,r){super(e),this.key=t,this.value=n,this.isType=r}};n.AnonymousExpression=class AnonymousExpression extends Expression{constructor(e,t){super(e),this.expr=t}codegen(e){return this.expr}deduceType(e){return this.expr.type}};n.AccessControlLabel=class AccessControlLabel extends Node{constructor(e,t){super(e),this.label=t}};n.UsingStatement=class UsingStatement extends Node{constructor(e,t,n){super(e),this.name=t,this.type=n}};n.UsingNamespaceStatement=class UsingNamespaceStatement extends Node{constructor(e,t){super(e),this.namespace=t}};n.NameSpaceBlock=class NameSpaceBlock extends Node{constructor(e,t,n){super(e),this.namespace=t,this.statements=n}};n.DeleteExpression=class DeleteExpression extends Expression{constructor(e,t,n){super(e),this.expr=t,this.isArrayDelete=n}};n.UsingItemStatement=class UsingItemStatement extends Statement{constructor(e,t){super(e),this.identifier=t}};n.NewExpression=class NewExpression extends Expression{constructor(e,t,n,r){super(e),this.name=t,this.arguments=n,this.placement=r,this.arraySize=null,this.name.declarator instanceof AbstractArrayDeclarator&&(this.arraySize=this.name.declarator.length,this.name.declarator=null)}};n.TypeParameter=class TypeParameter extends Node{constructor(e,t,n){super(e),this.name=t,this.init=n}};n.TemplateDeclaration=class TemplateDeclaration extends Node{constructor(e,t,n){super(e),this.decl=t,this.args=n}getTemplateNames(){return[]}};n.TemplateClassInstanceIdentifier=class TemplateClassInstanceIdentifier extends Node{constructor(e,t,n){super(e),this.name=t,this.args=n}};n.TemplateFuncInstanceIdentifier=class TemplateFuncInstanceIdentifier extends Expression{constructor(e,t,n){super(e),this.name=t,this.args=n}};n.FunctionTemplateInstantiation=class FunctionTemplateInstantiation extends Node{constructor(e,t,n){super(e),this.specifiers=t,this.declarator=n}}},{long:"YvD4","./error":"nOPH"}],nOPH:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./ast");class FatalError extends Error{}n.FatalError=FatalError;n.InternalError=class InternalError extends Error{};n.LinkerError=class LinkerError extends Error{};n.RuntimeError=class RuntimeError extends Error{};n.EmitError=class EmitError extends Error{};class CompilerError extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.node=t,this.location=t?t.location:new r.SourceLocation("","",new r.Position(0,0,0),new r.Position(0,0,0)),this.errorLine=""}toString(){return`${this.name}: ${this.message} at ${this.location.start.line}:${this.location.start.column}`}}n.CompilerError=CompilerError;n.TypeError=class TypeError extends CompilerError{};class SyntaxError extends CompilerError{}n.SyntaxError=SyntaxError;n.LanguageError=class LanguageError extends CompilerError{};n.PreprocessingError=class PreprocessingError extends CompilerError{};n.PreprocessError=class PreprocessError extends Error{},n.assertType=function(e,t){if(e instanceof Array)throw 0===e.length?new FatalError(`the node expect to be ${t.prototype.constructor.name}`+", but actual is a empty array."):new SyntaxError(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is a array of ${e[0].constructor.name}.`,e[0]);if(!(e instanceof t))throw new SyntaxError(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is ${e.constructor.name}.`,e)}},{"./ast":"URi4"}],hpbE:[function(e,t,n){"use strict";var r,i,s,o,a,u,c,l,p,h,f,m,d,g,y,w,A,E,T;function S(e,t){return Object.keys(e).map(e=>parseInt(e)).filter(e=>e).map(e=>[e,t])}function v(e){switch(e){case T.u8:case T.u16:case T.u32:return T.u32;case T.i8:case T.i16:case T.i32:return T.i32;case T.f32:return T.f32;case T.f64:return T.f64;case T.i64:return T.i64;case T.u64:return T.u64}return T.none}Object.defineProperty(n,"__esModule",{value:!0}),n.OpCodes=new Map([[0,"unreachable"],[1,"nop"],[2,"block"],[3,"loop"],[4,"if"],[5,"else"],[11,"end"],[12,"br"],[13,"br_if"],[14,"br_table"],[15,"return"],[16,"call"],[17,"call_indirect"],[26,"drop"],[27,"select"],[32,"get_local"],[33,"set_local"],[34,"tee_local"],[35,"get_global"],[36,"set_global"],[40,"i32.load"],[41,"i64.load"],[42,"f32.load"],[43,"f64.load"],[44,"i32.load8_s"],[45,"i32.load8_u"],[46,"i32.load16_s"],[47,"i32.load16_u"],[48,"i64.load8_s"],[49,"i64.load8_u"],[50,"i64.load16_s"],[51,"i64.load16_u"],[52,"i64.load32_s"],[53,"i64.load32_u"],[54,"i32.store"],[55,"i64.store"],[56,"f32.store"],[57,"f64.store"],[58,"i32.store8"],[59,"i32.store16"],[60,"i64.store8"],[61,"i64.store16"],[62,"i64.store32"],[63,"current_memory"],[64,"grow_memory"],[65,"i32.const"],[66,"i64.const"],[67,"f32.const"],[68,"f64.const"],[69,"i32.eqz"],[70,"i32.eq"],[71,"i32.ne"],[72,"i32.lt_s"],[73,"i32.lt_u"],[74,"i32.gt_s"],[75,"i32.gt_u"],[76,"i32.le_s"],[77,"i32.le_u"],[78,"i32.ge_s"],[79,"i32.ge_u"],[80,"i64.eqz"],[81,"i64.eq"],[82,"i64.ne"],[83,"i64.lt_s"],[84,"i64.lt_u"],[85,"i64.gt_s"],[86,"i64.gt_u"],[87,"i64.le_s"],[88,"i64.le_u"],[89,"i64.ge_s"],[90,"i64.ge_u"],[91,"f32.eq"],[92,"f32.ne"],[93,"f32.lt"],[94,"f32.gt"],[95,"f32.le"],[96,"f32.ge"],[97,"f64.eq"],[98,"f64.ne"],[99,"f64.lt"],[100,"f64.gt"],[101,"f64.le"],[102,"f64.ge"],[103,"i32.clz"],[104,"i32.ctz"],[105,"i32.popcnt"],[106,"i32.add"],[107,"i32.sub"],[108,"i32.mul"],[109,"i32.div_s"],[110,"i32.div_u"],[111,"i32.rem_s"],[112,"i32.rem_u"],[113,"i32.and"],[114,"i32.or"],[115,"i32.xor"],[116,"i32.shl"],[117,"i32.shr_s"],[118,"i32.shr_u"],[119,"i32.rotl"],[120,"i32.rotr"],[121,"i64.clz"],[122,"i64.ctz"],[123,"i64.popcnt"],[124,"i64.add"],[125,"i64.sub"],[126,"i64.mul"],[127,"i64.div_s"],[128,"i64.div_u"],[129,"i64.rem_s"],[130,"i64.rem_u"],[131,"i64.and"],[132,"i64.or"],[133,"i64.xor"],[134,"i64.shl"],[135,"i64.shr_s"],[136,"i64.shr_u"],[137,"i64.rotl"],[138,"i64.rotr"],[139,"f32.abs"],[140,"f32.neg"],[141,"f32.ceil"],[142,"f32.floor"],[143,"f32.trunc"],[144,"f32.nearest"],[145,"f32.sqrt"],[146,"f32.add"],[147,"f32.sub"],[148,"f32.mul"],[149,"f32.div"],[150,"f32.min"],[151,"f32.max"],[152,"f32.copysign"],[153,"f64.abs"],[154,"f64.neg"],[155,"f64.ceil"],[156,"f64.floor"],[157,"f64.trunc"],[158,"f64.nearest"],[159,"f64.sqrt"],[160,"f64.add"],[161,"f64.sub"],[162,"f64.mul"],[163,"f64.div"],[164,"f64.min"],[165,"f64.max"],[166,"f64.copysign"],[167,"i32.wrap_i64"],[168,"i32.trunc_s_f32"],[169,"i32.trunc_u_f32"],[170,"i32.trunc_s_f64"],[171,"i32.trunc_u_f64"],[172,"i64.extend_s_i32"],[173,"i64.extend_u_i32"],[174,"i64.trunc_s_f32"],[175,"i64.trunc_u_f32"],[176,"i64.trunc_s_f64"],[177,"i64.trunc_u_f64"],[178,"f32.convert_s_i32"],[179,"f32.convert_u_i32"],[180,"f32.convert_s_i64"],[181,"f32.convert_u_i64"],[182,"f32.demote_f64"],[183,"f64.convert_s_i32"],[184,"f64.convert_u_i32"],[185,"f64.convert_s_i64"],[186,"f64.convert_u_i64"],[187,"f64.promote_f32"],[188,"i32.reinterpret_f32"],[189,"i64.reinterpret_f64"],[190,"f32.reinterpret_i32"],[191,"f64.reinterpret_i64"]]),function(e){e[e.unreachable=0]="unreachable",e[e.nop=1]="nop",e[e.block=2]="block",e[e.loop=3]="loop",e[e.if=4]="if",e[e.else=5]="else",e[e.end=11]="end",e[e.br=12]="br",e[e.br_if=13]="br_if",e[e.br_table=14]="br_table",e[e.return=15]="return",e[e.call=16]="call",e[e.call_indirect=17]="call_indirect",e[e.drop=26]="drop",e[e.select=27]="select",e[e.get_local=32]="get_local",e[e.set_local=33]="set_local",e[e.tee_local=34]="tee_local",e[e.get_global=35]="get_global",e[e.set_global=36]="set_global",e[e.current_memory=63]="current_memory",e[e.grow_memory=64]="grow_memory"}(n.Control||(n.Control={})),function(e){e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(r=n.U32||(n.U32={})),function(e){e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(i=n.U64||(n.U64={})),function(e){e[e.load=42]="load",e[e.store=56]="store",e[e.const=67]="const"}(s=n.F32||(n.F32={})),function(e){e[e.load=43]="load",e[e.store=57]="store",e[e.const=68]="const"}(o=n.F64||(n.F64={})),function(e){e[e.const=65]="const",e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(a=n.I32||(n.I32={})),function(e){e[e.const=66]="const",e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(u=n.I64||(n.I64={})),function(e){e[e.eq=70]="eq",e[e.ne=71]="ne",e[e.lt_s=72]="lt_s",e[e.lt_u=73]="lt_u",e[e.gt_s=74]="gt_s",e[e.gt_u=75]="gt_u",e[e.le_s=76]="le_s",e[e.le_u=77]="le_u",e[e.ge_s=78]="ge_s",e[e.ge_u=79]="ge_u",e[e.add=106]="add",e[e.sub=107]="sub",e[e.mul=108]="mul",e[e.div_s=109]="div_s",e[e.div_u=110]="div_u",e[e.rem_s=111]="rem_s",e[e.rem_u=112]="rem_u",e[e.and=113]="and",e[e.or=114]="or",e[e.xor=115]="xor",e[e.shl=116]="shl",e[e.shr_s=117]="shr_s",e[e.shr_u=118]="shr_u",e[e.rotl=119]="rotl",e[e.rotr=120]="rotr"}(c=n.I32Binary||(n.I32Binary={})),function(e){e[e.eq=81]="eq",e[e.ne=82]="ne",e[e.lt_s=83]="lt_s",e[e.lt_u=84]="lt_u",e[e.gt_s=85]="gt_s",e[e.gt_u=86]="gt_u",e[e.le_s=87]="le_s",e[e.le_u=88]="le_u",e[e.ge_s=89]="ge_s",e[e.ge_u=90]="ge_u",e[e.add=124]="add",e[e.sub=125]="sub",e[e.mul=126]="mul",e[e.div_s=127]="div_s",e[e.div_u=128]="div_u",e[e.rem_s=129]="rem_s",e[e.rem_u=130]="rem_u",e[e.and=131]="and",e[e.or=132]="or",e[e.xor=133]="xor",e[e.shl=134]="shl",e[e.shr_s=135]="shr_s",e[e.shr_u=136]="shr_u",e[e.rotl=137]="rotl",e[e.rotr=138]="rotr"}(l=n.I64Binary||(n.I64Binary={})),function(e){e[e.eq=91]="eq",e[e.ne=92]="ne",e[e.lt=93]="lt",e[e.gt=94]="gt",e[e.le=95]="le",e[e.ge=96]="ge",e[e.add=146]="add",e[e.sub=147]="sub",e[e.mul=148]="mul",e[e.div=149]="div",e[e.min=150]="min",e[e.max=151]="max",e[e.copysign=152]="copysign"}(p=n.F32Binary||(n.F32Binary={})),function(e){e[e.eq=97]="eq",e[e.ne=98]="ne",e[e.lt=99]="lt",e[e.gt=100]="gt",e[e.le=101]="le",e[e.ge=102]="ge",e[e.add=160]="add",e[e.sub=161]="sub",e[e.mul=162]="mul",e[e.div=163]="div",e[e.min=164]="min",e[e.max=165]="max",e[e.copysign=166]="copysign"}(h=n.F64Binary||(n.F64Binary={})),function(e){e[e.eqz=69]="eqz",e[e.clz=103]="clz",e[e.ctz=104]="ctz",e[e.popcnt=105]="popcnt"}(f=n.I32Unary||(n.I32Unary={})),function(e){e[e.wrap$i64=167]="wrap$i64",e[e.trunc_s$f32=168]="trunc_s$f32",e[e.trunc_u$f32=169]="trunc_u$f32",e[e.trunc_s$f64=170]="trunc_s$f64",e[e.trunc_u$f64=171]="trunc_u$f64",e[e.reinterpret$f32=188]="reinterpret$f32"}(m=n.I32Convert||(n.I32Convert={})),function(e){e[e.eqz=80]="eqz",e[e.clz=121]="clz",e[e.ctz=122]="ctz",e[e.popcnt=123]="popcnt"}(d=n.I64Unary||(n.I64Unary={})),function(e){e[e.extend_s$i32=172]="extend_s$i32",e[e.extend_u$i32=173]="extend_u$i32",e[e.trunc_s$f32=174]="trunc_s$f32",e[e.trunc_u$f32=175]="trunc_u$f32",e[e.trunc_s$f64=176]="trunc_s$f64",e[e.trunc_u$f64=177]="trunc_u$f64",e[e.reinterpret$f64=189]="reinterpret$f64"}(g=n.I64Convert||(n.I64Convert={})),function(e){e[e.abs=139]="abs",e[e.ceil=141]="ceil",e[e.trunc=143]="trunc",e[e.sqrt=145]="sqrt",e[e.neg=140]="neg",e[e.floor=142]="floor",e[e.nearest=144]="nearest"}(y=n.F32Unary||(n.F32Unary={})),function(e){e[e.convert_s$i32=178]="convert_s$i32",e[e.convert_u$i32=179]="convert_u$i32",e[e.convert_s$i64=180]="convert_s$i64",e[e.convert_u$i64=181]="convert_u$i64",e[e.demote$f64=182]="demote$f64",e[e.reinterpret$i32=190]="reinterpret$i32"}(w=n.F32Convert||(n.F32Convert={})),function(e){e[e.abs=153]="abs",e[e.ceil=155]="ceil",e[e.trunc=157]="trunc",e[e.sqrt=159]="sqrt",e[e.neg=154]="neg",e[e.floor=156]="floor",e[e.nearest=158]="nearest"}(A=n.F64Unary||(n.F64Unary={})),function(e){e[e.convert_s$i32=183]="convert_s$i32",e[e.convert_u$i32=184]="convert_u$i32",e[e.convert_s$i64=185]="convert_s$i64",e[e.convert_u$i64=186]="convert_u$i64",e[e.promote$f32=187]="promote$f32",e[e.reinterpret$i64=191]="reinterpret$i64"}(E=n.F64Convert||(n.F64Convert={})),function(e){e[e.i32=127]="i32",e[e.i64=126]="i64",e[e.f32=125]="f32",e[e.f64=124]="f64",e[e.u32=1]="u32",e[e.u64=2]="u64",e[e.i8=3]="i8",e[e.u8=4]="u8",e[e.i16=5]="i16",e[e.u16=6]="u16",e[e.none=0]="none",e[e.any=7]="any"}(T=n.WType||(n.WType={})),function(e){e[e.custom=0]="custom",e[e.type=1]="type",e[e.import=2]="import",e[e.function=3]="function",e[e.table=4]="table",e[e.memory=5]="memory",e[e.global=6]="global",e[e.export=7]="export",e[e.start=8]="start",e[e.element=9]="element",e[e.code=10]="code",e[e.data=11]="data"}(n.SectionCode||(n.SectionCode={})),n.WTypeMap=new Map([[T.i32,a],[T.i64,u],[T.u32,r],[T.u64,i],[T.f32,s],[T.f64,o]]),n.OpTypeMap=new Map([...S(f,T.i32),...S(d,T.i64),...S(y,T.f32),...S(A,T.f64),...S(c,T.i32),...S(l,T.i64),...S(p,T.f32),...S(h,T.f64),...S(m,T.i32),...S(g,T.i64),...S(w,T.f32),...S(E,T.f64)]),n.getTypeConvertOpe=function(e,t){switch(e){case T.i32:switch(t){case T.i32:case T.u32:return null;case T.i64:case T.u64:return g.extend_s$i32;case T.f32:return w.convert_s$i32;case T.f64:return E.convert_s$i32}return null;case T.u32:switch(t){case T.i32:case T.u32:return null;case T.i64:case T.u64:return g.extend_u$i32;case T.f32:return w.convert_u$i32;case T.f64:return E.convert_u$i32}return null;case T.i64:switch(t){case T.i32:case T.u32:return m.wrap$i64;case T.i64:case T.u64:return null;case T.f32:return w.convert_s$i64;case T.f64:return E.convert_s$i64}return null;case T.u64:switch(t){case T.i32:case T.u32:return m.wrap$i64;case T.i64:case T.u64:return null;case T.f32:return w.convert_u$i64;case T.f64:return E.convert_u$i64}return null;case T.f32:switch(t){case T.i32:return m.trunc_s$f32;case T.u32:return m.trunc_u$f32;case T.i64:return g.trunc_s$f32;case T.u64:return g.trunc_u$f32;case T.f32:return null;case T.f64:return E.promote$f32}return null;case T.f64:switch(t){case T.i32:return m.trunc_s$f64;case T.u32:return m.trunc_u$f64;case T.i64:return g.trunc_s$f64;case T.u64:return g.trunc_u$f64;case T.f32:return w.demote$f64;case T.f64:return null}return null}return null},n.getOpFromStr=function(e,t){switch(v(t)){case T.i32:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_s;case"%":return c.rem_s;case"<":return c.lt_s;case">":return c.gt_s;case"<=":return c.le_s;case">=":return c.ge_s;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"&&":return c.and;case"||":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_s;case"!":return f.eqz}return null;case T.u32:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_u;case"%":return c.rem_u;case"<":return c.lt_u;case">":return c.gt_u;case"<=":return c.le_u;case">=":return c.ge_u;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_u;case"!":return f.eqz}return null;case T.i64:switch(e){case"+":return l.add;case"-":return l.sub;case"*":return l.mul;case"/":return l.div_s;case"%":return l.rem_s;case"<":return l.lt_s;case">":return l.gt_s;case"<=":return l.le_s;case">=":return l.ge_s;case"==":return l.eq;case"!=":return l.ne;case"&":return l.and;case"|":return l.or;case"^":return l.xor;case">>":case"<<":return l.shr_s;case"!":return d.eqz}return null;case T.u64:switch(e){case"+":return l.add;case"-":return l.sub;case"*":return l.mul;case"/":return l.div_u;case"%":return l.rem_u;case"<":return l.lt_u;case">":return l.gt_u;case"<=":return l.le_u;case">=":return l.ge_u;case"==":return l.eq;case"!=":return l.ne;case"&":return l.and;case"|":return l.or;case"^":return l.xor;case">>":case"<<":return l.shr_u}return null;case T.f32:switch(e){case"+":return p.add;case"-":return p.sub;case"*":return p.mul;case"/":return p.div;case"<":return p.lt;case">":return p.gt;case"<=":return p.le;case">=":return p.ge;case"==":return p.eq;case"!=":return p.ne}return null;case T.f64:switch(e){case"+":return h.add;case"-":return h.sub;case"*":return h.mul;case"/":return h.div;case"<":return h.lt;case">":return h.gt;case"<=":return h.le;case">=":return h.ge;case"==":return h.eq;case"!=":return h.ne}return null}return null},n.getOperationType=v,n.getNativeType=function(e){switch(e){case T.u8:case T.u16:case T.u32:case T.i8:case T.i16:case T.i32:return T.i32;case T.f32:return T.f32;case T.f64:return T.f64;case T.i64:case T.u64:return T.i64}return T.none},n.WLoadIns=new Set([a.load,a.load8_s,a.load8_u,a.load16_s,a.load16_u,u.load,u.load8_s,u.load8_u,u.load16_s,u.load16_u,s.load,o.load]),n.WStoreIns=new Set([a.store,a.store8,a.store16,u.store,u.store8,u.store32,s.store,o.store])},{}],hPls:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),s=e("../common/error"),o=e("./constant");n.doUnaryCompute=function(e,t){switch(e){case o.F32Unary.abs:case o.F64Unary.abs:return Math.abs(t);case o.F32Unary.ceil:case o.F64Unary.ceil:return Math.ceil(t);case o.F32Unary.floor:case o.F64Unary.floor:return Math.floor(t);case o.F32Unary.nearest:case o.F64Unary.nearest:return Math.floor(t+.5);case o.F32Unary.trunc:case o.F64Unary.trunc:return 0|t;case o.F32Unary.sqrt:case o.F64Unary.sqrt:return Math.sqrt(t);case o.I32Unary.eqz:case o.I64Unary.eqz:return+(0===t);case o.F32Unary.neg:case o.F64Unary.neg:return-t}throw new s.RuntimeError(`unsupport operator ${e}`)},n.doLongUnaryCompute=function(e,t){switch(e){case o.I64Unary.eqz:return i.fromNumber(+t.eq(0))}throw new s.RuntimeError(`unsupport operator ${e}`)},n.doLongBinaryCompute=function(e,t,n){switch(e){case o.I64Binary.add:return t.add(n);case o.I64Binary.sub:case o.I64Binary.mul:return t.sub(n);case o.I64Binary.div_s:case o.I64Binary.div_u:return t.div(n);case o.I64Binary.rem_s:case o.I64Binary.rem_u:return t.mod(n);case o.I64Binary.ge_s:case o.I64Binary.ge_u:return i.fromNumber(+t.gte(n));case o.I64Binary.gt_s:case o.I64Binary.gt_u:return i.fromNumber(+t.gt(n));case o.I64Binary.le_s:case o.I64Binary.le_u:return i.fromNumber(+t.lte(n));case o.I64Binary.lt_s:case o.I64Binary.lt_u:return i.fromNumber(+t.lt(n));case o.I64Binary.ne:return i.fromNumber(+t.neq(n));case o.I64Binary.eq:return i.fromNumber(+t.eq(n));case o.I64Binary.and:return t.and(n);case o.I64Binary.or:return t.or(n);case o.I64Binary.xor:return t.xor(n);case o.I64Binary.shl:return t.shl(n);case o.I64Binary.shr_s:return t.shr(n);case o.I64Binary.shr_u:return t.shru(n)}throw new s.RuntimeError(`unsupport operator ${e}`)},n.doBinaryCompute=function(e,t,n){switch(e){case o.I32Binary.add:case o.F32Binary.add:case o.F64Binary.add:return t+n;case o.I32Binary.sub:case o.F32Binary.sub:case o.F64Binary.sub:return t-n;case o.I32Binary.mul:case o.F32Binary.mul:case o.F64Binary.mul:return t*n;case o.I32Binary.div_s:case o.I32Binary.div_u:case o.F32Binary.div:case o.F64Binary.div:return t/n;case o.I32Binary.rem_s:case o.I32Binary.rem_u:return t%n;case o.I32Binary.ge_s:case o.I32Binary.ge_u:return+(t>=n);case o.I32Binary.gt_s:case o.I32Binary.gt_u:case o.F32Binary.gt:case o.F64Binary.gt:return+(t>n);case o.I32Binary.le_s:case o.I32Binary.le_u:case o.F32Binary.le:case o.F64Binary.le:return+(t<=n);case o.I32Binary.lt_s:case o.I32Binary.lt_u:case o.F32Binary.lt:case o.F64Binary.lt:return+(t<n);case o.I32Binary.eq:case o.F32Binary.eq:case o.F64Binary.eq:return+(t===n);case o.I32Binary.ne:case o.F32Binary.ne:case o.F64Binary.ne:return+(t!==n);case o.I32Binary.and:return+(t&n);case o.I32Binary.or:return+(t|n);case o.I32Binary.xor:return+(t^n);case o.I32Binary.shl:return t<<n;case o.I32Binary.shr_s:return t>>n;case o.I32Binary.shr_u:return t>>>n;case o.F32Binary.copysign:case o.F64Binary.copysign:return n>0?Math.abs(t):-Math.abs(t);case o.F32Binary.max:case o.F64Binary.max:return Math.max(t,n);case o.F32Binary.min:case o.F64Binary.min:return Math.min(t,n)}throw new s.RuntimeError(`unsupport operator ${e}`)}},{long:"YvD4","../common/error":"nOPH","./constant":"hpbE"}],jCtJ:[function(e,t,n){},{}],BOxy:[function(e,t,n){e("buffer").Buffer;!function(t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof t?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;try{o=e("buffer").Buffer}catch(e){}function a(e,t,n){for(var r=0,i=Math.min(e.length,n),s=t;s<i;s++){var o=e.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function u(e,t,n,r){for(var i=0,s=Math.min(e.length,n),o=t;o<s;o++){var a=e.charCodeAt(o)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===n)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===n)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,s=0;for(n=e.length-6,r=0;n>=t;n-=6)i=a(e,n,n+6),this.words[r]|=i<<s&67108863,this.words[r+1]|=i>>>26-s&4194303,(s+=24)>=26&&(s-=26,r++);n+6!==t&&(i=a(e,t,n+6),this.words[r]|=i<<s&67108863,this.words[r+1]|=i>>>26-s&4194303),this.strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var s=e.length-n,o=s%r,a=Math.min(s,s-o)+n,c=0,l=n;l<a;l+=r)c=u(e,l,l+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var p=1;for(c=u(e,l,e.length,t),l=0;l<o;l++)p*=t;this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,u=o/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,p=67108863&u,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=h;f++){var m=c-f|0;l+=(o=(i=0|e.words[m])*(s=0|t.words[f])+p)/67108864|0,p=67108863&o}n.words[c]=0|p,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],u=(16777215&(a<<i|s)).toString(16);n=0!==(s=a>>>24-i&16777215)||o!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,o--)}for(0!==s&&(n=s.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=p[e];n="";var m=this.clone();for(m.negative=0;!m.isZero();){var d=m.modn(f).toString(e);n=(m=m.idivn(f)).isZero()?d+n:c[h-d.length]+d+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),s=n||Math.max(1,i);r(i<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,u="le"===t,c=new e(s),l=this.clone();if(u){for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[a]=o;for(;a<s;a++)c[a]=0}else{for(a=0;a<s-i;a++)c[a]=0;for(a=0;!l.isZero();a++)o=l.andln(255),l.iushrn(8),c[s-a-1]=o}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},s.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,s=0;s<r.length;s++)t=(0|n.words[s])+(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<n.length;s++)t=(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(t=(0|n.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)s=(t=(0|n.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,n){var r,i,s,o=e.words,a=t.words,u=n.words,c=0,l=0|o[0],p=8191&l,h=l>>>13,f=0|o[1],m=8191&f,d=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,A=0|o[3],E=8191&A,T=A>>>13,S=0|o[4],v=8191&S,C=S>>>13,x=0|o[5],_=8191&x,b=x>>>13,F=0|o[6],I=8191&F,L=F>>>13,M=0|o[7],B=8191&M,D=M>>>13,P=0|o[8],N=8191&P,W=P>>>13,k=0|o[9],O=8191&k,U=k>>>13,R=0|a[0],$=8191&R,q=R>>>13,j=0|a[1],z=8191&j,H=j>>>13,V=0|a[2],G=8191&V,J=V>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],K=8191&Q,ee=Q>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],pe=8191&le,he=le>>>13,fe=0|a[9],me=8191&fe,de=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(p,$))|0)+((8191&(i=(i=Math.imul(p,q))+Math.imul(h,$)|0))<<13)|0;c=((s=Math.imul(h,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(m,$),i=(i=Math.imul(m,q))+Math.imul(d,$)|0,s=Math.imul(d,q);var ye=(c+(r=r+Math.imul(p,z)|0)|0)+((8191&(i=(i=i+Math.imul(p,H)|0)+Math.imul(h,z)|0))<<13)|0;c=((s=s+Math.imul(h,H)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(y,$),i=(i=Math.imul(y,q))+Math.imul(w,$)|0,s=Math.imul(w,q),r=r+Math.imul(m,z)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(d,z)|0,s=s+Math.imul(d,H)|0;var we=(c+(r=r+Math.imul(p,G)|0)|0)+((8191&(i=(i=i+Math.imul(p,J)|0)+Math.imul(h,G)|0))<<13)|0;c=((s=s+Math.imul(h,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(E,$),i=(i=Math.imul(E,q))+Math.imul(T,$)|0,s=Math.imul(T,q),r=r+Math.imul(y,z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(w,z)|0,s=s+Math.imul(w,H)|0,r=r+Math.imul(m,G)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(d,G)|0,s=s+Math.imul(d,J)|0;var Ae=(c+(r=r+Math.imul(p,Z)|0)|0)+((8191&(i=(i=i+Math.imul(p,X)|0)+Math.imul(h,Z)|0))<<13)|0;c=((s=s+Math.imul(h,X)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(v,$),i=(i=Math.imul(v,q))+Math.imul(C,$)|0,s=Math.imul(C,q),r=r+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(T,z)|0,s=s+Math.imul(T,H)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(w,G)|0,s=s+Math.imul(w,J)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(d,Z)|0,s=s+Math.imul(d,X)|0;var Ee=(c+(r=r+Math.imul(p,K)|0)|0)+((8191&(i=(i=i+Math.imul(p,ee)|0)+Math.imul(h,K)|0))<<13)|0;c=((s=s+Math.imul(h,ee)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(_,$),i=(i=Math.imul(_,q))+Math.imul(b,$)|0,s=Math.imul(b,q),r=r+Math.imul(v,z)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(C,z)|0,s=s+Math.imul(C,H)|0,r=r+Math.imul(E,G)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(T,G)|0,s=s+Math.imul(T,J)|0,r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,X)|0,r=r+Math.imul(m,K)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(d,K)|0,s=s+Math.imul(d,ee)|0;var Te=(c+(r=r+Math.imul(p,ne)|0)|0)+((8191&(i=(i=i+Math.imul(p,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((s=s+Math.imul(h,re)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(I,$),i=(i=Math.imul(I,q))+Math.imul(L,$)|0,s=Math.imul(L,q),r=r+Math.imul(_,z)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(b,z)|0,s=s+Math.imul(b,H)|0,r=r+Math.imul(v,G)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(C,G)|0,s=s+Math.imul(C,J)|0,r=r+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,X)|0,r=r+Math.imul(y,K)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(w,K)|0,s=s+Math.imul(w,ee)|0,r=r+Math.imul(m,ne)|0,i=(i=i+Math.imul(m,re)|0)+Math.imul(d,ne)|0,s=s+Math.imul(d,re)|0;var Se=(c+(r=r+Math.imul(p,se)|0)|0)+((8191&(i=(i=i+Math.imul(p,oe)|0)+Math.imul(h,se)|0))<<13)|0;c=((s=s+Math.imul(h,oe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,q))+Math.imul(D,$)|0,s=Math.imul(D,q),r=r+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,z)|0,s=s+Math.imul(L,H)|0,r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(b,G)|0,s=s+Math.imul(b,J)|0,r=r+Math.imul(v,Z)|0,i=(i=i+Math.imul(v,X)|0)+Math.imul(C,Z)|0,s=s+Math.imul(C,X)|0,r=r+Math.imul(E,K)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(w,ne)|0,s=s+Math.imul(w,re)|0,r=r+Math.imul(m,se)|0,i=(i=i+Math.imul(m,oe)|0)+Math.imul(d,se)|0,s=s+Math.imul(d,oe)|0;var ve=(c+(r=r+Math.imul(p,ue)|0)|0)+((8191&(i=(i=i+Math.imul(p,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((s=s+Math.imul(h,ce)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(N,$),i=(i=Math.imul(N,q))+Math.imul(W,$)|0,s=Math.imul(W,q),r=r+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(D,z)|0,s=s+Math.imul(D,H)|0,r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(L,G)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(b,Z)|0,s=s+Math.imul(b,X)|0,r=r+Math.imul(v,K)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,ee)|0,r=r+Math.imul(E,ne)|0,i=(i=i+Math.imul(E,re)|0)+Math.imul(T,ne)|0,s=s+Math.imul(T,re)|0,r=r+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,r=r+Math.imul(m,ue)|0,i=(i=i+Math.imul(m,ce)|0)+Math.imul(d,ue)|0,s=s+Math.imul(d,ce)|0;var Ce=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,he)|0)+Math.imul(h,pe)|0))<<13)|0;c=((s=s+Math.imul(h,he)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(O,$),i=(i=Math.imul(O,q))+Math.imul(U,$)|0,s=Math.imul(U,q),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(W,z)|0,s=s+Math.imul(W,H)|0,r=r+Math.imul(B,G)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(D,G)|0,s=s+Math.imul(D,J)|0,r=r+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,X)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,ee)|0,r=r+Math.imul(v,ne)|0,i=(i=i+Math.imul(v,re)|0)+Math.imul(C,ne)|0,s=s+Math.imul(C,re)|0,r=r+Math.imul(E,se)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,r=r+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(w,ue)|0,s=s+Math.imul(w,ce)|0,r=r+Math.imul(m,pe)|0,i=(i=i+Math.imul(m,he)|0)+Math.imul(d,pe)|0,s=s+Math.imul(d,he)|0;var xe=(c+(r=r+Math.imul(p,me)|0)|0)+((8191&(i=(i=i+Math.imul(p,de)|0)+Math.imul(h,me)|0))<<13)|0;c=((s=s+Math.imul(h,de)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(O,z),i=(i=Math.imul(O,H))+Math.imul(U,z)|0,s=Math.imul(U,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(W,G)|0,s=s+Math.imul(W,J)|0,r=r+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,X)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(b,ne)|0,s=s+Math.imul(b,re)|0,r=r+Math.imul(v,se)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,oe)|0,r=r+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(T,ue)|0,s=s+Math.imul(T,ce)|0,r=r+Math.imul(y,pe)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(w,pe)|0,s=s+Math.imul(w,he)|0;var _e=(c+(r=r+Math.imul(m,me)|0)|0)+((8191&(i=(i=i+Math.imul(m,de)|0)+Math.imul(d,me)|0))<<13)|0;c=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(O,G),i=(i=Math.imul(O,J))+Math.imul(U,G)|0,s=Math.imul(U,J),r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(W,Z)|0,s=s+Math.imul(W,X)|0,r=r+Math.imul(B,K)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(D,K)|0,s=s+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(L,ne)|0,s=s+Math.imul(L,re)|0,r=r+Math.imul(_,se)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,r=r+Math.imul(v,ue)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(C,ue)|0,s=s+Math.imul(C,ce)|0,r=r+Math.imul(E,pe)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(T,pe)|0,s=s+Math.imul(T,he)|0;var be=(c+(r=r+Math.imul(y,me)|0)|0)+((8191&(i=(i=i+Math.imul(y,de)|0)+Math.imul(w,me)|0))<<13)|0;c=((s=s+Math.imul(w,de)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(O,Z),i=(i=Math.imul(O,X))+Math.imul(U,Z)|0,s=Math.imul(U,X),r=r+Math.imul(N,K)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(W,K)|0,s=s+Math.imul(W,ee)|0,r=r+Math.imul(B,ne)|0,i=(i=i+Math.imul(B,re)|0)+Math.imul(D,ne)|0,s=s+Math.imul(D,re)|0,r=r+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(L,se)|0,s=s+Math.imul(L,oe)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(b,ue)|0,s=s+Math.imul(b,ce)|0,r=r+Math.imul(v,pe)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(C,pe)|0,s=s+Math.imul(C,he)|0;var Fe=(c+(r=r+Math.imul(E,me)|0)|0)+((8191&(i=(i=i+Math.imul(E,de)|0)+Math.imul(T,me)|0))<<13)|0;c=((s=s+Math.imul(T,de)|0)+(i>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,r=Math.imul(O,K),i=(i=Math.imul(O,ee))+Math.imul(U,K)|0,s=Math.imul(U,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(W,ne)|0,s=s+Math.imul(W,re)|0,r=r+Math.imul(B,se)|0,i=(i=i+Math.imul(B,oe)|0)+Math.imul(D,se)|0,s=s+Math.imul(D,oe)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(L,ue)|0,s=s+Math.imul(L,ce)|0,r=r+Math.imul(_,pe)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(b,pe)|0,s=s+Math.imul(b,he)|0;var Ie=(c+(r=r+Math.imul(v,me)|0)|0)+((8191&(i=(i=i+Math.imul(v,de)|0)+Math.imul(C,me)|0))<<13)|0;c=((s=s+Math.imul(C,de)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(O,ne),i=(i=Math.imul(O,re))+Math.imul(U,ne)|0,s=Math.imul(U,re),r=r+Math.imul(N,se)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(W,se)|0,s=s+Math.imul(W,oe)|0,r=r+Math.imul(B,ue)|0,i=(i=i+Math.imul(B,ce)|0)+Math.imul(D,ue)|0,s=s+Math.imul(D,ce)|0,r=r+Math.imul(I,pe)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(L,pe)|0,s=s+Math.imul(L,he)|0;var Le=(c+(r=r+Math.imul(_,me)|0)|0)+((8191&(i=(i=i+Math.imul(_,de)|0)+Math.imul(b,me)|0))<<13)|0;c=((s=s+Math.imul(b,de)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(O,se),i=(i=Math.imul(O,oe))+Math.imul(U,se)|0,s=Math.imul(U,oe),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(W,ue)|0,s=s+Math.imul(W,ce)|0,r=r+Math.imul(B,pe)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(D,pe)|0,s=s+Math.imul(D,he)|0;var Me=(c+(r=r+Math.imul(I,me)|0)|0)+((8191&(i=(i=i+Math.imul(I,de)|0)+Math.imul(L,me)|0))<<13)|0;c=((s=s+Math.imul(L,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(O,ue),i=(i=Math.imul(O,ce))+Math.imul(U,ue)|0,s=Math.imul(U,ce),r=r+Math.imul(N,pe)|0,i=(i=i+Math.imul(N,he)|0)+Math.imul(W,pe)|0,s=s+Math.imul(W,he)|0;var Be=(c+(r=r+Math.imul(B,me)|0)|0)+((8191&(i=(i=i+Math.imul(B,de)|0)+Math.imul(D,me)|0))<<13)|0;c=((s=s+Math.imul(D,de)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,r=Math.imul(O,pe),i=(i=Math.imul(O,he))+Math.imul(U,pe)|0,s=Math.imul(U,he);var De=(c+(r=r+Math.imul(N,me)|0)|0)+((8191&(i=(i=i+Math.imul(N,de)|0)+Math.imul(W,me)|0))<<13)|0;c=((s=s+Math.imul(W,de)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863;var Pe=(c+(r=Math.imul(O,me))|0)+((8191&(i=(i=Math.imul(O,de))+Math.imul(U,me)|0))<<13)|0;return c=((s=Math.imul(U,de))+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,u[0]=ge,u[1]=ye,u[2]=we,u[3]=Ae,u[4]=Ee,u[5]=Te,u[6]=Se,u[7]=ve,u[8]=Ce,u[9]=xe,u[10]=_e,u[11]=be,u[12]=Fe,u[13]=Ie,u[14]=Le,u[15]=Me,u[16]=Be,u[17]=De,u[18]=Pe,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new d).mulp(e,t,n)}function d(e,t){this.x=e,this.y=t}Math.imul||(f=h),s.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,s=0;s<n.length-1;s++){var o=i;i=0;for(var a=67108863&r,u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var l=s-c,p=(0|e.words[l])*(0|t.words[c]),h=67108863&p;a=67108863&(h=h+a|0),i+=(o=(o=o+(p/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}n.words[s]=a,r=o,o=i}return 0!==r?n.words[s]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},d.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},d.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},d.prototype.permute=function(e,t,n,r,i,s){for(var o=0;o<s;o++)r[o]=t[e[o]],i[o]=n[e[o]]},d.prototype.transform=function(e,t,n,r,i,s){this.permute(s,e,t,n,r,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var p=u,h=c,f=0;f<o;f++){var m=n[l+f],d=r[l+f],g=n[l+f+o],y=r[l+f+o],w=p*g-h*y;y=p*y+h*g,g=w,n[l+f]=m+g,r[l+f]=d+y,n[l+f+o]=m-g,r[l+f+o]=d-y,f!==a&&(w=u*p-c*h,h=u*h+c*p,p=w)}},d.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},d.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},d.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},d.prototype.convert13b=function(e,t,n,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],n[2*o]=8191&s,s>>>=13,n[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)n[o]=0;r(0===s),r(0==(-8192&s))},d.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},d.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),p=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,c,r),this.transform(o,s,a,u,r,i),this.transform(c,s,l,p,r,i);for(var f=0;f<r;f++){var m=a[f]*l[f]-u[f]*p[f];u[f]=a[f]*p[f]+u[f]*l[f],a[f]=m}return this.conjugate(a,u,r),this.transform(a,u,h,s,r,i),this.conjugate(h,s,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),m(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[n]=67108863&s}return 0!==t&&(this.words[n]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new s(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,u=(0|this.words[t])-a<<n;this.words[t]=u|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,u=n;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var p=0|this.words[c];this.words[c]=l<<26-s|p>>>s,l=p&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var i,s,o=e.length+n;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((s-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)a=(s=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new s(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var p=u-1;p>=0;p--){var h=67108864*(0|r.words[i.length+p])+(0|r.words[i.length+p-1]);for(h=Math.min(h/o|0,67108863),r._ishlnsubmul(i,h,p);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,p),r.isZero()||(r.negative^=1);a&&(a.words[p]=h)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},s.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),s=n.cmp(r);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},s.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),u=new s(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),p=t.clone();!t.isZero();){for(var h=0,f=1;0==(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(p)),i.iushrn(1),o.iushrn(1);for(var m=0,d=1;0==(n.words[0]&d)&&m<26;++m,d<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(p)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),o.isub(u)):(n.isub(t),a.isub(i),u.isub(o))}return{a:a,b:u,gcd:n.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var p=0,h=1;0==(n.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(n.iushrn(p);p-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var s=t;t=n,n=s}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var s=i,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new S(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function v(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(w,y),w.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var s=0|e.words[r];e.words[r-10]=(4194303&s)<<4|i>>>22,i=s}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(A,y),i(E,y),i(T,y),T.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new A;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return g[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var a=new s(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var p=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),m=o;0!==f.cmp(a);){for(var d=f,g=0;0!==d.cmp(a);g++)d=d.redSqr();r(g<m);var y=this.pow(p,new s(1).iushln(m-g-1));h=h.redMul(y),p=y.redSqr(),f=f.redMul(p),m=g}return h},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new s(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],o=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var p=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==p||0!==o?(o<<=1,o|=p,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[o]),a=0,o=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new v(e)},i(v,S),v.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},v.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},v.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},v.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},v.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:"jCtJ"}],"33Rn":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("bn.js");n.readLeb128Int=function(e){const t=new r(0);let n,i=0;for(;n=e.view.getUint8(e.now++),t.ior(new r(127&n).shln(i)),i+=7,n>>7!=0;);return 64&n&&t.setn(i),t.fromTwos(i)},n.writeLeb128Int=function(e,t){let n=new r(t);const i=n.isNeg();for(i&&(n=n.toTwos(n.bitLength()+8));;){const t=n.maskn(7).toNumber();if(n.ishrn(7),s=n,i&&s.toString(2).indexOf("0")<0&&0!=(64&t)||n.isZero()&&0==(64&t)){e.view.setUint8(e.now++,t);break}e.view.setUint8(e.now++,128|t)}var s},n.readLeb128Uint=function(e){const t=new r(0);let n,i=0;for(;n=e.view.getUint8(e.now++),t.ior(new r(127&n).shln(i)),n>>7!=0;)i+=7;return t},n.writeLeb128Uint=function(e,t){const n=new r(t);for(;;){const t=n.maskn(7).toNumber();if(n.ishrn(7),n.isZero()){e.view.setUint8(e.now++,t);break}e.view.setUint8(e.now++,128|t)}},n.getLeb128IntLength=function(e){let t=0,n=new r(e);const i=n.isNeg();for(i&&(n=n.toTwos(n.bitLength()+8));;){const e=n.maskn(7).toNumber();if(n.ishrn(7),s=n,i&&s.toString(2).indexOf("0")<0&&0!=(64&e)||n.isZero()&&0==(64&e)){t++;break}t++}var s;return t},n.getLeb128UintLength=function(e){let t=0;const n=new r(e);for(;;){if(n.ishrn(7),n.isZero()){t++;break}t++}return t}},{"bn.js":"BOxy"}],2721:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class WNode{constructor(e){this.location=e}getStartLine(e){return this.location&&e.sourceMapConsumer&&this.location.fileName?e.sourceMapConsumer.originalPositionFor(this.location.start).line:-1}optimize(e){}}n.WNode=WNode;n.WExpression=class WExpression extends WNode{};n.WStatement=class WStatement extends WNode{};n.WSection=class WSection extends WNode{},n.getArrayLength=function(e,t){return e.map(t).reduce((e,t)=>e+t,0)}},{}],pqdI:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./leb128"),i=new TextEncoder,s=new TextDecoder;n.readUtf8Str=function(e){const t=r.readLeb128Uint(e).toNumber();return s.decode(e.view.buffer.slice(0,t))},n.writeUtf8String=function(e,t){const n=i.encode(t);r.writeLeb128Uint(e,n.byteLength),new Uint8Array(e.view.buffer).set(n,e.now),e.now+=n.byteLength},n.getUtf8StringLength=function(e){const t=i.encode(e).byteLength;return r.getLeb128UintLength(t)+t}},{"./leb128":"33Rn"}],"1WA9":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./constant"),i=e("./expression"),s=e("./leb128"),o=e("./node"),a=e("./utf8");n.WFunction=class WFunction extends o.WNode{constructor(e,t,n,r,i,s){super(s),this.name=e,this.type=new WFunctionType(t,n,s),this.local=r,this.body=i,this.signatureId=0,this.dataStart=0,this.bssStart=0,this.fileName=""}emit(e){e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.local.length),this.local.map(t=>{e.writeUint32(1),e.writeByte(r.getNativeType(t))}),e.setCurrentFunc(this),this.body.map(t=>t.emit(e)),e.setCurrentFunc(),e.writeByte(r.Control.end)}emitJSON(e){const t=[];e.setBuffer(t),this.location?e.setSourceMap(this.location.fileName):e.setSourceMap(""),e.setCurrentFunc(this),this.body.map(t=>t.emitJSON(e)),e.setCurrentFunc();const n=[];for(let e=0;e<t.length;e++)t[e][0]===r.Control.if||t[e][0]===r.Control.block||t[e][0]===r.Control.loop?n.push(e):t[e][0]===r.Control.else?(t[n[n.length-1]][1]=e,n.pop(),n.push(e)):t[e][0]===r.Control.end&&(t[n[n.length-1]][1]=e,n.pop());t.push([r.Control.return,0,-1]);const i=new Set,s=new Set;for(let e=0;e<t.length;e++)-1===t[e][2]||i.has(t[e][2])||(i.add(t[e][2]),s.add(e));e.getJSON().functions.push({name:this.name,fileName:this.fileName,displayName:this.name,locals:this.local.map(e=>r.getNativeType(e)),codes:t,type:this.type.toEncoding(),signatureId:this.signatureId,lineIdx:s,dataStart:this.dataStart,bssStart:this.bssStart})}getBodyLength(e){e.setCurrentFunc(this);const t=s.getLeb128UintLength(this.local.length)+o.getArrayLength(this.local,e=>1+s.getLeb128UintLength(e))+o.getArrayLength(this.body,t=>t.length(e))+1;return e.setCurrentFunc(),t}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)}dump(e){const t=this.type.parameters.map((e,t)=>r.WType[e]+`:$${t}`).join(", "),n=this.type.returnTypes.map((e,t)=>r.WType[e]).join(", "),i=this.local.map((e,t)=>r.WType[e]+`:$${t+this.type.parameters.length}`).join(", ");e.dump(`(func ${this.name} (param ${t}) (result ${n})`,this.location),e.changeDumpIndent(1),e.dump(`(locals ${i})`,this.location),e.setCurrentFunc(this),this.body.map(t=>t.dump(e)),e.setCurrentFunc(),e.changeDumpIndent(-1),e.dump(")",this.location)}optimize(e){this.body.map(t=>t.optimize(e))}};class WFunctionType extends o.WNode{static n2s(e){return e===r.WType.i32?"i":e===r.WType.i64?"l":e===r.WType.f32?"f":e===r.WType.f64?"d":"v"}static s2n(e){return"i"===e?r.WType.i32:"l"===e?r.WType.i64:"f"===e?r.WType.f32:"d"===e?r.WType.f64:r.WType.none}static fromEncoding(e,t){const n=new WFunctionType([],[],t);"v"!==e.charAt(0)&&n.returnTypes.push(WFunctionType.s2n(e.charAt(0)));for(let t=1;t<e.length;t++)n.parameters.push(WFunctionType.s2n(e.charAt(t)));return n}constructor(e,t,n){super(n),this.returnTypes=e,this.parameters=t}emit(e){e.writeByte(96),e.writeUint32(this.parameters.length),this.parameters.map(t=>e.writeUint32(r.getNativeType(t))),e.writeUint32(this.returnTypes.length),this.returnTypes.map(t=>e.writeUint32(r.getNativeType(t)))}emitJSON(e){}toString(){return this.parameters.join(",")+"#"+this.returnTypes.join(",")}length(e){return 1+s.getLeb128UintLength(this.returnTypes.length)+this.returnTypes.length+s.getLeb128UintLength(this.parameters.length)+this.parameters.length}dump(e){e.dump("(function)",this.location)}toEncoding(){let e="";return 0===this.returnTypes.length?e+="v":e+=WFunctionType.n2s(r.getNativeType(this.returnTypes[0])),this.parameters.map(t=>e+=WFunctionType.n2s(r.getNativeType(t))),e}}n.WFunctionType=WFunctionType;class WMemorySection extends o.WNode{constructor(e,t){super(t),this.pageInfo=e}emit(e){e.writeByte(r.SectionCode.memory),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.pageInfo.length),this.pageInfo.map(t=>{const n=t[1];null===n?(e.writeByte(0),e.writeUint32(t[0])):(e.writeByte(1),e.writeUint32(t[0]),e.writeUint32(n))})}emitJSON(e){}getBodyLength(e){return s.getLeb128UintLength(this.pageInfo.length)+o.getArrayLength(this.pageInfo,e=>{const t=e[1];return null===t?1+s.getLeb128UintLength(e[0]):1+s.getLeb128UintLength(e[0])+s.getLeb128UintLength(t)})}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(memory)",this.location)}}n.WMemorySection=WMemorySection;class WTypeSection extends o.WSection{constructor(e,t){super(t),this.types=e}emit(e){e.writeByte(r.SectionCode.type),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.types.length);for(let t=0;t<this.types.length;t++)e.setTypeIdxFromEncoding(this.types[t].toEncoding(),t),this.types[t].emit(e)}emitJSON(e){for(let t=0;t<this.types.length;t++)e.setTypeIdxFromEncoding(this.types[t].toEncoding(),t);e.getJSON().types=this.types.map(e=>e.toEncoding())}getBodyLength(e){return s.getLeb128UintLength(this.types.length)+o.getArrayLength(this.types,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(type)",this.location)}}n.WTypeSection=WTypeSection;class WFunctionSection extends o.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.function),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.functions.length),this.functions.map(t=>e.setFuncIdx(t.name,t.type)),this.functions.map(t=>e.writeUint32(t.signatureId))}emitJSON(e){this.functions.map(t=>e.setFuncIdx(t.name,t.type))}getBodyLength(e){return s.getLeb128UintLength(this.functions.length)+o.getArrayLength(this.functions,e=>s.getLeb128UintLength(e.signatureId))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(function)",this.location)}}n.WFunctionSection=WFunctionSection;class WCodeSection extends o.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.code),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.functions.length),this.functions.map(t=>t.emit(e))}emitJSON(e){this.functions.map(t=>t.emitJSON(e))}getBodyLength(e){return s.getLeb128UintLength(this.functions.length)+o.getArrayLength(this.functions,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){this.functions.map(t=>t.dump(e))}optimize(e){this.functions.map(t=>t.optimize(e))}}n.WCodeSection=WCodeSection;class WImportItem extends o.WNode{constructor(e,t,n){super(n),this.module=e,this.name=t}emit(e){e.writeUtf8String(this.module),e.writeUtf8String(this.name)}emitJSON(e){}length(e){return a.getUtf8StringLength(this.module)+a.getUtf8StringLength(this.name)}dump(e){e.dump("(import)",this.location)}}n.WImportItem=WImportItem;class WImportFunction extends WImportItem{constructor(e,t,n,r,i){super(e,t,i),this.module=e,this.name=t,this.type=new WFunctionType(n,r,this.location),this.signatureId=0}emit(e){super.emit(e),e.writeByte(0),e.writeUint32(this.signatureId),e.setFuncIdx(this.name,this.type)}emitJSON(e){e.getJSON().imports.push({module:this.module,name:this.name,type:this.type.toEncoding()}),e.setFuncIdx(this.name,this.type)}length(e){return super.length(e)+s.getLeb128UintLength(this.signatureId)+1}dump(e){e.dump("(import)",this.location)}}n.WImportFunction=WImportFunction;n.WImportMemory=class WImportMemory extends WImportItem{constructor(e,t,n,r,i){super(e,t,i),this.min=n,this.max=r}emit(e){super.emit(e),e.writeByte(2),null===this.max?(e.writeByte(0),e.writeUint32(this.min)):(e.writeByte(1),e.writeByte(this.min),e.writeByte(this.max))}emitJSON(e){}length(e){return null===this.max?super.length(e)+2+s.getLeb128UintLength(this.min):super.length(e)+2+s.getLeb128UintLength(this.min)+s.getLeb128UintLength(this.max)}dump(e){e.dump("(import memory)",this.location)}};class WImportSection extends o.WNode{constructor(e,t){super(t),this.imports=e}emit(e){e.writeByte(r.SectionCode.import),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.imports.length),this.imports.map(t=>t.emit(e))}emitJSON(e){this.imports.map(t=>t.emitJSON(e))}getBodyLength(e){return s.getLeb128UintLength(this.imports.length)+o.getArrayLength(this.imports,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(import)",this.location)}}n.WImportSection=WImportSection;class WExportFunction extends o.WNode{constructor(e,t){super(t),this.name=e}emit(e){e.writeUtf8String(this.name),e.writeByte(0),e.writeUint32(e.getFuncIdx(this.name))}emitJSON(e){e.getJSON().exports[this.name]=e.getFuncIdx(this.name)}length(e){return a.getUtf8StringLength(this.name)+s.getLeb128UintLength(e.getFuncIdx(this.name))+1}dump(e){e.dump("(export)",this.location)}}n.WExportFunction=WExportFunction;class WExportSection extends o.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.export),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.functions.length),this.functions.map(t=>t.emit(e))}emitJSON(e){this.functions.map(t=>t.emitJSON(e))}getBodyLength(e){return s.getLeb128UintLength(this.functions.length)+o.getArrayLength(this.functions,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(export)",this.location)}}n.WExportSection=WExportSection;n.WGlobalVariable=class WGlobalVariable extends o.WNode{constructor(e,t,n,r){super(r),this.name=e,this.type=t,this.init=n}emit(e){e.setGlobalIdx(this.name,this.type),e.writeByte(r.getNativeType(this.type)),e.writeByte(1),this.init.emit(e),e.writeByte(r.Control.end)}emitJSON(e){if(e.setGlobalIdx(this.name,this.type),!(this.init instanceof i.WConst))throw new Error("WASM emitJSON: could not handle");e.getJSON().globals.push({name:this.name,type:r.getNativeType(this.type),init:this.init.constant})}length(e){return 3+this.init.length(e)}dump(e){e.dump("(global)",this.location)}};class WGlobalSection extends o.WSection{constructor(e,t){super(t),this.globals=e}emit(e){e.writeByte(r.SectionCode.global),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.globals.length),this.globals.map(t=>t.emit(e))}emitJSON(e){this.globals.map(t=>t.emitJSON(e))}getBodyLength(e){return s.getLeb128UintLength(this.globals.length)+o.getArrayLength(this.globals,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(global)",this.location)}}n.WGlobalSection=WGlobalSection;class WTable extends o.WNode{constructor(e,t){super(t),this.len=e}emit(e){e.writeByte(112),e.writeByte(0),e.writeUint32(this.len)}emitJSON(e){}length(e){return 2+s.getLeb128UintLength(this.len)}dump(e){e.dump("(table)",this.location)}}n.WTable=WTable;class WTableSection extends o.WSection{constructor(e,t){super(t),this.tables=e}emit(e){e.writeByte(r.SectionCode.table),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.tables.length),this.tables.map(t=>t.emit(e))}emitJSON(e){}getBodyLength(e){return s.getLeb128UintLength(this.tables.length)+o.getArrayLength(this.tables,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(global)",this.location)}}n.WTableSection=WTableSection;n.WDataSegment=class WDataSegment extends o.WNode{constructor(e,t,n){super(n),this.memIdx=0,this.offsetNumber=e,this.offset=new i.WConst(r.WType.i32,e.toString(),n),this.dataBuffer=t}emit(e){e.writeUint32(this.memIdx),this.offset.emit(e),e.writeByte(r.Control.end),e.writeUint32(this.dataBuffer.byteLength);const t=new Uint8Array(this.dataBuffer);for(let n=0;n<this.dataBuffer.byteLength;n++)e.writeByte(t[n])}emitJSON(e){}length(e){return 1+s.getLeb128UintLength(this.memIdx)+this.offset.length(e)+this.dataBuffer.byteLength+s.getLeb128UintLength(this.dataBuffer.byteLength)}dump(e){e.dump(`(idx=${this.memIdx} off=${this.offset.constant} ${this.dataBuffer})`)}};class WDataSection extends o.WSection{constructor(e,t){super(t),this.segments=e}emit(e){e.writeByte(r.SectionCode.data),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.segments.length),this.segments.map(t=>t.emit(e))}emitJSON(e){e.getJSON().data=this.segments.map(e=>({offset:e.offsetNumber,data:e.dataBuffer}))}getBodyLength(e){return s.getLeb128UintLength(this.segments.length)+o.getArrayLength(this.segments,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(data",this.location),e.changeDumpIndent(1),this.segments.map(t=>t.dump(e)),e.changeDumpIndent(-1),e.dump(")",this.location)}}n.WDataSection=WDataSection;class WElement extends o.WNode{constructor(e,t){super(t),this.len=e,this.offset=new i.WConst(r.WType.i32,"0",t)}emit(e){e.writeByte(0),this.offset.emit(e),e.writeByte(r.Control.end),e.writeUint32(this.len);for(let t=0;t<this.len;t++)e.writeUint32(t)}emitJSON(e){}length(e){let t=2+this.offset.length(e)+s.getLeb128UintLength(this.len);for(let e=0;e<this.len;e++)t+=s.getLeb128UintLength(e);return t}dump(e){e.dump("(elem)",this.location)}}n.WElement=WElement;class WElementSection extends o.WSection{constructor(e,t){super(t),this.elems=[new WElement(e,t)]}emit(e){e.writeByte(r.SectionCode.element),e.writeUint32(this.getBodyLength(e)),e.writeUint32(this.elems.length),this.elems.map(t=>t.emit(e))}emitJSON(e){}getBodyLength(e){return s.getLeb128UintLength(this.elems.length)+o.getArrayLength(this.elems,t=>t.length(e))}length(e){return s.getLeb128UintLength(this.getBodyLength(e))+this.getBodyLength(e)+1}dump(e){e.dump("(elem)",this.location)}}n.WElementSection=WElementSection;n.WModule=class WModule extends o.WNode{constructor(e,t){super(t),this.functions=e.functions,this.funcTypes=[],this.importFunctions=e.imports.filter(e=>e instanceof WImportFunction).map(e=>e);for(const t of[...this.importFunctions,...e.functions])t.signatureId=this.funcTypes.length,this.funcTypes.push(t.type);const n=this.funcTypes.length;for(const t of e.requiredFuncTypes)this.funcTypes.push(WFunctionType.fromEncoding(t,this.location));this.generateMemory=e.generateMemory;const r=e.exports.map(e=>new WExportFunction(e,this.location));this.globalSection=new WGlobalSection(e.globals,this.location),this.importSection=new WImportSection(e.imports,this.location),this.memorySection=new WMemorySection([[2,null]],this.location),this.functionSection=new WFunctionSection(e.functions,this.location),this.typeSection=new WTypeSection(this.funcTypes,this.location),this.codeSection=new WCodeSection(e.functions,this.location),this.exportSection=new WExportSection(r,this.location),this.dataSection=new WDataSection(e.data,this.location),this.tableSection=new WTableSection([new WTable(n,this.location)],this.location),this.elementSection=new WElementSection(n,this.location)}emit(e){e.writeBytes([0,97,115,109]),e.writeBytes([1,0,0,0]),this.typeSection.emit(e),this.importSection.emit(e),this.functionSection.emit(e),this.tableSection.emit(e),this.generateMemory&&this.memorySection.emit(e),this.globalSection.emit(e),this.exportSection.emit(e),this.elementSection.emit(e),this.codeSection.emit(e),this.dataSection.emit(e)}emitJSON(e){e.writeBytes([0,97,115,109]),e.writeBytes([1,0,0,0]),this.typeSection.emitJSON(e),this.importSection.emitJSON(e),this.functionSection.emitJSON(e),this.tableSection.emitJSON(e),this.generateMemory&&this.memorySection.emitJSON(e),this.globalSection.emitJSON(e),this.exportSection.emitJSON(e),this.elementSection.emitJSON(e),this.codeSection.emitJSON(e),this.dataSection.emitJSON(e)}length(e){return 0}dump(e){this.functionSection.emit(e),this.codeSection.dump(e)}optimize(e){this.codeSection.optimize(e)}}},{"./constant":"hpbE","./expression":"yB6U","./leb128":"33Rn","./node":"2721","./utf8":"pqdI"}],yB6U:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),s=e("../common/error"),o=e("./calculator"),a=e("./constant"),u=e("./leb128"),c=e("./node"),l=e("./section");function p(e){return 0}n.getAlign=p;class WFakeExpression extends c.WExpression{constructor(e,t){super(t),this.statement=e}deduceType(e){throw new s.EmitError("internal error")}emit(e){this.statement.emit(e)}emitJSON(e){this.statement.emitJSON(e)}fold(){return this}isPure(){return!1}length(e){return this.statement.length(e)}dump(e){this.statement.dump(e)}}n.WFakeExpression=WFakeExpression;n.WCall=class WCall extends c.WExpression{constructor(e,t,n,r){super(r),this.target=e,this.argument=t,this.afterStatements=n}emit(e){this.argument.map(t=>t.emit(e)),e.writeByte(a.Control.call),e.writeUint32(e.getFuncIdx(this.target)),this.afterStatements.map(t=>t.emit(e))}emitJSON(e){this.argument.map(t=>t.emitJSON(e)),e.emitIns([a.Control.call,e.getFuncIdx(this.target),this.getStartLine(e)]),this.afterStatements.map(t=>t.emitJSON(e))}length(e){return c.getArrayLength(this.argument,t=>t.length(e))+c.getArrayLength(this.afterStatements,t=>t.length(e))+1+u.getLeb128UintLength(e.getFuncIdx(this.target))}deduceType(e){const t=e.getFuncType(this.target),n=this.argument.filter(e=>!(e instanceof WFakeExpression)).map(t=>t.deduceType(e));if(t.parameters.map(e=>a.getNativeType(e)).join(",")!==n.map(e=>a.getNativeType(e)).join(","))throw new s.EmitError("type mismatch at call");return 0===t.returnTypes.length?a.WType.none:t.returnTypes[0]}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}dump(e){this.argument.map(t=>t.dump(e)),e.dump(`call ${this.target}`,this.location),this.afterStatements.map(t=>t.dump(e))}};n.WUnaryOperation=class WUnaryOperation extends c.WExpression{constructor(e,t,n){super(n),this.ope=e,this.operand=t}emit(e){this.operand.emit(e),e.writeByte(this.ope)}emitJSON(e){this.operand.emitJSON(e),e.emitIns([this.ope,0,this.getStartLine(e)])}length(e){return this.operand.length(e)+1}deduceType(e){if(a.getNativeType(this.operand.deduceType(e))!==a.OpTypeMap.get(this.ope))throw new s.EmitError("type mismatch at unary ope");return this.operand.deduceType(e)}fold(){if(this.operand=this.operand.fold(),this.operand instanceof WConst){const e=a.OpTypeMap.get(this.ope);return e===a.WType.f32||e===a.WType.f64?new WConst(e,o.doUnaryCompute(this.ope,parseFloat(this.operand.constant)).toString()):e===a.WType.i32?new WConst(e,o.doUnaryCompute(this.ope,parseInt(this.operand.constant)).toString()):new WConst(e,o.doLongUnaryCompute(this.ope,i.fromString(this.operand.constant)).toString())}return this}isPure(){return this.operand.isPure()}dump(e){this.operand.dump(e),e.dump(`${a.OpCodes.get(this.ope)}`,this.location)}};class WBinaryOperation extends c.WExpression{constructor(e,t,n,r){super(r),this.ope=e,this.lhs=t,this.rhs=n}emit(e){this.lhs.emit(e),this.rhs.emit(e),e.writeByte(this.ope)}emitJSON(e){this.lhs.emitJSON(e),this.rhs.emitJSON(e),e.emitIns([this.ope,0,this.getStartLine(e)])}length(e){return this.lhs.length(e)+this.rhs.length(e)+1}deduceType(e){const t=a.getNativeType(this.lhs.deduceType(e));if(t!==a.getNativeType(this.rhs.deduceType(e))||a.OpTypeMap.get(this.ope)!==t)throw new s.EmitError("type mismatch in binaryope");return t}fold(){if(this.lhs=this.lhs.fold(),this.rhs=this.rhs.fold(),this.lhs instanceof WConst&&this.rhs instanceof WConst){const e=a.OpTypeMap.get(this.ope);return e===a.WType.f32||e===a.WType.f64?new WConst(e,o.doBinaryCompute(this.ope,parseFloat(this.lhs.constant),parseFloat(this.rhs.constant)).toString()):e===a.WType.i32?new WConst(e,o.doBinaryCompute(this.ope,parseInt(this.lhs.constant),parseInt(this.rhs.constant)).toString()):new WConst(e,o.doLongBinaryCompute(this.ope,i.fromString(this.lhs.constant),i.fromString(this.rhs.constant)).toString())}return this}dump(e){this.lhs.dump(e),this.rhs.dump(e),e.dump(`${a.OpCodes.get(this.ope)}`,this.location)}isPure(){return this.lhs.isPure()&&this.rhs.isPure()}}var h;n.WBinaryOperation=WBinaryOperation,function(e){e[e.RAW=0]="RAW",e[e.DATA=1]="DATA",e[e.BSS=2]="BSS",e[e.EXTERN=3]="EXTERN"}(h=n.WMemoryLocation||(n.WMemoryLocation={}));n.WLoad=class WLoad extends c.WExpression{constructor(e,t,n=h.RAW,r){super(r),this.type=e,this.address=t,this.form=n,this.offset=0,this.offsetName=""}getOp(){switch(this.type){case a.WType.u8:return a.I32.load8_u;case a.WType.u16:return a.I32.load16_u;case a.WType.i8:return a.I32.load8_s;case a.WType.i16:return a.I32.load16_s;case a.WType.i32:case a.WType.u32:return a.I32.load;case a.WType.f32:return a.F32.load;case a.WType.f64:return a.F64.load;case a.WType.i64:case a.WType.u64:return a.I64.load}}emit(e){let t=this.offset;this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),this.address.emit(e),e.writeByte(this.getOp()),e.writeUint32(0),e.writeUint32(t)}emitJSON(e){let t=this.offset;this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),this.address.emitJSON(e),e.emitIns([this.getOp(),t,this.getStartLine(e)])}length(e){let t=this.offset;return this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),this.address.length(e)+u.getLeb128UintLength(0)+u.getLeb128UintLength(t)+1}replaceAddress(){this.address=new WBinaryOperation(a.I32Binary.add,this.address,new WConst(a.WType.i32,this.offset.toString()),this.location),this.offset=0}deduceType(e){return this.type}fold(){return this.address=this.address.fold(),this}isPure(){return this.address.isPure()}dump(e){this.address.dump(e),e.dump(`${a.OpCodes.get(this.getOp())}`,this.location)}};n.WGetGlobal=class WGetGlobal extends c.WExpression{constructor(e,t,n){super(n),this.type=e,this.name=t}emit(e){e.writeByte(a.Control.get_global),e.writeUint32(e.getGlobalIdx(this.name))}emitJSON(e){e.emitIns([a.Control.get_global,e.getGlobalIdx(this.name),this.getStartLine(e)])}length(e){return 1+u.getLeb128UintLength(e.getGlobalIdx(this.name))}deduceType(e){if(this.type!==e.getGlobalType(this.name))throw new s.EmitError("type mismatch at getglobal");return this.type}fold(){return this}isPure(){return!0}dump(e){e.dump(`get_global ${this.name}`,this.location)}};n.WGetLocal=class WGetLocal extends c.WExpression{constructor(e,t,n){super(n),this.type=e,this.offset=t}emit(e){e.writeByte(a.Control.get_local),e.writeUint32(this.offset)}emitJSON(e){e.emitIns([a.Control.get_local,this.offset,this.getStartLine(e)])}length(e){return 1+u.getLeb128UintLength(this.offset)}deduceType(e){return this.type}fold(){return this}isPure(){return!0}dump(e){e.dump(`get_local $${this.offset}`,this.location)}};class WConst extends c.WExpression{constructor(e,t,n){super(n),this.type=e,this.constant=t}emit(e){switch(a.getNativeType(this.type)){case a.WType.i32:e.writeByte(a.I32.const),e.writeInt32(parseInt(this.constant));break;case a.WType.i64:e.writeByte(a.I64.const),e.writeInt64(this.constant.split(".")[0]);break;case a.WType.f32:e.writeByte(a.F32.const),e.writeFloat32(parseFloat(this.constant));break;case a.WType.f64:e.writeByte(a.F64.const),e.writeFloat64(parseFloat(this.constant))}}emitJSON(e){switch(a.getNativeType(this.type)){case a.WType.i32:e.emitIns([a.I32.const,parseInt(this.constant),this.getStartLine(e)]);break;case a.WType.i64:e.emitIns([a.I64.const,this.constant.split(".")[0],this.getStartLine(e)]);break;case a.WType.f32:e.emitIns([a.F32.const,parseFloat(this.constant),this.getStartLine(e)]);break;case a.WType.f64:e.emitIns([a.F64.const,parseFloat(this.constant),this.getStartLine(e)])}}deduceType(e){return this.type}length(e){switch(a.getNativeType(this.type)){case a.WType.i32:case a.WType.i64:return 1+u.getLeb128IntLength(this.constant.split(".")[0]);case a.WType.f32:return 5;case a.WType.f64:return 9}throw new s.EmitError("unsupport type")}fold(){return this}isPure(){return!0}dump(e){e.dump(`${a.WType[this.type]}.const ${this.constant}`,this.location)}}n.WConst=WConst;n.WCovertOperation=class WCovertOperation extends c.WExpression{constructor(e,t,n,r,i){super(i),this.srcType=e,this.dstType=t,this.operand=n,this.ope=r}emit(e){this.operand.emit(e),e.writeByte(this.ope)}emitJSON(e){this.operand.emitJSON(e),e.emitIns([this.ope,0,this.getStartLine(e)])}deduceType(e){return this.dstType}length(e){return this.operand.length(e)+1}fold(){return this.operand=this.operand.fold(),this.operand instanceof WConst?(this.dstType===a.WType.f32||this.dstType===a.WType.f64?this.operand.constant=parseFloat(this.operand.constant).toString():this.operand.constant=parseInt(this.operand.constant).toString(),this.operand.type=this.dstType,this.operand):this}isPure(){return this.operand.isPure()}dump(e){this.operand.dump(e),e.dump(a.OpCodes.get(this.ope),this.location)}};n.WGetAddress=class WGetAddress extends c.WExpression{constructor(e,t){super(t),this.form=e,this.offset=0,this.offsetName=""}emit(e){e.writeByte(a.I32.const);let t=this.offset;this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),e.writeInt32(t)}emitJSON(e){let t=this.offset;this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),e.emitIns([a.I32.const,t,this.getStartLine(e)])}length(e){let t=this.offset;return this.form===h.DATA?t+=e.getCurrentFunc().dataStart:this.form===h.BSS?t+=e.getCurrentFunc().bssStart:this.form===h.EXTERN&&(t+=e.getExternLocation(this.offsetName)),u.getLeb128IntLength(t)+1}deduceType(e){return a.WType.i32}fold(){return this}isPure(){return!0}dump(e){this.form===h.DATA?e.dump(`get_data ${this.offset}`,this.location):this.form===h.BSS?e.dump(`get_bss ${this.offset}`,this.location):this.form===h.EXTERN?e.dump(`get_extern ${this.offsetName}`,this.location):e.dump(`get_raw $${this.offset}`,this.location)}};n.WConditionalExpression=class WConditionalExpression extends c.WExpression{constructor(e,t,n,r){super(r),this.condition=e,this.consequence=t,this.alternative=n}deduceType(e){const t=this.consequence.deduceType(e),n=this.alternative.deduceType(e);if(a.getNativeType(t)===a.getNativeType(n))return a.getNativeType(t);throw new s.EmitError("type mismatch at contional expression")}fold(){return this}isPure(){return this.condition.isPure()&&this.alternative.isPure()&&this.alternative.isPure()}emit(e){this.condition.emit(e),e.writeByte(a.Control.if),e.writeByte(this.deduceType(e)),this.consequence.emit(e),e.writeByte(a.Control.else),this.alternative.emit(e),e.writeByte(a.Control.end)}emitJSON(e){this.condition.emitJSON(e),e.emitIns([a.Control.if,this.deduceType(e),this.getStartLine(e)]),this.consequence.emitJSON(e),e.emitIns([a.Control.else,0,this.getStartLine(e)]),this.alternative.emitJSON(e),e.emitIns([a.Control.end,this.deduceType(e),this.getStartLine(e)])}length(e){return 4+this.condition.length(e)+this.consequence.length(e)+this.alternative.length(e)}dump(e){e.dump("ifexpr(",this.location),this.condition.dump(e),e.dump("){",this.location),e.changeDumpIndent(1),this.consequence.dump(e),e.changeDumpIndent(-1),e.dump("}else{"),e.changeDumpIndent(1),this.alternative.dump(e),e.changeDumpIndent(-1),e.dump("}")}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.alternative=this.alternative.fold(),this.alternative.optimize(e),this.consequence=this.consequence.fold(),this.consequence.optimize(e)}};n.WGetFunctionAddress=class WGetFunctionAddress extends c.WExpression{constructor(e,t){super(t),this.name=e}dump(e){e.dump(`getfuncaddr ${this.name}`)}emit(e){e.writeByte(a.I32.const),e.writeUint32(e.getFuncIdx(this.name))}emitJSON(e){e.emitIns([a.I32.const,e.getFuncIdx(this.name),this.getStartLine(e)])}length(e){return 1+u.getLeb128UintLength(e.getFuncIdx(this.name))}deduceType(e){return a.WType.i32}fold(){return this}isPure(){return!0}};n.WCallIndirect=class WCallIndirect extends c.WExpression{constructor(e,t,n,r,i){super(i),this.target=e,this.typeEncoding=t,this.argument=n,this.afterStatements=r}emit(e){this.argument.map(t=>t.emit(e)),this.target.emit(e),e.writeByte(a.Control.call_indirect),e.writeByte(e.getTypeIdxFromEncoding(this.typeEncoding)),e.writeByte(0),this.afterStatements.map(t=>t.emit(e))}length(e){return c.getArrayLength(this.argument,t=>t.length(e))+c.getArrayLength(this.afterStatements,t=>t.length(e))+3+this.target.length(e)}deduceType(e){return"v"===this.typeEncoding.charAt(0)?a.WType.none:l.WFunctionType.s2n(this.typeEncoding.charAt(0))}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}dump(e){this.argument.map(t=>t.dump(e)),this.target.dump(e),e.dump("call_indirect",this.location),this.afterStatements.map(t=>t.dump(e))}emitJSON(e){this.argument.map(t=>t.emitJSON(e)),this.target.emitJSON(e),e.emitIns([a.Control.call_indirect,e.getTypeIdxFromEncoding(this.typeEncoding),this.getStartLine(e)]),this.afterStatements.map(t=>t.emitJSON(e))}}},{long:"YvD4","../common/error":"nOPH","./calculator":"hPls","./constant":"hpbE","./leb128":"33Rn","./node":"2721","./section":"1WA9"}],"0h1i":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("./constant"),s=e("./expression"),o=e("./leb128"),a=e("./node");n.WReturn=class WReturn extends a.WStatement{constructor(e,t){super(t),this.expr=e,null!==e&&(this.expr=e)}emit(e){const t=e.getCurrentFunc();if(0===t.type.returnTypes.length&&null!==this.expr)throw new r.EmitError("type mismatch at WReturn");if(0!==t.type.returnTypes.length){if(null===this.expr)throw new r.EmitError("type mismatch at WReturn");const n=this.expr.deduceType(e);if(i.getNativeType(n)!==i.getNativeType(t.type.returnTypes[0]))throw new r.EmitError("type mismatch at WReturn")}null!==this.expr&&this.expr.emit(e),e.writeByte(i.Control.return)}emitJSON(e){const t=e.getCurrentFunc();if(0===t.type.returnTypes.length&&null!==this.expr)throw new r.EmitError("type mismatch at WReturn");if(0!==t.type.returnTypes.length){if(null===this.expr)throw new r.EmitError("type mismatch at WReturn");const n=this.expr.deduceType(e);if(i.getNativeType(n)!==i.getNativeType(t.type.returnTypes[0]))throw new r.EmitError("type mismatch at WReturn")}null!==this.expr&&this.expr.emitJSON(e),e.emitIns([i.Control.return,0,this.getStartLine(e)])}length(e){return null!==this.expr?this.expr.length(e)+1:1}dump(e){null!==this.expr&&this.expr.dump(e),e.dump("return")}optimize(e){null!==this.expr&&(this.expr=this.expr.fold(),this.expr.optimize(e))}};n.WStore=class WStore extends a.WStatement{constructor(e,t,n,r=s.WMemoryLocation.RAW,i){super(i),this.type=e,this.address=t,this.value=n,this.offset=0,this.form=r,this.offsetName=""}getOp(){switch(this.type){case i.WType.u8:case i.WType.i8:return i.I32.store8;case i.WType.i16:case i.WType.u16:return i.I32.store16;case i.WType.i32:case i.WType.u32:return i.I32.store;case i.WType.f32:return i.F32.store;case i.WType.f64:return i.F64.store;case i.WType.i64:case i.WType.u64:return i.I64.store}}emit(e){const t=this.computeOffset(e);this.address.emit(e),this.value.emit(e),e.writeByte(this.getOp()),e.writeUint32(s.getAlign(t)),e.writeUint32(t)}emitJSON(e){const t=this.computeOffset(e);this.address.emitJSON(e),this.value.emitJSON(e),e.emitIns([this.getOp(),t,this.getStartLine(e)])}replaceAddress(){this.address=new s.WBinaryOperation(i.I32Binary.add,this.address,new s.WConst(i.WType.i32,this.offset.toString()),this.location),this.offset=0}length(e){let t=this.offset;return this.form===s.WMemoryLocation.DATA?t+=e.getCurrentFunc().dataStart:this.form===s.WMemoryLocation.BSS?t+=e.getCurrentFunc().bssStart:this.form===s.WMemoryLocation.EXTERN&&(t+=e.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),this.address.length(e)+this.value.length(e)+o.getLeb128UintLength(s.getAlign(t))+o.getLeb128UintLength(t)+1}dump(e){this.address.dump(e),this.value.dump(e),e.dump(`${i.OpCodes.get(this.getOp())}`,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e),this.address=this.address.fold(),this.address.optimize(e)}computeOffset(e){if(i.getNativeType(this.value.deduceType(e))!==i.getNativeType(this.type))throw new r.EmitError(`type mismatch at store: ${this.value.deduceType(e)} and ${this.type}`);if(this.address.deduceType(e)!==i.WType.u32&&this.address.deduceType(e)!==i.WType.i32)throw new r.EmitError("type mismatch at store, address");let t=this.offset;return this.form===s.WMemoryLocation.DATA?t+=e.getCurrentFunc().dataStart:this.form===s.WMemoryLocation.BSS?t+=e.getCurrentFunc().bssStart:this.form===s.WMemoryLocation.EXTERN&&(t+=e.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),t}};n.WSetLocal=class WSetLocal extends a.WStatement{constructor(e,t,n,r){super(r),this.type=e,this.offset=t,this.value=n}emit(e){this.value.emit(e),e.writeByte(i.Control.set_local),e.writeUint32(this.offset)}emitJSON(e){this.value.emitJSON(e),e.emitIns([i.Control.set_local,this.offset,this.getStartLine(e)])}length(e){return this.value.length(e)+1+o.getLeb128UintLength(this.offset)}dump(e){this.value.dump(e),e.dump(`set_local $${this.offset}`,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}};n.WSetGlobal=class WSetGlobal extends a.WStatement{constructor(e,t,n,r){super(r),this.type=e,this.name=t,this.value=n}emit(e){if(e.getGlobalType(this.name)!==this.type)throw new r.EmitError("type mismatch at set_global");this.value.emit(e),e.writeByte(i.Control.set_global),e.writeUint32(e.getGlobalIdx(this.name))}emitJSON(e){if(e.getGlobalType(this.name)!==this.type)throw new r.EmitError("type mismatch at set_global");this.value.emitJSON(e),e.emitIns([i.Control.set_global,e.getGlobalIdx(this.name),this.getStartLine(e)])}length(e){return this.value.length(e)+1+o.getLeb128UintLength(e.getGlobalType(this.name))}dump(e){this.value.dump(e),e.dump(`set_global ${this.name}`,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}};n.WDrop=class WDrop extends a.WStatement{constructor(e,t){super(t),this.value=e}emit(e){this.value.emit(e),e.writeByte(i.Control.drop)}emitJSON(e){this.value.emitJSON(e),e.emitIns([i.Control.drop,0,this.getStartLine(e)])}length(e){return this.value.length(e)+1}dump(e){this.value.dump(e),e.dump("drop",this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}};n.WBr=class WBr extends a.WStatement{constructor(e,t){super(t),this.labelIdx=e}emit(e){e.writeByte(i.Control.br),e.writeUint32(this.labelIdx)}emitJSON(e){e.emitIns([i.Control.br,this.labelIdx,this.getStartLine(e)])}length(e){return 1+o.getLeb128UintLength(this.labelIdx)}dump(e){e.dump(`br ${this.labelIdx}`,this.location)}};n.WBrIf=class WBrIf extends a.WStatement{constructor(e,t,n){super(n),this.labelIdx=e,this.expression=t}emit(e){this.expression.emit(e),e.writeByte(i.Control.br_if),e.writeUint32(this.labelIdx)}emitJSON(e){this.expression.emitJSON(e),e.emitIns([i.Control.br_if,this.labelIdx,this.getStartLine(e)])}length(e){return this.expression.length(e)+1+o.getLeb128UintLength(this.labelIdx)}dump(e){this.expression.dump(e),e.dump(`br_if ${this.labelIdx}`,this.location)}optimize(e){this.expression=this.expression.fold(),this.expression.optimize(e)}};n.WIfElseBlock=class WIfElseBlock extends a.WStatement{constructor(e,t,n,r){super(r),this.condition=e,this.consequence=t,this.alternative=n}emit(e){this.condition.emit(e),e.writeByte(i.Control.if),e.writeByte(64),this.consequence.map(t=>t.emit(e)),null!==this.alternative&&(e.writeByte(i.Control.else),this.alternative.map(t=>t.emit(e))),e.writeByte(i.Control.end)}emitJSON(e){this.condition.emitJSON(e),e.emitIns([i.Control.if,0,this.getStartLine(e)]),this.consequence.map(t=>t.emitJSON(e)),null!==this.alternative&&(e.emitIns([i.Control.else,0,this.getStartLine(e)]),this.alternative.map(t=>t.emitJSON(e))),e.emitIns([i.Control.end,0,this.getStartLine(e)])}length(e){let t=3+this.condition.length(e)+a.getArrayLength(this.consequence,t=>t.length(e));return null!==this.alternative&&(t+=1+a.getArrayLength(this.alternative,t=>t.length(e))),t}dump(e){e.dump("if(",this.location),this.condition.emit(e),e.dump("){",this.location),e.changeDumpIndent(1),this.consequence.map(t=>t.dump(e)),e.changeDumpIndent(-1),null!==this.alternative&&(e.dump("}else{"),e.changeDumpIndent(1),this.alternative.map(t=>t.dump(e)),e.changeDumpIndent(-1)),e.dump("}")}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.consequence.map(t=>t.optimize(e)),null!==this.alternative&&this.alternative.map(t=>t.optimize(e))}};n.WBlock=class WBlock extends a.WStatement{constructor(e,t){super(t),this.body=e}emit(e){e.writeByte(i.Control.block),e.writeByte(64),this.body.map(t=>t.emit(e)),e.writeByte(i.Control.end)}emitJSON(e){e.emitIns([i.Control.block,0,this.getStartLine(e)]),this.body.map(t=>t.emitJSON(e)),e.emitIns([i.Control.end,0,this.getStartLine(e)])}length(e){return a.getArrayLength(this.body,t=>t.length(e))+3}dump(e){e.dump("block{",this.location),e.changeDumpIndent(1),this.body.map(t=>t.dump(e)),e.changeDumpIndent(-1),e.dump("}")}optimize(e){this.body.map(t=>t.optimize(e))}};n.WLoop=class WLoop extends a.WStatement{constructor(e,t){super(t),this.body=e}emit(e){e.writeByte(i.Control.loop),e.writeByte(64),this.body.map(t=>t.emit(e)),e.writeByte(i.Control.end)}emitJSON(e){e.emitIns([i.Control.loop,0,this.getStartLine(e)]),this.body.map(t=>t.emitJSON(e)),e.emitIns([i.Control.end,0,this.getStartLine(e)])}length(e){return a.getArrayLength(this.body,t=>t.length(e))+3}dump(e){e.dump("loop{",this.location),e.changeDumpIndent(1),this.body.map(t=>t.dump(e)),e.changeDumpIndent(-1),e.dump("}")}optimize(e){this.body.map(t=>t.optimize(e))}};n.WExprStatement=class WExprStatement extends a.WStatement{constructor(e,t){super(t),this.expr=e}emit(e){this.expr.emit(e)}emitJSON(e){this.expr.emitJSON(e)}length(e){return this.expr.length(e)}dump(e){this.expr.dump(e)}optimize(e){this.expr=this.expr.fold(),this.expr.optimize(e)}}},{"../common/error":"nOPH","./constant":"hpbE","./expression":"yB6U","./leb128":"33Rn","./node":"2721"}],"9eqY":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../common/error"),s=e("./leb128"),o=e("./utf8");class WASMEmitter{constructor(){this.buffer=new ArrayBuffer(2e4),this.view=new DataView(this.buffer),this.now=0,this.funcIdx=new Map,this.funcIdxCount=0,this.globalIdx=new Map,this.globalIdxCount=0,this.externMap=new Map,this.dumpIndent=0,this.lastLine=0,this.funcTypeEncodingMap=new Map}writeByte(e){this.view.setUint8(this.now++,e)}writeBytes(e){for(const t of e)this.view.setUint8(this.now++,t)}writeUint32(e){s.writeLeb128Uint(this,e)}writeInt32(e){s.writeLeb128Int(this,e)}writeUint64(e){s.writeLeb128Uint(this,e)}writeInt64(e){s.writeLeb128Int(this,e)}writeFloat32(e){this.view.setFloat32(this.now,e,!0),this.now+=4}writeFloat64(e){this.view.setFloat64(this.now,e,!0),this.now+=8}writeUtf8String(e){o.writeUtf8String(this,e)}getFuncType(e){if(!this.funcIdx.has(e))throw new i.EmitError(`undefined name ${e}`);return this.funcIdx.get(e)[1]}getFuncIdx(e){if(!this.funcIdx.has(e))throw new i.EmitError(`undefined name ${e}`);return this.funcIdx.get(e)[0]}setFuncIdx(e,t){if(this.funcIdx.has(e))throw new i.EmitError(`duplicated name ${e}`);return this.funcIdx.set(e,[this.funcIdxCount,t]),this.funcIdxCount++}getGlobalType(e){if(!this.globalIdx.has(e))throw new i.EmitError(`undefined name ${e}`);return this.globalIdx.get(e)[1]}getGlobalIdx(e){if(!this.globalIdx.has(e))throw new i.EmitError(`undefined name ${e}`);return this.globalIdx.get(e)[0]}setGlobalIdx(e,t){if(this.globalIdx.has(e))throw new i.EmitError(`duplicated name ${e}`);return this.globalIdx.set(e,[this.globalIdxCount,t]),this.globalIdxCount++}setCurrentFunc(e){this.currentFunc=e}getCurrentFunc(){if(!this.currentFunc)throw new i.EmitError("not in func");return this.currentFunc}getExternLocation(e){const t=this.externMap.get(e);if(!t)throw new i.EmitError(`unresolve symbol ${e}`);return t}dumpSource(e,t){for(let n=e;n<=t;n++)console.log("# "+this.source[n].trim())}dump(e,t){let n="";for(let e=0;e<this.dumpIndent;e++)n+=" ";if(this.sourceMap&&t&&t.start.line>=1){if(!this.lastFile||t.fileName!==this.lastFile)if(this.lastFile=t.fileName,this.sourceMap.has(this.lastFile)){const e=this.sourceMap.get(this.lastFile);this.sourceMapItem=e,this.source=e.source,this.consumer=new r.SourceMapConsumer(e.sourceMap.toString()),e.lastLine?this.lastLine=Math.max(0,e.lastLine):this.lastLine=0}else this.lastLine=-1;if(this.consumer){const e=this.consumer.originalPositionFor({line:t.start.line,column:1}).line;if(-1!==this.lastLine&&e>this.lastLine){this.sourceMapItem.lastLine=e;const t=this.lastLine+1,n=e;this.dumpSource(t,n),this.lastLine=e}}}console.log(n+e)}changeDumpIndent(e){this.dumpIndent+=e}getTypeIdxFromEncoding(e){const t=this.funcTypeEncodingMap.get(e);if(!t)throw new i.EmitError(`unresolve type ${e}`);return t}setTypeIdxFromEncoding(e,t){this.funcTypeEncodingMap.set(e,t)}}n.WASMEmitter=WASMEmitter;n.JSONEmitter=class JSONEmitter extends WASMEmitter{constructor(){super(),this.insBuffer=[],this.wasmJSON={functions:[],types:[],globals:[],imports:[],data:[],exports:{}},this.sourceMapConsumer=null}setSourceMap(e){e&&this.sourceMap&&this.sourceMap.get(e)?this.sourceMapConsumer=new r.SourceMapConsumer(this.sourceMap.get(e).sourceMap.toString()):this.sourceMapConsumer=null}emitIns(e){this.insBuffer.push(e)}setBuffer(e){this.insBuffer=e}getJSON(){return this.wasmJSON}}},{"source-map":"aRf0","../common/error":"nOPH","./leb128":"33Rn","./utf8":"pqdI"}],Jo9c:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./constant");var i=e("./constant");n.F32Binary=i.F32Binary,n.F32Unary=i.F32Unary,n.F64Binary=i.F64Binary,n.F64Unary=i.F64Unary,n.I32Binary=i.I32Binary,n.I32Unary=i.I32Unary,n.I64Binary=i.I64Binary,n.I64Unary=i.I64Unary,n.WType=i.WType;var s=e("./expression");n.WBinaryOperation=s.WBinaryOperation,n.WUnaryOperation=s.WUnaryOperation,n.WLoad=s.WLoad,n.WConst=s.WConst,n.WCall=s.WCall;var o=e("./statement");n.WStore=o.WStore,n.WReturn=o.WReturn,n.WBlock=o.WBlock,n.WLoop=o.WLoop,n.WIfElseBlock=o.WIfElseBlock;var a=e("./section");n.WModule=a.WModule,n.WFunction=a.WFunction,n.WModuleConfig=a.WModuleConfig,n.WImportFunction=a.WImportFunction,n.WGlobalVariable=a.WGlobalVariable;var u=e("./emitter");n.WASMEmitter=u.WASMEmitter,n.JSONEmitter=u.JSONEmitter,n.i32=r.WType.i32,n.i64=r.WType.i64,n.f32=r.WType.f32,n.f64=r.WType.f64,n.u32=r.WType.u32,n.u64=r.WType.u64,n.i8=r.WType.i8,n.u8=r.WType.u8,n.i16=r.WType.i16,n.u16=r.WType.u16},{"./constant":"hpbE","./expression":"yB6U","./statement":"0h1i","./section":"1WA9","./emitter":"9eqY"}],JsMC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),s=e("../type/class_type"),o=e("../type/compound_type"),a=e("../wasm"),u=e("../wasm/constant"),c=e("../wasm/expression"),l=e("../wasm/node"),p=e("../wasm/statement");n.WAddressHolder=class WAddressHolder extends l.WExpression{constructor(e,t,n){super(n),this.place=e,this.type=t,this.offset=0}createStore(e,t,n,l=!1){let h=null;if(t instanceof o.ArrayType||t instanceof s.ClassType)throw new r.InternalError("could not assign a array or class");{const s=l?u.getNativeType(t.toWType()):t.toWType();switch(this.type){case i.AddressType.LOCAL:if(h=new p.WSetLocal(s,this.place,n,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.MEMORY_DATA:(h=new a.WStore(s,new a.WConst(a.WType.i32,"0",this.location),n,c.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(h=new a.WStore(s,new a.WConst(a.WType.i32,"0",this.location),n,c.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(h=new a.WStore(s,new a.WConst(a.WType.i32,"0",this.location),n,c.WMemoryLocation.EXTERN,this.location)).offset=this.offset,h.offsetName=this.place;break;case i.AddressType.CONSTANT:throw new r.InternalError("store a constant()");case i.AddressType.STACK:if(null===e.currentFunction)throw new r.InternalError("not in function");(h=new a.WStore(s,new c.WGetLocal(a.WType.i32,e.currentFunction.$sp,this.location),n,c.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.GLOBAL:if(h=new p.WSetGlobal(s,this.place,n,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.GLOBAL_SP:(h=new a.WStore(s,new c.WGetGlobal(a.WType.u32,"$sp",this.location),n,c.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.RVALUE:h=new a.WStore(s,new a.WBinaryOperation(a.I32Binary.add,this.place,new a.WConst(a.WType.i32,this.offset.toString(),this.location),this.location),n,c.WMemoryLocation.RAW,this.location)}}if(null===h)throw new r.InternalError("createStore()");return h}createLoad(e,t){let n=null;if(t instanceof o.ArrayType||t instanceof s.ClassType)throw new r.InternalError("unsupport");switch(this.type){case i.AddressType.LOCAL:if(n=new c.WGetLocal(t.toWType(),this.place,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.MEMORY_DATA:(n=new a.WLoad(t.toWType(),new a.WConst(a.WType.i32,"0",this.location),c.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(n=new a.WLoad(t.toWType(),new a.WConst(a.WType.i32,"0",this.location),c.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(n=new a.WLoad(t.toWType(),new a.WConst(a.WType.i32,"0",this.location),c.WMemoryLocation.EXTERN,this.location)).offsetName=this.place,n.offset=this.offset;break;case i.AddressType.CONSTANT:if(n=new a.WConst(a.WType.i32,this.place.toString(),this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.STACK:if(null===e.currentFunction)throw new r.InternalError("not in function");(n=new a.WLoad(t.toWType(),new c.WGetLocal(a.WType.i32,e.currentFunction.$sp,this.location),c.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.GLOBAL:if(n=new c.WGetGlobal(t.toWType(),this.place,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.GLOBAL_SP:(n=new a.WLoad(t.toWType(),new c.WGetGlobal(a.WType.u32,"$sp",this.location),c.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.RVALUE:n=new a.WLoad(t.toWType(),new a.WBinaryOperation(a.I32Binary.add,this.place,new a.WConst(a.WType.i32,this.offset.toString(),this.location),this.location),c.WMemoryLocation.RAW,this.location)}if(null===n)throw new r.InternalError("createLoad()");return n}createLoadAddress(e){let t=null;switch(this.type){case i.AddressType.LOCAL:throw new r.InternalError("could not get address of local variable");case i.AddressType.MEMORY_DATA:(t=new c.WGetAddress(c.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(t=new c.WGetAddress(c.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(t=new c.WGetAddress(c.WMemoryLocation.EXTERN,this.location)).offset=this.offset,t.offsetName=this.place;break;case i.AddressType.CONSTANT:throw new r.InternalError("store a constant()");case i.AddressType.STACK:if(null===e.currentFunction)throw new r.InternalError("not in function");t=new a.WBinaryOperation(a.I32Binary.add,new c.WGetLocal(a.WType.i32,e.currentFunction.$sp,this.location),new a.WConst(a.WType.i32,(this.place+this.offset).toString()),this.location);break;case i.AddressType.GLOBAL_SP:if(null===e.currentFunction)throw new r.InternalError("not in function");t=new a.WBinaryOperation(a.I32Binary.add,new c.WGetGlobal(a.WType.i32,"$sp",this.location),new a.WConst(a.WType.i32,(this.place+this.offset).toString()),this.location);break;case i.AddressType.RVALUE:t=new a.WBinaryOperation(a.I32Binary.add,this.place,new a.WConst(a.WType.i32,this.offset.toString(),this.location),this.location);break;case i.AddressType.GLOBAL:throw new r.InternalError("could not get address of global variable")}if(null===t)throw new r.InternalError("createStore()");return t}makeOffset(e){if(this.type===i.AddressType.LOCAL)throw new r.InternalError("could not get address of local variable");return this.offset+=e,this}deduceType(e){throw new r.EmitError("WAddressHolder()")}emit(e){throw new r.EmitError("WAddressHolder()")}emitJSON(e){throw new r.EmitError("WAddressHolder()")}fold(){return this}length(e){throw new r.EmitError("WAddressHolder()")}isPure(){return!0}dump(e){e.dump("===ADDRESS HOLDER===",this.location)}}},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../wasm":"Jo9c","../wasm/constant":"hpbE","../wasm/expression":"yB6U","../wasm/node":"2721","../wasm/statement":"0h1i"}],HxYe:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../wasm"),i=e("./index");class PrimitiveType extends i.Type{}n.PrimitiveType=PrimitiveType;class VoidType extends PrimitiveType{get length(){return 1}toWType(){return r.WType.i32}toMangledName(){return"v"}toString(){return"void"}}n.VoidType=VoidType;class NullptrType extends PrimitiveType{get length(){return 1}toWType(){return r.WType.i32}toMangledName(){return"nullptr"}toString(){return"nullptr"}}n.NullptrType=NullptrType;class ArithmeticType extends PrimitiveType{compatWith(e){return e instanceof ArithmeticType}}n.ArithmeticType=ArithmeticType;class IntegerType extends ArithmeticType{}n.IntegerType=IntegerType;class FloatingType extends ArithmeticType{}n.FloatingType=FloatingType;class SignedIntegerType extends IntegerType{}n.SignedIntegerType=SignedIntegerType;class UnsignedIntegerType extends IntegerType{}n.UnsignedIntegerType=UnsignedIntegerType;class BoolType extends UnsignedIntegerType{get length(){return 1}toWType(){return r.WType.i8}toMangledName(){return"b"}toString(){return"bool"}}n.BoolType=BoolType;class CharType extends SignedIntegerType{get length(){return 1}toWType(){return r.WType.i8}toMangledName(){return"c"}toString(){return"char"}}n.CharType=CharType;class Int16Type extends SignedIntegerType{get length(){return 2}toWType(){return r.WType.i16}toMangledName(){return"s"}toString(){return"short"}}n.Int16Type=Int16Type;class Int32Type extends SignedIntegerType{get length(){return 4}toWType(){return r.WType.i32}toMangledName(){return"i"}toString(){return"int"}}n.Int32Type=Int32Type;class Int64Type extends SignedIntegerType{get length(){return 8}toWType(){return r.WType.i64}toMangledName(){return"l"}toString(){return"long long"}}n.Int64Type=Int64Type;class UnsignedCharType extends UnsignedIntegerType{get length(){return 1}toWType(){return r.WType.u8}toMangledName(){return"uc"}toString(){return"unsigned char"}}n.UnsignedCharType=UnsignedCharType;class UnsignedInt16Type extends UnsignedIntegerType{get length(){return 2}toWType(){return r.WType.u16}toMangledName(){return"us"}toString(){return"unsigned short"}}n.UnsignedInt16Type=UnsignedInt16Type;class UnsignedInt32Type extends UnsignedIntegerType{get length(){return 4}toWType(){return r.WType.u32}toMangledName(){return"ui"}toString(){return"unsigned int"}}n.UnsignedInt32Type=UnsignedInt32Type;class UnsignedInt64Type extends UnsignedIntegerType{get length(){return 8}toWType(){return r.WType.u64}toMangledName(){return"ul"}toString(){return"unsigned long long"}}n.UnsignedInt64Type=UnsignedInt64Type;class FloatType extends FloatingType{get length(){return 4}toWType(){return r.WType.f32}toMangledName(){return"f"}toString(){return"float"}}n.FloatType=FloatType;class DoubleType extends FloatingType{get length(){return 8}toWType(){return r.WType.f64}toMangledName(){return"d"}toString(){return"double"}}n.DoubleType=DoubleType,n.PrimitiveTypes={void:new VoidType,nullptr:new NullptrType,bool:new BoolType,char:new CharType,uchar:new UnsignedCharType,int16:new Int16Type,uint16:new UnsignedInt16Type,int32:new Int32Type,uint32:new UnsignedInt32Type,int64:new Int64Type,uint64:new UnsignedInt64Type,float:new FloatType,double:new DoubleType},n.PrimitiveTypesNameMap=new Map([[[["void"]],()=>new VoidType],[[["bool"]],()=>new BoolType],[[["char"],["signed","char"].sort()],()=>new CharType],[[["unsigned","char"].sort()],()=>new UnsignedCharType],[[["short"],["signed","short"].sort(),["short","int"].sort(),["signed","short","int"].sort()],()=>new Int16Type],[[["unsigned","short"].sort(),["unsigned","short","int"].sort()],()=>new UnsignedInt16Type],[[["int"],["signed"],["signed","int"].sort()],()=>new Int32Type],[[["unsigned"],["unsigned","int"].sort()],()=>new UnsignedInt32Type],[[["long"],["signed","long"].sort(),["long","int"].sort(),["signed","long","int"].sort()],()=>new Int32Type],[[["unsigned","long"].sort(),["unsigned","long","int"].sort()],()=>new UnsignedInt32Type],[[["long","long"],["signed","long","long"].sort(),["long","long","int"].sort(),["signed","long","long","int"].sort()],()=>new Int64Type],[[["unsigned","long","long"].sort(),["unsigned","long","long","int"].sort()],()=>new UnsignedInt64Type],[[["float"]],()=>new FloatType],[[["double"]],()=>new DoubleType],[[["bool"]],()=>n.PrimitiveTypes.bool]])},{"../wasm":"Jo9c","./index":"Rt13"}],vaEy:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("."),i=e("../codegen/address"),s=e("../common/ast"),o=e("../common/error"),a=e("../common/symbol"),u=e("../wasm/expression"),c=e("./primitive_type");class ClassType extends r.Type{constructor(e,t,n,r,i,s){super(),this.name=e,this.fileName=n,this.fullName=t,this.fields=r,this.isComplete=!0,this.fieldMap=new Map,this.isUnion=i,this.inheritance=s,this.selfSize=0,this.vTablePtr=0,this.objectSize=this.inheritance.map(e=>e.classType.length).reduce((e,t)=>e+t,0),this.requireVPtr=!1,this.VPtrOffset=0,this.vTable={className:t,vFunctions:[]}}initialize(){this.fieldMap=new Map(this.fields.map(e=>[e.name,e])),this.isUnion?this.selfSize+=Math.max(...this.fields.map(e=>e.type.length)):this.selfSize+=this.fields.map(e=>e.type.length).reduce((e,t)=>e+t,0),this.objectSize=this.selfSize+this.inheritance.map(e=>e.classType.length).reduce((e,t)=>e+t,0)}get length(){if(!this.isComplete)throw new o.InternalError(`class ${this.name} is incomplete`);return this.objectSize}toWType(){throw new o.InternalError("could not to Wtype of func")}toString(){return this.name}toMangledName(){return"$"+this.fullName.replace(/::/g,"!!")+"$"}isDefine(){return this.isComplete}equals(e){return e===this}isSubClassOf(e){for(const t of this.inheritance)if(t.classType.isSubClassOf(e))return!0;return e===this}compatWith(e){return e===this||e instanceof ClassType&&(e.isSubClassOf(this)||this.isSubClassOf(e))}getField(e){if(!this.isComplete)throw new o.InternalError(`class ${this.name} is incomplete`);const t=this.fieldMap.get(e);if(t)return t;for(const t of this.inheritance){const n=t.classType.getField(e);if(n)return n}return null}getMember(e,t){const n=e.scopeManager.lookupFullName(this.fullName+"::"+t);if(null!==n)return n instanceof r.Type?null:n;const i=this.fieldMap.get(t);if(i)return i;for(const n of this.inheritance){const r=n.classType.getMember(e,t);if(r)return r}return null}setUpVPtr(){let e=0;for(const t of this.inheritance){if(t.classType.requireVPtr){this.requireVPtr=!0,this.VPtrOffset=t.classType.VPtrOffset+e,t.classType.vTable.vFunctions.map(e=>this.vTable.vFunctions.push({indexName:e.indexName,fullName:e.fullName}));break}e+=t.classType.objectSize}this.requireVPtr||(this.requireVPtr=!0,this.VPtrOffset=this.objectSize,this.objectSize+=4,this.selfSize+=4)}registerVFunction(e,t){const n=t.toIndexName(),r=e.scopeManager.getFullName(t.name+"@"+t.toMangledName()),i=this.vTable.vFunctions.filter(e=>e.indexName===n);0===i.length?this.vTable.vFunctions.push({indexName:n,fullName:r}):i[0].fullName=r}generateVTable(e,t){const n=4*this.vTable.vFunctions.length;this.vTablePtr=e.memory.allocData(n);for(let n=0;n<this.vTable.vFunctions.length;n++){const r=new u.WGetAddress(u.WMemoryLocation.DATA,t.location);r.offset=this.vTablePtr+4*n;const o=new s.AnonymousExpression(t.location,{type:c.PrimitiveTypes.int32,expr:new i.WAddressHolder(r,a.AddressType.RVALUE,t.location),isLeft:!0}),l=this.vTable.vFunctions[n].fullName;new s.ExpressionStatement(t.location,new s.AssignmentExpression(t.location,"=",o,new s.AnonymousExpression(t.location,{type:c.PrimitiveTypes.int32,isLeft:!1,expr:new u.WGetFunctionAddress(l,t.location)}))).codegen(e)}}getVCallInfo(e){for(let t=0;t<this.vTable.vFunctions.length;t++)if(this.vTable.vFunctions[t].indexName===e)return[this.VPtrOffset,4*t];let t=0;for(const n of this.inheritance){const r=n.classType.vTable.vFunctions;for(let t=0;t<r.length;t++)if(r[t].indexName===e)return[n.classType.VPtrOffset,4*t];t+=n.classType.objectSize}return null}}n.ClassType=ClassType},{".":"Rt13","../codegen/address":"JsMC","../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../wasm/expression":"yB6U","./primitive_type":"HxYe"}],ZWBU:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../wasm"),s=e("./class_type"),o=e("./index"),a=e("./primitive_type"),u=4;class CompoundType extends o.Type{constructor(e){super(),this.elementType=e}get length(){return u}equals(e){return super.equals(e)&&e instanceof CompoundType&&this.elementType.equals(e.elementType)}compatWith(e){return super.compatWith(e)&&e instanceof CompoundType&&this.elementType.compatWith(e.elementType)}}n.CompoundType=CompoundType;class PointerType extends CompoundType{toString(){return this.elementType.toString()+"*"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"*"}compatWith(e){return this.elementType.equals(a.PrimitiveTypes.void)||e instanceof PointerType&&e.elementType.equals(a.PrimitiveTypes.void)||super.compatWith(e)||e instanceof ArrayType&&this.elementType.compatWith(e.elementType)}}n.PointerType=PointerType;class ReferenceType extends CompoundType{constructor(e){if(super(e),e instanceof ReferenceType)throw new r.InternalError("ref to ref is illegal")}}n.ReferenceType=ReferenceType;n.LeftReferenceType=class LeftReferenceType extends ReferenceType{toString(){return this.elementType.toString()+"&"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&"}};n.RightReferenceType=class RightReferenceType extends ReferenceType{toString(){return this.elementType.toString()+"&&"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&&"}};class ArrayType extends o.Type{constructor(e,t){super(),this.elementType=e,this.size=t}get length(){return this.elementType.length*this.size}equals(e){return super.equals(e)&&e instanceof ArrayType&&this.elementType.equals(e.elementType)&&this.size===e.size}toString(){return this.elementType.toString()+`[${this.length}]`}toWType(){throw new r.InternalError("could not to Wtype of func")}toMangledName(){return this.elementType.toMangledName()+"["+this.size+"]"}compatWith(e){return e.equals(this)||e instanceof ArrayType&&this.elementType.compatWith(e.elementType)||e instanceof PointerType&&e.elementType.equals(this.elementType)||this.elementType instanceof s.ClassType&&e instanceof PointerType&&e.elementType.compatWith(this.elementType)}}n.ArrayType=ArrayType},{"../common/error":"nOPH","../wasm":"Jo9c","./class_type":"vaEy","./index":"Rt13","./primitive_type":"HxYe"}],pe9I:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type/primitive_type");function i(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;if(e[0].equals){for(let n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}n.isArrayEqual=i,n.getPrimitiveTypeFromSpecifiers=function(e){for(const[t,n]of r.PrimitiveTypesNameMap.entries())for(const r of t)if(i(e,r))return n();return null};const s=["void","bool","char","long","int","unsigned","signed","double","float","short"];n.isTypeSpecifier=function(e){return-1!==s.indexOf(e)};const o=["const","volatile"];n.isTypeQualifier=function(e){return-1!==o.indexOf(e)};const a="0123456789ABCDEF";n.toHexString=function(e){let t="";for(let n=0;n<8;n++)t=a.charAt(e%16)+t,e=parseInt((e/16).toString());return 7===t.length&&console.log("fuck"),"0x"+t},n.fromBytesToString=function(e,t,n){let r="";if(void 0===n){let n=t,i=e.getUint8(n);for(;0!==i;)r+=String.fromCharCode(i),n++,i=e.getUint8(n)}else for(let i=t;i<t+n;i++)r+=String.fromCharCode(e.getUint8(i));return r},n.getIndent=function(e){let t="";for(let n=0;n<e;n++)t+="\t";return t}},{"../type/primitive_type":"HxYe"}],VPTZ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/utils"),s=e("../wasm/constant"),o=e("../wasm/section"),a=e("./class_type"),u=e("./compound_type"),c=e("./index"),l=e("./primitive_type");var p;!function(e){e[e.Normal=0]="Normal",e[e.Constructor=1]="Constructor",e[e.Destructor=2]="Destructor",e[e.MemberFunction=3]="MemberFunction"}(p=n.CppFunctionType||(n.CppFunctionType={}));n.TemplatePlaceholderType=class TemplatePlaceholderType extends c.Type{constructor(e){super(),this.index=e}get length(){throw new r.InternalError("unexpected")}toMangledName(){return"^$"+this.index+"^"}toWType(){throw new r.InternalError("unexpected")}toString(){return`[${this.index}]`}};class FunctionType extends c.Type{constructor(e,t,n,r,i){super(),this.name=e,this.returnType=t,this.parameterTypes=n,this.parameterNames=r,this.variableArguments=i,this.cppFunctionType=p.Normal,this.referenceClass=null,this.initList=[],this.parameterInits=[];for(let e=0;e<this.parameterTypes.length;e++){const t=this.parameterTypes[e];t instanceof u.ArrayType&&(this.parameterTypes[e]=new u.PointerType(t.elementType))}}get length(){return 0}equals(e){return super.equals(e)&&e instanceof FunctionType&&this.returnType.equals(e.returnType)&&i.isArrayEqual(this.parameterTypes,e.parameterTypes)}toString(){let e=this.name;return this.cppFunctionType===p.Constructor?e=this.referenceClass.name+"::"+this.referenceClass.name:this.cppFunctionType===p.Destructor?e="~"+this.referenceClass.name+"::"+this.referenceClass.name:this.cppFunctionType===p.MemberFunction&&(e=this.referenceClass.name+"::"+e),this.returnType.toString()+" "+e+"("+this.parameterTypes.map(e=>e.toString()).join(", ")+")"}toWType(){throw new r.InternalError("could not to Wtype of func")}toMangledName(){return this.parameterTypes.map(e=>e.toMangledName()).join(",")}toIndexName(){return this.cppFunctionType===p.Destructor?"~":this.name+"@"+this.parameterTypes.slice(1).map(e=>e.toMangledName()).join(",")}compatWith(e){return e.equals(this)}isMemberFunction(){return this.cppFunctionType===p.Destructor||this.cppFunctionType===p.MemberFunction}toWASMEncoding(){let e="";return this.returnType.equals(l.PrimitiveTypes.void)||this.returnType instanceof a.ClassType?e+="v":e+=o.WFunctionType.n2s(s.getNativeType(this.returnType.toWType())),this.parameterTypes.filter(e=>!(e instanceof a.ClassType)).map(t=>e+=o.WFunctionType.n2s(s.getNativeType(t.toWType()))),e}}n.FunctionType=FunctionType;n.UnresolvedFunctionOverloadType=class UnresolvedFunctionOverloadType extends c.Type{constructor(e){super(),this.functionLookupResult=e}equals(e){return!1}compatWith(e){return!1}toString(){return"[UnresolveFunctionOverloadType]"}get length(){return 0}toWType(){throw new r.InternalError("UnresolveFunctionOverloadType()")}toMangledName(){return"[UnresolveFunctionOverloadType]"}}},{"../common/error":"nOPH","../common/utils":"pe9I","../wasm/constant":"hpbE","../wasm/section":"1WA9","./class_type":"vaEy","./compound_type":"ZWBU","./index":"Rt13","./primitive_type":"HxYe"}],xWpI:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),s=e("./index");class TemplateType extends s.Type{get length(){throw new r.InternalError("unintent behavior")}toMangledName(){throw new r.InternalError("unintent behavior")}toWType(){throw new r.InternalError("unintent behavior")}toString(){throw new r.InternalError("unintent behavior")}}n.TemplateType=TemplateType,TemplateType.instance=new TemplateType;n.TemplateParameterPlaceHolderType=class TemplateParameterPlaceHolderType extends s.Type{constructor(e){super(),this.index=e}get length(){return 0}toMangledName(){return"^"+this.index}toWType(){throw new r.InternalError("unintent behavior")}toString(){return"^"+this.index}};n.FunctionTemplate=class FunctionTemplate extends i.FunctionEntity{constructor(e,t,n,r,i,o,a){super(e,t,n,r,!1,!0,s.AccessControl.Public),this.templateParams=i,this.functionBody=o,this.instanceMap=new Map,this.specializationMap=new Map,this.contextScope=a}}},{"../common/error":"nOPH","../common/symbol":"HcQt","./index":"Rt13"}],"y+tL":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol");class Scope{constructor(e,t,n){this.shortName=e,null===t?(this.parent=this,this.fullName=""):(this.parent=t,this.fullName=this.parent.fullName+"::"+this.shortName),this.children=[],this.map=new Map,this.isCpp=n,this.isInnerScope=!1}declare(e,t,n){const s=e.split("@")[0],o=this.map.get(s);if(o)if(o[0]instanceof i.FunctionEntity){if(!(t instanceof i.FunctionEntity))throw new r.SyntaxError(`redefine of ${e}`,n);if(!this.isCpp)throw new r.LanguageError("function overload is support only in C++",n);for(let s=0;s<o.length;s++){const a=o[s];if(!(a instanceof i.FunctionEntity))throw new r.SyntaxError(`redefine of ${e}`,n);if(a.fullName===t.fullName){if(a.isDefine()&&!t.isDefine())return;if(a.isDefine()&&t.isDefine())throw new r.SyntaxError(`redefine of ${e}`,n);if(!a.isDefine()&&t.isDefine())return void(o[s]=t);if(!a.isDefine()&&!t.isDefine())return}}o.push(t)}else{if(1!==o.length)throw new r.SyntaxError(`redefine of ${e}`,n);{const i=o[0];if(i.isDefine()&&!t.isDefine())return;if(i.isDefine()&&t.isDefine())throw new r.SyntaxError(`redefine of ${e}`,n);if(!i.isDefine()&&t.isDefine())return void(o[0]=t);if(!i.isDefine()&&!t.isDefine())return}}else this.map.set(s,[t])}getFullName(e){return"::"===e.slice(0,2)?e:this.fullName+"::"+e}getScope(e){if(0===e.length)return this;for(const t of this.children)if(t.shortName===e[0])return t.getScope(e.slice(1));return null}lookup(e){const t=e.split("::").filter(e=>e);if(t.length>1){const e=this.getScope(t.slice(0,t.length-1));return null===e?null:e.lookup(t[t.length-1])}if(t[0].includes("@")){const e=this.map.get(t[0].split("@")[0]);if(!e)return null;for(const n of e)if(n instanceof i.FunctionEntity&&n.name===t[0])return new FunctionLookUpResult([n]);return null}{const e=this.map.get(t[0]);return e?e[0]instanceof i.FunctionEntity?new FunctionLookUpResult(e):e[0]:null}}}n.Scope=Scope;class FunctionLookUpResult{constructor(e){this.functions=e,this.instance=null,this.instanceType=null,this.isDynamicCall=!1,this.templateArguments=[]}}n.FunctionLookUpResult=FunctionLookUpResult;n.ScopeManager=class ScopeManager{constructor(e){this.isCpp=e,this.root=new Scope("",null,e),this.currentScope=this.root,this.activeScopes=new Set([this.root]),this.scopeId=0,this.tmpVarId=0,this.tmpActiveScopes=[],this.savedScope=[]}enterUnnamedScope(){const e=new Scope("$"+this.scopeId++,this.currentScope,this.isCpp);e.isInnerScope=!0,this.currentScope.children.push(e),this.activeScopes.add(e),this.currentScope=e}enterScope(e){const t=new Scope(e,this.currentScope,this.isCpp);this.currentScope.children.push(t),this.activeScopes.add(t),this.currentScope=t}exitScope(){this.activeScopes.delete(this.currentScope),this.currentScope=this.currentScope.parent,this.tmpActiveScopes.map(e=>this.activeScopes.delete(e)),this.tmpActiveScopes=[]}lookupAnyName(e){return"::"===e.slice(0,2)?this.lookupFullName(e):this.lookupShortName(e)}lookupFullName(e){if("::"!==e.slice(0,2))return null;const t=e.split("::"),n=t[t.length-1],r=this.root.getScope(t.slice(1,t.length-1));return null===r?null:r.lookup(n)}lookupShortName(e){const t=Array.from(this.activeScopes.keys()).map(t=>t.lookup(e)).filter(e=>null!==e).reverse();let n=null;const r=new Set;for(const e of t)if(e instanceof FunctionLookUpResult)if(null===n)n=new FunctionLookUpResult([...e.functions]),e.functions.map(e=>r.add(e.fullName));else for(const t of e.functions)r.has(t.fullName)||(r.add(t.fullName),n.functions.push(t));else if(null===n)return e;return n}declareInScope(e,t,n,i){const s=this.innerLookUp(e);if(null!==s){if(!s.getType().equals(t.getType()))throw new r.SyntaxError(`conflict declaration of ${e}`,i)}else n.declare(e,t,i);return n.fullName+"::"+e}defineInScope(e,t,n,i){const s=this.innerLookUp(e);if(null!==s){if(s.isDefine())throw new r.SyntaxError(`redefine of ${e}`,i);if(!s.getType().equals(t.getType()))throw new r.SyntaxError(`conflict declaration of ${e}`,i)}return n.declare(e,t,i),n.fullName+"::"+e}declare(e,t,n){return this.declareInScope(e,t,this.currentScope,n)}define(e,t,n){return this.defineInScope(e,t,this.currentScope,n)}getFullName(e){return"::"===e.slice(0,2)?e:this.currentScope.fullName+"::"+e}isRoot(){return this.currentScope===this.root}allocTmpVarName(){return"$__"+this.tmpVarId++}lookupScope(e){let t=this.root;const n=e.split("::");if("::"===e.substr(0,2)){for(let e=1;e<n.length;e++){const r=t.children.filter(t=>t.shortName===n[e]);if(1!==r.length)return null;t=r[0]}return t}for(const t of this.activeScopes){const n=this.lookupScope(t.fullName+"::"+e);if(n)return n}return null}activeScope(e){const t=this.lookupScope(e);return!!t&&(this.tmpActiveScopes.push(t),this.activeScopes.add(t),!0)}enterTempScope(e){this.savedScope.push(this.currentScope),this.currentScope=e}exitTempScope(){const e=this.savedScope.pop();if(!e)throw new r.InternalError("exitTempScope");this.currentScope=e}innerLookUp(e){const t=e.split("@")[0],n=this.lookupFullName(this.currentScope.fullName+"::"+t);let r=null;if(n instanceof FunctionLookUpResult){const t=n.functions.filter(t=>t.fullName===this.currentScope.fullName+"::"+e);t.length>0&&(r=t[0])}else r=n;return r}}},{"../common/error":"nOPH","../common/symbol":"HcQt"}],"2REp":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.KeyWords=["and","and_eq","asm","auto","bitand","bitor","bool","break","case","catch","char","char16_t","char32_t","class","compl","concept","const","const_cast","continue","default","delete","do","double","dynamic_cast","else","enum","explicit","export","extern","false","float","for","friend","goto","if","inline","int","long","namespace","new","not","not_eq","operator","or","or_eq","private","protected","public","register","reinterpret_cast","return","short","signed","sizeof","static","static_cast","struct","switch","template","this","throw","true","try","typedef","typeid","typename","union","unsigned","using","virtual","void","volatile","wchar_t","while","xor","xor_eq"]},{}],X3yq:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/ast"),i=e("../common/error"),s=e("../common/symbol"),o=e("../type/primitive_type"),a=e("../wasm"),u=e("../wasm/statement"),c=e("./address"),l=e("./conversion"),p=e("./scope");function h(e,t,n){if(n.expr instanceof p.FunctionLookUpResult)throw new i.SyntaxError("illegal function name",t);n.isLeft&&n.expr.isPure()||(n.type.equals(o.PrimitiveTypes.void)?e.submitStatement(new u.WExprStatement(n.expr.fold(),t.location)):e.submitStatement(new u.WDrop(n.expr.fold(),t.location)))}n.recycleExpressionResult=h,r.CompoundStatement.prototype.codegen=function(e){e.enterScope(),this.body.map(t=>t.codegen(e)),e.exitScope(this)},r.LabeledStatement.prototype.codegen=function(e){this.body.codegen(e)},r.GotoStatement.prototype.codegen=function(e){throw new i.SyntaxError("goto statement is not support currently",this)},r.SwitchStatement.prototype.codegen=function(e){const t=e.switchContext,n=e.getStatementContainer(),h=[];if(e.setStatementContainer(h),e.switchContext={cases:[]},0!==h.length)throw new i.SyntaxError("illegal content in switch out side all case",this);if(!(this.body instanceof r.CompoundStatement))throw new i.SyntaxError("switch body must be compoundstatement",this);const f=this.body.body.filter(e=>e instanceof r.CaseStatement).length;let m=f;e.breakStack.push(e.blockLevel),e.blockLevel+=f,this.body.codegen(e);const d=e.switchContext.cases.filter(e=>null===e.value);if(d.length>1)throw new i.SyntaxError("only 1 default case is support",this);if(1===d.length)for(let t=0;t<e.switchContext.cases.length;t++)if(null===e.switchContext.cases[t].value){m=t;break}const g=e.memory.allocStack(4),y=new c.WAddressHolder(g,s.AddressType.STACK,this.location),w=l.doValueTransform(e,this.discriminant.codegen(e),this);if(!(w.type instanceof o.IntegerType)||w.expr instanceof p.FunctionLookUpResult)throw new i.SyntaxError("illegal switch cond type",this);e.setStatementContainer(n),e.submitStatement(y.createStore(e,w.type,w.expr,!0));let A=new u.WBlock([],this.location);const E=y.createLoad(e,w.type);for(let t=0;t<e.switchContext.cases.length;t++){const n=e.switchContext.cases[t].value;null!==n&&A.body.push(new u.WBrIf(t,new a.WBinaryOperation(a.I32Binary.eq,E,n)))}A.body.push(new u.WBr(m,this.location));for(let t=0;t<e.switchContext.cases.length;t++)A=new u.WBlock([A,...e.switchContext.cases[t].statements],this.location);e.submitStatement(A),e.switchContext=t},r.CaseStatement.prototype.codegen=function(e){if(null===e.switchContext)throw new i.SyntaxError("case out of switch",this);const t={value:null,statements:[]};if(e.switchContext.cases.push(t),null!==this.test){const n=this.test.codegen(e);if(n.expr instanceof p.FunctionLookUpResult)throw new i.SyntaxError("func name not support",this);if(n.expr=n.expr.fold(),!(n.expr instanceof a.WConst&&n.type instanceof o.IntegerType))throw new i.SyntaxError("case value must be integer or enum",this);t.value=n.expr}e.setStatementContainer(t.statements),e.blockLevel--,this.body.codegen(e)},r.ExpressionStatement.prototype.codegen=function(e){h(e,this,this.expression.codegen(e))},r.IfStatement.prototype.codegen=function(e){const t=[],n=[],r=this.test.codegen(e);r.expr=l.doConversion(e,o.PrimitiveTypes.int32,r,this),r.type=o.PrimitiveTypes.int32;const i=e.getStatementContainer();e.setStatementContainer(t),e.blockLevel++,this.consequent.codegen(e),null!==this.alternate&&(e.setStatementContainer(n),this.alternate.codegen(e)),e.setStatementContainer(i),e.blockLevel--,null!==this.alternate?e.submitStatement(new u.WIfElseBlock(r.expr.fold(),t,n,this.location)):e.submitStatement(new u.WIfElseBlock(r.expr.fold(),t,null,this.location))},r.WhileStatement.prototype.codegen=function(e){const t=[],n=[],i=e.getStatementContainer();e.setStatementContainer(n);const s=new r.UnaryExpression(this.location,"!",this.test).codegen(e);s.expr=l.doConversion(e,o.PrimitiveTypes.int32,s,this),s.type=o.PrimitiveTypes.int32,e.submitStatement(new u.WBrIf(1,s.expr.fold(),this.location)),e.continueStack.push(e.blockLevel+2),e.breakStack.push(e.blockLevel+1),e.blockLevel+=2,this.body.codegen(e),e.blockLevel-=2,e.breakStack.pop(),e.continueStack.pop(),e.submitStatement(new u.WBr(0,this.location)),e.setStatementContainer(t),e.submitStatement(new u.WLoop(n,this.location)),e.setStatementContainer(i),e.submitStatement(new u.WBlock(t,this.location))},r.DoWhileStatement.prototype.codegen=function(e){const t=[],n=[],r=e.getStatementContainer();e.setStatementContainer(n),e.continueStack.push(e.blockLevel+2),e.breakStack.push(e.blockLevel+1),e.blockLevel+=2,this.body.codegen(e),e.blockLevel-=2,e.continueStack.pop(),e.breakStack.pop(),e.setStatementContainer(t),e.submitStatement(new u.WBlock(n,this.location));const i=this.test.codegen(e);i.expr=l.doConversion(e,o.PrimitiveTypes.int32,i,this),i.type=o.PrimitiveTypes.int32,e.submitStatement(new u.WBrIf(0,i.expr.fold(),this.location)),e.setStatementContainer(r),e.submitStatement(new u.WLoop(t,this.location))},r.ForStatement.prototype.codegen=function(e){e.enterScope(),null!==this.init&&(this.init instanceof r.Declaration?this.init.codegen(e):h(e,this,this.init.codegen(e)));const t=[],n=[],i=[],s=e.getStatementContainer();if(e.setStatementContainer(n),e.continueStack.push(e.blockLevel+3),e.breakStack.push(e.blockLevel+1),e.blockLevel+=3,this.body instanceof r.CompoundStatement?this.body.body.map(t=>t.codegen(e)):this.body.codegen(e),e.blockLevel+=3,e.continueStack.pop(),e.breakStack.pop(),e.setStatementContainer(i),null!==this.test){const t=new r.UnaryExpression(this.location,"!",this.test).codegen(e);t.expr=l.doConversion(e,o.PrimitiveTypes.int32,t,this),t.type=o.PrimitiveTypes.int32,e.submitStatement(new u.WBrIf(1,t.expr.fold(),this.location))}e.submitStatement(new u.WBlock(n,this.location)),null!==this.update&&h(e,this,this.update.codegen(e)),e.submitStatement(new u.WBr(0,this.location)),e.setStatementContainer(t),e.submitStatement(new u.WLoop(i,this.location)),e.setStatementContainer(s),e.submitStatement(new u.WBlock(t,this.location)),e.exitScope(this)},r.ContinueStatement.prototype.codegen=function(e){if(0===e.continueStack.length)throw new i.SyntaxError("continue is not in while/do-while/for",this);const t=e.continueStack[e.continueStack.length-1];e.submitStatement(new u.WBr(e.blockLevel-t,this.location))},r.BreakStatement.prototype.codegen=function(e){if(0===e.breakStack.length)throw new i.SyntaxError("break is not in while/do-while/for",this);const t=e.breakStack[e.breakStack.length-1];e.submitStatement(new u.WBr(e.blockLevel-t,this.location))},r.UsingStatement.prototype.codegen=function(e){const t=this.type.deduceType(e);e.scopeManager.define(this.name.name,t,this)},r.NameSpaceBlock.prototype.codegen=function(e){e.scopeManager.enterScope(this.namespace.name),this.statements.map(t=>t.codegen(e)),e.exitScope(this)},r.UsingNamespaceStatement.prototype.codegen=function(e){if(!e.scopeManager.activeScope(this.namespace.name))throw new i.SyntaxError(`${this.namespace.name} is not a namespace / class`,this)},r.UsingItemStatement.prototype.codegen=function(e){const t=e.scopeManager.lookupAnyName(this.identifier.name);if(null===t)throw new i.SyntaxError(`undefine symbol ${this.identifier.name}`,this);const n=this.identifier.name.split("::");t instanceof p.FunctionLookUpResult?t.functions.map(t=>e.scopeManager.define(t.name,t)):e.scopeManager.define(n[n.length-1],t,this)},n.statement=function(){return""}},{"../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/statement":"0h1i","./address":"JsMC","./conversion":"Gzzz","./scope":"y+tL"}],vue3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/ast"),i=e("../../common/error"),s=e("../../common/error"),o=e("../../type"),a=e("../../type/class_type"),u=e("../../type/compound_type"),c=e("../../type/function_type"),l=e("../../type/primitive_type"),p=e("../../wasm/expression"),h=e("../function"),f=e("../scope"),m=e("../statement"),d=e("./overload");function g(e,t,n){if("::"===n.slice(0,2))return e===n;const r=t.split("::");return r.slice(0,r.length-1).join("::")+"::"+n===e}n.getCtorStmts=function(e,t,n){const o=r.Node.getEmptyLocation();if(t.type.cppFunctionType!==c.CppFunctionType.Constructor||null===t.type.referenceClass)throw new i.InternalError("getCtorStmts()");const h=t.type.referenceClass,m=t.type.initList,y=new Map,w=[];for(const t of m)if(t.isType){let i=!1;for(let a=0;a<h.inheritance.length;a++)if(g(h.inheritance[a].classType.fullName,h.fullName,t.key.name)){const u=h.inheritance[a].classType,c=u.fullName+"::#"+u.name,l=e.scopeManager.lookupFullName(c);if(null===l||!(l instanceof f.FunctionLookUpResult))throw new s.SyntaxError(`the base class ${t.key.name}`+" construtor parameters mismatch",n);w[a]=new r.ExpressionStatement(o,new r.CallExpression(o,new r.Identifier(o,c),[new r.Identifier(o,"this"),...t.value])),i=!0}if(!i)throw new s.SyntaxError(`class ${t.key.name}`+` is not base class of ${h.name}`,n)}else{const e=t.key.name;if(1!==t.value.length)throw new s.SyntaxError("the number of argument to init "+e+` is incorrect, exepct 1, actual ${t.value.length}`,n);if(null===h.getField(e))throw new s.SyntaxError(`unknown field ${e} in class ${h.name}`,n);y.set(e,t.value[0])}for(let t=0;t<h.inheritance.length;t++)if(!w[t]){const i=h.inheritance[t].classType,a=i.fullName+"::#"+i.name,u=e.scopeManager.lookupFullName(a);if(null===u||!(u instanceof f.FunctionLookUpResult))throw new s.SyntaxError(`the base class ${i.name}`+" contains not constructor",n);w[t]=new r.ExpressionStatement(o,new r.CallExpression(o,new r.Identifier(o,a),[new r.Identifier(o,"this")]))}const A=[...w];for(const t of h.fields){const i=new r.MemberExpression(o,new r.Identifier(o,"this"),!0,new r.Identifier(o,t.name));if(void 0!==y.get(t.name))A.push(new r.ExpressionStatement(o,new r.AssignmentExpression(o,"=",i,y.get(t.name))));else if(null!==t.initializer)if(t.initializer instanceof r.ObjectInitializer){if(!(t.type instanceof a.ClassType))throw new s.SyntaxError("only class type could apply object initializer",n);const e=t.type.fullName+"::#"+t.type.name,u=new r.Identifier(o,e),c=new r.UnaryExpression(o,"&",i),l=new r.CallExpression(o,u,[c,...t.initializer.argus]);A.push(new r.ExpressionStatement(o,l))}else A.push(new r.ExpressionStatement(o,new r.AssignmentExpression(o,"=",i,t.initializer)));else if(t.type instanceof a.ClassType){const t=h.fullName+"#"+h.name;d.isFunctionExists(e,t,[new u.PointerType(h)])&&A.push(new r.ExpressionStatement(o,new r.CallExpression(o,new r.Identifier(o,t),[new r.UnaryExpression(o,"&",i)])))}}if(h.requireVPtr){const t=new r.Identifier(o,"this").codegen(e);t.type=new u.PointerType(l.PrimitiveTypes.char);const n=new r.BinaryExpression(o,"+",new r.AnonymousExpression(o,t),r.IntegerConstant.fromNumber(o,h.VPtrOffset)).codegen(e);n.type=new u.PointerType(l.PrimitiveTypes.int32);const i=new r.UnaryExpression(o,"*",new r.AnonymousExpression(o,n)),s=new p.WGetAddress(p.WMemoryLocation.DATA,o);s.offset=h.vTablePtr;const a=new r.AnonymousExpression(o,{type:l.PrimitiveTypes.int32,expr:s,isLeft:!1});A.push(new r.ExpressionStatement(o,new r.AssignmentExpression(o,"=",i,a)))}return A},n.getDtorStmts=function(e,t,n){const s=r.Node.getEmptyLocation();if(t.type.cppFunctionType!==c.CppFunctionType.Destructor||null===t.type.referenceClass)throw new i.InternalError("getDtorStmts()");const o=[],u=t.type.referenceClass;for(const t of u.fields){const n=new r.MemberExpression(s,new r.Identifier(s,"this"),!0,new r.Identifier(s,t.name));if(t.type instanceof a.ClassType){const t=u.fullName+"~"+u.name;d.isFunctionExists(e,t,[],u)&&o.push(new r.ExpressionStatement(s,new r.CallExpression(s,new r.Identifier(s,t),[new r.UnaryExpression(s,"&",n)])))}}for(const t of u.inheritance){const n=t.classType.fullName+"::~"+t.classType.name;null!==e.scopeManager.lookupFullName(n)&&o.push(new r.ExpressionStatement(s,new r.CallExpression(s,new r.MemberExpression(s,new r.Identifier(s,"this"),!0,new r.Identifier(s,"~"+t.classType.name)),[])))}return o},n.triggerDestructor=function(e,t,n){const s=r.Node.getEmptyLocation(),o=t.type;if(!(o instanceof a.ClassType))throw new i.InternalError("triggerDestructor()");const u=o.fullName+"::~"+o.name;null!==e.scopeManager.lookupFullName(u)&&m.recycleExpressionResult(e,n,new r.CallExpression(s,new r.MemberExpression(s,new r.Identifier(s,t.name),!1,new r.Identifier(s,"~"+o.name)),[]).codegen(e))},n.generateDefaultCtors=function(e,t,n){if(null===e.scopeManager.lookupFullName(t.fullName+"::#"+t.name)){const r="#"+t.name,i=new c.FunctionType(r,l.PrimitiveTypes.void,[new u.PointerType(t)],["this"],!1);i.cppFunctionType=c.CppFunctionType.Constructor,i.referenceClass=t,i.name=r,h.defineFunction(e,i,[],o.AccessControl.Public,n)}if(null===e.scopeManager.lookupFullName(t.fullName+"::~"+t.name)){const r="~"+t.name,i=new c.FunctionType(r,l.PrimitiveTypes.void,[new u.PointerType(t)],["this"],!1);i.cppFunctionType=c.CppFunctionType.Destructor,i.referenceClass=t,i.name=r,h.defineFunction(e,i,[],o.AccessControl.Public,n)}}},{"../../common/ast":"URi4","../../common/error":"nOPH","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../../wasm/expression":"yB6U","../function":"XWPX","../scope":"y+tL","../statement":"X3yq","./overload":"A7U9"}],XWPX:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("long"),i=e("../common/ast"),s=e("../common/error"),o=e("../common/symbol"),a=e("../type"),u=e("../type/class_type"),c=e("../type/compound_type"),l=e("../type/function_type"),p=e("../type/primitive_type"),h=e("../wasm"),f=e("../wasm/constant"),m=e("../wasm/expression"),d=e("../wasm/node"),g=e("../wasm/section"),y=e("../wasm/statement"),w=e("./address"),A=e("./conversion"),E=e("./cpp/lifecycle"),T=e("./cpp/overload"),S=e("./declaration"),v=e("./scope"),C=e("./statement");function x(e,t,n){if(t instanceof i.FunctionDeclarator){s.assertType(t.parameters,i.ParameterList);const{types:r,names:o,inits:a,isVariableArguments:u}=t.parameters.codegen(e),c=t.declarator instanceof i.IdentifierDeclarator?S.getDeclaratorIdentifierName(t.declarator):"",p=new l.FunctionType(c,n,r,o,u);let h=p.parameterInits.length-1;for(;h>=0&&null!==p.parameterInits[h];h--)if(u)throw new s.SyntaxError("var argument function could not apply default param",t);for(h--;h>=0;h--)if(null!==p.parameterInits[h])throw new s.SyntaxError("illegal init expression",t);return p.parameterInits=a,n.isStatic&&(p.isStatic=!0,n.isStatic=!1),n.isVirtual&&(p.isVirtual=!0,n.isVirtual=!1),p}if(null!=t.declarator){const r=S.mergeTypeWithDeclarator(e,n,t);return x(e,t.declarator,r)}throw new s.SyntaxError("UnsupportNodeType:"+t.constructor.name,t)}function _(e,t,n,r,a){const d=i.Node.getEmptyLocation(),g=t.name+"@"+t.toMangledName(),w=e.scopeManager.getFullName(g),T=new o.FunctionEntity(g,w,e.fileName,t,!1,!0,r);e.scopeManager.define(g,T,a),e.enterFunction(T);const S=[],v=[];let C=0;for(let t=T.type.parameterTypes.length-1;t>=0;t--){const n=T.type.parameterTypes[t],r=T.type.parameterNames[t];if(!r)throw new s.SyntaxError("unnamed parameter",a);(n instanceof u.ClassType||T.type.variableArguments)&&(e.scopeManager.define(r,new o.Variable(r,e.scopeManager.getFullName(r),e.fileName,n,o.AddressType.STACK,C),a),C+=A.getInStackSize(n.length))}for(let t=0;t<T.type.parameterTypes.length;t++){const n=T.type.parameterTypes[t],r=T.type.parameterNames[t];if(!r)throw new s.SyntaxError("unnamed parameter",a);n instanceof u.ClassType||T.type.variableArguments||(v.push(n.toWType()),e.scopeManager.define(r,new o.Variable(r,e.scopeManager.getFullName(r),e.fileName,n,o.AddressType.LOCAL,e.memory.allocLocal(n.toWType(),!0)),a))}const x=T.type.returnType;x.equals(p.PrimitiveTypes.void)||(x instanceof u.ClassType||x instanceof c.ArrayType?S.push(h.WType.i32):S.push(f.getNativeType(x.toWType())));const _=[],b=e.getStatementContainer();e.setStatementContainer(_),T.$sp=e.memory.allocLocal(h.WType.u32),e.submitStatement(new y.WSetLocal(h.WType.u32,T.$sp,new m.WGetGlobal(h.WType.u32,"$sp",d),d));const F=new h.WConst(h.WType.i32,"0",d);if(e.submitStatement(new y.WSetGlobal(h.WType.u32,"$sp",new h.WBinaryOperation(h.I32Binary.add,new m.WGetLocal(h.WType.u32,T.$sp,d),F,d),d)),t.cppFunctionType===l.CppFunctionType.Constructor){E.getCtorStmts(e,T,a).map(t=>t.codegen(e))}if(n.map(t=>t.codegen(e)),t.cppFunctionType===l.CppFunctionType.Destructor){E.getDtorStmts(e,T,a).map(t=>t.codegen(e))}if(F.constant=e.memory.stackPtr.toString(),!T.type.returnType.equals(p.PrimitiveTypes.void)){let t=_;for(;t.length>0&&t[t.length-1]instanceof h.WBlock||t[t.length-1]instanceof h.WIfElseBlock||t[t.length-1]instanceof h.WLoop;){const e=t[t.length-1];if(e instanceof h.WBlock||e instanceof h.WLoop)t=e.body;else{if(!(e instanceof h.WIfElseBlock))throw new s.SyntaxError(`not all path of function contains return in ${T.fullName}`,a);if(null===e.alternative)throw new s.SyntaxError("not all path of function contains return in "+`${T.fullName}`,a);t=e.alternative}}if(0===t.length||!(t[t.length-1]instanceof h.WReturn))throw new s.SyntaxError(`not all path of function contains return in ${T.fullName}`,a);_.length>0&&_[_.length-1]instanceof h.WIfElseBlock&&new i.ReturnStatement(d,i.IntegerConstant.getZero()).codegen(e)}e.exitFunction(),e.setStatementContainer(b),e.submitFunction(new h.WFunction(T.fullName,S,v,e.memory.localTypes,_,a.location))}function b(e,t,n){const r=t.codegen(e);if(r.expr instanceof v.FunctionLookUpResult)throw new s.SyntaxError("illegal template parameter",n);if(!(r.type instanceof p.ArithmeticType))throw new s.SyntaxError("illegal template parameter",n);const i=r.expr.fold();if(!(i instanceof h.WConst))throw new s.SyntaxError("template parameter must be static value",n);return i.constant}function F(e,t,n){const r=new i.Identifier(n.location,"i");return new i.ForStatement(n.location,new i.Declaration(n.location,["int"],[new i.InitDeclarator(n.location,new i.IdentifierDeclarator(n.location,r),i.IntegerConstant.getZero())]),new i.BinaryExpression(n.location,"<",r,e),new i.UnaryExpression(n.location,"++",r),new i.CompoundStatement(n.location,n.location,n.location,t(r)))}n.parseFunctionDeclarator=x,n.declareFunction=function(e,t,n,r,i){const s=t.name+"@"+t.toMangledName(),a=e.scopeManager.getFullName(s),l=new o.FunctionEntity(s,a,e.fileName,t,!1,!1,r);if(n){l.isLibCall=!0,l.name=t.name,l.fullName=e.scopeManager.getFullName(t.name);const n=[],r=[];for(let e=l.type.parameterTypes.length-1;e>=0;e--){const t=l.type.parameterTypes[e];t instanceof u.ClassType||t instanceof c.ArrayType||l.type.variableArguments&&e===l.type.parameterTypes.length-1||r.push(t.toWType())}const i=l.type.returnType;i.equals(p.PrimitiveTypes.void)||(i instanceof u.ClassType||i instanceof c.ArrayType?n.push(h.WType.i32):n.push(f.getNativeType(i.toWType()))),e.scopeManager.lookupFullName(l.fullName)||e.imports.push({name:l.fullName,type:new g.WFunctionType(n,r)})}e.scopeManager.declare(t.name,l,i)},n.defineFunction=_,n.evaluateConstantExpression=b,i.ParameterList.prototype.codegen=function(e){const t=this.parameters.map(t=>S.parseDeclaratorOrAbstractDeclarator(e,t.declarator,S.parseTypeFromSpecifiers(e,t.specifiers,this)));return{types:t.map(e=>e[0]),names:t.map(e=>e[1]?e[1]:""),inits:this.parameters.map(t=>t.init?b(e,t.init,this):null),isVariableArguments:this.variableArguments}},i.FunctionDefinition.prototype.codegen=function(e){const t=S.parseTypeFromSpecifiers(e,this.specifiers,this);if(null==t)throw new s.SyntaxError("illegal return type",this);const n=x(e,this.declarator,t);if(null==n)throw new s.SyntaxError("illegal function definition",this);_(e,n,this.body.body,a.AccessControl.Public,this)},i.CallExpression.prototype.codegen=function(e){const t=this.callee.codegen(e);let n;t.type instanceof c.PointerType&&(t.type=t.type.elementType);let a=null;const f=t.expr,g=[];let E=!1,S=null;if(f instanceof v.FunctionLookUpResult){if(!(f instanceof v.FunctionLookUpResult))throw new s.SyntaxError(`you can just call a function, not a ${t.type.toString()}`,this);let r=f.functions[0];if(e.isCpp()&&(r=T.doFunctionOverloadResolution(e,f,this.arguments.map(t=>A.doTypeTransfrom(t.deduceType(e))),this)),null===r)throw new s.SyntaxError(`no matching function for ${f.functions[0].name}`,this);if(a=r,(n=r.type).isMemberFunction()){if(null===f.instance||null===f.instanceType)throw new s.SyntaxError("call a member function must bind a object",this);if(g.push({expr:f.instance.createLoadAddress(e),type:new c.PointerType(f.instanceType),isLeft:!1}),n.isVirtual&&f.isDynamicCall){E=!0;const t=f.instanceType.getVCallInfo(a.type.toIndexName());if(null===t)throw new s.SyntaxError(`${a.name} is not a virtual function`,this);const[n,r]=t,i=new h.WLoad(h.WType.i32,new h.WBinaryOperation(h.I32Binary.add,f.instance.createLoadAddress(e),new h.WConst(h.WType.i32,n.toString(),this.location),this.location),m.WMemoryLocation.RAW,this.location);S=new h.WLoad(h.WType.i32,new h.WBinaryOperation(h.I32Binary.add,i,new h.WConst(h.WType.i32,r.toString(),this.location),this.location),m.WMemoryLocation.RAW,this.location)}}}else{if(!(t.type instanceof l.FunctionType))throw new s.SyntaxError(`you can just call a function, not a ${t.type.toString()}`,this);n=t.type}let C=0;const x=[...g.map(e=>e.type),...this.arguments.map(t=>t.deduceType(e))];if(n.variableArguments)for(let t=x.length-1;t>n.parameterTypes.length-1;t--){const n=x[t];if(n instanceof u.ClassType)throw new s.SyntaxError("class type could not be variable arguments",this);const r=A.doTypePromote(e,n,this);C+=A.getInStackSize(r.length)}for(let e=n.parameterTypes.length-1;e>=0;e--){let t=n.parameterTypes[e];t instanceof c.ArrayType&&(t=new c.PointerType(t.elementType)),t instanceof u.ClassType?C+=A.getInStackSize(t.length):n.variableArguments&&(C+=A.getInStackSize(t.length))}e.memory.stackPtr-=C;const _=[...g,...this.arguments.map(t=>t.codegen(e))];if(e.memory.stackPtr+=C,n.parameterTypes.length>_.length)for(let e=_.length;e<n.parameterTypes.length;e++){const t=n.parameterInits[e];if(null===t)throw new s.SyntaxError("function call parameters number mismatch",this);_.push({type:n.parameterTypes[e],expr:new h.WConst(n.parameterTypes[e].toWType(),t,this.location),isLeft:!1})}const b=[];let F=e.memory.stackPtr;if(n.variableArguments)for(let t=_.length-1;t>n.parameterTypes.length-1;t--){const n=_[t];if(n.type instanceof u.ClassType)throw new s.SyntaxError("class type could not be variable arguments",this);const r=A.doValuePromote(e,n,this);if(F-=A.getInStackSize(r.type.length),r.expr instanceof v.FunctionLookUpResult)throw new s.SyntaxError("unsupport function name",this);b.push(new m.WFakeExpression(new w.WAddressHolder(F,o.AddressType.GLOBAL_SP,this.location).createStore(e,r.type,r.expr,!0),this.location))}else if(n.parameterTypes.length<this.arguments.length)throw new s.SyntaxError("function call parameters number mismatch",this);for(let t=n.parameterTypes.length-1;t>=0;t--){let a=n.parameterTypes[t];a instanceof c.ArrayType&&(a=new c.PointerType(a.elementType));const l=_[t];if(a instanceof u.ClassType){const t=l.type,n=new c.PointerType(a);F-=A.getInStackSize(a.length);const u=new i.AnonymousExpression(this.location,{type:n,isLeft:!1,expr:new w.WAddressHolder(F,o.AddressType.GLOBAL_SP,this.location).createLoadAddress(e)}),p=new i.AnonymousExpression(this.location,l),h=a.fullName+"::#"+a.name;let f;if(T.isFunctionExists(e,h,[n,t],null))f=new i.CallExpression(this.location,new i.Identifier(this.location,h),[u,p]).codegen(e);else{const t=a.length;f=new i.CallExpression(this.location,new i.Identifier(this.location,"::memcpy"),[new i.UnaryExpression(this.location,"&",u),new i.UnaryExpression(this.location,"&",p),new i.IntegerConstant(this.location,10,r.fromInt(t),t.toString(),null)]).codegen(e)}if(!(f.expr instanceof d.WExpression))throw new s.SyntaxError("illegal arguments",this);b.push(f.expr)}else{const t=A.doConversion(e,a,l,this,!1,!0).fold();n.variableArguments?(F-=A.getInStackSize(a.length),b.push(new m.WFakeExpression(new w.WAddressHolder(F,o.AddressType.GLOBAL_SP,this.location).createStore(e,l.type,t,!0),this.location))):b.push(t)}}b.reverse();const I=[];let L;return 0!==F&&(b.push(new m.WFakeExpression(new y.WSetGlobal(h.WType.u32,"$sp",new h.WBinaryOperation(h.I32Binary.add,new m.WGetGlobal(h.WType.u32,"$sp",this.location),new h.WConst(h.WType.i32,F.toString()),this.location)),this.location)),I.push(new m.WFakeExpression(new y.WSetGlobal(h.WType.u32,"$sp",new h.WBinaryOperation(h.I32Binary.sub,new m.WGetGlobal(h.WType.u32,"$sp",this.location),new h.WConst(h.WType.i32,F.toString()),this.location)),this.location))),E?(e.requiredWASMFuncTypes.add(n.toWASMEncoding()),L=new m.WCallIndirect(S,n.toWASMEncoding(),b,I,this.location)):null===a?(t.type=p.PrimitiveTypes.int32,e.requiredWASMFuncTypes.add(n.toWASMEncoding()),L=new m.WCallIndirect(A.doConversion(e,p.PrimitiveTypes.int32,t,this),n.toWASMEncoding(),b,I,this.location)):L=new h.WCall(a.fullName,b,I,this.location),n.returnType instanceof u.ClassType?{type:n.returnType,expr:new w.WAddressHolder(L,o.AddressType.RVALUE,this.location),isLeft:!0}:{type:n.returnType,expr:L,isLeft:!1}},i.ReturnStatement.prototype.codegen=function(e){if(null===e.currentFunction)throw new s.SyntaxError("return outside function",this);if(e.triggerDtorsInner(this),e.submitStatement(new y.WSetGlobal(h.WType.u32,"$sp",new m.WGetLocal(h.WType.u32,e.currentFunction.$sp,this.location),this.location)),null!==this.argument){const t=e.currentFunction.type.returnType;if(t.equals(p.PrimitiveTypes.void))throw new s.SyntaxError("return type mismatch",this);let n=this.argument.codegen(e);if(t instanceof u.ClassType||t instanceof c.ReferenceType){if(n.type instanceof c.LeftReferenceType&&(n=A.doReferenceTransform(e,n,this)),!(n.isLeft&&n.expr instanceof w.WAddressHolder))throw new s.SyntaxError("return a rvalue of reference",this);e.submitStatement(new h.WReturn(n.expr.createLoadAddress(e),this.location))}else n.expr=A.doConversion(e,e.currentFunction.type.returnType,n,this),e.submitStatement(new h.WReturn(n.expr.fold(),this.location))}else{if(!e.currentFunction.type.returnType.equals(p.PrimitiveTypes.void))throw new s.SyntaxError("return type mismatch",this);e.submitStatement(new h.WReturn(null,this.location))}},i.ConstructorCallExpression.prototype.codegen=function(e){if(!e.isCpp())throw new s.LanguageError("constructor is noly support in c++",this);const t=this.deduceType(e);if(!(t instanceof u.ClassType))throw new s.SyntaxError("constructor call must be class type",this);const n=t.fullName+"::#"+t.name,r=new i.Identifier(this.location,n),[o]=e.allocTmpVar(t,this),a=new i.Identifier(this.location,o),c=new i.UnaryExpression(this.location,"&",a);return C.recycleExpressionResult(e,this,new i.CallExpression(this.location,r,[c,...this.arguments]).codegen(e)),a.codegen(e)},n.getForLoop=F,i.NewExpression.prototype.codegen=function(e){if(!e.isCpp())throw new s.LanguageError("new is noly support in c++",this);const t=this.deduceType(e);if(!(t instanceof c.PointerType))throw new s.SyntaxError("new must be pointer",this);const n=t.elementType,[r]=e.allocTmpVar(t,this);if(null!==this.arraySize){const[s]=e.allocTmpVar(p.PrimitiveTypes.int32,this),o=i.IntegerConstant.fromNumber(this.location,n.length),a=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,s),this.arraySize).codegen(e);C.recycleExpressionResult(e,this,a);const c=new i.CallExpression(this.location,new i.Identifier(this.location,"::malloc_array"),[o,new i.Identifier(this.location,s)]).codegen(e);c.type=t;const l=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,r),new i.AnonymousExpression(this.location,c)).codegen(e);if(C.recycleExpressionResult(e,this,l),n instanceof u.ClassType){const t=n.fullName+"::#"+n.name,o=new i.Identifier(this.location,t);F(new i.Identifier(this.location,s),e=>[new i.ExpressionStatement(this.location,new i.CallExpression(this.location,o,[new i.BinaryExpression(this.location,"+",new i.Identifier(this.location,r),e)]))],this).codegen(e)}}else{const s=new i.CallExpression(this.location,new i.Identifier(this.location,"::malloc"),[i.IntegerConstant.fromNumber(this.location,n.length)]).codegen(e);s.type=t;const o=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,r),new i.AnonymousExpression(this.location,s)).codegen(e);if(C.recycleExpressionResult(e,this,o),n instanceof u.ClassType){const t=n.fullName+"::#"+n.name,s=new i.Identifier(this.location,t),o=new i.CallExpression(this.location,s,[new i.Identifier(this.location,r),...this.arguments]).codegen(e);C.recycleExpressionResult(e,this,o)}}return new i.Identifier(this.location,r).codegen(e)},i.DeleteExpression.prototype.codegen=function(e){if(!e.isCpp())throw new s.LanguageError("delete is only support in c++",this);const t=this.expr.deduceType(e);if(!(t instanceof c.PointerType))throw new s.SyntaxError("you could only delete pointer",this);if(this.isArrayDelete){const[n]=e.allocTmpVar(t,this),[r]=e.allocTmpVar(new c.PointerType(p.PrimitiveTypes.int32),this),[s]=e.allocTmpVar(p.PrimitiveTypes.int32,this),o=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,n),this.expr).codegen(e);C.recycleExpressionResult(e,this,o);const a=new i.Identifier(this.location,n).codegen(e);a.type=new c.PointerType(p.PrimitiveTypes.int32);const l=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,r),new i.BinaryExpression(this.location,"-",new i.AnonymousExpression(this.location,a),i.IntegerConstant.getOne())).codegen(e);C.recycleExpressionResult(e,this,l);const h=new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,s),new i.UnaryExpression(this.location,"*",new i.Identifier(this.location,r))).codegen(e);if(C.recycleExpressionResult(e,this,h),t.elementType instanceof u.ClassType){const r="~"+t.elementType.name,o=new i.Identifier(this.location,r),a=e=>{const t=new i.MemberExpression(this.location,new i.BinaryExpression(this.location,"+",new i.Identifier(this.location,n),e),!0,o);return t.forceDynamic=!0,t};F(new i.Identifier(this.location,s),e=>[new i.ExpressionStatement(this.location,new i.CallExpression(this.location,a(e),[]))],this).codegen(e)}new i.ExpressionStatement(this.location,new i.CallExpression(this.location,new i.Identifier(this.location,"::free"),[new i.Identifier(this.location,r)])).codegen(e)}else if(t.elementType instanceof u.ClassType){const n=e.scopeManager.allocTmpVarName(),r=new o.Variable(n,n,this.location.fileName,t,o.AddressType.STACK,e.memory.allocStack(t.length));e.scopeManager.define(n,r,this),new i.AssignmentExpression(this.location,"=",new i.Identifier(this.location,n),this.expr).codegen(e);const s=new i.MemberExpression(this.location,new i.Identifier(this.location,n),!0,new i.Identifier(this.location,"~"+t.elementType.name));s.forceDynamic=!0,new i.ExpressionStatement(this.location,new i.CallExpression(this.location,s,[])).codegen(e),new i.ExpressionStatement(this.location,new i.CallExpression(this.location,new i.Identifier(this.location,"::free"),[new i.Identifier(this.location,n)])).codegen(e)}else new i.ExpressionStatement(this.location,new i.CallExpression(this.location,new i.Identifier(this.location,"::free"),[this.expr])).codegen(e);return{type:p.PrimitiveTypes.void,isLeft:!0,expr:new h.WConst(h.WType.none,"1",this.location)}},n.functions=function(){return""}},{long:"YvD4","../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../type":"Rt13","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/constant":"hpbE","../wasm/expression":"yB6U","../wasm/node":"2721","../wasm/section":"1WA9","../wasm/statement":"0h1i","./address":"JsMC","./conversion":"Gzzz","./cpp/lifecycle":"vue3","./cpp/overload":"A7U9","./declaration":"tSbt","./scope":"y+tL","./statement":"X3yq"}],tSbt:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/ast"),i=e("../common/error"),s=e("../common/symbol"),o=e("../common/utils"),a=e("../type"),u=e("../type/class_type"),c=e("../type/compound_type"),l=e("../type/function_type"),p=e("../type/primitive_type"),h=e("../wasm"),f=e("../wasm/node"),m=e("./constant"),d=e("./function"),g=e("./scope"),y=e("./statement");function w(e){return e.identifier instanceof r.Identifier?e.identifier.name:e.identifier.name.name}function A(e){return e?e instanceof r.IdentifierDeclarator?w(e):A(e.declarator):""}function E(e,t,n){let s=null;const a=t.filter(e=>"string"!=typeof e),u=t.filter(e=>"string"==typeof e);if(0!==a.length){if(1!==a.length)throw new i.SyntaxError("illegal syntax",n);const t=a[0];if(t instanceof r.ClassSpecifier)s=t.codegen(e);else if(t instanceof r.TypeIdentifier)s=t.codegen(e);else{if(!(t instanceof r.EnumSpecifier))throw new i.InternalError("unsupport type");s=t.codegen(e)}}else{const e=u.filter(o.isTypeSpecifier).sort();s=o.getPrimitiveTypeFromSpecifiers(e)}if(null==s)throw new i.SyntaxError("Illegal Return Type",n);return-1!==u.indexOf("const")&&(s.isConst=!0),-1!==u.indexOf("extern")&&(s.isExtern=!0),-1!==u.indexOf("static")&&(s.isStatic=!0),-1!==u.indexOf("virtual")&&(s.isVirtual=!0),s}function T(e,t,n){if(null===t)return[n,""];if(t instanceof r.IdentifierDeclarator){const e=w(t);if(m.KeyWords.includes(e))throw new i.SyntaxError(`variable name could not be '${e}'`,t);return[n,e]}if(null!=t.declarator){const r=S(e,n,t);return T(e,t.declarator,r)}throw new i.SyntaxError("UnsupportNodeType:"+t.constructor.name,t)}function S(e,t,n){if(n instanceof r.FunctionDeclarator||n instanceof r.AbstractFunctionDeclarator)return d.parseFunctionDeclarator(e,n,t);if(n instanceof r.PointerDeclarator||n instanceof r.AbstractPointerDeclarator){let r=n.pointer,s=t;for(;null!=r;){if(s instanceof c.ReferenceType)throw new i.SyntaxError("there is no pointer/reference of reference",n);if("*"===r.type)s=new c.PointerType(s);else if("&"===r.type){if(!e.isCpp())throw new i.LanguageError("reference is only supported in c++",n);s=new c.LeftReferenceType(s)}else if("&&"===r.type)throw new i.SyntaxError("unsupport right value reference",n);r=r.pointer}return s}if(n instanceof r.ArrayDeclarator||n instanceof r.AbstractArrayDeclarator){if(t instanceof c.ReferenceType)throw new i.SyntaxError("there is no array of reference",n);if(!n.length)return new c.ArrayType(t,0);const r=n.length.codegen(e);if(!(r.expr instanceof f.WExpression))throw new i.SyntaxError("illegal length type",n);if(r.expr=r.expr.fold(),!(r.expr instanceof h.WConst))throw new i.SyntaxError("var length array is not support currently",n);if(!(r.type instanceof p.IntegerType))throw new i.SyntaxError("length of array must be integer",n);return 0!==n.qualifiers.length&&e.raiseWarning("unsupport array qualifier",n),new c.ArrayType(t,parseInt(r.expr.constant))}throw new i.SyntaxError("UnsupportDeclaratorType:"+n.constructor.name,n)}function v(e,t,n,s){for(let o=0;o<s.items.length;o++){const a=s.items[o];if(a.initializer instanceof r.Expression)new r.ExpressionStatement(n.location,new r.AssignmentExpression(n.location,"=",new r.SubscriptExpression(n.location,n,r.IntegerConstant.fromNumber(n.location,o)),a.initializer)).codegen(e);else{if(!(t.elementType instanceof c.ArrayType))throw new i.SyntaxError("illegal inner initializer list",n);v(e,t.elementType,new r.SubscriptExpression(n.location,n,r.IntegerConstant.fromNumber(n.location,o)),a.initializer)}}}function C(e,t,n,r){const s=e.scopeManager.lookupFullName(e.scopeManager.getFullName(n));let o="none";if(null!==s)if(s instanceof g.FunctionLookUpResult){if(!(t instanceof l.FunctionType))throw new i.SyntaxError(`conflict declaration of ${n}`,r);if(0!==s.functions.filter(e=>e.type.parameterTypes.length===t.parameterTypes.length).filter(e=>e.type.parameterTypes.every((e,n)=>e.equals(t.parameterTypes[n]))).length)return"pass"}else{if(s instanceof a.Type)throw new i.SyntaxError(`redefine of typename ${n}`,r);if(s.isDefine()&&!t.isExtern)throw new i.SyntaxError(`redefine of variable ${n}`,r);if(s.isDefine()&&t.isExtern)return"pass";if(!s.isDefine()&&t.isExtern)return"pass";o=s}return o}function x(e,t,n){if(null===t.declarator)return S(e,n,t);{const r=S(e,n,t);return x(e,t.declarator,r)}}n.getIdentifierName=w,n.getDeclaratorIdentifierName=A,n.getDeclaratorIdentifierArguments=function e(t){return t?t instanceof r.IdentifierDeclarator?t.identifier instanceof r.Identifier?[]:t.identifier.args:e(t.declarator):[]},r.TemplateDeclaration.prototype.getTemplateNames=function(){return this.decl instanceof r.FunctionDefinition?[A(this.decl.declarator)]:[this.decl.typeName]},r.Declaration.prototype.getTypedefName=function(){return this.specifiers.includes("typedef")?this.initDeclarators.map(e=>A(e)):[]},n.parseTypeFromSpecifiers=E,n.parseDeclarator=T,n.parseDeclaratorOrAbstractDeclarator=function(e,t,n){return null===t?[n,null]:t instanceof r.Declarator?T(e,t,n):[x(e,t,n),null]},n.mergeTypeWithDeclarator=S,r.TranslationUnit.prototype.codegen=function(e){this.body.map(t=>t.codegen(e))},n.lookupPreviousDeclaration=C,r.Declaration.prototype.codegen=function(e){const t=E(e,this.specifiers,this),n=this.specifiers.includes("typedef");for(const o of this.initDeclarators){const[p,h]=T(e,o.declarator,t);if(p instanceof u.ClassType&&!p.isComplete)throw new i.SyntaxError("cannot instancelize incomplete type",this);if("#"===h.charAt(0))throw new i.SyntaxError("illegal operator name",this);const f=C(e,p,h,this);if("pass"===f)continue;if(n){if("none"!==f)throw new i.SyntaxError(`confliction of typename ${h}`,this);e.scopeManager.define(h,p,this);continue}if(p instanceof l.FunctionType){p.name=h,d.declareFunction(e,p,this.specifiers.includes("__libcall"),a.AccessControl.Public,this);continue}let m=s.AddressType.STACK,g=0;if(e.scopeManager.isRoot()||p.isStatic||h.includes("::"))p.isExtern?(m=s.AddressType.MEMORY_EXTERN,g=e.scopeManager.getFullName(h)):null===o.initializer||p instanceof c.ArrayType?(m=s.AddressType.MEMORY_BSS,g=e.memory.allocBss(p.length)):(m=s.AddressType.MEMORY_DATA,g=e.memory.allocData(p.length));else{if(p.isExtern)throw new i.SyntaxError("local variable could not be extern:  "+h,this);m=s.AddressType.STACK,g=e.memory.allocStack(p.length)}if("none"!==f?(f.addressType=m,f.location=g):p.isExtern?e.scopeManager.declare(h,new s.Variable(h,e.scopeManager.getFullName(h),e.fileName,p,m,g),this):e.scopeManager.define(h,new s.Variable(h,e.scopeManager.getFullName(h),e.fileName,p,m,g),this),null!=o.initializer){if(p.isExtern)throw new i.SyntaxError("extern vaiable could not have initializer",this);if(o.initializer instanceof r.InitializerList){if(!(p instanceof c.ArrayType))throw new i.InternalError("InitializerList not support");v(e,p,new r.Identifier(this.location,h),o.initializer)}else if(o.initializer instanceof r.ObjectInitializer){if(!(p instanceof u.ClassType))throw new i.SyntaxError("only class type could apply object initializer",this);const t=p.fullName+"::#"+p.name,n=new r.Identifier(this.location,t),s=new r.UnaryExpression(this.location,"&",new r.Identifier(this.location,h)),a=new r.CallExpression(this.location,n,[s,...o.initializer.argus]);y.recycleExpressionResult(e,this,a.codegen(e))}else{const t=new r.AssignmentExpression(this.location,"=",new r.Identifier(this.location,h),o.initializer);t.isInitExpr=!0,y.recycleExpressionResult(e,this,t.codegen(e))}}else if(p instanceof u.ClassType){const t=p.fullName+"::#"+p.name,n=new r.Identifier(this.location,t),i=new r.UnaryExpression(this.location,"&",new r.Identifier(this.location,h)),s=new r.CallExpression(this.location,n,[i]);y.recycleExpressionResult(e,this,s.codegen(e))}}},n.parseAbstractDeclarator=x,r.TypeIdentifier.prototype.codegen=function(e){const t="::"===this.name.slice(0,2)?e.scopeManager.lookupFullName(this.name):e.scopeManager.lookupShortName(this.name);if(t&&t instanceof a.Type)return t;throw new i.SyntaxError(`${this.name} is not a type`,this)},r.EnumSpecifier.prototype.codegen=function(e){if(null!=this.enumerators){let t=-1,n=0;for(const r of this.enumerators){if(t++,null===r.value)n=t;else{const t=r.value.codegen(e);if(!(t.expr instanceof f.WExpression))throw new i.SyntaxError("illegal enumrator type",this);if(t.expr=t.expr.fold(),!(t.expr instanceof h.WConst&&t.type instanceof p.IntegerType))throw new i.SyntaxError("enum value must be integer",this);n=parseInt(t.expr.constant)}e.scopeManager.declare(r.identifier.name,new s.Variable(r.identifier.name,e.scopeManager.getFullName(r.identifier.name),e.fileName,p.PrimitiveTypes.int32,s.AddressType.CONSTANT,n),this)}}return null!=this.identifier&&e.scopeManager.declare(this.identifier.name,p.PrimitiveTypes.int32,this),p.PrimitiveTypes.int32},n.declaration=function(){}},{"../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../common/utils":"pe9I","../type":"Rt13","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/node":"2721","./constant":"2REp","./function":"XWPX","./scope":"y+tL","./statement":"X3yq"}],ozR1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/ast"),i=e("../../common/error"),s=e("../../common/symbol"),o=e("../../type"),a=e("../../type/compound_type"),u=e("../../type/function_type"),c=e("../../type/template_type"),l=e("../declaration"),p=e("../function"),h=e("../scope");function f(e,t,n,r){const s=l.getDeclaratorIdentifierName(n),o=e.scopeManager.lookupAnyName(s);if(!o)throw new i.SyntaxError(`cannot find template ${s}`,r);if(!(o instanceof h.FunctionLookUpResult))throw new i.SyntaxError(`${s} is not template`,r);const a=l.getDeclaratorIdentifierArguments(n).map(t=>d(e,t,r)),u=l.parseTypeFromSpecifiers(e,t,r);if(null==u)throw new i.SyntaxError("illegal return type",r);const c=p.parseFunctionDeclarator(e,n,u);if(null==c)throw new i.SyntaxError("illegal function definition",r);return[o,c,a]}function m(e,t,n){const r=function e(t,n){if(t instanceof u.FunctionType)return new u.FunctionType(t.name,e(t.returnType,n),t.parameterTypes.map(t=>e(t,n)),t.parameterNames,t.variableArguments);if(t instanceof a.PointerType)return new a.PointerType(e(t.elementType,n));if(t instanceof a.RightReferenceType)return new a.RightReferenceType(e(t.elementType,n));if(t instanceof a.LeftReferenceType)return new a.LeftReferenceType(e(t.elementType,n));if(t instanceof a.ArrayType)return new a.ArrayType(e(t.elementType,n),t.size);if(t instanceof c.TemplateParameterPlaceHolderType){const e=n[t.index];if(null===e)throw new i.InternalError("deduceFunctionTypeOfTemplate()");if(e instanceof o.Type)return e;throw new i.InternalError("deduceFunctionTypeOfTemplate()")}return t}(t.type,n),l=n.map(e=>e.toString()).join(","),p=t.name+"@"+l+"@"+r.toMangledName();t.instanceMap.set(l,new s.FunctionEntity(p,t.contextScope.getFullName(p),e.fileName,r,!1,!0,o.AccessControl.Public)),e.submitDeferInstantiationTask({funcTemplate:t,type:r,args:n})}function d(e,t,n){return t instanceof r.TypeName?t.deduceType(e):p.evaluateConstantExpression(e,t,n)}function g(e,t,n,r){if(n.length>e.templateParams.length)return null;const i=t.parameterTypes.filter(()=>!0);if(e.type.parameterTypes.length!==i.length){if(!r)return null;if(i.length>e.type.parameterTypes.length)return null;for(let t=i.length;t<e.type.parameterTypes.length;t++)null!==e.type.parameterInits[t]&&i.push(e.type.parameterTypes[t])}const s=[];for(let t=0;t<e.templateParams.length;t++)s.push(null);for(let e=0;e<n.length;e++)s[e]=n[e];try{for(let t=0;t<i.length;t++)y(s,e.type.parameterTypes[t],i[t],r)}catch(e){return null}for(let t=0;t<e.templateParams.length;t++)if(null===s[t]){if(null===e.templateParams[t].init)return null;s[t]=e.templateParams[t].init}return s}function y(e,t,n,r){if(t instanceof u.FunctionType){if(!(n instanceof u.FunctionType))throw{};if(n.parameterTypes.length!==t.parameterTypes.length)throw{};y(e,t.returnType,n.returnType,r);for(let i=0;i<t.parameterTypes.length;i++)y(e,t.parameterTypes[i],n.parameterTypes[i],r)}else if(t instanceof a.PointerType){if(!(n instanceof a.PointerType))throw{};y(e,t.elementType,n.elementType,r)}else if(t instanceof a.ReferenceType){if(!(n instanceof a.ReferenceType))throw{};y(e,t.elementType,n.elementType,r)}else if(t instanceof a.ArrayType){if(!(n instanceof a.ArrayType))throw{};y(e,t.elementType,n.elementType,r)}else if(t instanceof c.TemplateParameterPlaceHolderType){const i=e[t.index];if(null===i)e[t.index]=n;else{if(!(i instanceof o.Type))throw{};if(n instanceof c.TemplateParameterPlaceHolderType){if(t.index!==n.index)throw{}}else if(r){if(!i.compatWith(n))throw{}}else if(!i.equals(n))throw{}}}else if(r){if(!t.compatWith(n))throw{}}else if(!t.equals(n))throw{}}r.TemplateDeclaration.prototype.codegen=function(e){if(0===this.args.length){if(this.decl instanceof r.ClassSpecifier)throw{};return void function(e,t){const[n,r,s]=f(e,t.specifiers,t.declarator,t);for(const e of n.functions)if(e instanceof c.FunctionTemplate){const n=g(e,r,s,!1);if(null!==n){const n=s.map(e=>e.toString()).join(",");if(e.specializationMap.has(n))throw new i.SyntaxError("duplication Specialization",t);return void e.specializationMap.set(n,t)}}throw new i.SyntaxError("no matched function template",t)}(e,this.decl)}const t=e.scopeManager.currentScope;e.scopeManager.enterUnnamedScope();for(let t=0;t<this.args.length;t++){const n=this.args[t];if(n instanceof r.ParameterDeclaration){const[t,r]=l.parseDeclaratorOrAbstractDeclarator(e,n.declarator,l.parseTypeFromSpecifiers(e,n.specifiers,this));null!==r&&e.scopeManager.define(r,t,this)}else e.scopeManager.define(n.name.name,new c.TemplateParameterPlaceHolderType(t),this)}if(this.decl instanceof r.ClassSpecifier)throw{};{const n=l.parseTypeFromSpecifiers(e,this.decl.specifiers,this);if(null==n)throw new i.SyntaxError("illegal return type",this);const s=p.parseFunctionDeclarator(e,this.decl.declarator,n);if(null==s)throw new i.SyntaxError("illegal function definition",this);const o=s.name+"@"+s.toMangledName(),a=e.scopeManager.getFullName(o),u=new c.FunctionTemplate(o,a,e.fileName,s,this.args.map(t=>(function(e,t,n){if(t instanceof r.ParameterDeclaration){const s=l.parseTypeFromSpecifiers(e,t.specifiers,n);if(null==s)throw new i.SyntaxError("illegal return type",n);let o=s,a="";if(t.declarator instanceof r.Declarator){const[n,r]=l.parseDeclarator(e,t.declarator,s);o=n,a=r}else t.declarator instanceof r.AbstractArrayDeclarator&&(o=l.parseAbstractDeclarator(e,t.declarator,s));return{name:a,type:o,init:t.init?p.evaluateConstantExpression(e,t.init,n):null}}return{name:t.name.name,type:c.TemplateType.instance,init:t.init?t.init.deduceType(e):null}})(e,t,this)),this.decl,t);e.scopeManager.exitScope(),e.scopeManager.define(o,u,this)}},r.FunctionTemplateInstantiation.prototype.codegen=function(e){const[t,n,r]=f(e,this.specifiers,this.declarator,this);for(const i of t.functions)if(i instanceof c.FunctionTemplate){const t=g(i,n,r,!1);if(null!==t)return void m(e,i,t)}throw new i.SyntaxError("no matched function template",this)},n.createDeferInstantiationTask=m,n.executeDeferFunctionTemplateInstantiation=function(e){e.deferInstantiationTasks.map(t=>{!function(e,t,n,r){const i=r.map(e=>e.toString()).join(","),a=t.name+"@"+i;e.scopeManager.enterTempScope(t.contextScope),e.scopeManager.enterUnnamedScope(),e.scopeManager.currentScope.fullName=e.scopeManager.currentScope.parent.fullName;for(let n=0;n<r.length;n++){const i=t.templateParams[n].name,a=r[n];a instanceof o.Type?e.scopeManager.define(i,a):e.scopeManager.define(i,new s.Variable(i,e.scopeManager.getFullName(i),e.fileName,t.templateParams[n].type,s.AddressType.CONSTANT,a))}n.name=a;let u=t.functionBody.body.body;const c=t.specializationMap.get(i);c&&(u=c.body.body),p.defineFunction(e,n,u,o.AccessControl.Public,t.functionBody),e.scopeManager.exitScope(),e.scopeManager.exitTempScope()}(e,t.funcTemplate,t.type,t.args)}),e.deferInstantiationTasks=[]},n.evaluateTemplateArgument=d,n.deduceFunctionTemplateParameters=g,n.tryMatchTemplateType=y,n.template=function(){return"template"}},{"../../common/ast":"URi4","../../common/error":"nOPH","../../common/symbol":"HcQt","../../type":"Rt13","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/template_type":"xWpI","../declaration":"tSbt","../function":"XWPX","../scope":"y+tL"}],A7U9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/compound_type"),s=e("../../type/function_type"),o=e("../../type/primitive_type"),a=e("../../type/template_type"),u=e("../scope"),c=e("./template");function l(e,t){return e instanceof i.ReferenceType&&(e=e.elementType),t instanceof i.ReferenceType&&(t=t.elementType),e.equals(t)}function p(e,t){return e instanceof i.ReferenceType&&(e=e.elementType),t instanceof i.ReferenceType&&(t=t.elementType),e.compatWith(t)}function h(e,t,n,r){if(e.type.isMemberFunction()){const s=e.type.parameterTypes[0];return null!==n.instanceType&&s instanceof i.PointerType&&(s.elementType.compatWith(n.instanceType)&&e.type.parameterTypes.slice(1).every((e,n)=>r(e,t[n])))}return e.type.parameterTypes.every((e,n)=>r(e,t[n]))}function f(e){const t=new Set,n=[];for(const r of e)t.has(r.fullName)||(n.push(r),t.add(r.fullName));return n}function m(e,t,n,i){const u=t.templateArguments.map(e=>e.toString()).join(","),m=[],d=[];for(const e of t.functions)if(e instanceof a.FunctionTemplate){d.push(e);for(const n of e.instanceMap.keys())(0===t.templateArguments.length||n.startsWith(u))&&m.push(e.instanceMap.get(n))}const g=f(t.functions.filter(e=>!(e instanceof a.FunctionTemplate)).concat(m).filter(e=>e.type.isMemberFunction()&&e.type.parameterTypes.length===n.length+1||!e.type.isMemberFunction()&&e.type.parameterTypes.length===n.length||e.type.variableArguments)),y=g.filter(e=>h(e,n,t,l));if(y.length>=1)return y.length>1&&e.raiseWarning(`call for ${t.functions[0].name} is ambiguous`,i),y[0];const w=g.filter(e=>h(e,n,t,p));if(w.length>=1)return w.length>1&&e.raiseWarning(`call for ${t.functions[0].name} is ambiguous`,i),w[0];const A=g.filter(e=>e.type.variableArguments);if(A.length>=1)return A.length>1&&e.raiseWarning(`call for ${t.functions[0].name} is ambiguous`,i),A[0];for(const r of d){const i=new s.FunctionType("",o.PrimitiveTypes.void,n,[],!1),a=c.deduceFunctionTemplateParameters(r,i,t.templateArguments,!0);if(null!==a){c.createDeferInstantiationTask(e,r,a);const t=a.map(e=>e.toString()).join(",");return r.instanceMap.get(t)}}throw new r.SyntaxError(`no matching function for ${t.functions[0].name}`,i)}n.doStrictTypeMatch=l,n.doWeakTypeMatch=p,n.doFunctionFilter=h,n.removeDuplicatedFunctions=f,n.doFunctionOverloadResolution=m,n.isFunctionExists=function(e,t,n,r=null){const i=e.scopeManager.lookupFullName(t);if(!(i instanceof u.FunctionLookUpResult))return!1;try{return i.instanceType=r,m(e,i,n,{}),!0}catch(e){return!1}}},{"../../common/error":"nOPH","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../../type/template_type":"xWpI","../scope":"y+tL","./template":"ozR1"}],Gzzz:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),s=e("../type/class_type"),o=e("../type/compound_type"),a=e("../type/function_type"),u=e("../type/primitive_type"),c=e("../wasm/constant"),l=e("../wasm/expression"),p=e("./address"),h=e("./cpp/overload"),f=e("./scope");function m(e,t,n,a=!1){if(!t.isLeft&&t.type instanceof o.LeftReferenceType)throw new r.InternalError("LeftReferenceType could not be rvalue");if(t.isLeft){if(t.isLeft=!1,t.expr instanceof f.FunctionLookUpResult)throw new r.SyntaxError("unsupport function name",n);if(t.type instanceof o.LeftReferenceType&&!(t.expr instanceof p.WAddressHolder)&&(t.type=t.type.elementType,t.expr=new p.WAddressHolder(t.expr,i.AddressType.RVALUE,n.location)),!(t.expr instanceof p.WAddressHolder))throw new r.InternalError("if( !(expr.expr instanceof WAddressHolder)) {");if(t.type instanceof s.ClassType&&!a)throw new r.SyntaxError("you should not convert a class to rvalue",n);if(t.type instanceof o.ArrayType){if(a)throw new r.SyntaxError("no reference to array",n);t.type=new o.PointerType(t.type.elementType),t.expr=t.expr.createLoadAddress(e)}else t.type instanceof o.LeftReferenceType?a?t.expr=t.expr.createLoad(e,u.PrimitiveTypes.uint32):(t.type=t.type.elementType,t.expr=new p.WAddressHolder(t.expr.createLoad(e,u.PrimitiveTypes.uint32),i.AddressType.RVALUE,n.location).createLoad(e,t.type)):a?(t.type=new o.LeftReferenceType(t.type),t.expr=t.expr.createLoadAddress(e)):t.expr=t.expr.createLoad(e,t.type)}return t.type instanceof o.ArrayType&&(t.type=new o.PointerType(t.type.elementType)),t}function d(e,t,n,i,p=!1,d=!1){if((n=m(e,n,i,d&&t instanceof o.LeftReferenceType)).expr instanceof f.FunctionLookUpResult){if(t instanceof o.PointerType&&t.elementType instanceof a.FunctionType){const r=h.doFunctionOverloadResolution(e,n.expr,t.elementType.parameterTypes,i);return new l.WGetFunctionAddress(r.fullName,i.location)}throw new r.SyntaxError("unsupport function name",i)}if(t instanceof o.LeftReferenceType&&n.type instanceof o.LeftReferenceType&&t.equals(n.type))return n.expr;if(t instanceof o.ArrayType&&(t=new o.PointerType(t.elementType)),t instanceof u.ArithmeticType&&n.type instanceof u.ArithmeticType){const e=n.type.toWType(),r=t.toWType(),i=c.getTypeConvertOpe(e,r);return null!==i?new l.WCovertOperation(e,r,n.expr,i,n.expr.location):n.expr}if(t instanceof o.PointerType&&n.type instanceof o.PointerType){const e=t.elementType,r=n.type.elementType;if(e.equals(u.PrimitiveTypes.void)||r.equals(e))return n.expr;if(e instanceof s.ClassType&&r instanceof s.ClassType&&r.isSubClassOf(e))return n.expr}if(t instanceof o.PointerType&&n.type instanceof u.IntegerType&&(n.expr=n.expr.fold(),n.expr instanceof l.WConst&&0===parseInt(n.expr.constant)))return n.expr;if(p){if((t instanceof o.PointerType||t instanceof u.IntegerType)&&(n.type instanceof o.PointerType||n.type instanceof u.IntegerType))return n.expr;if(t instanceof o.PointerType&&n.type instanceof o.PointerType)return n.expr}throw new r.TypeError(`unsupport convert from ${n.type} to ${t}`,i)}n.doTypeTransfrom=function(e){return e instanceof o.ArrayType&&(e=new o.PointerType(e.elementType)),e instanceof o.ReferenceType&&(e=e.elementType),e},n.doReferenceTransform=function(e,t,n){if(t.type instanceof o.LeftReferenceType){if(t.expr instanceof f.FunctionLookUpResult)throw new r.SyntaxError("unsupport functionlookup result",n);t.isLeft&&t.expr instanceof p.WAddressHolder?(t.type=t.type.elementType,t.expr=new p.WAddressHolder(t.expr.createLoad(e,u.PrimitiveTypes.uint32),i.AddressType.RVALUE,n.location)):(t.type=t.type.elementType,t.expr=new p.WAddressHolder(t.expr,i.AddressType.RVALUE,n.location))}return t},n.doValueTransform=m,n.doConversion=d,n.getInStackSize=function(e){return e%4==0?e:e+4-e%4},n.doValuePromote=function(e,t,n){return(t=m(e,t,n,!1)).type instanceof u.IntegerType&&t.type.length<4&&(t.type=u.PrimitiveTypes.int32),t.type instanceof u.FloatType&&(t.expr=d(e,u.PrimitiveTypes.double,t,n),t.type=u.PrimitiveTypes.double),t},n.doTypePromote=function(e,t,n){return t instanceof o.ArrayType&&(t=new o.PointerType(t.elementType)),t instanceof u.IntegerType&&t.length<4&&(t=u.PrimitiveTypes.int32),t instanceof u.FloatType&&(t=u.PrimitiveTypes.double),t}},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","../wasm/constant":"hpbE","../wasm/expression":"yB6U","./address":"JsMC","./cpp/overload":"A7U9","./scope":"y+tL"}],jSeS:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/ast"),i=e("../common/error"),s=e("../common/symbol"),o=e("../type"),a=e("../type/class_type"),u=e("../type/compound_type"),c=e("../type/function_type"),l=e("../type/primitive_type"),p=e("./address"),h=e("./conversion"),f=e("./cpp/lifecycle"),m=e("./declaration"),d=e("./function"),g=e("./scope");function y(e,t,n,o){const a=m.parseTypeFromSpecifiers(e,t.specifiers,o);for(const u of t.initDeclarators){if(null===u.declarator)throw new i.InternalError("unsupport bit field");{const[l,p]=m.parseDeclarator(e,u.declarator,a),h=m.lookupPreviousDeclaration(e,l,p,o);if("pass"===h)throw new i.SyntaxError(`redeclartion of field ${p}`,o);if("none"!==h)throw new i.SyntaxError(`redefinition of field ${p}`,o);if(l instanceof c.FunctionType){if(l.name=p,!e.isCpp())throw new i.LanguageError("function field is only support in c++",o);l.isStatic?d.declareFunction(e,l,t.specifiers.includes("__libcall"),n.accessControl,o):(l.parameterTypes=[n.classPtrType,...l.parameterTypes],l.parameterNames=["this",...l.parameterNames],l.cppFunctionType=c.CppFunctionType.MemberFunction,l.referenceClass=n.classType,l.isVirtual?n.classType.registerVFunction(e,l):null!==n.classType.getVCallInfo(l.toIndexName())&&(l.isVirtual=!0,n.classType.registerVFunction(e,l)),d.declareFunction(e,l,t.specifiers.includes("__libcall"),n.accessControl,o));continue}if("#"===p.charAt(0))throw new i.SyntaxError("illegal operator overload",o);if(l.isStatic){if(!e.isCpp())throw new i.LanguageError("static field is only support in c++",o);if(null!==u.initializer)throw new i.LanguageError("static field could only be initialize outside class definition",o);e.scopeManager.declare(p,new s.Variable(p,e.scopeManager.getFullName(p),e.fileName,l,s.AddressType.MEMORY_EXTERN,e.scopeManager.getFullName(p)),o)}else{let t=null;if(null!==u.initializer){if(!e.isCpp())throw new i.LanguageError("field init is only support in c++",o);if(u.initializer instanceof r.InitializerList)throw new i.SyntaxError("unsupport initial list",o);t=u.initializer}n.fields.push({name:p,type:l,startOffset:n.curOffset,initializer:t,accessControl:n.accessControl}),n.union||(n.curOffset+=l.length)}}}}r.ClassSpecifier.prototype.codegen=function(e){let t=this.identifier.name;e.isCpp()||(t="$"+t);const n=e.scopeManager.lookupShortName(t);if(null!==n){if(null===this.declarations){if(n instanceof a.ClassType)return n;throw new i.SyntaxError(`conflict type of ${t}`,this)}throw new i.SyntaxError(`redefine of ${t}`,this)}const s=[];for(const t of this.inherits){const n=o.getAccessControlFromString(t.accessControl),r=e.scopeManager.lookupAnyName(t.className.name);if(!(r instanceof a.ClassType))throw new i.SyntaxError(`you could not inherit type ${r}, which is not a class type`,this);if(!r.isComplete)throw new i.SyntaxError(`you could not inherit type ${r}, which is incomplete`,this);s.push({classType:r,accessControl:n})}const p=new a.ClassType(t,e.scopeManager.getFullName(t),e.fileName,[],"union"===this.typeName,s);if(null===this.declarations)return p.isComplete=!1,e.scopeManager.declare(t,p,this),p;let h=!1;for(const e of this.declarations)if(e instanceof r.Declaration||e instanceof r.FunctionDefinition){if(e.specifiers.includes("virtual")){h=!0;break}}else if(e instanceof r.ConstructorOrDestructorDeclaration&&e.isVirtual){h=!0;break}for(const e of s)if(e.classType.requireVPtr){h=!0;break}h&&p.setUpVPtr(),e.scopeManager.define(t,p,this),e.scopeManager.enterScope(t);const g={classType:p,classPtrType:new u.PointerType(p),union:"union"===this.typeName,fields:p.fields,curOffset:p.objectSize,accessControl:"struct"===this.typeName?o.AccessControl.Public:o.AccessControl.Private};p.isComplete=!1;const w=[];for(const n of this.declarations)if(n instanceof r.Declaration)y(e,n,g,this);else if(n instanceof r.ConstructorOrDestructorDeclaration){if(n.name.name!==t)throw new i.SyntaxError(`invaild ctor/dtor name ${n.name.name}`,this);let r;if(n.isCtor){const i=[new u.PointerType(p)],s=["this"];if(null!==n.param){const{types:t,names:r}=n.param.codegen(e);i.push(...t),s.push(...r)}(r=new c.FunctionType("#"+t,l.PrimitiveTypes.void,i,s,!1)).cppFunctionType=c.CppFunctionType.Constructor,r.referenceClass=p,r.initList=n.initList}else(r=new c.FunctionType("~"+t,l.PrimitiveTypes.void,[new u.PointerType(p)],["this"],!1)).cppFunctionType=c.CppFunctionType.Destructor,r.referenceClass=p,n.isVirtual?(r.isVirtual=!0,g.classType.registerVFunction(e,r)):null!==g.classType.getVCallInfo(r.toIndexName())&&(r.isVirtual=!0,g.classType.registerVFunction(e,r));null!==n.body?w.push([n.body,r]):d.declareFunction(e,r,!1,g.accessControl,this)}else if(n instanceof r.FunctionDefinition){if(!e.isCpp())throw new i.LanguageError("function field is only support in c++",this);const t=m.parseTypeFromSpecifiers(e,n.specifiers,this);if(null==t)throw new i.SyntaxError("illegal return type",this);const r=d.parseFunctionDeclarator(e,n.declarator,t);if(null==r)throw new i.SyntaxError("illegal function definition",this);r.isStatic?d.declareFunction(e,r,n.specifiers.includes("__libcall"),g.accessControl,this):(r.parameterTypes=[g.classPtrType,...r.parameterTypes],r.parameterNames=["this",...r.parameterNames],r.cppFunctionType=c.CppFunctionType.MemberFunction,r.referenceClass=p,r.isVirtual?p.registerVFunction(e,r):null!==p.getVCallInfo(r.toIndexName())&&(r.isVirtual=!0,g.classType.registerVFunction(e,r)),d.declareFunction(e,r,n.specifiers.includes("__libcall"),g.accessControl,this)),w.push([n.body,r])}else{if(!(n instanceof r.AccessControlLabel))throw new i.InternalError("StructOrUnionSpecifier()");g.accessControl=o.getAccessControlFromString(n.label)}p.requireVPtr&&p.generateVTable(e,this),p.initialize(),p.isComplete=!0;for(const t of w){const[n,r]=t;d.defineFunction(e,r,n.body,o.AccessControl.Public,this)}return f.generateDefaultCtors(e,p,this),e.scopeManager.exitScope(),p},r.MemberExpression.prototype.codegen=function(e){let t=this.pointed?new r.UnaryExpression(this.location,"*",this.object).codegen(e):this.object.codegen(e);const n=t.type instanceof u.ReferenceType;if(!((t=h.doReferenceTransform(e,t,this)).isLeft&&t.expr instanceof p.WAddressHolder))throw new i.InternalError("unsupport rvalue of member expression");if(!(t.type instanceof a.ClassType))throw new i.SyntaxError("only struct/class could be get member",this);const o=t.type.getMember(e,this.member.name);if(null===o)throw new i.SyntaxError(`name ${this.member.name} is not on class ${t.type.name}`,this);return o instanceof s.Variable?{type:o.type,expr:new p.WAddressHolder(o.location,o.addressType,this.location),isLeft:!0}:o instanceof g.FunctionLookUpResult?(o.instance=t.expr,o.instanceType=t.type,(this.pointed||n)&&(this.member.name.includes("~")?o.isDynamicCall=this.forceDynamic:o.isDynamicCall=!0),{type:l.PrimitiveTypes.void,expr:o,isLeft:!1}):{isLeft:!0,type:o.type,expr:t.expr.makeOffset(o.startOffset)}},n.classes=function(){return""}},{"../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../type":"Rt13","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./address":"JsMC","./conversion":"Gzzz","./cpp/lifecycle":"vue3","./declaration":"tSbt","./function":"XWPX","./scope":"y+tL"}],"+pen":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/class_type"),s=e("../../type/compound_type"),o=e("../../type/primitive_type"),a=e("../address"),u=e("../scope");n.doReferenceBinding=function(e,t,n,c){if(t.expr instanceof u.FunctionLookUpResult||n.expr instanceof u.FunctionLookUpResult)throw new r.InternalError("unsupport function name");if(!(t.type instanceof s.LeftReferenceType))throw new r.InternalError("you could only bind to a reference");if(!(t.isLeft&&t.expr instanceof a.WAddressHolder))throw new r.InternalError("the reference is not a left value");if(n.type instanceof s.ReferenceType){const s=n.type.elementType,u=t.type.elementType;if(s instanceof i.ClassType&&u instanceof i.ClassType){if(!s.isSubClassOf(u))throw new r.InternalError(`could not convert from ${n.type} to ${t.type}`)}else if(!n.type.elementType.equals(t.type.elementType))throw new r.InternalError(`could not convert from ${n.type} to ${t.type}`);n.expr instanceof a.WAddressHolder&&(n.expr=n.expr.createLoad(e,n.type)),e.submitStatement(t.expr.createStore(e,o.PrimitiveTypes.uint32,n.expr))}else{const s=n.type,u=t.type.elementType;if(s instanceof i.ClassType&&u instanceof i.ClassType){if(!s.isSubClassOf(u))throw new r.InternalError(`could not convert from ${n.type} to ${t.type}`)}else if(!n.type.equals(t.type.elementType))throw new r.InternalError(`could not convert from ${n.type} to ${t.type}`);if(!(n.isLeft&&n.expr instanceof a.WAddressHolder))throw new r.InternalError("you could only bind to a left value");e.submitStatement(t.expr.createStore(e,o.PrimitiveTypes.uint32,n.expr.createLoadAddress(e)))}}},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../address":"JsMC","../scope":"y+tL"}],QUFU:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),s=e("../common/ast"),o=e("../common/error"),a=e("../common/symbol"),u=e("../type"),c=e("../type/class_type"),l=e("../type/compound_type"),p=e("../type/primitive_type"),h=e("../wasm"),f=e("../wasm/constant"),m=e("../wasm/expression"),d=e("./address"),g=e("./conversion"),y=e("./cpp/overload"),w=e("./cpp/reference"),A=e("./scope"),E=e("./statement");s.ParenthesisExpression.prototype.codegen=function(e){return this.expression.codegen(e)};const T=new l.PointerType(new p.CharType),S=new l.PointerType(new p.CharType);function v(e,t,n,r,s,a){if(t instanceof p.UnsignedCharType)e.memory.data.setUint8(r,parseInt(s));else if(t instanceof p.CharType)e.memory.data.setInt8(r,parseInt(s));else if(t instanceof p.UnsignedInt16Type)e.memory.data.setUint16(r,parseInt(s),!0);else if(t instanceof p.UnsignedInt32Type)e.memory.data.setUint32(r,parseInt(s),!0);else if(t instanceof p.UnsignedInt64Type)e.memory.data.setUint32(r,i.fromString(s).low,!0),e.memory.data.setUint32(r+4,i.fromString(s).low,!0);else if(t instanceof p.Int16Type)e.memory.data.setInt16(r,parseInt(s),!0);else if(t instanceof p.Int32Type)e.memory.data.setInt32(r,parseInt(s),!0);else if(t instanceof p.Int64Type)e.memory.data.setInt32(r,i.fromString(s).low),e.memory.data.setInt32(r+4,i.fromString(s).high,!0);else if(t instanceof p.FloatType)e.memory.data.setFloat32(r,parseFloat(s),!0);else{if(!(t instanceof p.DoubleType))throw new o.InternalError("unsupport type assignment");e.memory.data.setFloat64(r,parseFloat(s),!0)}}S.isConst=!0,s.AssignmentExpression.prototype.codegen=function(e){if("="!==this.operator){const e=this.operator.split("=")[0];this.operator="=",this.right=new s.BinaryExpression(this.location,e,this.left,this.right)}const t=this.left.deduceType(e),n=this.right.deduceType(e);if(t instanceof c.ClassType){const r=t.fullName+"::#=";if(y.isFunctionExists(e,r,[n],t))return new s.CallExpression(this.location,new s.MemberExpression(this.location,this.left,!1,new s.Identifier(this.location,"#=")),[this.right]).codegen(e);if(n.equals(t)){const n=t.length;return new s.CallExpression(this.location,new s.Identifier(this.location,"::memcpy"),[new s.UnaryExpression(this.location,"&",this.left),new s.UnaryExpression(this.location,"&",this.right),new s.IntegerConstant(this.location,10,i.fromInt(n),n.toString(),null)]).codegen(e)}{const n=t.fullName+"::#"+t.name,r=new s.Identifier(this.location,n);return new s.CallExpression(this.location,r,[new s.UnaryExpression(this.location,"&",this.left),this.right]).codegen(e)}}let r=this.left.codegen(e);const u=this.right.codegen(e);if(this.isInitExpr&&r.type instanceof l.LeftReferenceType)return w.doReferenceBinding(e,r,u,this),r;if(!((r=g.doReferenceTransform(e,r,this)).isLeft&&r.expr instanceof d.WAddressHolder))throw new o.SyntaxError("could not assign to a right value",this);if(r.type instanceof l.ArrayType)throw new o.SyntaxError("unsupport array assignment",this);if(this.isInitExpr&&this.left instanceof s.Identifier&&r.expr.type===a.AddressType.MEMORY_DATA){if(u.expr instanceof m.WConst&&(u.type instanceof p.IntegerType||u.type instanceof p.FloatingType))return v(e,r.type,u.type,r.expr.place,u.expr.constant,this),r;if(u.expr instanceof m.WGetAddress&&u.expr.form===m.WMemoryLocation.DATA&&u.type.equals(T)){if(!r.type.equals(S)&&!r.type.equals(T))throw new o.SyntaxError(`unsupport init from ${r.type} to ${u.type}`,this);return e.memory.data.setUint32(r.expr.place,u.expr.offset,!0),r}}if(!this.isInitExpr&&r.type.isConst)throw new o.SyntaxError("could not assign to const variable",this);return e.submitStatement(r.expr.createStore(e,r.type,g.doConversion(e,r.type,u,this).fold())),r},s.IntegerConstant.prototype.codegen=function(e){let t=p.PrimitiveTypes.int32;return this.suffix&&(t=-1!==this.suffix.toUpperCase().indexOf("U")?-1!==this.suffix.toUpperCase().indexOf("LL")?p.PrimitiveTypes.uint64:p.PrimitiveTypes.uint32:-1!==this.suffix.toUpperCase().indexOf("LL")?p.PrimitiveTypes.int64:p.PrimitiveTypes.int32),{type:t,expr:new m.WConst(t.toWType(),this.raw,this.location),isLeft:!1}},s.FloatingConstant.prototype.codegen=function(e){let t=p.PrimitiveTypes.double;return this.suffix&&"f"===this.suffix.toUpperCase()&&(t=p.PrimitiveTypes.float),{type:t,expr:new m.WConst(t.toWType(),this.raw,this.location),isLeft:!1}},s.StringLiteral.prototype.codegen=function(e){const t=new m.WGetAddress(m.WMemoryLocation.DATA,this.location);return t.offset=e.memory.allocString(this.value),{type:T,expr:t,isLeft:!1}},s.CharacterConstant.prototype.codegen=function(e){return{type:p.PrimitiveTypes.char,expr:new m.WConst(h.WType.i32,this.value.charCodeAt(0).toString(),this.location),isLeft:!1}},s.Identifier.prototype.codegen=function(e){if("#"===this.name.charAt(0))throw new o.SyntaxError("illegal operator overload",this);const t=e.scopeManager.lookupAnyName(this.name);if(null===t){if(null===e.scopeManager.lookupShortName("this"))throw new o.SyntaxError(`Unresolve Name ${this.name}`,this);try{return new s.MemberExpression(this.location,new s.Identifier(this.location,"this"),!0,this).codegen(e)}catch(e){throw new o.SyntaxError(`Unresolve Name ${this.name}`,this)}}if(t instanceof u.Type)throw new o.SyntaxError(`${this.name} expect to be variable, but it is a type :)`,this);return t instanceof A.FunctionLookUpResult?{type:p.PrimitiveTypes.void,expr:t,isLeft:!1}:{type:t.type,expr:new d.WAddressHolder(t.location,t.addressType,this.location),isLeft:!0}},s.TemplateFuncInstanceIdentifier.prototype.codegen=function(e){return{type:p.PrimitiveTypes.void,expr:this.deduceType(e).functionLookupResult,isLeft:!1}},s.BinaryExpression.prototype.codegen=function(e){if(","===this.operator)return E.recycleExpressionResult(e,this,this.left.codegen(e)),this.right.codegen(e);const t=this.left.deduceType(e),n=this.right.deduceType(e);if(t instanceof c.ClassType)return new s.CallExpression(this.location,new s.MemberExpression(this.location,this.left,!1,new s.Identifier(this.location,"#"+this.operator)),[this.right]).codegen(e);if(n instanceof c.ClassType)throw new o.SyntaxError("current not support right overload",this);let r=this.left.codegen(e),i=this.right.codegen(e);const a=this.deduceType(e),u=f.getOpFromStr(this.operator,a.toWType());if(null===u)throw new o.InternalError(`unsupport op ${this.operator}`);if(a instanceof l.PointerType)if(r.type instanceof p.IntegerType){if((r=g.doValueTransform(e,r,this)).expr instanceof A.FunctionLookUpResult)throw new o.InternalError("unsupport func name");r={type:a,isLeft:!1,expr:new m.WBinaryOperation(h.I32Binary.mul,r.expr,new m.WConst(h.WType.u32,a.elementType.length.toString(),this.location))}}else if(i.type instanceof p.IntegerType){if((i=g.doValueTransform(e,i,this)).expr instanceof A.FunctionLookUpResult)throw new o.InternalError("unsupport func name");i={type:a,isLeft:!1,expr:new m.WBinaryOperation(h.I32Binary.mul,i.expr,new m.WConst(h.WType.u32,a.elementType.length.toString(),this.location))}}let d=g.doConversion(e,a,r,this),y=g.doConversion(e,a,i,this);return"&&"!==this.operator&&"||"!==this.operator||(d=new m.WBinaryOperation(h.I32Binary.ne,d,new m.WConst(h.WType.i32,"0",this.location),this.location),y=new m.WBinaryOperation(h.I32Binary.ne,y,new m.WConst(h.WType.i32,"0",this.location),this.location)),{type:a,isLeft:!1,expr:new m.WBinaryOperation(u,d,y,this.location)}},s.UnaryExpression.prototype.codegen=function(e){if("sizeof"===this.operator)return{type:p.PrimitiveTypes.uint32,expr:new m.WConst(h.WType.u32,this.operand.deduceType(e).length.toString(),this.location),isLeft:!1};const t=this.operand.deduceType(e);if(t instanceof c.ClassType){if(null!=e.scopeManager.lookupFullName(t.fullName+"::#"+this.operator))return new s.CallExpression(this.location,new s.MemberExpression(this.location,this.operand,!1,new s.Identifier(this.location,"#"+this.operator)),[]).codegen(e)}if("++"===this.operator||"--"===this.operator)return new s.AssignmentExpression(this.location,"=",this.operand,new s.BinaryExpression(this.location,this.operator.charAt(0),this.operand,s.IntegerConstant.getOne())).codegen(e);if("&"===this.operator){if(this.operand instanceof s.SubscriptExpression)return new s.BinaryExpression(this.location,"+",this.operand.array,this.operand.subscript).codegen(e);if(this.operand instanceof s.UnaryExpression&&"*"===this.operand.operator)return this.operand.operand.codegen(e)}let n=this.operand.codegen(e);if("*"===this.operator){if(n.type instanceof l.ReferenceType&&(n=g.doReferenceTransform(e,n,this)),n.type instanceof l.PointerType){if(n.expr instanceof A.FunctionLookUpResult)throw new o.SyntaxError("unsupport function name",this);return{isLeft:!0,type:new l.LeftReferenceType(n.type.elementType),expr:n.expr}}throw new o.SyntaxError(`you could not apply * on ${n.type.toString()} `,this)}if("&"===this.operator){if(!(n.isLeft&&n.expr instanceof d.WAddressHolder))throw new o.SyntaxError("you could not get address of a right value ",this);return n.type instanceof l.ArrayType&&(n.type=n.type.elementType),{isLeft:!1,type:new l.PointerType(n.type),expr:n.expr.createLoadAddress(e)}}if("+"===this.operator)return g.doValueTransform(e,this.operand.codegen(e),this);if("-"===this.operator)return new s.BinaryExpression(this.location,"-",s.IntegerConstant.getZero(),this.operand).codegen(e);if("!"===this.operator){const t=g.doConversion(e,p.PrimitiveTypes.int32,this.operand.codegen(e),this);return{type:p.PrimitiveTypes.int32,isLeft:!1,expr:new h.WUnaryOperation(h.I32Unary.eqz,t,this.location)}}if("~"===this.operator)return new s.BinaryExpression(this.location,"^",s.IntegerConstant.getNegOne(),this.operand).codegen(e);throw new o.InternalError(`no_impl at unary ope=${this.operator}`)},s.SubscriptExpression.prototype.codegen=function(e){return new s.UnaryExpression(this.location,"*",new s.BinaryExpression(this.location,"+",this.array,this.subscript)).codegen(e)},n.doVarInit=v,s.CastExpression.prototype.codegen=function(e){const t=this.deduceType(e),n=this.operand.codegen(e);return{type:t,expr:g.doConversion(e,t,n,this,!0),isLeft:!1}},s.PostfixExpression.prototype.codegen=function(e){const t=this.operand.codegen(e);if(!(t.isLeft&&t.expr instanceof d.WAddressHolder))throw new o.SyntaxError("your could not ++ a left value",this);return E.recycleExpressionResult(e,this,new s.AssignmentExpression(this.location,"=",this.operand,new s.BinaryExpression(this.location,this.decrement?"-":"+",this.operand,s.IntegerConstant.getOne())).codegen(e)),t},s.ConditionalExpression.prototype.codegen=function(e){const t=g.doConversion(e,p.PrimitiveTypes.int32,this.test.codegen(e),this),n=this.deduceType(e),r=this.consequent.codegen(e),i=this.alternate.codegen(e);if(n instanceof c.ClassType){const s=new l.LeftReferenceType(n);return{type:s,expr:new d.WAddressHolder(new m.WConditionalExpression(t,g.doConversion(e,s,r,this,!1,!0),g.doConversion(e,s,i,this,!1,!0)),a.AddressType.RVALUE,this.location),isLeft:!0}}return{type:n,expr:new m.WConditionalExpression(t,g.doConversion(e,n,r,this),g.doConversion(e,n,i,this)),isLeft:!1}},n.expression=function(){return""}},{long:"YvD4","../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../type":"Rt13","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/constant":"hpbE","../wasm/expression":"yB6U","./address":"JsMC","./conversion":"Gzzz","./cpp/overload":"A7U9","./cpp/reference":"+pen","./scope":"y+tL","./statement":"X3yq"}],Hvm1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/ast"),i=e("../common/error"),s=e("../common/symbol"),o=e("../type"),a=e("../type/class_type"),u=e("../type/compound_type"),c=e("../type/function_type"),l=e("../type/primitive_type"),p=e("./conversion"),h=e("./cpp/overload"),f=e("./cpp/template"),m=e("./declaration"),d=e("./scope");function g(e,t){return e instanceof l.FloatingType||t instanceof l.FloatingType?l.PrimitiveTypes.double:e instanceof l.UnsignedInt64Type||t instanceof l.UnsignedInt64Type?l.PrimitiveTypes.uint64:e instanceof l.Int64Type||t instanceof l.Int64Type?l.PrimitiveTypes.int64:e instanceof l.UnsignedIntegerType||t instanceof l.UnsignedIntegerType?l.PrimitiveTypes.uint32:l.PrimitiveTypes.int32}r.ParenthesisExpression.prototype.deduceType=function(e){return this.expression.deduceType(e)},r.AssignmentExpression.prototype.deduceType=function(e){return this.left.deduceType(e)},r.IntegerConstant.prototype.deduceType=function(e){return this.codegen(e).type},r.CharacterConstant.prototype.deduceType=function(e){return this.codegen(e).type},r.FloatingConstant.prototype.deduceType=function(e){return this.codegen(e).type},r.StringLiteral.prototype.deduceType=function(e){return this.codegen(e).type},r.Identifier.prototype.deduceType=function(e){const t=this.codegen(e);return t.expr instanceof d.FunctionLookUpResult?new c.UnresolvedFunctionOverloadType(t.expr):t.type},r.TemplateFuncInstanceIdentifier.prototype.deduceType=function(e){const t=this.name.name,n=e.scopeManager.lookupAnyName(t);if(!n)throw new i.SyntaxError(`cannot find template ${t}`,this);if(!(n instanceof d.FunctionLookUpResult))throw new i.SyntaxError(`${t} is not template`,this);return n.templateArguments=this.args.map(t=>f.evaluateTemplateArgument(e,t,this)),new c.UnresolvedFunctionOverloadType(n)},r.BinaryExpression.prototype.deduceType=function(e){const t=p.doTypeTransfrom(this.left.deduceType(e)),n=p.doTypeTransfrom(this.right.deduceType(e));if(t instanceof a.ClassType)return new r.CallExpression(this.location,new r.MemberExpression(this.location,this.left,!1,new r.Identifier(this.location,"#"+this.operator)),[this.right]).deduceType(e);if("+-*%/".includes(this.operator)){if(t instanceof l.ArithmeticType&&n instanceof l.ArithmeticType)return g(t,n);if(t instanceof u.PointerType||n instanceof u.PointerType){if(t instanceof u.PointerType&&n instanceof u.PointerType)throw new i.TypeError("could not apply ope on two pointer",this);if(t instanceof u.PointerType){if(!(n instanceof l.IntegerType))throw new i.TypeError(`could not apply ${n.toString()} to pointer`,this);return t}if(n instanceof u.PointerType){if(!(t instanceof l.IntegerType))throw new i.TypeError(`could not apply ${t.toString()} to pointer`,this);if("-"===this.operator)throw new i.TypeError("could - a pointer",this);return n}throw new i.TypeError("bad operator on pointer",this)}throw new i.TypeError(`could not apply ${this.operator} on ${t.toString()} and ${n.toString()}`,this)}if([">=","<=",">","<","==","!="].includes(this.operator)){if(t instanceof l.ArithmeticType&&n instanceof l.ArithmeticType)return l.PrimitiveTypes.bool;if(t instanceof u.PointerType&&n instanceof u.PointerType)return l.PrimitiveTypes.bool;throw new i.TypeError("unsupport relation compute",this)}if(["&&","||"].includes(this.operator))return l.PrimitiveTypes.bool;if(["&","|","^",">>","<<"].includes(this.operator)){if(!(t instanceof l.IntegerType&&n instanceof l.IntegerType))throw new i.TypeError("binary operator could only be applied on integer",this);return l.PrimitiveTypes.int32}if(","===this.operator)return this.right.deduceType(e);throw new i.InternalError("no impl at BinaryExpression()")},r.UnaryExpression.prototype.deduceType=function(e){if("sizeof"===this.operator)return l.PrimitiveTypes.uint32;if("++"===this.operator||"--"===this.operator)return new r.BinaryExpression(this.location,this.operator.charAt(0),this.operand,r.IntegerConstant.getOne()).deduceType(e);const t=p.doTypeTransfrom(this.operand.deduceType(e));if("*"===this.operator){if(t instanceof u.PointerType||t instanceof u.ArrayType)return t.elementType;if(t instanceof u.LeftReferenceType&&(t.elementType instanceof u.PointerType||t.elementType instanceof u.ArrayType))return t.elementType.elementType;throw new i.TypeError(`could not apply * on ${t.toString()}`,this)}if("&"===this.operator)return new u.PointerType(t);if("!"===this.operator||"~"===this.operator)return l.PrimitiveTypes.int32;if("+"===this.operator||"-"===this.operator)return this.operand.deduceType(e);throw new i.InternalError("no imple at UnaryExpression().deduce")},r.CallExpression.prototype.deduceType=function(e){const t=this.callee.deduceType(e);if(t instanceof u.PointerType&&t.elementType instanceof c.FunctionType)return t.elementType.returnType;if(!(t instanceof c.UnresolvedFunctionOverloadType))throw new i.TypeError("the callee is not function",this);const n=t.functionLookupResult;let r=n.functions[0];if(e.isCpp()&&(r=h.doFunctionOverloadResolution(e,n,this.arguments.map(t=>t.deduceType(e)),this)),null===r)throw new i.SyntaxError(`no matching function for ${n.functions[0].name}`,this);return r.type.returnType},r.SubscriptExpression.prototype.deduceType=function(e){return new r.UnaryExpression(this.location,"*",new r.BinaryExpression(this.location,"+",this.array,this.subscript)).deduceType(e)},r.MemberExpression.prototype.deduceType=function(e){const t=this.pointed?new r.UnaryExpression(this.location,"*",this.object).deduceType(e):this.object.deduceType(e);let n=t;if(n instanceof u.LeftReferenceType&&(n=n.elementType),!(n instanceof a.ClassType))throw new i.SyntaxError("only struct/class could be get member",this);const l=e.scopeManager.lookupFullName(n.fullName+"::"+this.member.name);if(null!==l){if(l instanceof o.Type)throw new i.SyntaxError("illegal type member expression",this);return l instanceof s.Variable?l.type:(l.instanceType=n,new c.UnresolvedFunctionOverloadType(l))}const p=n.getField(this.member.name);if(!p)throw new i.SyntaxError(`property ${this.member.name} does not appear on ${n.name}`,this);return t instanceof u.LeftReferenceType?new u.LeftReferenceType(p.type):p.type},r.TypeName.prototype.deduceType=function(e){let t=m.parseTypeFromSpecifiers(e,this.specifierQualifiers,this);return this.declarator&&(t=m.parseAbstractDeclarator(e,this.declarator,t)),t},r.CastExpression.prototype.deduceType=function(e){return this.typeName.deduceType(e)},r.PostfixExpression.prototype.deduceType=function(e){return this.operand.deduceType(e)},r.ConditionalExpression.prototype.deduceType=function(e){const t=p.doTypeTransfrom(this.consequent.deduceType(e)),n=p.doTypeTransfrom(this.alternate.deduceType(e));if(t instanceof l.ArithmeticType&&n instanceof l.ArithmeticType)return g(t,n);if(t.equals(n))return t;throw new i.SyntaxError("the type between conditional expression is not same",this)},r.ConstructorCallExpression.prototype.deduceType=function(e){return this.name.codegen(e)},r.NewExpression.prototype.deduceType=function(e){return new u.PointerType(this.name.deduceType(e))},r.DeleteExpression.prototype.deduceType=function(e){return l.PrimitiveTypes.void},n.expression_type=function(){return""}},{"../common/ast":"URi4","../common/error":"nOPH","../common/symbol":"HcQt","../type":"Rt13","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./conversion":"Gzzz","./cpp/overload":"A7U9","./cpp/template":"ozR1","./declaration":"tSbt","./scope":"y+tL"}],FIFg:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type"),i=e("../type/compound_type"),s=e("../type/function_type"),o=e("../type/primitive_type"),a=e("./class"),u=e("./cpp/template"),c=e("./declaration"),l=e("./expression"),p=e("./expression_type"),h=e("./function"),f=e("./statement");c.declaration(),f.statement(),h.functions(),l.expression(),p.expression_type(),a.classes(),u.template(),n.codegen=function(e,t){const n=new i.PointerType(o.PrimitiveTypes.void);t.isCpp()&&(h.declareFunction(t,new s.FunctionType("memcpy",o.PrimitiveTypes.void,[n,n,o.PrimitiveTypes.uint32],["dst","src","size"],!1),!0,r.AccessControl.Public,e),h.declareFunction(t,new s.FunctionType("memset",o.PrimitiveTypes.void,[n,o.PrimitiveTypes.int32,o.PrimitiveTypes.uint32],["dst","ch","size"],!1),!0,r.AccessControl.Public,e),h.declareFunction(t,new s.FunctionType("malloc",new i.PointerType(o.PrimitiveTypes.void),[o.PrimitiveTypes.uint32],["size"],!1),!0,r.AccessControl.Public,e),h.declareFunction(t,new s.FunctionType("malloc_array",new i.PointerType(o.PrimitiveTypes.void),[o.PrimitiveTypes.uint32,o.PrimitiveTypes.uint32],["element_size","length"],!1),!0,r.AccessControl.Public,e),h.declareFunction(t,new s.FunctionType("free",o.PrimitiveTypes.void,[n],["ptr"],!1),!0,r.AccessControl.Public,e)),e.codegen(t),t.isCpp()&&u.executeDeferFunctionTemplateInstantiation(t)}},{"../type":"Rt13","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./class":"jSeS","./cpp/template":"ozR1","./declaration":"tSbt","./expression":"QUFU","./expression_type":"Hvm1","./function":"XWPX","./statement":"X3yq"}],KRc9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MemoryLayout=class MemoryLayout{constructor(e){this.dataPtr=0,this.stackPtr=0,this.localPtr=0,this.bssPtr=0,this.stackScope=[],this.dataBuffer=new ArrayBuffer(e),this.data=new DataView(this.dataBuffer),this.stringMap=new Map,this.MEMORY_$BP=0,this.MEMORY_$SP=0,this.localTypes=[]}allocData(e){const t=this.dataPtr;return this.dataPtr+=e,t}allocBss(e){const t=this.bssPtr;return this.bssPtr+=e,t}allocLocal(e,t=!1){return t||this.localTypes.push(e),this.localPtr++}allocStack(e){return e%4!=0&&(e+=4-e%4),this.stackPtr-=e,this.stackPtr}allocString(e){const t=this.stringMap.get(e);if(void 0!==t)return t;const n=this.allocData(e.length+1);return this.setDataString(n,e),this.stringMap.set(e,n),n}setDataString(e,t){for(let n=0;n<t.length;n++)this.data.setUint8(e+n,t.charCodeAt(n));this.data.setUint8(e+t.length,0)}enterFunction(){this.stackScope.push(this.stackPtr),this.stackPtr=0,this.localPtr=0,this.localTypes=[]}exitFunction(){this.stackPtr=this.stackScope.pop()}}},{}],cKzO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),s=e("../type/class_type"),o=e("./cpp/lifecycle"),a=e("./memory"),u=e("./scope");n.CompileContext=class CompileContext{constructor(e,t={},n,r){this.scopeManager=new u.ScopeManager(!!t.isCpp),this.functionMap=new Map,this.memory=new a.MemoryLayout(1e3),this.currentFunction=null,this.options=t,this.fileName=e,this.sourceMap=r,this.source=n,this.statementContainer=[],this.functions=[],this.imports=[],this.switchContext=null,this.breakStack=[],this.continueStack=[],this.blockLevel=0,this.deferInstantiationTasks=[],this.requiredWASMFuncTypes=new Set}isCpp(){return!!this.options.isCpp}enterFunction(e){this.functionMap.set(e.name,e),this.scopeManager.enterScope(e.name),this.memory.enterFunction(),this.currentFunction=e}triggerDtors(e,t){for(const n of t.map.values()){const t=n[0];t instanceof i.Variable&&t.type instanceof s.ClassType&&o.triggerDestructor(this,t,e)}}triggerDtorsInner(e){let t=this.scopeManager.currentScope;for(;t.isInnerScope;)this.triggerDtors(e,t),t=t.parent;this.triggerDtors(e,t)}exitFunction(){if(null==this.currentFunction)throw new r.InternalError("this.currentFunction==null");this.memory.exitFunction(),this.scopeManager.exitScope()}enterScope(){this.scopeManager.enterUnnamedScope()}exitScope(e){this.triggerDtors(e,this.scopeManager.currentScope),this.scopeManager.exitScope()}setStatementContainer(e){this.statementContainer=e}getStatementContainer(){return this.statementContainer}submitStatement(e){this.statementContainer.push(e)}submitFunction(e){this.functions.push(e)}raiseWarning(e,t){console.log("[Warning]: "+e)}toCompiledObject(){return{fileName:this.fileName,dataSize:this.memory.dataPtr,functions:this.functions,imports:this.imports,exports:[],data:this.memory.dataBuffer,globalStatements:this.statementContainer,source:this.source,sourceMap:this.sourceMap,requiredWASMFuncTypes:this.requiredWASMFuncTypes,scope:this.scopeManager.root}}allocTmpVar(e,t){const n=this.scopeManager.allocTmpVarName(),r=new i.Variable(n,n,t.location.fileName,e,i.AddressType.STACK,this.memory.allocStack(e.length));return this.scopeManager.define(n,r,t),[n,r]}submitDeferInstantiationTask(e){this.deferInstantiationTasks.push(e)}}},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","./cpp/lifecycle":"vue3","./memory":"KRc9","./scope":"y+tL"}],uhSO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Headers=new Map([["assert.h","#ifndef _ASSERT_H\n#define _ASSERT_H\n\n#ifdef NDEBUG\n#define assert(EX)\n#else\n#define assert(EX) (void)((EX) || (__assert (#EX, __FILE__, __LINE__),0))\n#endif\n\nvoid __assert (const char *msg, const char *file, int line);\n\n#endif"],["stdio.h","#ifndef _STDIO_H\n#define _STDIO_H\n\n__libcall void dump_stack_info();\n\n\n__libcall int scanf(const char * format, ...);\n__libcall int printf(const char * format, ...);\n__libcall int getchar();\nint puts(const char * str);\n\n#endif"],["stdarg.h","#ifndef _STDARG_H\n#define _STDARG_H\n\ntypedef void* va_list;\n#define va_start(ptr,arg) (ptr) = &(arg) + sizeof(arg) + 4\n#define va_arg(ptr,type) ((ptr) += sizeof(type), *((type *)(ptr - sizeof(type))))\n#define va_end(ptr) (ptr) = 0;\n\n#endif"],["stdlib.h","#ifndef _STDLIB_H\n#define _STDLIB_H\n\n__libcall void *malloc(unsigned int num_bytes);\n__libcall void *memset(void * ptr, int ch, unsigned int num_bytes);\n__libcall void free(void * ptr);\n\n#endif"],["string.h","#ifndef _STRING_H\n#define _STRING_H\n\nunsigned int strlen(const char * str);\n\n#endif"],["syscall.h","#ifndef _SYSCALL_H\n#define _SYSCALL_H\n\n__libcall int write(unsigned int fd, void * buffer, unsigned int size);\n__libcall int read(unsigned int fd, void * buffer, unsigned int size);\n__libcall void memcpy(void * dst, void * src, unsigned int size);\n__libcall void * malloc(unsigned int size);\n__libcall void free(void * ptr);\n__libcall void * malloc_array(unsigned int element_size, unsigned int length);\n#endif"],["time.h","#ifndef _TIME_H\n#define _TIME_H\n\n__libcall int time(void * time_ptr);\n\n#endif"]]),n.Impls=new Map([["stdio.cpp","#include <stdio.h>\n#include <stdarg.h>\n#include <syscall.h>\n#include <string.h>\n\nint puts(const char * str){\n    int len = strlen(str);\n    write(1, str, len);\n    return len;\n}\n"],["string.cpp","#include <string.h>\n\nunsigned int strlen(const char * str){\n    unsigned int cnt = 0;\n    while( *str != 0 ){\n        str = str + 1;\n        cnt = cnt + 1;\n    }\n    return cnt;\n}"],["assert.cpp",'#include <stdio.h>\n\nvoid __assert (const char *msg, const char *file, int line){\n    //printf("assert failed in %s#%d: %s", file, line, msg);\n    //exit(255);\n}']])},{}],PyPK:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("bn.js");n.write=function(e,t,n){return e>=this.files.length?-1:this.files[e].write(this.memory.buffer.slice(t,t+n))},n.read=function(e,t,n){return e>=this.files.length?-1:this.files[e].read(this.memory.buffer,t,n)},n.memcpy=function(e,t,n){const r=this.memoryUint8Array.slice(t,t+n);this.memoryUint8Array.set(r,e)},n.memset=function(e,t,n){const r=255&t;for(let t=0;t<n;t++)this.memory.setUint8(e+t,r)},n.malloc=function(e){return this.heapAllocator.allocHeap(this,e)},n.free=function(e){return this.heapAllocator.freeHeap(this,e)};const i=new ArrayBuffer(1e3),s=new DataView(i);n.printf=function(){let e=this.sp,t=this.memory.getUint32(e,!0);e+=4;let n=this.memory.getUint8(t),o=0;for(;0!==n;){if(n==="%".charCodeAt(0)){t++;let n=String.fromCharCode(this.memory.getUint8(t)),i=0,a=0,u=!1;if("."===n||n.charCodeAt(0)>="0".charCodeAt(0)&&n.charCodeAt(0)<="9".charCodeAt(0))for(;"."===n||n.charCodeAt(0)>="0".charCodeAt(0)&&n.charCodeAt(0)<="9".charCodeAt(0);)"."===n?u=!0:u?a=10*a+ +n:i=10*i+ +n,t++,n=String.fromCharCode(this.memory.getUint8(t));let c=!1;if("l"===n&&(c=!0,t++,n=String.fromCharCode(this.memory.getUint8(t))),"%"===n)s.setUint8(o,"%".charCodeAt(0)),o++;else if("d"===n){let t;if(c){const n=new r(this.memory.getUint32(e,!0));t=new r(this.memory.getInt32(e+4,!0)).shln(32).add(n).toString(),e+=8}else t=this.memory.getInt32(e,!0).toString(),e+=4;for(let e=0;e<t.length;e++)s.setUint8(o,t.charCodeAt(e)),o++}else if("s"===n){let t=this.memory.getInt32(e,!0);e+=4;let n=this.memory.getUint8(t);for(;0!==n;)s.setUint8(o,n),o++,t++,n=this.memory.getUint8(t)}else if("f"===n){let t;if(t=this.memory.getFloat64(e,!0).toString(),e+=8,0!==a){const e=t.split(".");e.length>=2&&(e[1]=e[1].substr(0,a)),t=e.join(".")}for(let e=0;e<t.length;e++)s.setUint8(o,t.charCodeAt(e)),o++}else s.setUint8(o,"%".charCodeAt(0)),o++,s.setUint8(o,n.charCodeAt(0)),o++}else s.setUint8(o,n),o++;t++,n=this.memory.getUint8(t)}return this.files[1].write(i.slice(0,o))};const o=new ArrayBuffer(10),a=new DataView(o);function u(){return 0===this.files[0].read(o,0,1)?-1:a.getUint8(0)}n.getchar=u;const c="0".charCodeAt(0),l="9".charCodeAt(0),p=" ".charCodeAt(0),h="\t".charCodeAt(0),f="\n".charCodeAt(0),m="-".charCodeAt(0);n.scanf=function(){let e=0,t=this.sp,n=this.memory.getUint32(t,!0);t+=4;let r=this.memory.getUint8(n);for(;0!==r;){if(r==="%".charCodeAt(0)){n++;let r=String.fromCharCode(this.memory.getUint8(n)),i=!1;if("l"===r&&(i=!0,n++,r=String.fromCharCode(this.memory.getUint8(n))),"d"===r){let n=0,r=0,i=u.apply(this),s=0;for(;-1!==i&&!(i>=c&&i<=l);)s=i,i=u.apply(this);for(s===m&&(r=1);-1!==i&&i>=c&&i<=l;)n=10*n+i-c,i=u.apply(this);const o=this.memory.getInt32(t,!0);t+=4,r?this.memory.setInt32(o,-n,!0):this.memory.setInt32(o,n,!0),e++}else if("s"===r){let n=this.memory.getInt32(t,!0),r=u.apply(this);for(;-1!==r&&r!==f&&r!==p&&r!==h;)this.memory.setUint8(n++,r),r=u.apply(this);e++}}n++,r=this.memory.getUint8(n)}return e},n.dump_stack_info=function(){console.log("$sp = "+this.sp)},n.time=function(e){return Math.round((new Date).getTime()/1e3)},n.malloc_array=function(e,t){const n=this.heapAllocator.allocHeap(this,e*t+4);return this.memory.setInt32(n,t,!0),n+4}},{"bn.js":"BOxy"}],bjS5:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./library");n.Headers=i.Headers,n.Impls=i.Impls;const s=r(e("./syscall"));n.JsAPIMap=Object.assign({},s)},{"./library":"uhSO","./syscall":"PyPK"}],dGoJ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../wasm"),s=e("../wasm/expression"),o=e("../wasm/section"),a=e("../wasm/statement");n.link=function(e,t,n){const u=[],c=[],l=[],p=[],h=[],f=new Map,m=new Map,d=new Set;for(const e of t)m.set(e.fileName,{source:e.source.split("\n"),sourceMap:e.sourceMap,lastLine:0}),Array.from(e.requiredWASMFuncTypes.keys()).map(e=>d.add(e));const g=[];let y=0;for(const e of t){for(const t of e.functions)t.dataStart=y,t.fileName=e.fileName,/^::main@.*/.test(t.name)&&g.push(t.name),l.push(t);p.push(new o.WDataSegment(y,e.data.slice(0,e.dataSize)));const t=`$init$${e.fileName}`,n=new i.WFunction(t,[],[],[],e.globalStatements);n.dataStart=y,l.push(n),h.push(t),y+=e.dataSize}let w=y;for(const e of t){for(const t of e.functions)t.bssStart=w;w+=e.dataSize}const A=new i.WFunction("$start",[],[],[],h.map(e=>new i.WCall(e,[],[])));l.push(A);for(const e of t)for(const t of e.exports){if(f.get(t.name))throw new r.LinkerError(`duplicated symbol of ${t.name}`);f.set(t.name,t.location)}for(const e of t)for(const t of e.imports)u.includes(t.name)||(u.push(t.name),c.push(new i.WImportFunction("system",t.name,t.type.returnTypes,t.type.parameters)));const E=t[t.length-1].scope;if(c.push(new o.WImportMemory("system","memory",1,10)),l.push(new i.WFunction("$get_sp",[i.WType.u32],[],[],[new i.WReturn(new s.WGetGlobal(i.WType.u32,"$sp"))])),l.push(new i.WFunction("$set_sp",[],[i.WType.u32],[],[new a.WSetGlobal(i.WType.u32,"$sp",new s.WGetLocal(i.WType.u32,0))])),0===g.length)throw new r.LinkerError("no main function found");if(g.length>1)throw new r.LinkerError("multiple main function found");const T=new i.WModule({functions:l,imports:c,exports:["$start",g[0],"$get_sp","$set_sp"],globals:[new i.WGlobalVariable("$sp",i.u32,new i.WConst(i.u32,"1000"))],data:p,generateMemory:!1,requiredFuncTypes:Array.from(d.keys())}),S=new i.WASMEmitter;S.externMap=f,T.optimize(S),T.emit(S);const v=new i.JSONEmitter;if(v.sourceMap=m,T.emitJSON(v),n.debug){const e=new i.WASMEmitter;e.sourceMap=m,T.dump(e)}return{fileName:e,heapStart:4*(parseInt((w+1)/4)+1),entry:g[0],sourceMap:m,scope:E,binary:S.buffer.slice(0,S.now),json:v.getJSON()}}},{"../common/error":"nOPH","../wasm":"Jo9c","../wasm/expression":"yB6U","../wasm/section":"1WA9","../wasm/statement":"0h1i"}],Btp4:[function(e,t,n){"use strict";var r={range:function(e,t){var n,r,i=t-e,s=new Array(i);for(n=0,r=e;n<i;n++,r++)s[n]=r;return s},find:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return e[n]}else for(n=0;n<r;n++)if(e[n]===t)return e[n]},indexOf:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return n}else for(n=0;n<r;n++)if(e[n]===t)return n;return-1},contains:function(e,t){return-1!==r.indexOf(e,t)},each:function(e,t){var n,r=e.length;for(n=0;n<r;n++)t(e[n],n)},map:function(e,t){var n,r=e.length,i=new Array(r);for(n=0;n<r;n++)i[n]=t(e[n],n);return i},pluck:function(e,t){return r.map(e,function(e){return e[t]})},every:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(!t(e[n]))return!1;return!0},some:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t(e[n]))return!0;return!1}};t.exports=r},{}],Saqe:[function(e,t,n){"use strict";t.exports={keys:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},values:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},defaults:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(n in e||(e[n]=t[n]))}}},{}],T5R9:[function(e,t,n){"use strict";t.exports={subclass:function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}}},{}],RCHO:[function(e,t,n){"use strict";function r(e,t){this.name="GrammarError",this.message=e,this.location=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}e("./utils/classes").subclass(r,Error),t.exports=r},{"./utils/classes":"T5R9"}],DLue:[function(e,t,n){"use strict";function r(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?s(e.parts[t][0])+"-"+s(e.parts[t][1]):s(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,i,s=new Array(e.length);for(t=0;t<e.length;t++)s[t]=(i=e[t],n[i.type](i));if(s.sort(),s.length>0){for(t=1,r=1;t<s.length;t++)s[t-1]!==s[t]&&(s[r]=s[t],r++);s.length=r}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},t.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,i={},s={Grammar:Gr},o=Gr,a=function(e,t){return{type:"grammar",initializer:(n=e,r=0,n?n[r]:null),rules:Ii(t,0),location:Ur()};var n,r},u=function(e){return{type:"initializer",code:e,location:Ur()}},c="=",l=Rr("=",!1),p=function(e,t,n){return{type:"rule",name:e,expression:null!==t?{type:"named",name:t[0],expression:n,location:Ur()}:n,location:Ur()}},h="/",f=Rr("/",!1),m=function(e,t){return t.length>0?{type:"choice",alternatives:Li(e,t,3),location:Ur()}:e},d=function(e,t){return null!==t?{type:"action",expression:e,code:t[1],location:Ur()}:e},g=function(e,t){return t.length>0?{type:"sequence",elements:Li(e,t,1),location:Ur()}:e},y=":",w=Rr(":",!1),A=function(e,t){return{type:"labeled",label:e,expression:t,location:Ur()}},E=function(e,t){return{type:xi[e],expression:t,location:Ur()}},T="$",S=Rr("$",!1),v="&",C=Rr("&",!1),x="!",_=Rr("!",!1),b=function(e,t){return{type:_i[t],expression:e,location:Ur()}},F="?",I=Rr("?",!1),L="*",M=Rr("*",!1),B="+",D=Rr("+",!1),P="(",N=Rr("(",!1),W=")",k=Rr(")",!1),O=function(e){return"labeled"===e.type||"sequence"===e.type?{type:"group",expression:e}:e},U=function(e){return{type:"rule_ref",name:e,location:Ur()}},R=function(e,t){return{type:bi[e],code:t,location:Ur()}},$={type:"any"},q=qr("whitespace"),j="\t",z=Rr("\t",!1),H="\v",V=Rr("\v",!1),G="\f",J=Rr("\f",!1),Y=" ",Z=Rr(" ",!1),X="",Q=Rr("",!1),K="\ufeff",ee=Rr("\ufeff",!1),te=/^[\n\r\u2028\u2029]/,ne=$r(["\n","\r","\u2028","\u2029"],!1,!1),re=qr("end of line"),ie="\n",se=Rr("\n",!1),oe="\r\n",ae=Rr("\r\n",!1),ue="\r",ce=Rr("\r",!1),le="\u2028",pe=Rr("\u2028",!1),he="\u2029",fe=Rr("\u2029",!1),me=qr("comment"),de="/*",ge=Rr("/*",!1),ye="*/",we=Rr("*/",!1),Ae="//",Ee=Rr("//",!1),Te=function(e){return e},Se=qr("identifier"),ve=function(e,t){return e+t.join("")},Ce="_",xe=Rr("_",!1),_e="\\",be=Rr("\\",!1),Fe=function(e){return e},Ie="",Le=Rr("",!1),Me="",Be=Rr("",!1),De=qr("literal"),Pe="i",Ne=Rr("i",!1),We=function(e,t){return{type:"literal",value:e,ignoreCase:null!==t,location:Ur()}},ke=qr("string"),Oe='"',Ue=Rr('"',!1),Re=function(e){return e.join("")},$e="'",qe=Rr("'",!1),je=function(){return Or()},ze=qr("character class"),He="[",Ve=Rr("[",!1),Ge="^",Je=Rr("^",!1),Ye="]",Ze=Rr("]",!1),Xe=function(e,t,n){return{type:"class",parts:Fi(t),inverted:null!==e,ignoreCase:null!==n,location:Ur()}},Qe="-",Ke=Rr("-",!1),et=function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)&&function(e,t){throw t=void 0!==t?t:zr(Dr,Br),function(e,t){return new r(e,null,null,t)}(e,t)}("Invalid character range: "+Or()+"."),[e,t]},tt=function(){return""},nt="0",rt=Rr("0",!1),it=function(){return"\0"},st="b",ot=Rr("b",!1),at=function(){return"\b"},ut="f",ct=Rr("f",!1),lt=function(){return"\f"},pt="n",ht=Rr("n",!1),ft=function(){return"\n"},mt="r",dt=Rr("r",!1),gt=function(){return"\r"},yt="t",wt=Rr("t",!1),At=function(){return"\t"},Et="v",Tt=Rr("v",!1),St=function(){return"\v"},vt="x",Ct=Rr("x",!1),xt="u",_t=Rr("u",!1),bt=function(e){return String.fromCharCode(parseInt(e,16))},Ft=/^[0-9]/,It=$r([["0","9"]],!1,!1),Lt=/^[0-9a-f]/i,Mt=$r([["0","9"],["a","f"]],!1,!0),Bt=".",Dt=Rr(".",!1),Pt=function(){return{type:"any",location:Ur()}},Nt=qr("code block"),Wt="{",kt=Rr("{",!1),Ot="}",Ut=Rr("}",!1),Rt=function(e){return e},$t=/^[{}]/,qt=$r(["{","}"],!1,!1),jt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,zt=$r([["a","z"],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","",["",""],"","","","","",["",""],"","","","",["",""],["",""],"","","","","","","","","","",["",""],"","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"","","","","",["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],"","","","","","","","","","","",["",""],"","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","","","",["",""],["",""],"","",["",""],"",["",""],"","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","",["",""],"","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Ht=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Vt=$r([["",""],["",""],["",""],"","","","","","",["",""],["",""],"","","","","","","","","","","",["",""],["",""],"",["",""],"","",["",""],["",""],"","","",["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],"","",["",""],"","","","",["",""],["",""],"",["",""]],!1,!1),Gt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Jt=$r(["","","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Yt=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Zt=$r(["","","","",["",""],["",""],["",""],"","",""],!1,!1),Xt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,Qt=$r([["A","Z"],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""],"","","","","","","","","",["",""],"",["",""],["",""],["",""],"",["",""],"","","","","","","","","","","","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],"","",["",""],"",["",""],"","","",["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""]],!1,!1),Kt=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,en=$r(["","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],"","","",["",""],["",""],"","",["",""],"","",["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],"",["",""],["",""],["",""],""],!1,!1),tn=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,nn=$r([["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],"","",["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","",["",""],"","",["",""],"","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],"",["",""],"",["",""],"",["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","","","",["",""],["",""],["",""],"",["",""],"","","","","",["",""],["",""]],!1,!1),rn=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,sn=$r([["0","9"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),on=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,an=$r([["",""],["",""],["",""],"",["",""],["",""],["",""]],!1,!1),un=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,cn=$r(["_",["",""],"",["",""],["",""],""],!1,!1),ln=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,pn=$r([" ","","",["",""],"","",""],!1,!1),hn="break",fn=Rr("break",!1),mn="case",dn=Rr("case",!1),gn="catch",yn=Rr("catch",!1),wn="class",An=Rr("class",!1),En="const",Tn=Rr("const",!1),Sn="continue",vn=Rr("continue",!1),Cn="debugger",xn=Rr("debugger",!1),_n="default",bn=Rr("default",!1),Fn="delete",In=Rr("delete",!1),Ln="do",Mn=Rr("do",!1),Bn="else",Dn=Rr("else",!1),Pn="enum",Nn=Rr("enum",!1),Wn="export",kn=Rr("export",!1),On="extends",Un=Rr("extends",!1),Rn="false",$n=Rr("false",!1),qn="finally",jn=Rr("finally",!1),zn="for",Hn=Rr("for",!1),Vn="function",Gn=Rr("function",!1),Jn="if",Yn=Rr("if",!1),Zn="import",Xn=Rr("import",!1),Qn="instanceof",Kn=Rr("instanceof",!1),er="in",tr=Rr("in",!1),nr="new",rr=Rr("new",!1),ir="null",sr=Rr("null",!1),or="return",ar=Rr("return",!1),ur="super",cr=Rr("super",!1),lr="switch",pr=Rr("switch",!1),hr="this",fr=Rr("this",!1),mr="throw",dr=Rr("throw",!1),gr="true",yr=Rr("true",!1),wr="try",Ar=Rr("try",!1),Er="typeof",Tr=Rr("typeof",!1),Sr="var",vr=Rr("var",!1),Cr="void",xr=Rr("void",!1),_r="while",br=Rr("while",!1),Fr="with",Ir=Rr("with",!1),Lr=";",Mr=Rr(";",!1),Br=0,Dr=0,Pr=[{line:1,column:1}],Nr=0,Wr=[],kr=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=s[t.startRule]}function Or(){return e.substring(Dr,Br)}function Ur(){return zr(Dr,Br)}function Rr(e,t){return{type:"literal",text:e,ignoreCase:t}}function $r(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function qr(e){return{type:"other",description:e}}function jr(t){var n,r=Pr[t];if(r)return r;for(n=t-1;!Pr[n];)n--;for(r={line:(r=Pr[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Pr[t]=r,r}function zr(e,t){var n=jr(e),r=jr(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Hr(e){Br<Nr||(Br>Nr&&(Nr=Br,Wr=[]),Wr.push(e))}function Vr(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function Gr(){var e,t,n,r,s,o;if(e=Br,vi()!==i)if(t=Br,(n=function(){var e,t;return e=Br,(t=Si())!==i&&Ci()!==i?(Dr=e,t=u(t),e=t):(Br=e,e=i),e}())!==i&&(r=vi())!==i?t=n=[n,r]:(Br=t,t=i),t===i&&(t=null),t!==i){if(n=[],r=Br,(s=Jr())!==i&&(o=vi())!==i?r=s=[s,o]:(Br=r,r=i),r!==i)for(;r!==i;)n.push(r),r=Br,(s=Jr())!==i&&(o=vi())!==i?r=s=[s,o]:(Br=r,r=i);else n=i;n!==i?(Dr=e,e=a(t,n)):(Br=e,e=i)}else Br=e,e=i;else Br=e,e=i;return e}function Jr(){var t,n,r,s,o,a;return t=Br,(n=ui())!==i&&vi()!==i?(r=Br,(s=pi())!==i&&(o=vi())!==i?r=s=[s,o]:(Br=r,r=i),r===i&&(r=null),r!==i?(61===e.charCodeAt(Br)?(s=c,Br++):(s=i,0===kr&&Hr(l)),s!==i&&(o=vi())!==i&&(a=Yr())!==i&&Ci()!==i?(Dr=t,t=n=p(n,r,a)):(Br=t,t=i)):(Br=t,t=i)):(Br=t,t=i),t}function Yr(){var t,n,r,s,o,a,u,c;if(t=Br,(n=Zr())!==i){for(r=[],s=Br,(o=vi())!==i?(47===e.charCodeAt(Br)?(a=h,Br++):(a=i,0===kr&&Hr(f)),a!==i&&(u=vi())!==i&&(c=Zr())!==i?s=o=[o,a,u,c]:(Br=s,s=i)):(Br=s,s=i);s!==i;)r.push(s),s=Br,(o=vi())!==i?(47===e.charCodeAt(Br)?(a=h,Br++):(a=i,0===kr&&Hr(f)),a!==i&&(u=vi())!==i&&(c=Zr())!==i?s=o=[o,a,u,c]:(Br=s,s=i)):(Br=s,s=i);r!==i?(Dr=t,t=n=m(n,r)):(Br=t,t=i)}else Br=t,t=i;return t}function Zr(){var e,t,n,r,s;return e=Br,(t=function(){var e,t,n,r,s,o;if(e=Br,(t=Xr())!==i){for(n=[],r=Br,(s=vi())!==i&&(o=Xr())!==i?r=s=[s,o]:(Br=r,r=i);r!==i;)n.push(r),r=Br,(s=vi())!==i&&(o=Xr())!==i?r=s=[s,o]:(Br=r,r=i);n!==i?(Dr=e,t=g(t,n),e=t):(Br=e,e=i)}else Br=e,e=i;return e}())!==i?(n=Br,(r=vi())!==i&&(s=Si())!==i?n=r=[r,s]:(Br=n,n=i),n===i&&(n=null),n!==i?(Dr=e,e=t=d(t,n)):(Br=e,e=i)):(Br=e,e=i),e}function Xr(){var t,n,r,s;return t=Br,(n=function(){var t,n,r;return t=Br,n=Br,kr++,r=function(){var t;return(t=function(){var t;return(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===hn?(n=hn,Br+=5):(n=i,0===kr&&Hr(fn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===mn?(n=mn,Br+=4):(n=i,0===kr&&Hr(dn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===gn?(n=gn,Br+=5):(n=i,0===kr&&Hr(yn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,8)===Sn?(n=Sn,Br+=8):(n=i,0===kr&&Hr(vn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,8)===Cn?(n=Cn,Br+=8):(n=i,0===kr&&Hr(xn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,7)===_n?(n=_n,Br+=7):(n=i,0===kr&&Hr(bn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===Fn?(n=Fn,Br+=6):(n=i,0===kr&&Hr(In)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,2)===Ln?(n=Ln,Br+=2):(n=i,0===kr&&Hr(Mn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===Bn?(n=Bn,Br+=4):(n=i,0===kr&&Hr(Dn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,7)===qn?(n=qn,Br+=7):(n=i,0===kr&&Hr(jn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,3)===zn?(n=zn,Br+=3):(n=i,0===kr&&Hr(Hn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,8)===Vn?(n=Vn,Br+=8):(n=i,0===kr&&Hr(Gn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,2)===Jn?(n=Jn,Br+=2):(n=i,0===kr&&Hr(Yn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,10)===Qn?(n=Qn,Br+=10):(n=i,0===kr&&Hr(Kn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,2)===er?(n=er,Br+=2):(n=i,0===kr&&Hr(tr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,3)===nr?(n=nr,Br+=3):(n=i,0===kr&&Hr(rr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===or?(n=or,Br+=6):(n=i,0===kr&&Hr(ar)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===lr?(n=lr,Br+=6):(n=i,0===kr&&Hr(pr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===hr?(n=hr,Br+=4):(n=i,0===kr&&Hr(fr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===mr?(n=mr,Br+=5):(n=i,0===kr&&Hr(dr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,3)===wr?(n=wr,Br+=3):(n=i,0===kr&&Hr(Ar)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===Er?(n=Er,Br+=6):(n=i,0===kr&&Hr(Tr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,3)===Sr?(n=Sr,Br+=3):(n=i,0===kr&&Hr(vr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===Cr?(n=Cr,Br+=4):(n=i,0===kr&&Hr(xr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===_r?(n=_r,Br+=5):(n=i,0===kr&&Hr(br)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===Fr?(n=Fr,Br+=4):(n=i,0===kr&&Hr(Ir)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}()),t}())===i&&(t=function(){var t;return(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===wn?(n=wn,Br+=5):(n=i,0===kr&&Hr(An)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===En?(n=En,Br+=5):(n=i,0===kr&&Hr(Tn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===Pn?(n=Pn,Br+=4):(n=i,0===kr&&Hr(Nn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===Wn?(n=Wn,Br+=6):(n=i,0===kr&&Hr(kn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,7)===On?(n=On,Br+=7):(n=i,0===kr&&Hr(Un)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,6)===Zn?(n=Zn,Br+=6):(n=i,0===kr&&Hr(Xn)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===ur?(n=ur,Br+=5):(n=i,0===kr&&Hr(cr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}()),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===ir?(n=ir,Br+=4):(n=i,0===kr&&Hr(sr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t;return(t=function(){var t,n,r,s;return t=Br,e.substr(Br,4)===gr?(n=gr,Br+=4):(n=i,0===kr&&Hr(yr)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r,s;return t=Br,e.substr(Br,5)===Rn?(n=Rn,Br+=5):(n=i,0===kr&&Hr($n)),n!==i?(r=Br,kr++,s=li(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t}()),t}()),t}(),kr--,r===i?n=void 0:(Br=n,n=i),n!==i&&(r=ui())!==i?(Dr=t,n=Te(r),t=n):(Br=t,t=i),t}())!==i&&vi()!==i?(58===e.charCodeAt(Br)?(r=y,Br++):(r=i,0===kr&&Hr(w)),r!==i&&vi()!==i&&(s=Qr())!==i?(Dr=t,t=n=A(n,s)):(Br=t,t=i)):(Br=t,t=i),t===i&&(t=Qr()),t}function Qr(){var t,n,r;return t=Br,(n=function(){var t;return 36===e.charCodeAt(Br)?(t=T,Br++):(t=i,0===kr&&Hr(S)),t===i&&(38===e.charCodeAt(Br)?(t=v,Br++):(t=i,0===kr&&Hr(C)),t===i&&(33===e.charCodeAt(Br)?(t=x,Br++):(t=i,0===kr&&Hr(_)))),t}())!==i&&vi()!==i&&(r=Kr())!==i?(Dr=t,t=n=E(n,r)):(Br=t,t=i),t===i&&(t=Kr()),t}function Kr(){var t,n,r;return t=Br,(n=ei())!==i&&vi()!==i&&(r=function(){var t;return 63===e.charCodeAt(Br)?(t=F,Br++):(t=i,0===kr&&Hr(I)),t===i&&(42===e.charCodeAt(Br)?(t=L,Br++):(t=i,0===kr&&Hr(M)),t===i&&(43===e.charCodeAt(Br)?(t=B,Br++):(t=i,0===kr&&Hr(D)))),t}())!==i?(Dr=t,t=n=b(n,r)):(Br=t,t=i),t===i&&(t=ei()),t}function ei(){var t,n,r,s;return(t=function(){var t,n,r;return kr++,t=Br,(n=pi())!==i?(105===e.charCodeAt(Br)?(r=Pe,Br++):(r=i,0===kr&&Hr(Ne)),r===i&&(r=null),r!==i?(Dr=t,n=We(n,r),t=n):(Br=t,t=i)):(Br=t,t=i),kr--,t===i&&(n=i,0===kr&&Hr(De)),t}())===i&&(t=function(){var t,n,r,s,o,a;if(kr++,t=Br,91===e.charCodeAt(Br)?(n=He,Br++):(n=i,0===kr&&Hr(Ve)),n!==i)if(94===e.charCodeAt(Br)?(r=Ge,Br++):(r=i,0===kr&&Hr(Je)),r===i&&(r=null),r!==i){for(s=[],(o=mi())===i&&(o=di());o!==i;)s.push(o),(o=mi())===i&&(o=di());s!==i?(93===e.charCodeAt(Br)?(o=Ye,Br++):(o=i,0===kr&&Hr(Ze)),o!==i?(105===e.charCodeAt(Br)?(a=Pe,Br++):(a=i,0===kr&&Hr(Ne)),a===i&&(a=null),a!==i?(Dr=t,n=Xe(r,s,a),t=n):(Br=t,t=i)):(Br=t,t=i)):(Br=t,t=i)}else Br=t,t=i;else Br=t,t=i;return kr--,t===i&&(n=i,0===kr&&Hr(ze)),t}())===i&&(t=function(){var t,n;return t=Br,46===e.charCodeAt(Br)?(n=Bt,Br++):(n=i,0===kr&&Hr(Dt)),n!==i&&(Dr=t,n=Pt()),t=n}())===i&&(t=function(){var t,n,r,s,o,a,u,p;return t=Br,(n=ui())!==i?(r=Br,kr++,s=Br,(o=vi())!==i?(a=Br,(u=pi())!==i&&(p=vi())!==i?a=u=[u,p]:(Br=a,a=i),a===i&&(a=null),a!==i?(61===e.charCodeAt(Br)?(u=c,Br++):(u=i,0===kr&&Hr(l)),u!==i?s=o=[o,a,u]:(Br=s,s=i)):(Br=s,s=i)):(Br=s,s=i),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?(Dr=t,n=U(n),t=n):(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=function(){var t,n,r;return t=Br,(n=function(){var t;return 38===e.charCodeAt(Br)?(t=v,Br++):(t=i,0===kr&&Hr(C)),t===i&&(33===e.charCodeAt(Br)?(t=x,Br++):(t=i,0===kr&&Hr(_))),t}())!==i&&vi()!==i&&(r=Si())!==i?(Dr=t,n=R(n,r),t=n):(Br=t,t=i),t}())===i&&(t=Br,40===e.charCodeAt(Br)?(n=P,Br++):(n=i,0===kr&&Hr(N)),n!==i&&vi()!==i&&(r=Yr())!==i&&vi()!==i?(41===e.charCodeAt(Br)?(s=W,Br++):(s=i,0===kr&&Hr(k)),s!==i?(Dr=t,t=n=O(r)):(Br=t,t=i)):(Br=t,t=i)),t}function ti(){var t;return e.length>Br?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr($)),t}function ni(){var t;return kr++,9===e.charCodeAt(Br)?(t=j,Br++):(t=i,0===kr&&Hr(z)),t===i&&(11===e.charCodeAt(Br)?(t=H,Br++):(t=i,0===kr&&Hr(V)),t===i&&(12===e.charCodeAt(Br)?(t=G,Br++):(t=i,0===kr&&Hr(J)),t===i&&(32===e.charCodeAt(Br)?(t=Y,Br++):(t=i,0===kr&&Hr(Z)),t===i&&(160===e.charCodeAt(Br)?(t=X,Br++):(t=i,0===kr&&Hr(Q)),t===i&&(65279===e.charCodeAt(Br)?(t=K,Br++):(t=i,0===kr&&Hr(ee)),t===i&&(t=function(){var t;return ln.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(pn)),t}())))))),kr--,t===i&&0===kr&&Hr(q),t}function ri(){var t;return te.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(ne)),t}function ii(){var t;return kr++,10===e.charCodeAt(Br)?(t=ie,Br++):(t=i,0===kr&&Hr(se)),t===i&&(e.substr(Br,2)===oe?(t=oe,Br+=2):(t=i,0===kr&&Hr(ae)),t===i&&(13===e.charCodeAt(Br)?(t=ue,Br++):(t=i,0===kr&&Hr(ce)),t===i&&(8232===e.charCodeAt(Br)?(t=le,Br++):(t=i,0===kr&&Hr(pe)),t===i&&(8233===e.charCodeAt(Br)?(t=he,Br++):(t=i,0===kr&&Hr(fe)))))),kr--,t===i&&0===kr&&Hr(re),t}function si(){var t;return kr++,(t=function(){var t,n,r,s,o,a;if(t=Br,e.substr(Br,2)===de?(n=de,Br+=2):(n=i,0===kr&&Hr(ge)),n!==i){for(r=[],s=Br,o=Br,kr++,e.substr(Br,2)===ye?(a=ye,Br+=2):(a=i,0===kr&&Hr(we)),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);s!==i;)r.push(s),s=Br,o=Br,kr++,e.substr(Br,2)===ye?(a=ye,Br+=2):(a=i,0===kr&&Hr(we)),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);r!==i?(e.substr(Br,2)===ye?(s=ye,Br+=2):(s=i,0===kr&&Hr(we)),s!==i?t=n=[n,r,s]:(Br=t,t=i)):(Br=t,t=i)}else Br=t,t=i;return t}())===i&&(t=ai()),kr--,t===i&&0===kr&&Hr(me),t}function oi(){var t,n,r,s,o,a;if(t=Br,e.substr(Br,2)===de?(n=de,Br+=2):(n=i,0===kr&&Hr(ge)),n!==i){for(r=[],s=Br,o=Br,kr++,e.substr(Br,2)===ye?(a=ye,Br+=2):(a=i,0===kr&&Hr(we)),a===i&&(a=ri()),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);s!==i;)r.push(s),s=Br,o=Br,kr++,e.substr(Br,2)===ye?(a=ye,Br+=2):(a=i,0===kr&&Hr(we)),a===i&&(a=ri()),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);r!==i?(e.substr(Br,2)===ye?(s=ye,Br+=2):(s=i,0===kr&&Hr(we)),s!==i?t=n=[n,r,s]:(Br=t,t=i)):(Br=t,t=i)}else Br=t,t=i;return t}function ai(){var t,n,r,s,o,a;if(t=Br,e.substr(Br,2)===Ae?(n=Ae,Br+=2):(n=i,0===kr&&Hr(Ee)),n!==i){for(r=[],s=Br,o=Br,kr++,a=ri(),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);s!==i;)r.push(s),s=Br,o=Br,kr++,a=ri(),kr--,a===i?o=void 0:(Br=o,o=i),o!==i&&(a=ti())!==i?s=o=[o,a]:(Br=s,s=i);r!==i?t=n=[n,r]:(Br=t,t=i)}else Br=t,t=i;return t}function ui(){var e,t,n,r;if(kr++,e=Br,(t=ci())!==i){for(n=[],r=li();r!==i;)n.push(r),r=li();n!==i?(Dr=e,e=t=ve(t,n)):(Br=e,e=i)}else Br=e,e=i;return kr--,e===i&&(t=i,0===kr&&Hr(Se)),e}function ci(){var t,n,r;return(t=function(){var t;return(t=function(){var t;return Xt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(Qt)),t}())===i&&(t=function(){var t;return jt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(zt)),t}())===i&&(t=function(){var t;return Yt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(Zt)),t}())===i&&(t=function(){var t;return Ht.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(Vt)),t}())===i&&(t=function(){var t;return Gt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(Jt)),t}())===i&&(t=function(){var t;return on.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(an)),t}()),t}())===i&&(36===e.charCodeAt(Br)?(t=T,Br++):(t=i,0===kr&&Hr(S)),t===i&&(95===e.charCodeAt(Br)?(t=Ce,Br++):(t=i,0===kr&&Hr(xe)),t===i&&(t=Br,92===e.charCodeAt(Br)?(n=_e,Br++):(n=i,0===kr&&Hr(be)),n!==i&&(r=Ai())!==i?(Dr=t,t=n=Fe(r)):(Br=t,t=i)))),t}function li(){var t;return(t=ci())===i&&(t=function(){var t;return(t=function(){var t;return tn.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(nn)),t}())===i&&(t=function(){var t;return Kt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(en)),t}()),t}())===i&&(t=function(){var t;return rn.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(sn)),t}())===i&&(t=function(){var t;return un.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(cn)),t}())===i&&(8204===e.charCodeAt(Br)?(t=Ie,Br++):(t=i,0===kr&&Hr(Le)),t===i&&(8205===e.charCodeAt(Br)?(t=Me,Br++):(t=i,0===kr&&Hr(Be)))),t}function pi(){var t,n,r,s;if(kr++,t=Br,34===e.charCodeAt(Br)?(n=Oe,Br++):(n=i,0===kr&&Hr(Ue)),n!==i){for(r=[],s=hi();s!==i;)r.push(s),s=hi();r!==i?(34===e.charCodeAt(Br)?(s=Oe,Br++):(s=i,0===kr&&Hr(Ue)),s!==i?(Dr=t,t=n=Re(r)):(Br=t,t=i)):(Br=t,t=i)}else Br=t,t=i;if(t===i)if(t=Br,39===e.charCodeAt(Br)?(n=$e,Br++):(n=i,0===kr&&Hr(qe)),n!==i){for(r=[],s=fi();s!==i;)r.push(s),s=fi();r!==i?(39===e.charCodeAt(Br)?(s=$e,Br++):(s=i,0===kr&&Hr(qe)),s!==i?(Dr=t,t=n=Re(r)):(Br=t,t=i)):(Br=t,t=i)}else Br=t,t=i;return kr--,t===i&&(n=i,0===kr&&Hr(ke)),t}function hi(){var t,n,r;return t=Br,n=Br,kr++,34===e.charCodeAt(Br)?(r=Oe,Br++):(r=i,0===kr&&Hr(Ue)),r===i&&(92===e.charCodeAt(Br)?(r=_e,Br++):(r=i,0===kr&&Hr(be)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Br=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=je()):(Br=t,t=i),t===i&&(t=Br,92===e.charCodeAt(Br)?(n=_e,Br++):(n=i,0===kr&&Hr(be)),n!==i&&(r=yi())!==i?(Dr=t,t=n=Fe(r)):(Br=t,t=i),t===i&&(t=gi())),t}function fi(){var t,n,r;return t=Br,n=Br,kr++,39===e.charCodeAt(Br)?(r=$e,Br++):(r=i,0===kr&&Hr(qe)),r===i&&(92===e.charCodeAt(Br)?(r=_e,Br++):(r=i,0===kr&&Hr(be)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Br=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=je()):(Br=t,t=i),t===i&&(t=Br,92===e.charCodeAt(Br)?(n=_e,Br++):(n=i,0===kr&&Hr(be)),n!==i&&(r=yi())!==i?(Dr=t,t=n=Fe(r)):(Br=t,t=i),t===i&&(t=gi())),t}function mi(){var t,n,r,s;return t=Br,(n=di())!==i?(45===e.charCodeAt(Br)?(r=Qe,Br++):(r=i,0===kr&&Hr(Ke)),r!==i&&(s=di())!==i?(Dr=t,t=n=et(n,s)):(Br=t,t=i)):(Br=t,t=i),t}function di(){var t,n,r;return t=Br,n=Br,kr++,93===e.charCodeAt(Br)?(r=Ye,Br++):(r=i,0===kr&&Hr(Ze)),r===i&&(92===e.charCodeAt(Br)?(r=_e,Br++):(r=i,0===kr&&Hr(be)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Br=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=je()):(Br=t,t=i),t===i&&(t=Br,92===e.charCodeAt(Br)?(n=_e,Br++):(n=i,0===kr&&Hr(be)),n!==i&&(r=yi())!==i?(Dr=t,t=n=Fe(r)):(Br=t,t=i),t===i&&(t=gi())),t}function gi(){var t,n;return t=Br,92===e.charCodeAt(Br)?(n=_e,Br++):(n=i,0===kr&&Hr(be)),n!==i&&ii()!==i?(Dr=t,t=n=tt()):(Br=t,t=i),t}function yi(){var t,n,r,s;return(t=function(){var t;return(t=wi())===i&&(t=function(){var t,n,r;return t=Br,n=Br,kr++,(r=function(){var t;return(t=wi())===i&&(t=Ei())===i&&(120===e.charCodeAt(Br)?(t=vt,Br++):(t=i,0===kr&&Hr(Ct)),t===i&&(117===e.charCodeAt(Br)?(t=xt,Br++):(t=i,0===kr&&Hr(_t)))),t}())===i&&(r=ri()),kr--,r===i?n=void 0:(Br=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,n=je(),t=n):(Br=t,t=i),t}()),t}())===i&&(t=Br,48===e.charCodeAt(Br)?(n=nt,Br++):(n=i,0===kr&&Hr(rt)),n!==i?(r=Br,kr++,s=Ei(),kr--,s===i?r=void 0:(Br=r,r=i),r!==i?(Dr=t,t=n=it()):(Br=t,t=i)):(Br=t,t=i),t===i&&(t=function(){var t,n,r,s,o,a;return t=Br,120===e.charCodeAt(Br)?(n=vt,Br++):(n=i,0===kr&&Hr(Ct)),n!==i?(r=Br,s=Br,(o=Ti())!==i&&(a=Ti())!==i?s=o=[o,a]:(Br=s,s=i),(r=s!==i?e.substring(r,Br):s)!==i?(Dr=t,n=bt(r),t=n):(Br=t,t=i)):(Br=t,t=i),t}())===i&&(t=Ai())),t}function wi(){var t,n;return 39===e.charCodeAt(Br)?(t=$e,Br++):(t=i,0===kr&&Hr(qe)),t===i&&(34===e.charCodeAt(Br)?(t=Oe,Br++):(t=i,0===kr&&Hr(Ue)),t===i&&(92===e.charCodeAt(Br)?(t=_e,Br++):(t=i,0===kr&&Hr(be)),t===i&&(t=Br,98===e.charCodeAt(Br)?(n=st,Br++):(n=i,0===kr&&Hr(ot)),n!==i&&(Dr=t,n=at()),(t=n)===i&&(t=Br,102===e.charCodeAt(Br)?(n=ut,Br++):(n=i,0===kr&&Hr(ct)),n!==i&&(Dr=t,n=lt()),(t=n)===i&&(t=Br,110===e.charCodeAt(Br)?(n=pt,Br++):(n=i,0===kr&&Hr(ht)),n!==i&&(Dr=t,n=ft()),(t=n)===i&&(t=Br,114===e.charCodeAt(Br)?(n=mt,Br++):(n=i,0===kr&&Hr(dt)),n!==i&&(Dr=t,n=gt()),(t=n)===i&&(t=Br,116===e.charCodeAt(Br)?(n=yt,Br++):(n=i,0===kr&&Hr(wt)),n!==i&&(Dr=t,n=At()),(t=n)===i&&(t=Br,118===e.charCodeAt(Br)?(n=Et,Br++):(n=i,0===kr&&Hr(Tt)),n!==i&&(Dr=t,n=St()),t=n)))))))),t}function Ai(){var t,n,r,s,o,a,u,c;return t=Br,117===e.charCodeAt(Br)?(n=xt,Br++):(n=i,0===kr&&Hr(_t)),n!==i?(r=Br,s=Br,(o=Ti())!==i&&(a=Ti())!==i&&(u=Ti())!==i&&(c=Ti())!==i?s=o=[o,a,u,c]:(Br=s,s=i),(r=s!==i?e.substring(r,Br):s)!==i?(Dr=t,t=n=bt(r)):(Br=t,t=i)):(Br=t,t=i),t}function Ei(){var t;return Ft.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(It)),t}function Ti(){var t;return Lt.test(e.charAt(Br))?(t=e.charAt(Br),Br++):(t=i,0===kr&&Hr(Mt)),t}function Si(){var t,n,r,s;return kr++,t=Br,123===e.charCodeAt(Br)?(n=Wt,Br++):(n=i,0===kr&&Hr(kt)),n!==i&&(r=function t(){var n,r,s,o,a,u;if(n=Br,r=[],s=[],o=Br,a=Br,kr++,$t.test(e.charAt(Br))?(u=e.charAt(Br),Br++):(u=i,0===kr&&Hr(qt)),kr--,u===i?a=void 0:(Br=a,a=i),a!==i&&(u=ti())!==i?o=a=[a,u]:(Br=o,o=i),o!==i)for(;o!==i;)s.push(o),o=Br,a=Br,kr++,$t.test(e.charAt(Br))?(u=e.charAt(Br),Br++):(u=i,0===kr&&Hr(qt)),kr--,u===i?a=void 0:(Br=a,a=i),a!==i&&(u=ti())!==i?o=a=[a,u]:(Br=o,o=i);else s=i;for(s===i&&(s=Br,123===e.charCodeAt(Br)?(o=Wt,Br++):(o=i,0===kr&&Hr(kt)),o!==i&&(a=t())!==i?(125===e.charCodeAt(Br)?(u=Ot,Br++):(u=i,0===kr&&Hr(Ut)),u!==i?s=o=[o,a,u]:(Br=s,s=i)):(Br=s,s=i));s!==i;){if(r.push(s),s=[],o=Br,a=Br,kr++,$t.test(e.charAt(Br))?(u=e.charAt(Br),Br++):(u=i,0===kr&&Hr(qt)),kr--,u===i?a=void 0:(Br=a,a=i),a!==i&&(u=ti())!==i?o=a=[a,u]:(Br=o,o=i),o!==i)for(;o!==i;)s.push(o),o=Br,a=Br,kr++,$t.test(e.charAt(Br))?(u=e.charAt(Br),Br++):(u=i,0===kr&&Hr(qt)),kr--,u===i?a=void 0:(Br=a,a=i),a!==i&&(u=ti())!==i?o=a=[a,u]:(Br=o,o=i);else s=i;s===i&&(s=Br,123===e.charCodeAt(Br)?(o=Wt,Br++):(o=i,0===kr&&Hr(kt)),o!==i&&(a=t())!==i?(125===e.charCodeAt(Br)?(u=Ot,Br++):(u=i,0===kr&&Hr(Ut)),u!==i?s=o=[o,a,u]:(Br=s,s=i)):(Br=s,s=i))}return n=r!==i?e.substring(n,Br):r}())!==i?(125===e.charCodeAt(Br)?(s=Ot,Br++):(s=i,0===kr&&Hr(Ut)),s!==i?(Dr=t,t=n=Rt(r)):(Br=t,t=i)):(Br=t,t=i),kr--,t===i&&(n=i,0===kr&&Hr(Nt)),t}function vi(){var e,t;for(e=[],(t=ni())===i&&(t=ii())===i&&(t=si());t!==i;)e.push(t),(t=ni())===i&&(t=ii())===i&&(t=si());return e}function Ci(){var t,n,r,s;return t=Br,(n=vi())!==i?(59===e.charCodeAt(Br)?(r=Lr,Br++):(r=i,0===kr&&Hr(Mr)),r!==i?t=n=[n,r]:(Br=t,t=i)):(Br=t,t=i),t===i&&(t=Br,(n=function(){var e,t;for(e=[],(t=ni())===i&&(t=oi());t!==i;)e.push(t),(t=ni())===i&&(t=oi());return e}())!==i?((r=ai())===i&&(r=null),r!==i&&(s=ii())!==i?t=n=[n,r,s]:(Br=t,t=i)):(Br=t,t=i),t===i&&(t=Br,(n=vi())!==i&&(r=function(){var t,n;return t=Br,kr++,e.length>Br?(n=e.charAt(Br),Br++):(n=i,0===kr&&Hr($)),kr--,n===i?t=void 0:(Br=t,t=i),t}())!==i?t=n=[n,r]:(Br=t,t=i))),t}var xi={$:"text","&":"simple_and","!":"simple_not"},_i={"?":"optional","*":"zero_or_more","+":"one_or_more"},bi={"&":"semantic_and","!":"semantic_not"};function Fi(e){var t,n=[];for(t=0;t<e.length;t++)""!==e[t]&&n.push(e[t]);return n}function Ii(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n][t];return r}function Li(e,t,n){return[e].concat(Ii(t,n))}if((n=o())!==i&&Br===e.length)return n;throw n!==i&&Br<e.length&&Hr({type:"end"}),Vr(Wr,Nr<e.length?e.charAt(Nr):null,Nr<e.length?zr(Nr,Nr+1):zr(Nr,Nr))}}},{}],"N/0e":[function(e,t,n){"use strict";var r=e("../utils/objects"),i=e("../utils/arrays"),s={build:function(e){function t(t){return e[t.type].apply(null,arguments)}function n(){}function s(e){var n=Array.prototype.slice.call(arguments,1);t.apply(null,[e.expression].concat(n))}function o(e){return function(n){var r=Array.prototype.slice.call(arguments,1);i.each(n[e],function(e){t.apply(null,[e].concat(r))})}}var a={grammar:function(e){var n=Array.prototype.slice.call(arguments,1);e.initializer&&t.apply(null,[e.initializer].concat(n)),i.each(e.rules,function(e){t.apply(null,[e].concat(n))})},initializer:n,rule:s,named:s,choice:o("alternatives"),action:s,sequence:o("elements"),labeled:s,text:s,simple_and:s,simple_not:s,optional:s,zero_or_more:s,one_or_more:s,group:s,semantic_and:n,semantic_not:n,rule_ref:n,literal:n,class:n,any:n};return r.defaults(e,a),t}};t.exports=s},{"../utils/objects":"Saqe","../utils/arrays":"Btp4"}],ckuz:[function(e,t,n){"use strict";var r=e("../utils/arrays"),i=e("./visitor"),s={findRule:function(e,t){return r.find(e.rules,function(e){return e.name===t})},indexOfRule:function(e,t){return r.indexOf(e.rules,function(e){return e.name===t})},alwaysConsumesOnSuccess:function(e,t){function n(){return!0}function o(){return!1}function a(e){return u(e.expression)}var u=i.build({rule:a,named:a,choice:function(e){return r.every(e.alternatives,u)},action:a,sequence:function(e){return r.some(e.elements,u)},labeled:a,text:a,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:a,group:a,semantic_and:o,semantic_not:o,rule_ref:function(t){return u(s.findRule(e,t.name))},literal:function(e){return""!==e.value},class:n,any:n});return u(t)}};t.exports=s},{"../utils/arrays":"Btp4","./visitor":"N/0e"}],"6Wkb":[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../asts"),s=e("../visitor");t.exports=function(e){s.build({rule_ref:function(t){if(!i.findRule(e,t.name))throw new r('Rule "'+t.name+'" is not defined.',t.location)}})(e)}},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],nPjr:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../visitor");t.exports=function(e){var t={};i.build({rule:function(e){if(t.hasOwnProperty(e.name))throw new r('Rule "'+e.name+'" is already defined at line '+t[e.name].start.line+", column "+t[e.name].start.column+".",e.location);t[e.name]=e.location}})(e)}},{"../../grammar-error":"RCHO","../visitor":"N/0e"}],nn7N:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../../utils/arrays"),s=e("../../utils/objects"),o=e("../visitor");t.exports=function(e){function t(e,t){n(e.expression,s.clone(t))}var n=o.build({rule:function(e){n(e.expression,{})},choice:function(e,t){i.each(e.alternatives,function(e){n(e,s.clone(t))})},action:t,labeled:function(e,t){if(t.hasOwnProperty(e.label))throw new r('Label "'+e.label+'" is already defined at line '+t[e.label].start.line+", column "+t[e.label].start.column+".",e.location);n(e.expression,t),t[e.label]=e.location},text:t,simple_and:t,simple_not:t,optional:t,zero_or_more:t,one_or_more:t,group:t});n(e)}},{"../../grammar-error":"RCHO","../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../visitor":"N/0e"}],"50GR":[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../../grammar-error"),s=e("../asts"),o=e("../visitor");t.exports=function(e){var t=[],n=o.build({rule:function(e){t.push(e.name),n(e.expression),t.pop(e.name)},sequence:function(t){r.every(t.elements,function(t){return n(t),!s.alwaysConsumesOnSuccess(e,t)})},rule_ref:function(o){if(r.contains(t,o.name))throw t.push(o.name),new i("Possible infinite loop when parsing (left recursion: "+t.join(" -> ")+").",o.location);n(s.findRule(e,o.name))}});n(e)}},{"../../utils/arrays":"Btp4","../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],VZe4:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../asts"),s=e("../visitor");t.exports=function(e){s.build({zero_or_more:function(t){if(!i.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)},one_or_more:function(t){if(!i.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)}})(e)}},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],E6LJ:[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../visitor");t.exports=function(e,t){var n=[];r.each(e.rules,function(s,o){var a;"rule"===(a=s).type&&"rule_ref"===a.expression.type&&(function(e,t,n){i.build({rule_ref:function(e){e.name===t&&(e.name=n)}})(e)}(e,s.name,s.expression.name),r.contains(t.allowedStartRules,s.name)||n.push(o))}),n.reverse(),r.each(n,function(t){e.rules.splice(t,1)})}},{"../../utils/arrays":"Btp4","../visitor":"N/0e"}],"TA/v":[function(e,t,n){"use strict";t.exports={PUSH:0,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29}},{}],LEGa:[function(e,t,n){"use strict";function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}var i={stringEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+r(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+r(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+r(e)})},regexpClassEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\x0B").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+r(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+r(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+r(e)})}};t.exports=i},{}],"9PmR":[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../../utils/objects"),s=e("../asts"),o=e("../visitor"),a=e("../opcodes"),u=e("../js");t.exports=function(e){var t=[];function n(e){var n=r.indexOf(t,e);return-1===n?t.push(e)-1:n}function c(e,t){return n("function("+e.join(", ")+") {"+t+"}")}function l(){return Array.prototype.concat.apply([],arguments)}function p(e,t,n){return e.concat([t.length,n.length],t,n)}function h(e,t,n,s){var o=r.map(i.values(n),function(e){return s-e});return[a.CALL,e,t,o.length].concat(o)}function f(e,t,n){return l([a.PUSH_CURR_POS],[a.SILENT_FAILS_ON],g(e,{sp:n.sp+1,env:i.clone(n.env),action:null}),[a.SILENT_FAILS_OFF],p([t?a.IF_ERROR:a.IF_NOT_ERROR],l([a.POP],[t?a.POP:a.POP_CURR_POS],[a.PUSH_UNDEFINED]),l([a.POP],[t?a.POP_CURR_POS:a.POP],[a.PUSH_FAILED])))}function m(e,t,n){var r=c(i.keys(n.env),e);return l([a.UPDATE_SAVED_POS],h(r,0,n.env,n.sp),p([a.IF],l([a.POP],t?[a.PUSH_FAILED]:[a.PUSH_UNDEFINED]),l([a.POP],t?[a.PUSH_UNDEFINED]:[a.PUSH_FAILED])))}function d(e){return t=[a.WHILE_NOT_ERROR],n=l([a.APPEND],e),t.concat([n.length],n);var t,n}var g=o.build({grammar:function(e){r.each(e.rules,g),e.consts=t},rule:function(e){e.bytecode=g(e.expression,{sp:-1,env:{},action:null})},named:function(e,t){var r=n('peg$otherExpectation("'+u.stringEscape(e.name)+'")');return l([a.SILENT_FAILS_ON],g(e.expression,t),[a.SILENT_FAILS_OFF],p([a.IF_ERROR],[a.FAIL,r],[]))},choice:function(e,t){return function e(t,n){return l(g(t[0],{sp:n.sp,env:i.clone(n.env),action:null}),t.length>1?p([a.IF_ERROR],l([a.POP],e(t.slice(1),n)),[]):[])}(e.alternatives,t)},action:function(e,t){var n=i.clone(t.env),r="sequence"!==e.expression.type||0===e.expression.elements.length,s=g(e.expression,{sp:t.sp+(r?1:0),env:n,action:e}),o=c(i.keys(n),e.code);return r?l([a.PUSH_CURR_POS],s,p([a.IF_NOT_ERROR],l([a.LOAD_SAVED_POS,1],h(o,1,n,t.sp+2)),[]),[a.NIP]):s},sequence:function(e,t){return l([a.PUSH_CURR_POS],function t(n,r){var s,o;return n.length>0?(s=e.elements.length-n.slice(1).length,l(g(n[0],{sp:r.sp,env:r.env,action:null}),p([a.IF_NOT_ERROR],t(n.slice(1),{sp:r.sp+1,env:r.env,action:r.action}),l(s>1?[a.POP_N,s]:[a.POP],[a.POP_CURR_POS],[a.PUSH_FAILED])))):r.action?(o=c(i.keys(r.env),r.action.code),l([a.LOAD_SAVED_POS,e.elements.length],h(o,e.elements.length,r.env,r.sp),[a.NIP])):l([a.WRAP,e.elements.length],[a.NIP])}(e.elements,{sp:t.sp+1,env:t.env,action:t.action}))},labeled:function(e,t){var n=i.clone(t.env);return t.env[e.label]=t.sp+1,g(e.expression,{sp:t.sp,env:n,action:null})},text:function(e,t){return l([a.PUSH_CURR_POS],g(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null}),p([a.IF_NOT_ERROR],l([a.POP],[a.TEXT]),[a.NIP]))},simple_and:function(e,t){return f(e.expression,!1,t)},simple_not:function(e,t){return f(e.expression,!0,t)},optional:function(e,t){return l(g(e.expression,{sp:t.sp,env:i.clone(t.env),action:null}),p([a.IF_ERROR],l([a.POP],[a.PUSH_NULL]),[]))},zero_or_more:function(e,t){var n=g(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null});return l([a.PUSH_EMPTY_ARRAY],n,d(n),[a.POP])},one_or_more:function(e,t){var n=g(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null});return l([a.PUSH_EMPTY_ARRAY],n,p([a.IF_NOT_ERROR],l(d(n),[a.POP]),l([a.POP],[a.POP],[a.PUSH_FAILED])))},group:function(e,t){return g(e.expression,{sp:t.sp,env:i.clone(t.env),action:null})},semantic_and:function(e,t){return m(e.code,!1,t)},semantic_not:function(e,t){return m(e.code,!0,t)},rule_ref:function(t){return[a.RULE,s.indexOfRule(e,t.name)]},literal:function(e){var t,r;return e.value.length>0?(t=n('"'+u.stringEscape(e.ignoreCase?e.value.toLowerCase():e.value)+'"'),r=n('peg$literalExpectation("'+u.stringEscape(e.value)+'", '+e.ignoreCase+")"),p(e.ignoreCase?[a.MATCH_STRING_IC,t]:[a.MATCH_STRING,t],e.ignoreCase?[a.ACCEPT_N,e.value.length]:[a.ACCEPT_STRING,t],[a.FAIL,r])):(t=n('""'),[a.PUSH,t])},class:function(e){var t,i,s,o;return t=e.parts.length>0?"/^["+(e.inverted?"^":"")+r.map(e.parts,function(e){return e instanceof Array?u.regexpClassEscape(e[0])+"-"+u.regexpClassEscape(e[1]):u.regexpClassEscape(e)}).join("")+"]/"+(e.ignoreCase?"i":""):e.inverted?"/^[\\S\\s]/":"/^(?!)/",i="["+r.map(e.parts,function(e){return e instanceof Array?'["'+u.stringEscape(e[0])+'", "'+u.stringEscape(e[1])+'"]':'"'+u.stringEscape(e)+'"'}).join(", ")+"]",s=n(t),o=n("peg$classExpectation("+i+", "+e.inverted+", "+e.ignoreCase+")"),p([a.MATCH_REGEXP,s],[a.ACCEPT_N,1],[a.FAIL,o])},any:function(){var e=n("peg$anyExpectation()");return p([a.MATCH_ANY],[a.ACCEPT_N,1],[a.FAIL,e])}});g(e)}},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../visitor":"N/0e","../opcodes":"TA/v","../js":"LEGa"}],y0wl:[function(require,module,exports){"use strict";var arrays=require("../../utils/arrays"),objects=require("../../utils/objects"),asts=require("../asts"),op=require("../opcodes"),js=require("../js");function generateJS(ast,options){function indent2(e){return e.replace(/^(.+)$/gm,"  $1")}function indent6(e){return e.replace(/^(.+)$/gm,"      $1")}function indent10(e){return e.replace(/^(.+)$/gm,"          $1")}function generateTables(){return"size"===options.optimize?["peg$consts = [",indent2(ast.consts.join(",\n")),"],","","peg$bytecode = [",indent2(arrays.map(ast.rules,function(e){return'peg$decode("'+js.stringEscape(arrays.map(e.bytecode,function(e){return String.fromCharCode(e+32)}).join(""))+'")'}).join(",\n")),"],"].join("\n"):arrays.map(ast.consts,function(e,t){return"peg$c"+t+" = "+e+","}).join("\n")}function generateRuleHeader(e,t){var n=[];return n.push(""),options.trace&&n.push(["peg$tracer.trace({",'  type:     "rule.enter",',"  rule:     "+e+",","  location: peg$computeLocation(startPos, startPos)","});",""].join("\n")),options.cache&&(n.push(["var key    = peg$currPos * "+ast.rules.length+" + "+t+",","    cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""].join("\n")),options.trace&&n.push(["if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""].join("\n")),n.push(["  return cached.result;","}",""].join("\n"))),n.join("\n")}function generateRuleFooter(e,t){var n=[];return options.cache&&n.push(["","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+t+" };"].join("\n")),options.trace&&n.push(["","if ("+t+" !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: "+t+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}"].join("\n")),n.push(["","return "+t+";"].join("\n")),n.join("\n")}function generateInterpreter(){var e,t=[];function n(e,t){var n=t+3,r="bc[ip + "+(n-2)+"]",i="bc[ip + "+(n-1)+"]";return["ends.push(end);","ips.push(ip + "+n+" + "+r+" + "+i+");","","if ("+e+") {","  end = ip + "+n+" + "+r+";","  ip += "+n+";","} else {","  end = ip + "+n+" + "+r+" + "+i+";","  ip += "+n+" + "+r+";","}","","break;"].join("\n")}return t.push(["function peg$decode(s) {","  var bc = new Array(s.length), i;","","  for (i = 0; i < s.length; i++) {","    bc[i] = s.charCodeAt(i) - 32;","  }","","  return bc;","}","","function peg$parseRule(index) {"].join("\n")),options.trace?t.push(["  var bc       = peg$bytecode[index],","      ip       = 0,","      ips      = [],","      end      = bc.length,","      ends     = [],","      stack    = [],","      startPos = peg$currPos,","      params, i;"].join("\n")):t.push(["  var bc    = peg$bytecode[index],","      ip    = 0,","      ips   = [],","      end   = bc.length,","      ends  = [],","      stack = [],","      params, i;"].join("\n")),t.push(indent2(generateRuleHeader("peg$ruleNames[index]","index"))),t.push(["  while (true) {","    while (ip < end) {","      switch (bc[ip]) {","        case "+op.PUSH+":","          stack.push(peg$consts[bc[ip + 1]]);","          ip += 2;","          break;","","        case "+op.PUSH_UNDEFINED+":","          stack.push(void 0);","          ip++;","          break;","","        case "+op.PUSH_NULL+":","          stack.push(null);","          ip++;","          break;","","        case "+op.PUSH_FAILED+":","          stack.push(peg$FAILED);","          ip++;","          break;","","        case "+op.PUSH_EMPTY_ARRAY+":","          stack.push([]);","          ip++;","          break;","","        case "+op.PUSH_CURR_POS+":","          stack.push(peg$currPos);","          ip++;","          break;","","        case "+op.POP+":","          stack.pop();","          ip++;","          break;","","        case "+op.POP_CURR_POS+":","          peg$currPos = stack.pop();","          ip++;","          break;","","        case "+op.POP_N+":","          stack.length -= bc[ip + 1];","          ip += 2;","          break;","","        case "+op.NIP+":","          stack.splice(-2, 1);","          ip++;","          break;","","        case "+op.APPEND+":","          stack[stack.length - 2].push(stack.pop());","          ip++;","          break;","","        case "+op.WRAP+":","          stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.TEXT+":","          stack.push(input.substring(stack.pop(), peg$currPos));","          ip++;","          break;","","        case "+op.IF+":",indent10(n("stack[stack.length - 1]",0)),"","        case "+op.IF_ERROR+":",indent10(n("stack[stack.length - 1] === peg$FAILED",0)),"","        case "+op.IF_NOT_ERROR+":",indent10(n("stack[stack.length - 1] !== peg$FAILED",0)),"","        case "+op.WHILE_NOT_ERROR+":",indent10((e="stack[stack.length - 1] !== peg$FAILED",["if ("+e+") {","  ends.push(end);","  ips.push(ip);","","  end = ip + 2 + bc[ip + 1];","  ip += 2;","} else {","  ip += 2 + bc[ip + 1];","}","","break;"].join("\n"))),"","        case "+op.MATCH_ANY+":",indent10(n("input.length > peg$currPos",0)),"","        case "+op.MATCH_STRING+":",indent10(n("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_STRING_IC+":",indent10(n("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_REGEXP+":",indent10(n("peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))",1)),"","        case "+op.ACCEPT_N+":","          stack.push(input.substr(peg$currPos, bc[ip + 1]));","          peg$currPos += bc[ip + 1];","          ip += 2;","          break;","","        case "+op.ACCEPT_STRING+":","          stack.push(peg$consts[bc[ip + 1]]);","          peg$currPos += peg$consts[bc[ip + 1]].length;","          ip += 2;","          break;","","        case "+op.FAIL+":","          stack.push(peg$FAILED);","          if (peg$silentFails === 0) {","            peg$fail(peg$consts[bc[ip + 1]]);","          }","          ip += 2;","          break;","","        case "+op.LOAD_SAVED_POS+":","          peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];","          ip += 2;","          break;","","        case "+op.UPDATE_SAVED_POS+":","          peg$savedPos = peg$currPos;","          ip++;","          break;","","        case "+op.CALL+":",indent10(["params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);","for (i = 0; i < bc[ip + 3]; i++) {","  params[i] = stack[stack.length - 1 - params[i]];","}","","stack.splice(","  stack.length - bc[ip + 2],","  bc[ip + 2],","  peg$consts[bc[ip + 1]].apply(null, params)",");","","ip += 4 + bc[ip + 3];","break;"].join("\n")),"","        case "+op.RULE+":","          stack.push(peg$parseRule(bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.SILENT_FAILS_ON+":","          peg$silentFails++;","          ip++;","          break;","","        case "+op.SILENT_FAILS_OFF+":","          peg$silentFails--;","          ip++;","          break;","","        default:",'          throw new Error("Invalid opcode: " + bc[ip] + ".");',"      }","    }","","    if (ends.length > 0) {","      end = ends.pop();","      ip = ips.pop();","    } else {","      break;","    }","  }"].join("\n")),t.push(indent2(generateRuleFooter("peg$ruleNames[index]","stack[0]"))),t.push("}"),t.join("\n")}function generateRuleFunction(rule){var parts=[],code;function c(e){return"peg$c"+e}function s(e){return"s"+e}var stack={sp:-1,maxSp:-1,push:function(e){var t=s(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t},pop:function(e){var t;return void 0===e?s(this.sp--):(t=arrays.map(arrays.range(this.sp-e+1,this.sp+1),s),this.sp-=e,t)},top:function(){return s(this.sp)},index:function(e){return s(this.sp-e)}};function compile(bc){var ip=0,end=bc.length,parts=[],value;function compileCondition(e,t){var n,r,i,s,o=t+3,a=bc[ip+o-2],u=bc[ip+o-1],c=stack.sp;if(ip+=o,n=compile(bc.slice(ip,ip+a)),i=stack.sp,ip+=a,u>0&&(stack.sp=c,r=compile(bc.slice(ip,ip+u)),s=stack.sp,ip+=u,i!==s))throw new Error("Branches of a condition must move the stack pointer in the same way.");parts.push("if ("+e+") {"),parts.push(indent2(n)),u>0&&(parts.push("} else {"),parts.push(indent2(r))),parts.push("}")}function compileLoop(e){var t,n,r=bc[ip+2-1],i=stack.sp;if(ip+=2,t=compile(bc.slice(ip,ip+r)),n=stack.sp,ip+=r,n!==i)throw new Error("Body of a loop can't move the stack pointer.");parts.push("while ("+e+") {"),parts.push(indent2(t)),parts.push("}")}function compileCall(){var e=bc[ip+4-1],t=c(bc[ip+1])+"("+arrays.map(bc.slice(ip+4,ip+4+e),function(e){return stack.index(e)}).join(", ")+")";stack.pop(bc[ip+2]),parts.push(stack.push(t)),ip+=4+e}for(;ip<end;)switch(bc[ip]){case op.PUSH:parts.push(stack.push(c(bc[ip+1]))),ip+=2;break;case op.PUSH_CURR_POS:parts.push(stack.push("peg$currPos")),ip++;break;case op.PUSH_UNDEFINED:parts.push(stack.push("void 0")),ip++;break;case op.PUSH_NULL:parts.push(stack.push("null")),ip++;break;case op.PUSH_FAILED:parts.push(stack.push("peg$FAILED")),ip++;break;case op.PUSH_EMPTY_ARRAY:parts.push(stack.push("[]")),ip++;break;case op.POP:stack.pop(),ip++;break;case op.POP_CURR_POS:parts.push("peg$currPos = "+stack.pop()+";"),ip++;break;case op.POP_N:stack.pop(bc[ip+1]),ip+=2;break;case op.NIP:value=stack.pop(),stack.pop(),parts.push(stack.push(value)),ip++;break;case op.APPEND:value=stack.pop(),parts.push(stack.top()+".push("+value+");"),ip++;break;case op.WRAP:parts.push(stack.push("["+stack.pop(bc[ip+1]).join(", ")+"]")),ip+=2;break;case op.TEXT:parts.push(stack.push("input.substring("+stack.pop()+", peg$currPos)")),ip++;break;case op.IF:compileCondition(stack.top(),0);break;case op.IF_ERROR:compileCondition(stack.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:compileCondition(stack.top()+" !== peg$FAILED",0);break;case op.WHILE_NOT_ERROR:compileLoop(stack.top()+" !== peg$FAILED",0);break;case op.MATCH_ANY:compileCondition("input.length > peg$currPos",0);break;case op.MATCH_STRING:compileCondition(eval(ast.consts[bc[ip+1]]).length>1?"input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+") === "+c(bc[ip+1]):"input.charCodeAt(peg$currPos) === "+eval(ast.consts[bc[ip+1]]).charCodeAt(0),1);break;case op.MATCH_STRING_IC:compileCondition("input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+").toLowerCase() === "+c(bc[ip+1]),1);break;case op.MATCH_REGEXP:compileCondition(c(bc[ip+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:parts.push(stack.push(bc[ip+1]>1?"input.substr(peg$currPos, "+bc[ip+1]+")":"input.charAt(peg$currPos)")),parts.push(bc[ip+1]>1?"peg$currPos += "+bc[ip+1]+";":"peg$currPos++;"),ip+=2;break;case op.ACCEPT_STRING:parts.push(stack.push(c(bc[ip+1]))),parts.push(eval(ast.consts[bc[ip+1]]).length>1?"peg$currPos += "+eval(ast.consts[bc[ip+1]]).length+";":"peg$currPos++;"),ip+=2;break;case op.FAIL:parts.push(stack.push("peg$FAILED")),parts.push("if (peg$silentFails === 0) { peg$fail("+c(bc[ip+1])+"); }"),ip+=2;break;case op.LOAD_SAVED_POS:parts.push("peg$savedPos = "+stack.index(bc[ip+1])+";"),ip+=2;break;case op.UPDATE_SAVED_POS:parts.push("peg$savedPos = peg$currPos;"),ip++;break;case op.CALL:compileCall();break;case op.RULE:parts.push(stack.push("peg$parse"+ast.rules[bc[ip+1]].name+"()")),ip+=2;break;case op.SILENT_FAILS_ON:parts.push("peg$silentFails++;"),ip++;break;case op.SILENT_FAILS_OFF:parts.push("peg$silentFails--;"),ip++;break;default:throw new Error("Invalid opcode: "+bc[ip]+".")}return parts.join("\n")}return code=compile(rule.bytecode),parts.push("function peg$parse"+rule.name+"() {"),options.trace?parts.push(["  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+",","      startPos = peg$currPos;"].join("\n")):parts.push("  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+";"),parts.push(indent2(generateRuleHeader('"'+js.stringEscape(rule.name)+'"',asts.indexOfRule(ast,rule.name)))),parts.push(indent2(code)),parts.push(indent2(generateRuleFooter('"'+js.stringEscape(rule.name)+'"',s(0)))),parts.push("}"),parts.join("\n")}function generateToplevel(){var e,t,n,r,i,s=[];return s.push(["function peg$subclass(child, parent) {","  function ctor() { this.constructor = child; }","  ctor.prototype = parent.prototype;","  child.prototype = new ctor();","}","","function peg$SyntaxError(message, expected, found, location) {","  this.message  = message;","  this.expected = expected;","  this.found    = found;","  this.location = location;",'  this.name     = "SyntaxError";',"",'  if (typeof Error.captureStackTrace === "function") {',"    Error.captureStackTrace(this, peg$SyntaxError);","  }","}","","peg$subclass(peg$SyntaxError, Error);","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","        literal: function(expectation) {",'          return "\\"" + literalEscape(expectation.text) + "\\"";',"        },","",'        "class": function(expectation) {','          var escapedParts = "",',"              i;","","          for (i = 0; i < expectation.parts.length; i++) {","            escapedParts += expectation.parts[i] instanceof Array",'              ? classEscape(expectation.parts[i][0]) + "-" + classEscape(expectation.parts[i][1])',"              : classEscape(expectation.parts[i]);","          }","",'          return "[" + (expectation.inverted ? "^" : "") + escapedParts + "]";',"        },","","        any: function(expectation) {",'          return "any character";',"        },","","        end: function(expectation) {",'          return "end of input";',"        },","","        other: function(expectation) {","          return expectation.description;","        }","      };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\"/g,  '\\\\\"')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function classEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\\]/g, '\\\\]')","      .replace(/\\^/g, '\\\\^')","      .replace(/-/g,  '\\\\-')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = new Array(expected.length),","        i, j;","","    for (i = 0; i < expected.length; i++) {","      descriptions[i] = describeExpectation(expected[i]);","    }","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""].join("\n")),options.trace&&s.push(["function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};",""].join("\n")),s.push(["function peg$parse(input, options) {","  options = options !== void 0 ? options : {};","","  var peg$FAILED = {},",""].join("\n")),"size"===options.optimize?(e="{ "+arrays.map(options.allowedStartRules,function(e){return e+": "+asts.indexOfRule(ast,e)}).join(", ")+" }",t=asts.indexOfRule(ast,options.allowedStartRules[0]),s.push(["      peg$startRuleIndices = "+e+",","      peg$startRuleIndex   = "+t+","].join("\n"))):(n="{ "+arrays.map(options.allowedStartRules,function(e){return e+": peg$parse"+e}).join(", ")+" }",r="peg$parse"+options.allowedStartRules[0],s.push(["      peg$startRuleFunctions = "+n+",","      peg$startRuleFunction  = "+r+","].join("\n"))),s.push(""),s.push(indent6(generateTables())),s.push(["","      peg$currPos          = 0,","      peg$savedPos         = 0,","      peg$posDetailsCache  = [{ line: 1, column: 1 }],","      peg$maxFailPos       = 0,","      peg$maxFailExpected  = [],","      peg$silentFails      = 0,",""].join("\n")),options.cache&&s.push(["      peg$resultsCache = {},",""].join("\n")),options.trace&&("size"===options.optimize&&(i="["+arrays.map(ast.rules,function(e){return'"'+js.stringEscape(e.name)+'"'}).join(", ")+"]",s.push(["      peg$ruleNames = "+i+",",""].join("\n"))),s.push(['      peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer(),',""].join("\n"))),s.push(["      peg$result;",""].join("\n")),"size"===options.optimize?s.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleIndices)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleIndex = peg$startRuleIndices[options.startRule];","  }"].join("\n")):s.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }"].join("\n")),s.push(["","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos], p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line:   details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos),","        endPosDetails   = peg$computePosDetails(endPos);","","    return {","      start: {","        offset: startPos,","        line:   startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line:   endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""].join("\n")),"size"===options.optimize?(s.push(indent2(generateInterpreter())),s.push("")):arrays.each(ast.rules,function(e){s.push(indent2(generateRuleFunction(e))),s.push("")}),ast.initializer&&(s.push(indent2(ast.initializer.code)),s.push("")),"size"===options.optimize?s.push("  peg$result = peg$parseRule(peg$startRuleIndex);"):s.push("  peg$result = peg$startRuleFunction();"),s.push(["","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"].join("\n")),s.join("\n")}function generateWrapper(e){function t(){return["/*"," * Generated by PEG.js 0.10.0."," *"," * http://pegjs.org/"," */"].join("\n")}function n(){return options.trace?["{","  SyntaxError:   peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse:         peg$parse","}"].join("\n"):["{","  SyntaxError: peg$SyntaxError,","  parse:       peg$parse","}"].join("\n")}return{bare:function(){return[t(),"(function() {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"})()"].join("\n")},commonjs:function(){var r=[],i=objects.keys(options.dependencies),s=arrays.map(i,function(e){return e+' = require("'+js.stringEscape(options.dependencies[e])+'")'});return r.push([t(),"",'"use strict";',""].join("\n")),s.length>0&&(r.push("var "+s.join(", ")+";"),r.push("")),r.push([e,"","module.exports = "+n()+";",""].join("\n")),r.join("\n")},amd:function(){var r=objects.values(options.dependencies),i=objects.keys(options.dependencies),s="["+arrays.map(r,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",o=i.join(", ");return[t(),"define("+s+", function("+o+") {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"});",""].join("\n")},globals:function(){return[t(),"(function(root) {",'  "use strict";',"",indent2(e),"",indent2("root."+options.exportVar+" = "+n()+";"),"})(this);",""].join("\n")},umd:function(){var r=[],i=objects.values(options.dependencies),s=objects.keys(options.dependencies),o="["+arrays.map(i,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",a=arrays.map(i,function(e){return'require("'+js.stringEscape(e)+'")'}).join(", "),u=s.join(", ");return r.push([t(),"(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+o+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+a+");"].join("\n")),null!==options.exportVar&&r.push(["  } else {","    root."+options.exportVar+" = factory();"].join("\n")),r.push(["  }","})(this, function("+u+") {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"});",""].join("\n")),r.join("\n")}}[options.format]()}ast.code=generateWrapper(generateToplevel())}module.exports=generateJS},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../opcodes":"TA/v","../js":"LEGa"}],eOkX:[function(require,module,exports){"use strict";var arrays=require("../utils/arrays"),objects=require("../utils/objects"),compiler={visitor:require("./visitor"),passes:{check:{reportUndefinedRules:require("./passes/report-undefined-rules"),reportDuplicateRules:require("./passes/report-duplicate-rules"),reportDuplicateLabels:require("./passes/report-duplicate-labels"),reportInfiniteRecursion:require("./passes/report-infinite-recursion"),reportInfiniteRepetition:require("./passes/report-infinite-repetition")},transform:{removeProxyRules:require("./passes/remove-proxy-rules")},generate:{generateBytecode:require("./passes/generate-bytecode"),generateJS:require("./passes/generate-js")}},compile:function(ast,passes,options){var stage;for(stage in options=void 0!==options?options:{},options=objects.clone(options),objects.defaults(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",optimize:"speed",output:"parser",trace:!1}),passes)passes.hasOwnProperty(stage)&&arrays.each(passes[stage],function(e){e(ast,options)});switch(options.output){case"parser":return eval(ast.code);case"source":return ast.code}}};module.exports=compiler},{"../utils/arrays":"Btp4","../utils/objects":"Saqe","./visitor":"N/0e","./passes/report-undefined-rules":"6Wkb","./passes/report-duplicate-rules":"nPjr","./passes/report-duplicate-labels":"nn7N","./passes/report-infinite-recursion":"50GR","./passes/report-infinite-repetition":"VZe4","./passes/remove-proxy-rules":"E6LJ","./passes/generate-bytecode":"9PmR","./passes/generate-js":"y0wl"}],LOSa:[function(e,t,n){"use strict";var r=e("./utils/arrays"),i=e("./utils/objects"),s={VERSION:"0.10.0",GrammarError:e("./grammar-error"),parser:e("./parser"),compiler:e("./compiler"),generate:function(e,t){t=void 0!==t?t:{};var n="plugins"in(t=i.clone(t))?t.plugins:[],o={parser:s.parser,passes:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=i.values(e[t]));return n}(s.compiler.passes)};return r.each(n,function(e){e.use(o,t)}),s.compiler.compile(o.parser.parse(e),o.passes,t)}};t.exports=s},{"./utils/arrays":"Btp4","./utils/objects":"Saqe","./grammar-error":"RCHO","./parser":"DLue","./compiler":"eOkX"}],zrEC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default="{\n    function newPosition(position) {\n        // For compatibility with source map.\n        return new AST.Position(position.offset, position.line, position.column - 1);\n    }\n\n    function getLocation() {\n        const location_ = location();\n        return new AST.SourceLocation(options.fileName, text(), newPosition(location_.start), newPosition(location_.end));\n    }\n\n    function extractOptional(optional, index) {\n        return optional ? optional[index] : null;\n    }\n\n    function extractList(list, index) {\n        return list.map(element => element[index]);\n    }\n\n    function buildList(head, tail, index) {\n        return [head].concat(extractList(tail, index));\n    }\n\n    function buildBinaryExpression(head, tail) {\n        return tail.reduce((result, element) => new AST.BinaryExpression(getLocation(), element[1], result, element[3]), head);\n    }\n\n    /**\n     * @param {string} hexSequence\n     */\n    function parseUniversalCharacter(hexSequence) {\n        // SAFE_NUMBER: At most 0xFFFFFFFF.\n        const charCode = Number.parseInt(hexSequence, 16);\n        // The disallowed characters are the characters in the basic character set and the code positions reserved by\n        // ISO/IEC 10646 for control characters, the character DELETE, and the S-zone (reserved for use by UTF16).\n        if ((charCode >= 0x0000 && charCode <= 0x001F)\n                || (charCode >= 0x007F && charCode <= 0x009F)\n                || (charCode >= 0xD800 && charCode <= 0xDFFF)) {\n            error('Disallowed character in universal character name: 0x' + hexSequence, getLocation());\n        }\n        return String.fromCharCode(charCode);\n    }\n\n    let scopeRoot = { parent: null, names: new Map() };\n    let currScope = scopeRoot;\n\n    function enterScope() {\n        currScope = { parent: currScope, names: new Map() };\n    }\n\n    function exitScope() {\n        currScope = currScope.parent;\n    }\n\n    let ID_NAME = 0;\n    let TYPE_NAME = 1;\n    let TEMPLATE_FUNC_NAME = 2;\n    let TEMPLATE_CLASS_NAME = 3;\n\n    function getTypeOfName(name, type) {\n        let c = currScope;\n        while(c != null) {\n            if (c.names.has(name)) {\n                return c.names.get(name);\n            }\n            c = c.parent;\n        }\n        return ID_NAME;\n    }\n}\nStart = TranslationUnit\nClassSpecifier\n    = classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier _ ih:BaseClause? _ ScopeStart _ declarations:StructDeclarationList? _ ScopeEnd {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, declarations || [] , ih || []);\n    }\n    / classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, null, []);\n    }\n\nClassKeyword\n    = ('struct' / 'class' / 'union') !IdentifierPart {\n        return text();\n    }\n\nBaseSpecifier\n    = lb:AccessControlKey? _ className:TypeIdentifier{\n        return new AST.BaseSpecifier(getLocation(), lb || \"\", className);\n    }\n\nBaseClause\n    = ':' _ head:BaseSpecifier tail:(_ ',' _ BaseSpecifier)* {\n        return buildList(head, tail, 1);\n    }\n\nStructDeclarationList\n    = head:StructDeclaration tail:(_ StructDeclaration)* {\n        return buildList(head, tail, 1);\n    }\n\nAccessControlKey = 'public' / 'private' / 'protect'\n\nStructDeclaration\n    = id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ body:CompoundStatement{\n        return new AST.ConstructorOrDestructorDeclaration(getLocation(), true, id, param, initList || [], body, false);\n    }\n    / id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ ';'{\n        return new AST.ConstructorOrDestructorDeclaration(getLocation(), true, id, param, initList || [], null, false);\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ body:CompoundStatement{\n        return new AST.ConstructorOrDestructorDeclaration(getLocation(), false, id, null, null, body, isVirtual === \"virtual\");\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ ';'{\n        return new AST.ConstructorOrDestructorDeclaration(getLocation(), false, id, null, null, null, isVirtual === \"virtual\");\n    }\n    / label:AccessControlKey _ ':' {\n        return new AST.AccessControlLabel(getLocation(), label);\n    }\n    / decl:Declaration {\n        return decl;\n    }\n\nConstructorInitializeList\n    = ':' _ head:ConstructorInitializeItem _ tail:(_ ',' _ ConstructorInitializeItem)* {\n         return buildList(head, tail, 3);\n    }\n\nConstructorInitializeItem\n    = key:Identifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, false);\n    }\n    / key:TypeIdentifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, true);\n    }\n\nSpecifierQualifierList\n    = head:SpecifierQualifier tail:(_ SpecifierQualifier)* {\n        return buildList(head, tail, 1);\n    }\n\n\n\n// ADDED\n// REORDER: TypeQualifier / TypeSpecifier\nSpecifierQualifier\n    = TypeQualifier\n    / TypeSpecifier\n\nStructDeclaratorList\n    = head:StructDeclarator tail:(_ ',' _ StructDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nStructDeclarator\n    = ':' _ width:ConstantExpression {\n        return new AST.StructDeclarator(getLocation(), null, width, null);\n    }\n    / declarator:Declarator _ initDeclarators:InitDeclaratorList? width:(_ ':' _ ConstantExpression)? {\n        return new AST.StructDeclarator(getLocation(), declarator, extractOptional(width, 3), initDeclarators);\n    }\n\nEnumSpecifier\n    = 'enum' !IdentifierPart _ identifier:Identifier? _ '{' _ enumerators:EnumeratorList _ ','? _ &!'}' {\n        return new AST.EnumSpecifier(getLocation(), identifier, enumerators);\n    }\n    / 'enum' !IdentifierPart _ identifier:Identifier {\n        return new AST.EnumSpecifier(getLocation(), identifier, null);\n    }\n\nEnumeratorList\n    = head:Enumerator tail:(_ comma:','? _ enumerator:Enumerator)* {\n        return buildList(head, tail, 3);\n    }\n\n// MODIFICATION: EnumerationConstant => Identifier\nEnumerator\n    = identifier:Identifier value:(_ '=' _ ConstantExpression)? {\n        return new AST.Enumerator(getLocation(), identifier, extractOptional(value, 3));\n    }\n\n\nConstant\n    = FloatingConstant\n    / IntegerConstant\n    / CharacterConstant\n\nIntegerConstant\n    // REORDER: HexadecimalConstant / OctalConstant\n    = integer:(constant:(DecimalConstant / HexadecimalConstant / OctalConstant) {\n        return {\n            base: constant.base,\n            value: constant.value,\n            raw: text()\n        }\n        }) suffix:$IntegerSuffix? {\n        if (suffix.toLowerCase().includes('u')) {\n            integer.value.unsigned = true;\n        }\n        return new AST.IntegerConstant(getLocation(), integer.base, integer.value, integer.raw, suffix || null);\n    }\n\nDecimalConstant\n    = NonzeroDigit Digit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 10,\n            value: Long.fromString(text())\n        };\n    }\n\nOctalConstant\n    = '0' digits:$OctalDigit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 8,\n            value: digits.length ? Long.fromString(digits, 8) : Long.ZERO\n        };\n    }\n\nHexadecimalConstant\n    = HexadecimalPrefix digits:$HexadecimalDigit+ {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 16,\n            value: Long.fromString(digits, 16)\n        };\n    }\n\nFloatingConstant\n    = DecimalFloatingConstant\n\nDecimalFloatingConstant\n    = raw:$((FractionalConstant ExponentPart?) / (DigitSequence ExponentPart)) suffix:$FloatingSuffix? {\n        return new AST.FloatingConstant(getLocation(), Number.parseFloat(raw), raw, suffix || null);\n    }\n\nHexadecimalFractionalConstant\n    = HexadecimalDigitSequence '.' HexadecimalDigitSequence?\n    / '.' HexadecimalDigitSequence\n\nCharacterConstant\n    = prefix:$[LuU]? '\\'' value:CCharSequence '\\'' {\n        return new AST.CharacterConstant(getLocation(), value, prefix || null);\n    }\n\nEncodingPrefix\n    = 'u8'\n    / 'u'\n    / 'U'\n    / 'L'\n\nUniversalCharacterName\n    = '\\\\u' hexQuad:$HexQuad {\n        return parseUniversalCharacter(hexQuad);\n    }\n    / '\\\\U' hexQuads:$(HexQuad HexQuad) {\n        return parseUniversalCharacter(hexQuads);\n    }\n\nHexQuad\n    = HexadecimalDigit HexadecimalDigit HexadecimalDigit HexadecimalDigit\n\nStringLiteral\n    = head:SingleStringLiteral tail:(_ SingleStringLiteral)* {\n        return buildList(head, tail, 1).reduce((left, right) => {\n            let prefix = null;\n            if (left.prefix !== right.prefix) {\n                if (left.prefix) {\n                    if (right.prefix) {\n                        error('Unsupported non-standard concatenation of string literals');\n                    } else {\n                        prefix = left.prefix;\n                    }\n                } else {\n                    prefix = right.prefix;\n                }\n            } else {\n                prefix = left.prefix;\n            }\n            const value = left.value.slice(0, -1) + right.value;\n            return new AST.StringLiteral(getLocation(), prefix, value);\n        });\n    }\n\nSingleStringLiteral\n    = prefix:$EncodingPrefix? '\"' value:SCharSequence? &!'\"' {\n        return new AST.StringLiteral(getLocation(), prefix || null, (value || '') + '\\0');\n    }\n\nSCharSequence\n    = chars:SChar+ {\n        return chars.join('');\n    }\n\nSChar\n    = [^\"\\\\\\n] // any member of the source character set except the double-quote \", backslash \\, or new-line character\n    / EscapeSequence\n\nUnaryOperator\n    = [*+\\-~!]\n    / SingleAnd\n\nCCharSequence\n    = chars:CChar+ {\n        return chars.join('');\n    }\n\nCChar\n    = [^'\\\\\\n] // any member of the source character set except the single-quote ', backslash \\, or new-line character\n    / EscapeSequence\n\nEscapeSequence\n    = SimpleEscapeSequence\n    / OctalEscapeSequence\n    / HexadecimalEscapeSequence\n    / UniversalCharacterName\n\nSimpleEscapeSequence\n    = ('\\\\\\''\n    / '\\\\\"'\n    / '\\\\?'\n    / '\\\\\\\\') {\n        return text().charAt(1);\n    }\n    / '\\\\a' {\n        return '\\x07';\n    }\n    / '\\\\b' {\n        return '\\b';\n    }\n    / '\\\\f' {\n        return '\\f';\n    }\n    / '\\\\n' {\n        return '\\n';\n    }\n    / '\\\\r' {\n        return '\\r';\n    }\n    / '\\\\t' {\n        return '\\t';\n    }\n    / '\\\\v' {\n        return '\\v';\n    }\n\nOctalEscapeSequence\n    = '\\\\' digits:$(OctalDigit OctalDigit? OctalDigit?) {\n        // SAFE_NUMBER: At most 0777.\n        return String.fromCharCode(Number.parseInt(digits, 8));\n    }\n\nHexadecimalEscapeSequence\n    = '\\\\x' digits:$HexadecimalDigit+ {\n        // TODO: Guard against very long digits.\n        return String.fromCharCode(Number.parseInt(digits, 16));\n    }\n\nBinaryExponentPart\n    = [pP] Sign? DigitSequence\n\nHexadecimalDigitSequence\n    = HexadecimalDigit+\n\nFloatingSuffix\n    = [flFL]\n\nFractionalConstant\n    = DigitSequence '.' DigitSequence?\n    / '.' DigitSequence\n\nExponentPart\n    = [eE] Sign? DigitSequence\n\nSign\n    = [+\\-]\n\nDigitSequence\n    = Digit+\n\nTranslationUnit\n    = list:DeclarationList{\n        return new AST.TranslationUnit(getLocation(), list);\n    }\n\nDeclarationList\n    = _ head:Declaration tail:(_ Declaration)* _ {\n        return buildList(head, tail, 1);\n    }\n\nDeclaration\n    = BlockDeclaration\n    / FunctionDefinition\n    / NamespaceDefinition\n    / TemplateDeclaration\n    / ExplicitInstantiation\n    / DeclarationMissingSemicolon\n\nBlockDeclaration\n    = SimpleDeclaration\n    / UsingStatements\n\nBlockDeclarationList\n    = head:BlockDeclaration tail:(_ BlockDeclaration)*{\n        return buildList(head, tail, 1);\n    }\n\nNamespaceDefinition\n    = 'namespace' _ name:Identifier _ '{' _ list:DeclarationList? _'}'{\n        currScope.names.set(name.name, TYPE_NAME);\n        return new AST.NameSpaceBlock(getLocation(), name, list || []);\n    }\n\nSimpleDeclaration\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList? _ ';' {\n        const declaration = new AST.Declaration(getLocation(), specifiers, initDeclarators || []);\n        declaration.getTypedefName().map(name => currScope.names.set(name, TYPE_NAME));\n        return declaration;\n    }\n\nDeclarationSpecifiers\n    = head:DeclarationSpecifier tail:(_ DeclarationSpecifier)* {\n        return buildList(head, tail, 1);\n    }\n\nDeclarationSpecifier\n    = StorageClassSpecifier\n    / FunctionSpecifier\n    / TypeSpecifier\n\nTypeSpecifierList\n    = head:TypeSpecifier tail:( _ TypeSpecifier)* {\n        return buildList(head, tail, 3);\n    }\n\nTypeSpecifier\n    = ClassSpecifier\n    / EnumSpecifier\n    / SimpleTypeSpecifier\n    / TypenameSpecifier\n    / TypeQualifier\n\nSimpleTypeSpecifier\n    = PrimitiveTypeSpecifier\n    / TypeIdentifier\n\nTypenameSpecifier\n    = 'typename' id:TypeIdentifier{\n        return id;\n    }\n\nTypeQualifier\n    = ('const' / 'volatile') !IdentifierPart {\n        return text();\n    }\n\nTypeQualifierList\n    = head:TypeQualifier tail:(_ TypeQualifier)* {\n        return buildList(head, tail, 1);\n    }\n\nDeclarator\n    = pointer:(Pointer _)? declarator:DirectDeclarator {\n        return pointer ? new AST.PointerDeclarator(getLocation(), declarator, extractOptional(pointer, 0)) : declarator;\n    }\n\nDirectDeclarator\n    = head:(identifier:Identifier {\n        return new AST.IdentifierDeclarator(getLocation(), identifier);\n    } / '(' _ declarator:Declarator _ ')' {\n        return declarator;\n    } ) tail:(_ (\n        '[' _ length:AssignmentExpression? _ &!']' {\n            return {\n                location: getLocation(),\n                type: AST.ArrayDeclarator,\n                arguments: [false, [], length, false]\n            };\n        }\n        / '(' _ parameters: ParameterList? _ ')' {\n            return {\n                location: getLocation(),\n                type: AST.FunctionDeclarator,\n                arguments: [parameters || new AST.ParameterList(getLocation())]\n            }\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nPointer\n    = '*' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '*');\n    }\n    /\n    '&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&');\n    }\n    /\n    '&&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&&');\n    }\n\nDeclarationWithoutSemicolon\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList?\n\nDeclarationMissingSemicolon\n    = decl:DeclarationWithoutSemicolon {\n        error('Missing \\';\\' at end of declaration');\n    }\n\nFunctionSpecifier = ('inline' / '__libcall')\n\nInitDeclaratorList\n    = head:InitDeclarator tail:(_ ',' _ InitDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nInitDeclarator\n    = declarator:Declarator initializer:CppInitializer? {\n        return new AST.InitDeclarator(getLocation(), declarator, initializer || null);\n    }\n    \nCppInitializer\n    = _'=' _ init:Initializer{\n        return init;\n    }\n    / _ '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return new AST.ObjectInitializer(getLocation(),  arguments_ || []);  \n    }\n\n\nParameterList\n    = head:ParameterDeclaration tail:(_ ',' _ ParameterDeclaration)* ellipsis:(_ ',' _ '...')? {\n        return new AST.ParameterList(getLocation(), buildList(head, tail, 3), !!ellipsis);\n    }\n\nParameterDeclaration\n    = specifiers:DeclarationSpecifiers _ declarator:(Declarator / AbstractDeclarator)? init:( _ '=' _ AssignmentExpression)?{\n        return new AST.ParameterDeclaration(getLocation(), specifiers, declarator, init ? init[3] : null);\n    }\n\nIdentifierList\n    = head:Identifier tail:(_ ',' _ Identifier)* {\n        return buildList(head, tail, 3);\n    }\n\n\nInitializer\n    = AssignmentExpression\n    / '{' _ initializerList:InitializerList _ ','? _ &!'}' {\n        return initializerList;\n    }\n\nInitializerList\n    = head:InitializerListItem tail:(_ ',' _ InitializerListItem)* {\n        return new AST.InitializerList(getLocation(), buildList(head, tail, 3));\n    }\n\nInitializerListItem\n    = designators:(Designation _)? initializer:Initializer {\n        return new AST.InitializerListItem(getLocation(), extractOptional(designators, 0) || [], initializer);\n    }\n\nDesignation\n    = designators:DesignatorList _ '=' {\n        return designators;\n    }\n\nDesignatorList\n    = head:Designator tail:(_ Designator)* {\n        return buildList(head, tail, 1);\n    }\n\nDesignator\n    = '[' _ subscript:ConstantExpression _ &!']' {\n        return new AST.SubscriptDesignator(getLocation(), subscript);\n    }\n    / '.' _ member:Identifier {\n        return new AST.MemberDesignator(getLocation(), member);\n    }\n\nFunctionDefinition\n    = specifiers:DeclarationSpecifiers _ declarator:Declarator _ declarations:BlockDeclarationList? _ body:CompoundStatement {\n        return new AST.FunctionDefinition(getLocation(), specifiers, declarator, declarations, body);\n    }\n\nNewTypeName\n    =  specifierQualifiers:SpecifierQualifierList _ declarator:NewDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nTypeName\n    = specifierQualifiers:SpecifierQualifierList _ declarator:AbstractDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nNewDeclarator\n    = pointer:Pointer declarator:(_ DirectNewDeclarator)? {\n        return new AST.AbstractPointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectNewDeclarator {\n        return declarator;\n    }\n\nAbstractDeclarator\n    = pointer:Pointer declarator:(_ DirectAbstractDeclarator)? {\n        return new AST.AbstractPointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectAbstractDeclarator {\n        return declarator;\n    }\n\nDirectNewDeclarator\n    = head:(element:DirectNewDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectNewDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectAbstractDeclarator\n    = head:(\n        '(' _ declarator:AbstractDeclarator _ ')' {\n            return declarator;\n        }\n        / element:DirectAbstractDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectAbstractDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectNewDeclaratorElement\n    = '[' _ length:AssignmentExpression? _ &!']' {\n        return {\n            location: getLocation(),\n            type: AST.AbstractArrayDeclarator,\n            arguments: [false, [], length, false]\n        };\n    }\n\nDirectAbstractDeclaratorElement\n    = '(' _ parameters:ParameterList? _ ')' {\n        return {\n            location: getLocation(),\n            type: AST.AbstractFunctionDeclarator,\n            arguments: [parameters || new AST.ParameterList(getLocation())]\n        }\n    }\n    / DirectNewDeclaratorElement\nTryBlock\n    = 'try' _ body:CompoundStatement _ handlers:HandlerSeq {\n        return new AST.TryBlock(getLocation(), body, handlers);\n    }\n\nHandlerSeq\n    = head:ExceptionHandler tail:(_ ExceptionHandler)* {\n        return buildList(head, tail, 1);\n    }\n\nExceptionHandler\n    = 'catch' _ '(' _ decl:ExceptionDeclaration _ ')' _ body:CompoundStatement {\n        return new AST.ExceptionHandler(getLocation(), decl, body);\n    }\n\nExceptionDeclaration\n \t= specifiers:DeclarationSpecifiers _ declarator:Declarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n \t/ specifiers:DeclarationSpecifiers _ declarator:AbstractDeclarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n\nThrowExpression\n \t= 'throw' _ body:AssignmentExpression? {\n \t    return new AST.ThrowExpression(getLocation(), body);\n \t}\nExpression\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAssignmentExpression\n    = left:UnaryExpression _ operator:AssignmentOperator _ right:AssignmentExpression {\n        return new AST.AssignmentExpression(getLocation(), operator, left, right);\n    }\n    / ConditionalExpression\n\nConditionalExpression\n    = test:LogicalOrExpression _ '?' _ consequent:Expression _ &!':' _ alternate:ConditionalExpression {\n        return new AST.ConditionalExpression(getLocation(), test, consequent, alternate);\n    }\n    / LogicalOrExpression\n\n\nConstructorCallExpression\n    = name:TypeIdentifier  _ '(' _ arguments_:ArgumentExpressionList? _ &!')' {\n        return new AST.ConstructorCallExpression(getLocation(), name, arguments_ || []);\n    }\n\nPostfixExpression\n    = head:( PrimaryExpression / ConstructorCallExpression ) tail:(_ (\n        '[' _ subscript:Expression _ &!']' {\n            return {\n                type: AST.SubscriptExpression,\n                arguments: [subscript]\n            };\n        }\n        / '(' _ arguments_:ArgumentExpressionList? _ ')' {\n            return {\n                type: AST.CallExpression,\n                arguments: [arguments_ || []]\n            };\n        }\n        / operator:('.' / '->') _ member:Identifier {\n            return {\n                type: AST.MemberExpression,\n                arguments: [operator === '->', member]\n            };\n        }\n        / operator:('++' / '--') {\n            return {\n                type: AST.PostfixExpression,\n                arguments: [operator === '--']\n            };\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(getLocation(), result, ...element.arguments), head);\n    }\n\nArgumentExpressionList\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildList(head, tail, 3);\n    }\n\nUnaryExpression\n    = operator:('++' / '--') _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:UnaryOperator _ operand:CastExpression { //Hack: when parse '&' operator, the operator variable will be array of 2 elements\n        return new AST.UnaryExpression(getLocation(), operator[0], operand);\n    }\n    / operator:'sizeof' !IdentifierPart _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:'sizeof' _ '(' _ operand:TypeName _ ')' {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / PostfixExpression\n    / NewExpression\n    / DeleteExpression\n\nCastExpression\n    = '(' _ typeName:TypeName _ ')' _ operand:CastExpression {\n        return new AST.CastExpression(getLocation(), typeName, operand);\n    }\n    / UnaryExpression\n\nMultiplicativeExpression\n    = head:CastExpression tail:(_ [*/%] _ CastExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAdditiveExpression\n    = head:MultiplicativeExpression tail:(_ [+\\-] _ MultiplicativeExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nShiftExpression\n    = head:AdditiveExpression tail:(_ ('<<' / '>>') _ AdditiveExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nRelationalExpression\n    = head:ShiftExpression tail:(_ ('<=' / '>=' / '<' / '>') _ ShiftExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nEqualityExpression\n    = head:RelationalExpression tail:(_ ('==' / '!=') _ RelationalExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAndExpression\n    = head:EqualityExpression tail:(_ SingleAnd _ EqualityExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nExclusiveOrExpression\n    = head:AndExpression tail:(_ '^' _ AndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nInclusiveOrExpression\n    = head:ExclusiveOrExpression tail:(_ '|' _ ExclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalAndExpression\n    = head:InclusiveOrExpression tail:(_ AndAnd _ InclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalOrExpression\n    = head:LogicalAndExpression tail:(_ '||' _ LogicalAndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nConstantExpression\n    = ConditionalExpression\n\nPrimaryExpression\n    = Identifier\n    / Constant\n    / StringLiteral\n    / '(' _ expression:Expression _ &!')' {\n        return new AST.ParenthesisExpression(getLocation(), expression);\n    }\n\n\n\nNewPlacement\n    = '(' _  item:AssignmentExpression _ ')' {\n        return item;\n    }\n\nNewInitializer\n    = '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return arguments_;\n    }\n\nNewExpression\n    = '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ type:NewTypeName _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n    / '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ '(' _ name:TypeName _ ')' _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n\nDeleteExpression\n    = 'delete' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, false);\n    }\n    / 'delete[]' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, true);\n    }\nId\n    = !Keyword head:IdentifierNondigit tail:IdentifierPart* {\n        return new AST.Identifier(getLocation(), head + tail.join(''));\n    }\n\nSingleIdentifier\n    = id:Id &{\n        return getTypeOfName(id.name) === ID_NAME;\n    } {\n        return id;\n    }\n\nSingleTypeIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TYPE_NAME;\n    } {\n        return id;\n    }\n\nSingleTemplateFuncIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_FUNC_NAME;\n    } {\n        return id;\n    }\n\nSingleTemplateClassIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_CLASS_NAME;\n    } {\n        return id;\n    }\n\nIdentifier\n    = 'operator' ope:OverloadOperator {\n        return new AST.Identifier(getLocation(), \"#\" + ope);\n    }\n    / isFullName:'::'? namespace:(Id '::')* name:SingleIdentifier {\n        let prefix = isFullName === \"::\" ? \"::\" : \"\";\n        name.name = prefix + namespace.map(x=>x[0].name+\"::\").join(\"\") + name.name;\n        return name;\n    }\n    / '~' name:TypeIdentifier {\n        name.identifier.name = '~' + name.identifier.name;\n        return name.identifier;\n    }\n    / id:TemplateFuncInstanceIdentifier{\n        return id;\n    }\n\n\nTypeIdentifier\n    = isFullName:'::'? namespace:(Id '::')* name:SingleTypeIdentifier {\n        const prefix = isFullName === \"::\" ? \"::\" : \"\";\n        const id = prefix + namespace.map(x=>x[0].name+\"::\").join(\"\") + name.name;\n        return new AST.TypeIdentifier(getLocation(), id);\n    }\n    / id:TemplateClassInstanceIdentifier{\n        return id;\n    }\n\nTemplateFuncIdentifier\n    = isFullName:'::'? namespace:(Id '::')* name:SingleTemplateFuncIdentifier {\n        const prefix = isFullName === \"::\" ? \"::\" : \"\";\n        const id = prefix + namespace.map(x=>x[0].name+\"::\").join(\"\") + name.name;\n        return new AST.TemplateFuncIdentifier(getLocation(), id);\n    }\n\nTemplateClassIdentifier\n    = isFullName:'::'? namespace:(Id '::')* name:SingleTemplateClassIdentifier {\n        const prefix = isFullName === \"::\" ? \"::\" : \"\";\n        const id = prefix + namespace.map(x=>x[0].name+\"::\").join(\"\") + name.name;\n        return new AST.TemplateClassIdentifier(getLocation(), id);\n    }\n\nTypeDeclarationIdentifier\n    = identifier:Identifier{\n        if( options.isCpp ) { currScope.names.set(identifier.name, TYPE_NAME); }\n        return identifier;\n    }\n\nTemplateDeclarationIdentifier\n    = identifier:Identifier{\n        if( options.isCpp ) { currScope.names.set(identifier.name, TEMPLATE_NAME); }\n        return identifier;\n    }\n\nWhiteSpace = [ \\t\\n\\v\\f]\n\n_ = WhiteSpace*\n\nKeyword\n    = ('auto'\n    / 'break'\n    / 'case'\n    / 'char'\n    / 'const'\n    / 'continue'\n    / 'default'\n    / 'double'\n    / 'do'\n    / 'else'\n    / 'enum'\n    / 'extern'\n    / 'float'\n    / 'for'\n    / 'goto'\n    / 'if'\n    / 'inline'\n    / 'int'\n    / 'long'\n    / 'register'\n    / 'restrict'\n    / 'return'\n    / 'short'\n    / 'signed'\n    / 'sizeof'\n    / 'static'\n    / 'struct'\n    / 'switch'\n    / 'typedef'\n    / 'union'\n    / 'unsigned'\n    / 'void'\n    / 'volatile'\n    / 'while'\n    / 'class'\n    / 'new'\n    / 'delete'\n    / 'operator'\n    / 'override'\n    / 'template'\n    / 'typename'\n    / 'namespace'\n    / 'using') !IdentifierPart\n\nStorageClassSpecifier\n    = ('typedef'\n    / 'extern'\n    / 'static'\n    / 'virtual'\n    / 'auto'\n    / 'register') !IdentifierPart {\n        return text();\n    }\n\nPrimitiveTypeSpecifier\n    = ('void'\n    / 'char'\n    / 'short'\n    / 'int'\n    / 'long'\n    / 'float'\n    / 'double'\n    / 'signed'\n    / 'unsigned'\n    / 'bool') !IdentifierPart {\n        return text();\n     }\n\nOverloadOperator\n    = '+' / '-' / '*' / '/' / '%' / '&' / '<' / '>' / '<=' / '>=' / '==' / '!='\n    / '|' / '^' / '!' / '~' / '&&' / '||' / '>>' / '<<' / '++' / '--'\n    /'()' / '[]' / '->'\n    / AssignmentOperator\n\nAssignmentOperator\n    = '=' !'=' {\n        return text();\n    }\n    / '*='\n    / '/='\n    / '%='\n    / '+='\n    / '-='\n    / '<<='\n    / '>>='\n    / '&='\n    / '^='\n    / '|='\n\nAndAnd\n    = '&&'\n\nSingleAnd\n    = '&'!'&'\n\nHexadecimalPrefix\n    = '0x'\n    / '0X'\n\nNonzeroDigit\n    = [1-9]\n\nOctalDigit\n    = [0-7]\n\nHexadecimalDigit\n    = [0-9a-fA-F]\n\nIntegerSuffix\n    = UnsignedSuffix (LongLongSuffix / LongSuffix)?\n    / (LongLongSuffix / LongSuffix) UnsignedSuffix?\n\nUnsignedSuffix\n    = [uU]\n\nLongSuffix\n    = [lL]\n\nLongLongSuffix\n    = 'll'\n    / 'LL'\n\nIdentifierPart\n    = IdentifierNondigit\n    / Digit\n\nIdentifierNondigit\n    = UniversalCharacterName\n    / Nondigit\n\nNondigit\n    = [_a-zA-Z]\n\nDigit\n    = [0-9]\n\nStatement\n    = CaseStatement\n    / SelectionStatement\n    / IterationStatement\n    / JumpStatement\n    / CompoundStatement\n    / LabeledStatement\n    / ExpressionStatement\n    / UsingStatements\n\n// ADDED\nCaseStatement\n    = 'case' !IdentifierPart _ test:ConstantExpression _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), test, body);\n    }\n    / 'default' !IdentifierPart _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), null, body)\n    }\n\n// MODIFICATION: No case or default.\nLabeledStatement\n    = label:Identifier _ ':' _ body:Statement {\n        return new AST.LabeledStatement(getLocation(), label, body);\n    }\n\nScopeStart\n    = '{' {\n        enterScope();\n        return getLocation();\n    }\n\nScopeEnd\n    = &!'}' {\n        exitScope();\n        return getLocation();\n    }\n\nCompoundStatement\n    = left:ScopeStart _ body:BlockItemList? _ right:ScopeEnd {\n        return new AST.CompoundStatement(getLocation(), left, right, body || []);\n    }\n\nBlockItemList\n    = head:BlockItem tail:(_ BlockItem)* {\n        return buildList(head, tail, 1);\n    }\n\nBlockItem\n    = Statement\n    / Declaration\n    / Expression { // ExpressionStatementMissingSemicolon\n        error('Missing \\';\\' at end of statement');\n    }\n    / DeclarationMissingSemicolon\n\nExpressionStatement\n    = expression:(Expression _)? ';' {\n        return expression ? new AST.ExpressionStatement(getLocation(), extractOptional(expression, 0))\n                : new AST.NullStatement(getLocation());\n    }\n\nSelectionStatement\n    = 'if' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ consequent:Statement alternate:(_ 'else' !IdentifierPart _ Statement)? {\n        return new AST.IfStatement(getLocation(), test, consequent, extractOptional(alternate, 4));\n    }\n    / 'switch' !IdentifierPart _ &!'(' _ discriminant:Expression _ &!')' _ body:Statement {\n        return new AST.SwitchStatement(getLocation(), discriminant, body);\n    }\n\nIterationStatement\n    = 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ body:Statement {\n        return new AST.WhileStatement(getLocation(), test, body);\n    }\n    / 'do' !IdentifierPart _ body:Statement _ 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ &!';' {\n        return new AST.DoWhileStatement(getLocation(), body, test);\n    }\n    / 'for' !IdentifierPart _ &!'(' _ init:(Declaration / expression:Expression? _ ';' {\n        return expression;\n    } / (DeclarationWithoutSemicolon / Expression) {\n        error('Missing \\';\\'');\n    }) _ test:Expression? _ &!';' _ update:Expression? _ &!')' _ body:Statement {\n        return new AST.ForStatement(getLocation(), init, test, update, body);\n    }\n\nJumpStatement\n    = 'goto' !IdentifierPart _ label:Identifier _ &!';' {\n        return new AST.GotoStatement(getLocation(), label);\n    }\n    / 'continue' !IdentifierPart _ &!';' {\n        return new AST.ContinueStatement(getLocation());\n    }\n    / 'break' !IdentifierPart _ &!';' {\n        return new AST.BreakStatement(getLocation());\n    }\n    / 'return' !IdentifierPart _ argument:Expression? _ &!';' {\n        return new AST.ReturnStatement(getLocation(), argument);\n    }\n\n\nUsingStatements\n    = 'using' _ name:Id _ '=' _ decl:TypeName _ ';'{\n        currScope.names.set(name.name, TYPE_NAME);\n        return new AST.UsingStatement(getLocation(), name, decl);\n    }\n    / 'using' _ name:(Identifier/TypeIdentifier/TemplateClassIdentifier/TemplateFuncIdentifier) _ ';'{\n        return new AST.UsingItemStatement(getLocation(), name);\n    }\n    / 'using' _ 'namespace' _ name:TypeIdentifier _ ';'{\n        return new AST.UsingNamespaceStatement(getLocation(), name);\n    }\nTemplateDeclaration\n    = 'template' _ '<' _ &{\n        enterScope();\n        return true;\n    } param:TemplateParameterList? _ &!'>' _ decl:(FunctionDefinition/ClassSpecifier) {\n        exitScope();\n        const result = new AST.TemplateDeclaration(getLocation(), decl, param || []);\n        const names = result.getTemplateNames();\n        const typeId = (decl instanceof AST.FunctionDefinition) ? TEMPLATE_FUNC_NAME : TEMPLATE_CLASS_NAME;\n        names.map(name => currScope.names.set(name, typeId));\n        return result;\n    }\n\nTemplateParameterList\n    = head:TemplateParameter tail:(_ ',' _ TemplateParameter)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateParameter\n    = TypeParameter\n    / ParameterDeclaration;\n\nTypeNameKeyword = 'class' / 'typename'\n\n// TODO:: identifier is optional?\nTypeParameter\n    = TypeNameKeyword _ id:TypeDeclarationIdentifier init:( _ '=' _ TypeName)? {\n        return new AST.TypeParameter(getLocation(), id, init ? init[3] : null);\n    }\n\nTemplateFuncInstanceIdentifier\n    = id:TemplateFuncIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        return new AST.TemplateFuncInstanceIdentifier(getLocation(), id, opt ? (opt[3] || []) : []);\n    }\n\nTemplateClassInstanceIdentifier\n    = id:TemplateClassIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        return new AST.TemplateClassInstanceIdentifier(getLocation(), id, opt ? (opt[3] || []) : []);\n    }\n\nTemplateArgumentList\n    = head:TemplateArgument tail:(_ ',' _ TemplateArgument)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateArgument\n    = TypeName\n    / AdditiveExpression\n\nExplicitInstantiation\n    = FunctionTemplateInstantiation\n\nFunctionTemplateInstantiation\n    = 'template' _ specifiers:DeclarationSpecifiers _ declarator:Declarator _ ';'{\n        return new AST.FunctionTemplateInstantiation(getLocation(), specifiers, declarator);\n    }"},{}],"4ugX":[function(require,module,exports){var global=arguments[3],__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const fs=__importStar(require("fs")),Long_=__importStar(require("long")),PegJs=__importStar(require("pegjs")),CTree_=__importStar(require("../common/ast")),error_1=require("../common/error"),c_lang_1=__importDefault(require("./c.lang")),storageClassSpecifierStringToEnum=["typedef","extern","static","_Thread_local","auto","register"];function getStorageClassSpecifierFromSpecifiers(e,t){const n=[];for(const t of e)"string"==typeof t&&storageClassSpecifierStringToEnum.includes(t)&&n.push(t);if(!(n.length<2||2===n.length&&n.includes("_Thread_local")&&(n.includes("static")||n.includes("extern"))))throw new error_1.TypeError("Multiple storage classes in declaration specifiers",t);if(n.includes("_Thread_local"))throw new error_1.TypeError("Unsupported: '_Thread_local' is not supported",t);if(n.includes("register"))throw new error_1.TypeError("Unsupported: 'register' is not supported",t);return n[0]||null}function parseUniversalCharacter(e){const t=Number.parseInt(e,16);return String.fromCharCode(t)}exports.getStorageClassSpecifierFromSpecifiers=getStorageClassSpecifierFromSpecifiers;const Helper_={parseUniversalCharacter:parseUniversalCharacter};function loadParser(source,query){const Long=Long_,AST=CTree_;if(void 0===global.window&&fs.existsSync("/tmp/"+query.parserName+".js")){const e=fs.readFileSync("/tmp/"+query.parserName+".js","utf8")}source=source.replace(/&!'((\\.|[^'])*)'/g,(e,t)=>`(expected:'${t}'? {\n        if (!expected) {${t.includes("}")?"/*{*/":""}\n            error('Missing \\'${t}\\'');\n        }\n        return expected;\n    })`),query.output="source",query.cache=!!query.cache,query.optimize=query.optimize||"speed",query.trace=!!query.trace,"string"==typeof query.allowedStartRules&&(query.allowedStartRules=[query.allowedStartRules]);const code=PegJs.generate(source,query);return eval(code)}const ConstantExpressionPegParser=loadParser(c_lang_1.default,{parserName:"ConstantExpression",allowedStartRules:"ConstantExpression"}),TranslationUnitPegParser=loadParser(c_lang_1.default,{parserName:"TranslationUnitPegParser"});function wrapPegParser(e){return{parse(t,n){try{return e.parse(t,n)}catch(t){throw t instanceof e.SyntaxError?new error_1.SyntaxError(t.message,{location:t.location}):t}}}}exports.ConstantExpressionParser=wrapPegParser(ConstantExpressionPegParser),exports.CParser=wrapPegParser(TranslationUnitPegParser)},{fs:"jCtJ",long:"YvD4",pegjs:"LOSa","../common/ast":"URi4","../common/error":"nOPH","./c.lang":"zrEC"}],WBcs:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../common/error"),s=e("./index");!function(e){e[e.ON_IF=0]="ON_IF",e[e.ON_ELSE=1]="ON_ELSE"}(n.PreprocessStatus||(n.PreprocessStatus={}));n.PreprocessContext=class PreprocessContext{constructor(e,t){this.sourceFileName=e,this.generatedFileName=e.replace(".cpp",".ii"),this.node=new r.SourceNode(1,0,this.generatedFileName),this.marcoMap=t,this.skipBlock=!1,this.status=[],this.targetLine=0,this.targetColumn=0,this.onMultiLineComment=!1}defineMarco(e,t,n){if(n=n.trim(),this.marcoMap.has(e))throw new i.PreprocessError(`marco ${e} is already defined`);if(null===t){const r=s.parseMarco([],n);this.marcoMap.set(e,{name:e,parameters:t,target:n,parsedTarget:r})}else{const r=s.parseMarco(t,n);this.marcoMap.set(e,{name:e,parameters:t,target:n,parsedTarget:r})}}undefineMarco(e){if(!this.marcoMap.has(e))throw new i.PreprocessError(`marco ${e} is not defined`);this.marcoMap.delete(e)}append(e,t){this.node.add(new r.SourceNode(t.line+1,t.column,this.sourceFileName,e))}}},{"source-map":"aRf0","../common/error":"nOPH","./index":"DY6N"}],DY6N:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../library"),s=e("./context");function o(e,t,n){const o=t.split(/\s|<|"/);if("#define"===o[0]){if(!e.skipBlock){const n=/#define\s+([a-zA-Z0-9_]+)\s*(\(([^)]*)\))?\s*(\s.+)?\s*$/.exec(t);if(!n)throw new r.PreprocessError(`illegal define: ${t}`);if(n[3]&&n[4]){const t=n[3].split(",").map(e=>e.trim());e.defineMarco(n[1],t,n[4])}else n[4]?e.defineMarco(n[1],null,n[4]):e.defineMarco(n[1],null,"")}}else if("#undef"===o[0]){if(!e.skipBlock){if(2!==o.length)throw new r.PreprocessError(`illegal undefine: ${t}`);e.undefineMarco(o[1])}}else if("#include"===o[0]){if(!e.skipBlock){let s="";if(t.includes('"')){const e=/"(.*)"/.exec(t);if(!e||!e[1])throw new r.PreprocessError(`illegal include: ${t}`);s=e[1]}else{const e=/<(.*)>/.exec(t);if(!e||!e[1])throw new r.PreprocessError(`illegal include: ${t}`);s=e[1]}const o=i.Headers.get(s);if(!o)throw new r.PreprocessError(`header ${s} does not exist`);const{code:a}=p(s,o,e.marcoMap);e.append(a,{line:n,column:0})}}else{if("#if"===o[0])throw new r.PreprocessError("unsupport #if");if("#elif"===o[0])throw new r.PreprocessError("unsupport #elif");if("#ifdef"===o[0])e.marcoMap.has(o[1])?(e.skipBlock=!1,e.status.push([s.PreprocessStatus.ON_IF,!1])):(e.skipBlock=!0,e.status.push([s.PreprocessStatus.ON_IF,!0]));else if("#ifndef"===o[0])e.marcoMap.has(o[1])?(e.skipBlock=!0,e.status.push([s.PreprocessStatus.ON_IF,!0])):(e.skipBlock=!1,e.status.push([s.PreprocessStatus.ON_IF,!1]));else if("#else"===o[0]){if(!(e.status.length>0&&e.status[e.status.length-1][0]===s.PreprocessStatus.ON_IF))throw new r.PreprocessError("unmatch #else");{const t=e.status[e.status.length-1];e.skipBlock=!t[1],t[0]=s.PreprocessStatus.ON_ELSE}}else{if("#endif"!==o[0]){if("#line"===o[0])throw new r.PreprocessError("unsupport #line");if("#error"===o[0])throw new r.PreprocessError(`Error : ${t}`);if("#progma"===o[0])return;if("#"===o[0])return;throw new r.PreprocessError(`unsupport directive ${t}`)}if(!(e.status.length>0))throw new r.PreprocessError("unmatch #endif");e.status.pop();e.status.length>0?e.skipBlock=e.status[e.status.length-1][1]:e.skipBlock=!1}}}const a=/([\\~!@#$|%^&*()+-={}[\]:";'<>?,.\/]|[A-Za-z_0-9]+|"[^"]*"|'[^']*'|\n|[ \t]+)/y;function u(e){let t=a.exec(e);const n=[];for(;t;)n.push(t[1]),t=a.exec(e);return n}function c(e,t){return e.parsedTarget.map(e=>"string"==typeof e?e:t[e]).join("")}function l(e,t,n){const r=u(t);"\n"!==r[r.length-1]&&r.push("\n");let i="",s=0;e.onMultiLineComment&&(s=2);let o={line:n,column:0},a={line:o.line,column:o.column};function l(){i.length>0&&(e.append(i,a),i="",a={line:o.line,column:o.column})}for(let t=0;t<r.length-1;t++){const n=r[t];function p(e){"\n"===e?(o.line++,o.column=0):o.column+=e.length}if(1===s){"\n"===n&&(i+=n,s=0),p(n);continue}if(2===s){"*"===n&&"/"===r[t+1]&&(s=0,e.onMultiLineComment=!1,t++),p(n);continue}const a=e.marcoMap.get(n);function h(){for(t++;t<r.length&&/^\s*$/.test(r[t]);)t++;return t>=r.length?null:r[t]}if(a){if(null!==a.parameters){const e=t,s={line:o.line,column:o.column};if("("!==h()){o=s,i+=n,p(r[t=e]);continue}const u=[],f={"(":0,"[":0,"{":0};let m=",";for(let c=0;c<a.parameters.length;c++){c===a.parameters.length-1&&(m=")");let l=h(),d="";for(;l!==m||!Object.keys(f).map(e=>f[e]).every(e=>0===e);)null!==l?(f.hasOwnProperty(l)&&f[l]++,")"===l&&f["("]--,"]"===l&&f["["]--,"{"===l&&f["{"]--,d+=l,l=h()):(o=s,p(r[t=e]),i+=n);u.push(d)}l(),i=c(a,u);for(let n=e;n<=t;n++)p(r[n]);l();continue}l(),i=a.target,p(n),l()}else"/"===n&&"/"===r[t+1]?(l(),s=1):"/"===n&&"*"===r[t+1]?(l(),s=2,e.onMultiLineComment=!0):"\n"===n?(i+=n,l()):i+=n;p(n)}return i+="\n",l(),""}function p(e,t,n){const r=new s.PreprocessContext(e,n),i=t.split("\n");let a="",u="",c=0;for(let e=0;e<i.length;e++)"\\"===(u+=i[e]).charAt(u.length-1)?u=u.substring(0,u.length-1):"#"===u.charAt(0)?r.onMultiLineComment?(a+=u+"\n",u=""):(""!==a&&(r.skipBlock||l(r,a,c),a=""),o(r,u,e),u="",c=e+1):(a+=u+"\n",u="");return l(r,a,c),r.node.toStringWithSourceMap()}n.parseMarco=function(e,t){const n=u(t),r=[];let i="";for(let t=0;t<n.length;t++){const s=n[t];t+2<n.length&&"#"===s&&"#"===n[t+1]&&e.includes(n[t+2])?(0!==i.length&&(r.push(i),i=""),r.push(e.indexOf(n[t+2])),t+=2):t+1<n.length&&"#"===s&&e.includes(n[t+1])?(r.push(i+'"'),i='"',r.push(e.indexOf(n[t+1])),t+=1):e.includes(s)?(0!==i.length&&(r.push(i),i=""),r.push(e.indexOf(s))):i+=s}return 0!==i.length&&r.push(i),r},n.preprocess=function(e,t){return p(e,t,new Map)}},{"../common/error":"nOPH","../library":"bjS5","./context":"WBcs"}],PxdH:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error");class HeapAllocator{}n.HeapAllocator=HeapAllocator;class LinkedHeapAllocator extends HeapAllocator{constructor(){super()}init(e){e.heapPointer+=0}allocHeap(e,t){let n=e.heapStart;for(;n<e.heapPointer;){const r=e.memory.getUint32(n),i=e.memory.getUint32(n+4);if(1===r&&i>=t+8)return e.memory.setUint32(n,0),e.memory.setUint32(n+4,t),e.memory.setUint32(n+t+8,1),e.memory.setUint32(n+t+8+4,i-t-8),n+8;if(1===r&&i>=t)return e.memory.setUint32(n,0),n+8;n=n+i+8}if(e.sp-e.heapPointer<=t+8)throw new r.RuntimeError("out of memory");{const n=e.heapPointer;return e.memory.setUint32(e.heapPointer,0),e.memory.setUint32(e.heapPointer+4,t),e.heapPointer+=t+8,n+8}}getBlockSize(e,t){if(!(t>=e.heapStart&&t<=e.heapPointer))throw new r.RuntimeError("free a blk not be malloc");let n=e.heapStart,i=0;for(;n<t-8;){i=n,n=n+e.memory.getUint32(n+4)+8}if(n!==t-8)throw new r.RuntimeError("free a blk not be malloc");return e.memory.getUint32(n+4)}freeHeap(e,t){if(!(t>=e.heapStart&&t<=e.heapPointer))throw new r.RuntimeError("free a blk not be malloc");let n=e.heapStart,i=0;for(;n<t-8;){i=n,n=n+e.memory.getUint32(n+4)+8}if(n!==t-8)throw new r.RuntimeError("free a blk not be malloc");const s=e.memory.getUint32(i),o=e.memory.getUint32(n+4),a=e.memory.getUint32(n+8+o);if(1===s){let t=e.memory.getUint32(i+4)+o+8;1===a&&(t+=e.memory.getUint32(n+8+o+4)+8),e.memory.setUint32(i,1),e.memory.setUint32(i+4,t)}else{let t=o;1===a&&(t+=e.memory.getUint32(n+8+o+4)+8),e.memory.setUint32(n,1),e.memory.setUint32(n+4,t)}}}n.LinkedHeapAllocator=LinkedHeapAllocator;n.FastHeapAllocator=class FastHeapAllocator extends LinkedHeapAllocator{constructor(){super(),this.sizeLimit=[32,128,512],this.poolSize=[64,1,1],this.MAGIC_NUMBER=12450,this.pool=[],this.poolPtr=[]}init(e){super.init(e),this.pool=this.sizeLimit.map((t,n)=>this.createPool(e,n))}allocHeap(e,t){if(t>this.sizeLimit[this.sizeLimit.length-1])return super.allocHeap(e,t);{let n=0;for(;this.sizeLimit[n]<t;)n++;const r=this.pool[n];r.size<=0&&this.extendPool(e,n);const i=r.keys().next().value;return r.delete(i),i}}freeHeap(e,t){const n=e.memory.getUint32(t-4);if(n>=this.MAGIC_NUMBER){const e=n-this.MAGIC_NUMBER;if(e<0||e>=this.pool.length)throw new r.RuntimeError("free a blk not be malloc");this.pool[e].add(t)}else super.freeHeap(e,t)}getBlockSize(e,t){const n=e.memory.getUint32(t-4);if(n>=this.MAGIC_NUMBER){const e=n-this.MAGIC_NUMBER;if(e<0||e>=this.pool.length)throw new r.RuntimeError("free a blk not be malloc");return this.poolSize[e]}return super.getBlockSize(e,t)}createPool(e,t){const n=this.sizeLimit[t],r=this.poolSize[t],i=new Set,s=super.allocHeap(e,(n+4)*r);this.poolPtr.push(s);for(let o=0;o<r;o++){const r=s+o*(n+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}return i}extendPool(e,t){const n=this.sizeLimit[t],r=this.poolSize[t],i=this.pool[t];this.poolSize[t]*=2;const s=super.allocHeap(e,(n+4)*r);this.poolPtr.push(s);for(let o=0;o<r;o++){const r=s+o*(n+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}}}},{"../common/error":"nOPH"}],"B/OM":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/utils"),i=e("./allocator");n.Runtime=class Runtime{constructor(e){this.memoryBuffer=new ArrayBuffer(e.memorySize),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.memory=new DataView(this.memoryBuffer),this.heapStart=e.heapStart,this.heapPointer=e.heapStart,this.importObjects=e.importObjects,this.files=e.files,this.heapAllocator=new i.FastHeapAllocator,this.entry=e.entry}readMemoryString(e){return r.fromBytesToString(this.memory,e)}}},{"../common/utils":"pe9I","./allocator":"PxdH"}],"/x2e":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("babel-polyfill");const r=e("./runtime");n.NativeRuntime=class NativeRuntime extends r.Runtime{constructor(e){super(e),this.code=e.code,this.options=e,this.wasmMemory=new WebAssembly.Memory({initial:1,maximum:e.memorySize/65536}),this.importObjects.hasOwnProperty("system")||(this.importObjects.system={});const t=this,n=this.importObjects;this.importObjects={};for(const e of Object.keys(n)){const r=n[e];this.importObjects[e]={};for(const n of Object.keys(r)){const i=r[n];this.importObjects[e][n]=function(){return i.apply(t,Array.from(arguments))}}}this.importObjects.system.memory=this.wasmMemory,this.memoryBuffer=this.wasmMemory.buffer,this.memory=new DataView(this.memoryBuffer),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.instance=null}async run(){this.heapStart=this.heapPointer=this.options.heapStart;const e=await WebAssembly.instantiate(this.code,this.importObjects);this.instance=e.instance;const t=4*parseInt((this.wasmMemory.buffer.byteLength-1)/4+"");this.sp=t,this.heapAllocator.init(this),e.instance.exports.$start(),this.sp=t,e.instance.exports[this.entry](),this.files.map(e=>e.flush())}get sp(){return this.instance.exports.$get_sp()}set sp(e){this.instance.exports.$set_sp(e)}}},{"babel-polyfill":"wllv","./runtime":"B/OM"}],"9XaA":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("long"),i=e("../codegen/scope"),s=e("../common/symbol"),o=e("../type/compound_type"),a=e("../type/primitive_type"),u=e("../wasm"),c=e("../wasm/calculator"),l=e("../wasm/constant"),p=e("./runtime");n.JSRuntime=class JSRuntime extends p.Runtime{constructor(e){super(e),this.options=e,this.program=e.program,this.rootScope=e.scope,this.scopeManager=new i.ScopeManager(!0),this.scopeManager.root=this.rootScope,this.stack=[],this.spIndex=-1;for(let e=0;e<this.program.globals.length;e++)"$sp"===this.program.globals[e].name&&(this.spIndex=e);if(-1===this.spIndex)throw new Error("no $sp found");this.globals=this.program.globals.map(e=>e.type===u.WType.i64?r.fromString(e.init):e.type===u.WType.i32?parseInt(e.init):parseFloat(e.init));for(const e of this.program.functions)e.displayName=this.getDisplayName(e.name);this.returnValue=0,this.convertArray=new ArrayBuffer(64),this.convertDataView=new DataView(this.convertArray);for(const e of this.program.data)this.memoryUint8Array.set(new Uint8Array(e.data),e.offset);this.stack=[{fn:this.program.functions[0],pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[],scope:this.rootScope}],this.stackTop=this.stack[0]}getDisplayName(e){const t=this.scopeManager.lookupFullName(e);return t&&t instanceof i.FunctionLookUpResult?t.functions[0].type.toString():e}get sp(){return this.globals[this.spIndex]}set sp(e){this.globals[this.spIndex]=e}runStep(){const e=this.stackTop.fn.codes[this.stackTop.pc];if(u.I32Binary.hasOwnProperty(e[0])||u.F32Binary.hasOwnProperty(e[0])||u.F64Binary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],n=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=c.doBinaryCompute(e[0],n,t)}else if(u.I64Binary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],n=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=c.doLongBinaryCompute(e[0],n,t)}else if(u.I32Unary.hasOwnProperty(e[0])||u.F32Unary.hasOwnProperty(e[0])||u.F64Unary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=c.doUnaryCompute(e[0],t)}else if(u.I64Unary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=c.doLongUnaryCompute(e[0],t)}else if(l.I32Convert.hasOwnProperty(e[0])||l.F32Convert.hasOwnProperty(e[0])||l.F64Convert.hasOwnProperty(e[0])){if(e[0]===l.I32Convert.wrap$i64||e[0]===l.F32Convert.convert_s$i64||e[0]===l.F32Convert.convert_u$i64||e[0]===l.F64Convert.convert_s$i64||e[0]===l.F64Convert.convert_u$i64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=e.toNumber()}else if(e[0]===l.I32Convert.trunc_s$f32||e[0]===l.I32Convert.trunc_s$f64||e[0]===l.I32Convert.trunc_u$f32||e[0]===l.I32Convert.trunc_u$f64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=0|e}else if(e[0]===l.I32Convert.reinterpret$f32){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat32(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getInt32(0)}else if(e[0]===l.F32Convert.reinterpret$i32){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setInt32(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat32(0)}else if(e[0]===l.F64Convert.reinterpret$i64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setUint32(0,e.high),this.convertDataView.setUint32(4,e.low),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat64(0)}}else if(l.I64Convert.hasOwnProperty(e[0]))if(e[0]===l.I64Convert.reinterpret$f64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat64(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=r.fromBits(this.convertDataView.getUint32(4),this.convertDataView.getUint32(0))}else{const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=r.fromNumber(e)}else if(e[0]===l.I32.const||e[0]===l.F32.const||e[0]===l.F64.const)this.stackTop.stack.push(e[1]);else if(e[0]===l.I64.const)this.stackTop.stack.push(r.fromString(e[1]));else if(l.WLoadIns.has(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1]+e[1];let n=0;e[0]===l.I32.load8_s||e[0]===l.I64.load8_s?n=this.memory.getInt8(t):e[0]===l.I32.load8_u||e[0]===l.I64.load8_u?n=this.memory.getUint8(t):e[0]===l.I32.load16_s||e[0]===l.I64.load16_s?n=this.memory.getInt16(t,!0):e[0]===l.I32.load16_u||e[0]===l.I64.load16_u?n=this.memory.getUint16(t,!0):e[0]===l.I32.load||e[0]===l.I64.load32_s?n=this.memory.getInt32(t,!0):e[0]===l.I64.load32_u?n=this.memory.getUint32(t,!0):e[0]===l.F32.load?n=this.memory.getFloat32(t,!0):e[0]===l.F64.load&&(n=this.memory.getFloat64(t,!0)),e[0]===l.I64.load?this.stackTop.stack[this.stackTop.stack.length-1]=r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0)):e[0]===l.I64.load32_u||e[0]===l.I64.load32_s||e[0]===l.I64.load16_u||e[0]===l.I64.load16_s||e[0]===l.I64.load8_u||e[0]===l.I64.load8_s?this.stackTop.stack[this.stackTop.stack.length-1]=r.fromNumber(n):this.stackTop.stack[this.stackTop.stack.length-1]=n}else if(l.WStoreIns.has(e[0])){const t=this.stackTop.stack.pop(),n=this.stackTop.stack.pop()+e[1];this.stackTop.stack.pop(),e[0]===l.I32.store8?this.memory.setUint8(n,t):e[0]===l.I32.store16?this.memory.setUint16(n,t,!0):e[0]===l.I32.store?this.memory.setInt32(n,t,!0):e[0]===l.F32.store?this.memory.setFloat32(n,t,!0):e[0]===l.F64.store?this.memory.setFloat64(n,t,!0):e[0]===l.I64.store8?this.memory.setUint8(n,t.toNumber()):e[0]===l.I64.store16?this.memory.setUint16(n,t.toNumber(),!0):e[0]===l.I64.store32?this.memory.setUint32(n,t.toNumber(),!0):e[0]===l.I64.store&&(this.memory.setUint32(n,t.high,!0),this.memory.setUint32(n+4,t.low,!0))}else if(e[0]===l.Control.set_local)this.stackTop.locals[e[1]]=this.stackTop.stack.pop();else if(e[0]===l.Control.tee_local)this.stackTop.locals[e[1]]=this.stackTop.stack[this.stackTop.stack.length-1];else if(e[0]===l.Control.set_global){const t=this.stackTop.stack.pop();this.globals[e[1]]=t}else if(e[0]===l.Control.get_local)this.stackTop.stack.push(this.stackTop.locals[e[1]]);else if(e[0]===l.Control.get_global)this.stackTop.stack.push(this.globals[e[1]]);else if(e[0]===l.Control.drop)this.stackTop.stack.pop();else if(e[0]===l.Control.nop);else if(e[0]===l.Control.block)this.stackTop.controlFlow.push(e[1]);else if(e[0]===l.Control.loop)this.stackTop.controlFlow.push(this.stackTop.pc+1);else if(e[0]===l.Control.br||e[0]===l.Control.br_if){if(e[0]===l.Control.br||this.stackTop.stack.pop()){for(let t=0;t<e[1];t++)this.stackTop.controlFlow.pop();this.stackTop.pc=this.stackTop.controlFlow[this.stackTop.controlFlow.length-1]-1}}else if(e[0]===l.Control.if)this.stackTop.controlFlow.push(this.stackTop.pc),this.stackTop.stack.pop()||(this.stackTop.fn.codes[e[1]][0]===l.Control.else?this.stackTop.pc=e[1]:this.stackTop.pc=e[1]-1);else if(e[0]===l.Control.else)this.stackTop.pc=e[1]-1;else if(e[0]===l.Control.end)this.stackTop.controlFlow.pop();else if(e[0]===l.Control.call||e[0]===l.Control.call_indirect){const t=e[0]===l.Control.call_indirect?this.stackTop.stack.pop():e[1],n=this.program.types[t],i=[];for(let e=1;e<n.length;e++)i.push(this.stackTop.stack.pop());if(i.reverse(),t>=this.program.imports.length){const e=this.program.functions[t-this.program.imports.length],n="::"===e.name.substring(0,2)?this.rootScope.getScope(e.name.split("::").slice(1)):null;this.stack.push({fn:e,pc:-1,sp:this.sp,stack:[],controlFlow:[],locals:i,scope:n}),this.stackTop=this.stack[this.stack.length-1];for(let e=0;e<this.stackTop.fn.locals.length;e++)this.stackTop.fn.locals[e]===u.WType.i64?this.stackTop.locals.push(r.fromNumber(0)):this.stackTop.locals.push(0)}else{const e=this.program.imports[t],s=this.importObjects[e.module][e.name].apply(this,i);"i"===n.charAt(0)||"f"===n.charAt(0)||"d"===n.charAt(0)?this.stackTop.stack.push(s):"l"===n.charAt(0)&&this.stackTop.stack.push(r.fromNumber(s))}}else if(e[0]===l.Control.return){let e=0;const t="v"===this.stackTop.fn.type.charAt(0);if(t||(e=this.stackTop.stack.pop()),this.stack.pop(),0===this.stack.length)return e instanceof r&&(e=e.toNumber()),this.returnValue=e,!1;this.stackTop=this.stack[this.stack.length-1],t||this.stackTop.stack.push(e)}else if(e[0]===l.Control.br_table||e[0]===l.Control.select)throw new Error("WASM not support");return this.stackTop.pc++,!0}prepareRunFunction(e,t=!1){if(!this.program.exports.hasOwnProperty(e))throw new Error(`no entry:${e} found`);this.sp=4*parseInt((this.memory.buffer.byteLength-1)/4+""),t&&this.heapAllocator.init(this);const n=this.program.functions[this.program.exports[e]-this.program.imports.length];this.stack=[{fn:n,pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[],scope:this.rootScope}],this.stackTop=this.stack[this.stack.length-1]}runFunction(e,t=!1){for(this.prepareRunFunction(e,t);this.runStep(););}async run(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.runFunction(this.entry,!1),this.files.map(e=>e.flush())}getCurrentLine(){return this.stackTop.fn.codes[this.stackTop.pc][2]}prepareRunSingleStepMode(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.prepareRunFunction(this.entry,!1)}runSingleStepMode(){for(;this.runStep();)if(this.stackTop.fn.fileName===this.options.entryFileName&&this.stackTop.fn.lineIdx.has(this.stackTop.pc))return this.files.map(e=>e.flush()),!0;return this.files.map(e=>e.flush()),!1}padDigits(e,t){return Array(Math.max(t-e.length+1,0)).join("0")+e}formatVariableOutput(e,t){return e.type instanceof o.PointerType||e.type instanceof o.ReferenceType?"0x"+this.padDigits(t.toString(16),8):t.toString()}getValueOfVariableFromAddress(e,t){return e.type instanceof a.UnsignedCharType?this.formatVariableOutput(e,this.memory.getUint8(t)):e.type instanceof a.UnsignedInt16Type?this.formatVariableOutput(e,this.memory.getUint16(t,!0)):e.type instanceof a.UnsignedInt32Type?this.formatVariableOutput(e,this.memory.getUint32(t,!0)):e.type instanceof a.UnsignedInt64Type?this.formatVariableOutput(e,r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0),!0)):e.type instanceof a.CharType?this.formatVariableOutput(e,this.memory.getInt8(t)):e.type instanceof a.Int16Type?this.formatVariableOutput(e,this.memory.getInt16(t,!0)):e.type instanceof a.Int32Type?this.formatVariableOutput(e,this.memory.getInt32(t,!0)):e.type instanceof a.Int64Type?this.formatVariableOutput(e,r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0))):e.type instanceof o.PointerType?this.formatVariableOutput(e,this.memory.getUint32(t,!0)):"N/A"}getValueOfVariable(e,t){switch(e.addressType){case s.AddressType.LOCAL:return t?this.formatVariableOutput(e,t.locals[e.location]):"N/A";case s.AddressType.GLOBAL:return this.formatVariableOutput(e,this.globals[e.location]);case s.AddressType.GLOBAL_SP:return this.getValueOfVariableFromAddress(e,this.sp+e.location);case s.AddressType.STACK:return t?this.getValueOfVariableFromAddress(e,t.sp+e.location):"N/A";case s.AddressType.MEMORY_DATA:return this.getValueOfVariableFromAddress(e,this.stackTop.fn.dataStart+e.location);case s.AddressType.MEMORY_BSS:return this.getValueOfVariableFromAddress(e,this.stackTop.fn.bssStart+e.location);default:return"N/A"}}getScopeInfo(e,t){const n=[];if(!e)return[];for(const r of e.map)for(const e of r[1])e instanceof s.Variable&&n.push({name:e.name,type:e.type.toString(),value:this.getValueOfVariable(e,t)});return n}}},{long:"YvD4","../codegen/scope":"y+tL","../common/symbol":"HcQt","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/calculator":"hPls","../wasm/constant":"hpbE","./runtime":"B/OM"}],"0bZZ":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/utils");class VMFile{}n.VMFile=VMFile;n.NoInputFile=class NoInputFile extends VMFile{read(e,t,n){return 0}write(e){throw new r.InternalError("NoInputFile is not support write")}flush(){return 0}};n.CommandOutputFile=class CommandOutputFile extends VMFile{constructor(){super(),this.buffer=""}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){if(this.buffer+=i.fromBytesToString(new DataView(e),0,e.byteLength),this.buffer.includes("\n")){const e=this.buffer.split("\n");this.buffer=e[e.length-1],e.slice(0,e.length-1).map(e=>console.log(e))}return e.byteLength}flush(){const e=this.buffer.length;return 0===this.buffer.length?0:(console.log(this.buffer),this.buffer="",e)}};n.StringInputFile=class StringInputFile extends VMFile{constructor(e){super(),this.str=e,this.offset=0}flush(){return 0}read(e,t,n){let r=0;for(let i=0;i<n;i++){if(this.offset>=this.str.length)return r;new DataView(e).setUint8(t+i,this.str.charCodeAt(this.offset)),this.offset++,r++}return r}write(e){throw new r.InternalError("NoInputFile is not support write")}};n.StringOutputFile=class StringOutputFile extends VMFile{constructor(e){super(),this.output=e}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){return this.output[0]+=i.fromBytesToString(new DataView(e),0,e.byteLength),e.byteLength}flush(){return 0}};n.CallbackOutputFile=class CallbackOutputFile extends VMFile{constructor(e){super(),this.callback=e}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){return this.callback(i.fromBytesToString(new DataView(e),0,e.byteLength)),e.byteLength}flush(){return 0}}},{"../common/error":"nOPH","../common/utils":"pe9I"}],"47Y6":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../codegen"),s=e("../codegen/context"),o=e("../common/error"),a=e("../library"),u=e("../linker"),c=e("../parser"),l=e("../preprocessor");function p(e,t,n={}){n.fileName=e;const{code:a,map:u}=l.preprocess(e,t);try{const l=c.CParser.parse(a,n),p=new s.CompileContext(e,n,t,u);return i.codegen(l,p),p.toCompiledObject()}catch(e){const n=new r.SourceMapConsumer(u.toString());if(e instanceof o.CompilerError){const r=n.originalPositionFor(e.location.start);e.errorLine=t.split("\n")[r.line],e.location.start.line=r.line,e.location.start.column=r.column}throw e}}const h=Array.from(a.Impls.keys()).map(e=>p(e,a.Impls.get(e),{isCpp:!0}));n.compileFile=function(e,t){const n=p(e,t,{isCpp:!0});return u.link("main.cpp",[...h,n],{})},n.importObj={system:{}};for(const e of Object.keys(a.JsAPIMap))n.importObj.system["::"+e]=a.JsAPIMap[e];var f=e("../common/error");n.CompilerError=f.CompilerError;var m=e("../runtime/native_runtime");n.NativeRuntime=m.NativeRuntime;var d=e("../runtime/js_runtime");n.JSRuntime=d.JSRuntime;var g=e("../runtime/vmfile");n.VMFile=g.VMFile,n.StringOutputFile=g.StringOutputFile,n.StringInputFile=g.StringInputFile,n.CallbackOutputFile=g.CallbackOutputFile,n.NoInputFile=g.NoInputFile},{"source-map":"aRf0","../codegen":"FIFg","../codegen/context":"cKzO","../common/error":"nOPH","../library":"bjS5","../linker":"dGoJ","../parser":"4ugX","../preprocessor":"DY6N","../runtime/native_runtime":"/x2e","../runtime/js_runtime":"9XaA","../runtime/vmfile":"0bZZ"}]},{},[]);
