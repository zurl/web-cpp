parcelRequire=function(e,t,n,r){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function s(n,r){if(!t[n]){if(!e[n]){var a="function"==typeof parcelRequire&&parcelRequire;if(!r&&a)return a(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}l.resolve=function(t){return e[n][1][t]||t},l.cache={};var c=t[n]=new s.Module(n);e[n][0].call(c.exports,l,c,c.exports,this)}return t[n].exports;function l(e){return s(l.resolve(e))}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=t,s.parent=i,s.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]};for(var a=0;a<n.length;a++)s(n[a]);if(n.length){var u=s(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}return s}({"Y+NE":[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],iWlY:[function(e,t,n){var r=e("./base64");n.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},n.decode=function(e,t,n){var i,o,s,a,u=e.length,c=0,l=0;do{if(t>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),c+=(o&=31)<<l,l+=5}while(i);n.value=(a=(s=c)>>1,1==(1&s)?-a:a),n.rest=t}},{"./base64":"Y+NE"}],XUQW:[function(e,t,n){n.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,i=/^data:.+\,.+$/;function o(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function s(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var t=e,r=o(e);if(r){if(!r.path)return e;t=r.path}for(var i,a=n.isAbsolute(t),u=t.split(/\/+/),c=0,l=u.length-1;l>=0;l--)"."===(i=u[l])?u.splice(l,1):".."===i?c++:c>0&&(""===i?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return""===(t=u.join("/"))&&(t=a?"/":"."),r?(r.path=t,s(r)):t}n.urlParse=o,n.urlGenerate=s,n.normalize=a,n.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=o(t),r=o(e);if(r&&(e=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),s(n);if(n||t.match(i))return t;if(r&&!r.host&&!r.path)return r.host=t,s(r);var u="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return r?(r.path=u,s(r)):u},n.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(r)},n.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var u=!("__proto__"in Object.create(null));function c(e){return e}function l(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function p(e,t){return e===t?0:e>t?1:-1}n.toSetString=u?c:function(e){return l(e)?"$"+e:e},n.fromSetString=u?c:function(e){return l(e)?e.slice(1):e},n.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)||n?r:0!=(r=e.generatedColumn-t.generatedColumn)?r:0!=(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},n.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!=(r=e.generatedColumn-t.generatedColumn)||n?r:0!=(r=e.source-t.source)?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},n.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=p(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:p(e.name,t.name)}},{}],"dgh+":[function(e,t,n){var r=e("./util"),i=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function s(){this._array=[],this._set=o?new Map:Object.create(null)}s.fromArray=function(e,t){for(var n=new s,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},s.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var n=o?e:r.toSetString(e),s=o?this.has(e):i.call(this._set,n),a=this._array.length;s&&!t||this._array.push(e),s||(o?this._set.set(e,a):this._set[n]=a)},s.prototype.has=function(e){if(o)return this._set.has(e);var t=r.toSetString(e);return i.call(this._set,t)},s.prototype.indexOf=function(e){if(o){var t=this._set.get(e);if(t>=0)return t}else{var n=r.toSetString(e);if(i.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},n.ArraySet=s},{"./util":"XUQW"}],AUTm:[function(e,t,n){var r=e("./util");function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,s,a;t=this._last,n=e,i=t.generatedLine,o=n.generatedLine,s=t.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=i},{"./util":"XUQW"}],"1Wwh":[function(e,t,n){var r=e("./base64-vlq"),i=e("./util"),o=e("./array-set").ArraySet,s=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)}),n},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=i.relative(s,r));var a=new o,u=new o;this._mappings.unsortedForEach(function(t){if(t.source===r&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=n&&(t.source=i.join(n,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var c=t.source;null==c||a.has(c)||a.add(c);var l=t.name;null==l||u.has(l)||u.add(l)},this),this._sources=a,this._names=u,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,r))},this)},a.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,o,s=0,a=1,u=0,c=0,l=0,p=0,h="",m=this._mappings.toArray(),d=0,f=m.length;d<f;d++){if(e="",(t=m[d]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(d>0){if(!i.compareByGeneratedPositionsInflated(t,m[d-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=r.encode(o-p),p=o,e+=r.encode(t.originalLine-1-c),c=t.originalLine-1,e+=r.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-l),l=n)),h+=e}return h},a.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=a},{"./base64-vlq":"iWlY","./util":"XUQW","./array-set":"dgh+","./mapping-list":"AUTm"}],rdpJ:[function(e,t,n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,t,r,i){if(0===t.length)return-1;var o=function e(t,r,i,o,s,a){var u=Math.floor((r-t)/2)+t,c=s(i,o[u],!0);return 0===c?u:c>0?r-u>1?e(u,r,i,o,s,a):a==n.LEAST_UPPER_BOUND?r<o.length?r:-1:u:u-t>1?e(t,u,i,o,s,a):a==n.LEAST_UPPER_BOUND?u:t<0?-1:t}(-1,t.length,e,t,r,i||n.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===r(t[o],t[o-1],!0);)--o;return o}},{}],lFls:[function(e,t,n){function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t,n,o){if(n<o){var s=n-1;r(e,(l=n,p=o,Math.round(l+Math.random()*(p-l))),o);for(var a=e[o],u=n;u<o;u++)t(e[u],a)<=0&&r(e,s+=1,u);r(e,s+1,u);var c=s+1;i(e,t,n,c-1),i(e,t,c+1,o)}var l,p}n.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],fmOz:[function(e,t,n){var r=e("./util"),i=e("./binary-search"),o=e("./array-set").ArraySet,s=e("./base64-vlq"),a=e("./quick-sort").quickSort;function u(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new p(t):new c(t)}function c(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),s=r.getArg(t,"names",[]),a=r.getArg(t,"sourceRoot",null),u=r.getArg(t,"sourcesContent",null),c=r.getArg(t,"mappings"),l=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map(function(e){return a&&r.isAbsolute(a)&&r.isAbsolute(e)?r.relative(a,e):e}),this._names=o.fromArray(s.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=u,this._mappings=c,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function p(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new o,this._names=new o;var s={line:-1,column:0};this._sections=i.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new u(r.getArg(e,"map"))}})}u.fromSourceMap=function(e){return c.fromSourceMap(e)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},u.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:i=this._generatedMappings;break;case u.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=r.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)},u.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var u=a.originalLine;a&&a.originalLine===u;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==c;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},n.SourceMapConsumer=u,c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.fromSourceMap=function(e){var t=Object.create(c.prototype),n=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),u=t.__generatedMappings=[],p=t.__originalMappings=[],h=0,m=s.length;h<m;h++){var d=s[h],f=new l;f.generatedLine=d.generatedLine,f.generatedColumn=d.generatedColumn,d.source&&(f.source=i.indexOf(d.source),f.originalLine=d.originalLine,f.originalColumn=d.originalColumn,d.name&&(f.name=n.indexOf(d.name)),p.push(f)),u.push(f)}return a(t.__originalMappings,r.compareByOriginalPositions),t},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e},this)}}),c.prototype._parseMappings=function(e,t){for(var n,i,o,u,c,p=1,h=0,m=0,d=0,f=0,y=0,g=e.length,_=0,w={},x={},T=[],C=[];_<g;)if(";"===e.charAt(_))p++,_++,h=0;else if(","===e.charAt(_))_++;else{for((n=new l).generatedLine=p,u=_;u<g&&!this._charIsMappingSeparator(e,u);u++);if(o=w[i=e.slice(_,u)])_+=i.length;else{for(o=[];_<u;)s.decode(e,_,x),c=x.value,_=x.rest,o.push(c);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");w[i]=o}n.generatedColumn=h+o[0],h=n.generatedColumn,o.length>1&&(n.source=f+o[1],f+=o[1],n.originalLine=m+o[2],m=n.originalLine,n.originalLine+=1,n.originalColumn=d+o[3],d=n.originalColumn,o.length>4&&(n.name=y+o[4],y+=o[4])),C.push(n),"number"==typeof n.originalLine&&T.push(n)}a(C,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,a(T,r.compareByOriginalPositions),this.__originalMappings=T},c.prototype._findMapping=function(e,t,n,r,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,s)},c.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var s=r.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},c.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",u.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=c,p.prototype=Object.create(u.prototype),p.prototype.constructor=u,p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),p.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},p.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},p.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var u=o[s],c=i.consumer._sources.at(u.source);null!==i.consumer.sourceRoot&&(c=r.join(i.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var l=i.consumer._names.at(u.name);this._names.add(l),l=this._names.indexOf(l);var p={source:c,generatedLine:u.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(i.generatedOffset.generatedLine===u.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(p),"number"==typeof p.originalLine&&this.__originalMappings.push(p)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)},n.IndexedSourceMapConsumer=p},{"./util":"XUQW","./binary-search":"rdpJ","./array-set":"dgh+","./base64-vlq":"iWlY","./quick-sort":"lFls"}],Qm02:[function(e,t,n){var r=e("./source-map-generator").SourceMapGenerator,i=e("./util"),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,s=e.split(o),u=0,c=function(){return e()+(e()||"");function e(){return u<s.length?s[u++]:void 0}},l=1,p=0,h=null;return t.eachMapping(function(e){if(null!==h){if(!(l<e.generatedLine)){var t=(n=s[u]).substr(0,e.generatedColumn-p);return s[u]=n.substr(e.generatedColumn-p),p=e.generatedColumn,m(h,t),void(h=e)}m(h,c()),l++,p=0}for(;l<e.generatedLine;)r.add(c()),l++;if(p<e.generatedColumn){var n=s[u];r.add(n.substr(0,e.generatedColumn)),s[u]=n.substr(e.generatedColumn),p=e.generatedColumn}h=e},this),u<s.length&&(h&&m(h,c()),r.add(s.splice(u).join(""))),t.sources.forEach(function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))}),r;function m(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&s===r.line&&a===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,s=r.line,a=r.column,u=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var c=0,l=e.length;c<l;c++)10===e.charCodeAt(c)?(t.line++,t.column=0,c+1===l?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},n.SourceNode=a},{"./source-map-generator":"1Wwh","./util":"XUQW"}],aRf0:[function(e,t,n){n.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-generator":"1Wwh","./lib/source-map-consumer":"fmOz","./lib/source-node":"Qm02"}],HcQt:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class Symbol{constructor(e){this.accessControl=e}}n.Symbol=Symbol;class OverloadSymbol extends Symbol{}var r;n.OverloadSymbol=OverloadSymbol,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.LOCAL=1]="LOCAL",e[e.STACK=2]="STACK",e[e.MEMORY_DATA=3]="MEMORY_DATA",e[e.MEMORY_BSS=4]="MEMORY_BSS",e[e.MEMORY_EXTERN=5]="MEMORY_EXTERN",e[e.RVALUE=6]="RVALUE",e[e.CONSTANT=7]="CONSTANT",e[e.GLOBAL_SP=8]="GLOBAL_SP"}(r=n.AddressType||(n.AddressType={}));n.Variable=class Variable extends Symbol{constructor(e,t,n,r,i,o,s){super(s),this.shortName=e,this.fullName=t,this.fileName=n,this.type=r,this.addressType=i,this.location=o}toString(){return`${this.shortName}:${this.type.toString()}`}isDefine(){return this.addressType!==r.MEMORY_EXTERN}getType(){return this.type}};n.FunctionEntity=class FunctionEntity extends OverloadSymbol{constructor(e,t,n,r,i,o,s,a,u){super(a),this.shortName=e,this.fullName=t,this.fileName=n,this.type=r,this.isLibCall=o,this.hasDefine=s,this.parameterInits=i,this.$sp=0,this.parametersSize=r.parameterTypes.map(e=>e.length).reduce((e,t)=>e+t,0),this.declareActiveScopes=u}isDefine(){return this.hasDefine}getType(){return this.type}getIndexName(){return this.shortName.split("@")[0]}getFullName(){return this.fullName}}},{}],Rt13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/symbol");var i;n.Type=class Type extends r.Symbol{constructor(){super(i.Public),this.isConst=!1}equals(e){return this.constructor===e.constructor}isDefine(){return!1}getType(){return this}},function(e){e[e.Public=0]="Public",e[e.Private=1]="Private",e[e.Protected=2]="Protected",e[e.Unknown=3]="Unknown"}(i=n.AccessControl||(n.AccessControl={})),n.getAccessControlFromString=function(e){return"public"===e?i.Public:"protected"===e?i.Protected:i.Private}},{"../common/symbol":"HcQt"}],PoXi:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class Position{constructor(e,t,n){this.offset=e,this.line=t,this.column=n}toString(){return`(${this.line}:${this.column})`}}n.Position=Position;class SourceLocation{constructor(e,t,n,r){this.fileName=e,this.source=t,this.start=n,this.end=r}toString(){return`${this.start.line}(${this.start.column}) - ${this.end.line}(${this.end.column})`}}n.SourceLocation=SourceLocation,n.EmptyLocation=new SourceLocation("","",new Position(1,-1,1),new Position(1,-1,1));class Node{static getEmptyLocation(){return n.EmptyLocation}constructor(e){this.location=e}}n.Node=Node;class Directive extends Node{constructor(e){super(e)}}n.Directive=Directive;n.ClassDirective=class ClassDirective extends Directive{constructor(e){super(e)}}},{}],nOPH:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./node");class FatalError extends Error{}n.FatalError=FatalError;n.InternalError=class InternalError extends Error{};n.LinkerError=class LinkerError extends Error{};n.RuntimeError=class RuntimeError extends Error{};n.EmitError=class EmitError extends Error{};class CompilerError extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.node=t,this.location=t?t.location:new r.SourceLocation("","",new r.Position(0,0,0),new r.Position(0,0,0)),this.errorLine=""}toString(){return`${this.name}: ${this.message} at ${this.location.start.line}:${this.location.start.column}`}}n.CompilerError=CompilerError;n.TypeError=class TypeError extends CompilerError{};class SyntaxError extends CompilerError{}n.SyntaxError=SyntaxError;n.LanguageError=class LanguageError extends CompilerError{};n.PreprocessingError=class PreprocessingError extends CompilerError{};n.PreprocessError=class PreprocessError extends Error{},n.assertType=function(e,t){if(e instanceof Array)throw 0===e.length?new FatalError(`the node expect to be ${t.prototype.constructor.name}`+", but actual is a empty array."):new SyntaxError(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is a array of ${e[0].constructor.name}.`,e[0]);if(!(e instanceof t))throw new SyntaxError(`the node expect to be ${t.prototype.constructor.name}`+`, but actual is ${e.constructor.name}.`,e)}},{"./node":"PoXi"}],Mjkt:[function(e,t,n){"use strict";var r,i,o,s,a,u,c,l,p,h,m,d,f,y,g,_,w,x,T;function C(e,t){return Object.keys(e).map(e=>parseInt(e)).filter(e=>e).map(e=>[e,t])}function v(e){switch(e){case T.u8:case T.u16:case T.u32:return T.u32;case T.i8:case T.i16:case T.i32:return T.i32;case T.f32:return T.f32;case T.f64:return T.f64;case T.i64:return T.i64;case T.u64:return T.u64}return T.none}Object.defineProperty(n,"__esModule",{value:!0}),n.OpCodes=new Map([[0,"unreachable"],[1,"nop"],[2,"block"],[3,"loop"],[4,"if"],[5,"else"],[11,"end"],[12,"br"],[13,"br_if"],[14,"br_table"],[15,"return"],[16,"call"],[17,"call_indirect"],[26,"drop"],[27,"select"],[32,"get_local"],[33,"set_local"],[34,"tee_local"],[35,"get_global"],[36,"set_global"],[40,"i32.load"],[41,"i64.load"],[42,"f32.load"],[43,"f64.load"],[44,"i32.load8_s"],[45,"i32.load8_u"],[46,"i32.load16_s"],[47,"i32.load16_u"],[48,"i64.load8_s"],[49,"i64.load8_u"],[50,"i64.load16_s"],[51,"i64.load16_u"],[52,"i64.load32_s"],[53,"i64.load32_u"],[54,"i32.store"],[55,"i64.store"],[56,"f32.store"],[57,"f64.store"],[58,"i32.store8"],[59,"i32.store16"],[60,"i64.store8"],[61,"i64.store16"],[62,"i64.store32"],[63,"current_memory"],[64,"grow_memory"],[65,"i32.const"],[66,"i64.const"],[67,"f32.const"],[68,"f64.const"],[69,"i32.eqz"],[70,"i32.eq"],[71,"i32.ne"],[72,"i32.lt_s"],[73,"i32.lt_u"],[74,"i32.gt_s"],[75,"i32.gt_u"],[76,"i32.le_s"],[77,"i32.le_u"],[78,"i32.ge_s"],[79,"i32.ge_u"],[80,"i64.eqz"],[81,"i64.eq"],[82,"i64.ne"],[83,"i64.lt_s"],[84,"i64.lt_u"],[85,"i64.gt_s"],[86,"i64.gt_u"],[87,"i64.le_s"],[88,"i64.le_u"],[89,"i64.ge_s"],[90,"i64.ge_u"],[91,"f32.eq"],[92,"f32.ne"],[93,"f32.lt"],[94,"f32.gt"],[95,"f32.le"],[96,"f32.ge"],[97,"f64.eq"],[98,"f64.ne"],[99,"f64.lt"],[100,"f64.gt"],[101,"f64.le"],[102,"f64.ge"],[103,"i32.clz"],[104,"i32.ctz"],[105,"i32.popcnt"],[106,"i32.add"],[107,"i32.sub"],[108,"i32.mul"],[109,"i32.div_s"],[110,"i32.div_u"],[111,"i32.rem_s"],[112,"i32.rem_u"],[113,"i32.and"],[114,"i32.or"],[115,"i32.xor"],[116,"i32.shl"],[117,"i32.shr_s"],[118,"i32.shr_u"],[119,"i32.rotl"],[120,"i32.rotr"],[121,"i64.clz"],[122,"i64.ctz"],[123,"i64.popcnt"],[124,"i64.add"],[125,"i64.sub"],[126,"i64.mul"],[127,"i64.div_s"],[128,"i64.div_u"],[129,"i64.rem_s"],[130,"i64.rem_u"],[131,"i64.and"],[132,"i64.or"],[133,"i64.xor"],[134,"i64.shl"],[135,"i64.shr_s"],[136,"i64.shr_u"],[137,"i64.rotl"],[138,"i64.rotr"],[139,"f32.abs"],[140,"f32.neg"],[141,"f32.ceil"],[142,"f32.floor"],[143,"f32.trunc"],[144,"f32.nearest"],[145,"f32.sqrt"],[146,"f32.add"],[147,"f32.sub"],[148,"f32.mul"],[149,"f32.div"],[150,"f32.min"],[151,"f32.max"],[152,"f32.copysign"],[153,"f64.abs"],[154,"f64.neg"],[155,"f64.ceil"],[156,"f64.floor"],[157,"f64.trunc"],[158,"f64.nearest"],[159,"f64.sqrt"],[160,"f64.add"],[161,"f64.sub"],[162,"f64.mul"],[163,"f64.div"],[164,"f64.min"],[165,"f64.max"],[166,"f64.copysign"],[167,"i32.wrap_i64"],[168,"i32.trunc_s_f32"],[169,"i32.trunc_u_f32"],[170,"i32.trunc_s_f64"],[171,"i32.trunc_u_f64"],[172,"i64.extend_s_i32"],[173,"i64.extend_u_i32"],[174,"i64.trunc_s_f32"],[175,"i64.trunc_u_f32"],[176,"i64.trunc_s_f64"],[177,"i64.trunc_u_f64"],[178,"f32.convert_s_i32"],[179,"f32.convert_u_i32"],[180,"f32.convert_s_i64"],[181,"f32.convert_u_i64"],[182,"f32.demote_f64"],[183,"f64.convert_s_i32"],[184,"f64.convert_u_i32"],[185,"f64.convert_s_i64"],[186,"f64.convert_u_i64"],[187,"f64.promote_f32"],[188,"i32.reinterpret_f32"],[189,"i64.reinterpret_f64"],[190,"f32.reinterpret_i32"],[191,"f64.reinterpret_i64"]]),function(e){e[e.unreachable=0]="unreachable",e[e.nop=1]="nop",e[e.block=2]="block",e[e.loop=3]="loop",e[e.if=4]="if",e[e.else=5]="else",e[e.end=11]="end",e[e.br=12]="br",e[e.br_if=13]="br_if",e[e.br_table=14]="br_table",e[e.return=15]="return",e[e.call=16]="call",e[e.call_indirect=17]="call_indirect",e[e.drop=26]="drop",e[e.select=27]="select",e[e.get_local=32]="get_local",e[e.set_local=33]="set_local",e[e.tee_local=34]="tee_local",e[e.get_global=35]="get_global",e[e.set_global=36]="set_global",e[e.current_memory=63]="current_memory",e[e.grow_memory=64]="grow_memory"}(n.Control||(n.Control={})),function(e){e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(r=n.U32||(n.U32={})),function(e){e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(i=n.U64||(n.U64={})),function(e){e[e.load=42]="load",e[e.store=56]="store",e[e.const=67]="const"}(o=n.F32||(n.F32={})),function(e){e[e.load=43]="load",e[e.store=57]="store",e[e.const=68]="const"}(s=n.F64||(n.F64={})),function(e){e[e.const=65]="const",e[e.load=40]="load",e[e.load8_s=44]="load8_s",e[e.load8_u=45]="load8_u",e[e.load16_s=46]="load16_s",e[e.load16_u=47]="load16_u",e[e.store=54]="store",e[e.store8=58]="store8",e[e.store16=59]="store16"}(a=n.I32||(n.I32={})),function(e){e[e.const=66]="const",e[e.load=41]="load",e[e.load8_s=48]="load8_s",e[e.load8_u=49]="load8_u",e[e.load16_s=50]="load16_s",e[e.load16_u=51]="load16_u",e[e.load32_s=52]="load32_s",e[e.load32_u=53]="load32_u",e[e.store=55]="store",e[e.store8=60]="store8",e[e.store16=61]="store16",e[e.store32=62]="store32"}(u=n.I64||(n.I64={})),function(e){e[e.eq=70]="eq",e[e.ne=71]="ne",e[e.lt_s=72]="lt_s",e[e.lt_u=73]="lt_u",e[e.gt_s=74]="gt_s",e[e.gt_u=75]="gt_u",e[e.le_s=76]="le_s",e[e.le_u=77]="le_u",e[e.ge_s=78]="ge_s",e[e.ge_u=79]="ge_u",e[e.add=106]="add",e[e.sub=107]="sub",e[e.mul=108]="mul",e[e.div_s=109]="div_s",e[e.div_u=110]="div_u",e[e.rem_s=111]="rem_s",e[e.rem_u=112]="rem_u",e[e.and=113]="and",e[e.or=114]="or",e[e.xor=115]="xor",e[e.shl=116]="shl",e[e.shr_s=117]="shr_s",e[e.shr_u=118]="shr_u",e[e.rotl=119]="rotl",e[e.rotr=120]="rotr"}(c=n.I32Binary||(n.I32Binary={})),function(e){e[e.eq=81]="eq",e[e.ne=82]="ne",e[e.lt_s=83]="lt_s",e[e.lt_u=84]="lt_u",e[e.gt_s=85]="gt_s",e[e.gt_u=86]="gt_u",e[e.le_s=87]="le_s",e[e.le_u=88]="le_u",e[e.ge_s=89]="ge_s",e[e.ge_u=90]="ge_u",e[e.add=124]="add",e[e.sub=125]="sub",e[e.mul=126]="mul",e[e.div_s=127]="div_s",e[e.div_u=128]="div_u",e[e.rem_s=129]="rem_s",e[e.rem_u=130]="rem_u",e[e.and=131]="and",e[e.or=132]="or",e[e.xor=133]="xor",e[e.shl=134]="shl",e[e.shr_s=135]="shr_s",e[e.shr_u=136]="shr_u",e[e.rotl=137]="rotl",e[e.rotr=138]="rotr"}(l=n.I64Binary||(n.I64Binary={})),function(e){e[e.eq=91]="eq",e[e.ne=92]="ne",e[e.lt=93]="lt",e[e.gt=94]="gt",e[e.le=95]="le",e[e.ge=96]="ge",e[e.add=146]="add",e[e.sub=147]="sub",e[e.mul=148]="mul",e[e.div=149]="div",e[e.min=150]="min",e[e.max=151]="max",e[e.copysign=152]="copysign"}(p=n.F32Binary||(n.F32Binary={})),function(e){e[e.eq=97]="eq",e[e.ne=98]="ne",e[e.lt=99]="lt",e[e.gt=100]="gt",e[e.le=101]="le",e[e.ge=102]="ge",e[e.add=160]="add",e[e.sub=161]="sub",e[e.mul=162]="mul",e[e.div=163]="div",e[e.min=164]="min",e[e.max=165]="max",e[e.copysign=166]="copysign"}(h=n.F64Binary||(n.F64Binary={})),function(e){e[e.eqz=69]="eqz",e[e.clz=103]="clz",e[e.ctz=104]="ctz",e[e.popcnt=105]="popcnt"}(m=n.I32Unary||(n.I32Unary={})),function(e){e[e.wrap$i64=167]="wrap$i64",e[e.trunc_s$f32=168]="trunc_s$f32",e[e.trunc_u$f32=169]="trunc_u$f32",e[e.trunc_s$f64=170]="trunc_s$f64",e[e.trunc_u$f64=171]="trunc_u$f64",e[e.reinterpret$f32=188]="reinterpret$f32"}(d=n.I32Convert||(n.I32Convert={})),function(e){e[e.eqz=80]="eqz",e[e.clz=121]="clz",e[e.ctz=122]="ctz",e[e.popcnt=123]="popcnt"}(f=n.I64Unary||(n.I64Unary={})),function(e){e[e.extend_s$i32=172]="extend_s$i32",e[e.extend_u$i32=173]="extend_u$i32",e[e.trunc_s$f32=174]="trunc_s$f32",e[e.trunc_u$f32=175]="trunc_u$f32",e[e.trunc_s$f64=176]="trunc_s$f64",e[e.trunc_u$f64=177]="trunc_u$f64",e[e.reinterpret$f64=189]="reinterpret$f64"}(y=n.I64Convert||(n.I64Convert={})),function(e){e[e.abs=139]="abs",e[e.ceil=141]="ceil",e[e.trunc=143]="trunc",e[e.sqrt=145]="sqrt",e[e.neg=140]="neg",e[e.floor=142]="floor",e[e.nearest=144]="nearest"}(g=n.F32Unary||(n.F32Unary={})),function(e){e[e.convert_s$i32=178]="convert_s$i32",e[e.convert_u$i32=179]="convert_u$i32",e[e.convert_s$i64=180]="convert_s$i64",e[e.convert_u$i64=181]="convert_u$i64",e[e.demote$f64=182]="demote$f64",e[e.reinterpret$i32=190]="reinterpret$i32"}(_=n.F32Convert||(n.F32Convert={})),function(e){e[e.abs=153]="abs",e[e.ceil=155]="ceil",e[e.trunc=157]="trunc",e[e.sqrt=159]="sqrt",e[e.neg=154]="neg",e[e.floor=156]="floor",e[e.nearest=158]="nearest"}(w=n.F64Unary||(n.F64Unary={})),function(e){e[e.convert_s$i32=183]="convert_s$i32",e[e.convert_u$i32=184]="convert_u$i32",e[e.convert_s$i64=185]="convert_s$i64",e[e.convert_u$i64=186]="convert_u$i64",e[e.promote$f32=187]="promote$f32",e[e.reinterpret$i64=191]="reinterpret$i64"}(x=n.F64Convert||(n.F64Convert={})),function(e){e[e.i32=127]="i32",e[e.i64=126]="i64",e[e.f32=125]="f32",e[e.f64=124]="f64",e[e.u32=1]="u32",e[e.u64=2]="u64",e[e.i8=3]="i8",e[e.u8=4]="u8",e[e.i16=5]="i16",e[e.u16=6]="u16",e[e.none=0]="none",e[e.any=7]="any",e[e.str=8]="str"}(T=n.WType||(n.WType={})),function(e){e[e.custom=0]="custom",e[e.type=1]="type",e[e.import=2]="import",e[e.function=3]="function",e[e.table=4]="table",e[e.memory=5]="memory",e[e.global=6]="global",e[e.export=7]="export",e[e.start=8]="start",e[e.element=9]="element",e[e.code=10]="code",e[e.data=11]="data"}(n.SectionCode||(n.SectionCode={})),n.WTypeMap=new Map([[T.i32,a],[T.i64,u],[T.u32,r],[T.u64,i],[T.f32,o],[T.f64,s]]),n.OpTypeMap=new Map([...C(m,T.i32),...C(f,T.i64),...C(g,T.f32),...C(w,T.f64),...C(c,T.i32),...C(l,T.i64),...C(p,T.f32),...C(h,T.f64),...C(d,T.i32),...C(y,T.i64),...C(_,T.f32),...C(x,T.f64)]),n.getTypeConvertOpe=function(e,t){switch(e){case T.i32:switch(t){case T.i32:case T.u32:return null;case T.i64:case T.u64:return y.extend_s$i32;case T.f32:return _.convert_s$i32;case T.f64:return x.convert_s$i32}return null;case T.u32:switch(t){case T.i32:case T.u32:return null;case T.i64:case T.u64:return y.extend_u$i32;case T.f32:return _.convert_u$i32;case T.f64:return x.convert_u$i32}return null;case T.i64:switch(t){case T.i32:case T.u32:return d.wrap$i64;case T.i64:case T.u64:return null;case T.f32:return _.convert_s$i64;case T.f64:return x.convert_s$i64}return null;case T.u64:switch(t){case T.i32:case T.u32:return d.wrap$i64;case T.i64:case T.u64:return null;case T.f32:return _.convert_u$i64;case T.f64:return x.convert_u$i64}return null;case T.f32:switch(t){case T.i32:return d.trunc_s$f32;case T.u32:return d.trunc_u$f32;case T.i64:return y.trunc_s$f32;case T.u64:return y.trunc_u$f32;case T.f32:return null;case T.f64:return x.promote$f32}return null;case T.f64:switch(t){case T.i32:return d.trunc_s$f64;case T.u32:return d.trunc_u$f64;case T.i64:return y.trunc_s$f64;case T.u64:return y.trunc_u$f64;case T.f32:return _.demote$f64;case T.f64:return null}return null}return null},n.getOpFromStr=function(e,t){switch(v(t)){case T.i32:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_s;case"%":return c.rem_s;case"<":return c.lt_s;case">":return c.gt_s;case"<=":return c.le_s;case">=":return c.ge_s;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"&&":return c.and;case"||":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_s;case"!":return m.eqz}return null;case T.u32:switch(e){case"+":return c.add;case"-":return c.sub;case"*":return c.mul;case"/":return c.div_u;case"%":return c.rem_u;case"<":return c.lt_u;case">":return c.gt_u;case"<=":return c.le_u;case">=":return c.ge_u;case"==":return c.eq;case"!=":return c.ne;case"&":return c.and;case"|":return c.or;case"^":return c.xor;case">>":case"<<":return c.shr_u;case"!":return m.eqz}return null;case T.i64:switch(e){case"+":return l.add;case"-":return l.sub;case"*":return l.mul;case"/":return l.div_s;case"%":return l.rem_s;case"<":return l.lt_s;case">":return l.gt_s;case"<=":return l.le_s;case">=":return l.ge_s;case"==":return l.eq;case"!=":return l.ne;case"&":return l.and;case"|":return l.or;case"^":return l.xor;case">>":case"<<":return l.shr_s;case"!":return f.eqz}return null;case T.u64:switch(e){case"+":return l.add;case"-":return l.sub;case"*":return l.mul;case"/":return l.div_u;case"%":return l.rem_u;case"<":return l.lt_u;case">":return l.gt_u;case"<=":return l.le_u;case">=":return l.ge_u;case"==":return l.eq;case"!=":return l.ne;case"&":return l.and;case"|":return l.or;case"^":return l.xor;case">>":case"<<":return l.shr_u}return null;case T.f32:switch(e){case"+":return p.add;case"-":return p.sub;case"*":return p.mul;case"/":return p.div;case"<":return p.lt;case">":return p.gt;case"<=":return p.le;case">=":return p.ge;case"==":return p.eq;case"!=":return p.ne}return null;case T.f64:switch(e){case"+":return h.add;case"-":return h.sub;case"*":return h.mul;case"/":return h.div;case"<":return h.lt;case">":return h.gt;case"<=":return h.le;case">=":return h.ge;case"==":return h.eq;case"!=":return h.ne}return null}return null},n.getOperationType=v,n.getNativeType=function(e){switch(e){case T.u8:case T.u16:case T.u32:case T.i8:case T.i16:case T.i32:return T.i32;case T.f32:return T.f32;case T.f64:return T.f64;case T.i64:case T.u64:return T.i64}return T.none},n.WLoadIns=new Set([a.load,a.load8_s,a.load8_u,a.load16_s,a.load16_u,u.load,u.load8_s,u.load8_u,u.load16_s,u.load16_u,o.load,s.load]),n.WStoreIns=new Set([a.store,a.store8,a.store16,u.store,u.store8,u.store32,o.store,s.store])},{}],2721:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/node");n.WNode=class WNode extends r.Node{constructor(e){super(e)}optimize(e){}}},{"../common/node":"PoXi"}],l0JX:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node");n.WSection=class WSection extends r.WNode{}},{"../node":"2721"}],F72u:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wsection");n.WCodeSection=class WCodeSection extends i.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.code);const t=e.createLengthSlot();e.emit(r.WType.u32,this.functions.length),this.functions.map(t=>t.emit(e)),e.fillLengthSlot(t)}optimize(e){this.functions.map(t=>t.optimize(e))}}},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],F1I7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wsection");n.WExportSection=class WExportSection extends i.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.export);const t=e.createLengthSlot();e.emit(r.WType.u32,this.functions.length),this.functions.map(t=>t.emit(e)),e.fillLengthSlot(t)}}},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],FxaF:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant");n.WImportItem=class WImportItem extends r.WNode{constructor(e,t,n){super(n),this.module=e,this.name=t}emit(e){e.emit(i.WType.str,this.module),e.emit(i.WType.str,this.name)}}},{"../node":"2721","../tool/constant":"Mjkt"}],NgQr:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wimport_item");n.WImportMemory=class WImportMemory extends i.WImportItem{constructor(e,t,n,r,i){super(e,t,i),this.min=n,this.max=r}emit(e){super.emit(e),e.writeByte(2),null===this.max?(e.writeByte(0),e.emit(r.WType.u32,this.min)):(e.writeByte(1),e.writeByte(this.min),e.writeByte(this.max))}}},{"../tool/constant":"Mjkt","./wimport_item":"FxaF"}],ojST:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant");class WFunctionType extends r.WNode{static n2s(e){return e===i.WType.i32?"i":e===i.WType.i64?"l":e===i.WType.f32?"f":e===i.WType.f64?"d":"v"}static s2n(e){return"i"===e?i.WType.i32:"l"===e?i.WType.i64:"f"===e?i.WType.f32:"d"===e?i.WType.f64:i.WType.none}static fromEncoding(e,t){const n=new WFunctionType([],[],t);"v"!==e.charAt(0)&&n.returnTypes.push(WFunctionType.s2n(e.charAt(0)));for(let t=1;t<e.length;t++)n.parameters.push(WFunctionType.s2n(e.charAt(t)));return n}constructor(e,t,n){super(n),this.returnTypes=e,this.parameters=t}emit(e){e.writeByte(96),e.emit(i.WType.u32,this.parameters.length),this.parameters.map(t=>e.emit(i.WType.u32,i.getNativeType(t))),e.emit(i.WType.u32,this.returnTypes.length),this.returnTypes.map(t=>e.emit(i.WType.u32,i.getNativeType(t)))}toString(){return this.parameters.join(",")+"#"+this.returnTypes.join(",")}toEncoding(){let e="";return 0===this.returnTypes.length?e+="v":e+=WFunctionType.n2s(i.getNativeType(this.returnTypes[0])),this.parameters.map(t=>e+=WFunctionType.n2s(i.getNativeType(t))),e}}n.WFunctionType=WFunctionType},{"../node":"2721","../tool/constant":"Mjkt"}],qolR:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant"),o=e("./wfunction_type");n.WFunction=class WFunction extends r.WNode{constructor(e,t,n,r,i,s,a){super(a),this.name=e,this.displayName=t,this.type=new o.WFunctionType(n,r,a),this.local=i,this.body=s,this.signatureId=0,this.dataStart=0,this.bssStart=0,this.fileName=""}emit(e){const t=e.createLengthSlot();e.emit(i.WType.u32,this.local.length),this.local.map(t=>{e.emit(i.WType.u32,1),e.writeByte(i.getNativeType(t))}),e.enterFunction(this),this.body.map(t=>t.emit(e)),e.submitFunction(),e.emitIns(i.Control.end,i.WType.none,0,this.location),e.fillLengthSlot(t)}optimize(e){this.body.map(t=>t.optimize(e))}}},{"../node":"2721","../tool/constant":"Mjkt","./wfunction_type":"ojST"}],vZqF:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant");n.WImportSection=class WImportSection extends r.WNode{constructor(e,t){super(t),this.imports=e}emit(e){e.writeByte(i.SectionCode.import);const t=e.createLengthSlot();e.emit(i.WType.u32,this.imports.length),this.imports.map(t=>t.emit(e)),e.fillLengthSlot(t)}}},{"../node":"2721","../tool/constant":"Mjkt"}],"7DOa":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../../common/error");n.EmitterContext=class EmitterContext{constructor(e,t){this.functionMap=new Map,this.globalMap=new Map,this.funcTypeEncodingMap=new Map,this.functionIdNow=0,this.globalIdNow=0,this.currentFunction=null,this.externMap=e,this.sourceMap=t,this.sourceMapConsumer=null}getStartLine(e){return this.sourceMapConsumer&&e.start.line>=1?this.sourceMapConsumer.originalPositionFor(e.start).line:-1}getEndLine(e){return this.sourceMapConsumer&&e.end.line>=1?this.sourceMapConsumer.originalPositionFor(e.end).line:-1}setSourceMap(e){e&&this.sourceMap&&this.sourceMap.get(e)?this.sourceMapConsumer=new r.SourceMapConsumer(this.sourceMap.get(e).sourceMap.toString()):this.sourceMapConsumer=null}getFuncInfo(e){const t=this.functionMap.get(e);if(!t)throw new i.EmitError(`undefined function ${e}`);return t}submitFunc(e,t){if(this.functionMap.has(e))throw new i.EmitError(`duplicated name ${e}`);return this.functionMap.set(e,{id:this.functionIdNow,type:t}),this.functionIdNow++}getGlobalInfo(e){const t=this.globalMap.get(e);if(!t)throw new i.EmitError(`undefined name ${e}`);return t}submitGlobal(e,t){if(this.globalMap.has(e))throw new i.EmitError(`duplicated name ${e}`);return this.globalMap.set(e,{id:this.globalIdNow,type:t}),this.globalIdNow++}setCurrentFunc(e){if(this.currentFunction=e,this.sourceMapConsumer=null,null!==e){const t=this.sourceMap.get(e.fileName);t&&(this.sourceMapConsumer=new r.SourceMapConsumer(t.sourceMap.toString()))}}getCurrentFunc(){if(!this.currentFunction)throw new i.EmitError("not in func");return this.currentFunction}getExternLocation(e){const t=this.externMap.get(e);if(!t)throw new i.EmitError(`unresolve symbol ${e}`);return t}getTypeIdxFromEncoding(e){const t=this.funcTypeEncodingMap.get(e);if(!t)throw new i.EmitError(`unresolve type ${e}`);return t}setTypeIdxFromEncoding(e,t){this.funcTypeEncodingMap.set(e,t)}}},{"source-map":"aRf0","../../common/error":"nOPH"}],Oljm:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./emitter_context");n.Emitter=class Emitter{constructor(e,t){this.ctx=new r.EmitterContext(e,t)}}},{"./emitter_context":"7DOa"}],NDfV:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./emitter");n.JSONEmitter=class JSONEmitter extends i.Emitter{constructor(e,t){super(e,t),this.memoryInfo=[],this.insBuffer=[],this.wasmJSON={functions:[],types:[],globals:[],imports:[],data:[],exports:{}}}writeByte(e){}writeBytes(e){}createLengthSlot(){return[0,0]}emit(e,t){}fillLengthSlot(e){}emitIns(e,t,n,r,i){this.insBuffer.push([e,n,this.ctx.getStartLine(r)])}enterFunction(e){this.ctx.setCurrentFunc(e),this.insBuffer=[]}submitFunction(){const e=this.insBuffer,t=[];for(let n=0;n<e.length;n++)e[n][0]===r.Control.if||e[n][0]===r.Control.block||e[n][0]===r.Control.loop?t.push(n):e[n][0]===r.Control.else?(e[t[t.length-1]][1]=n,t.pop(),t.push(n)):e[n][0]===r.Control.end&&(e[t[t.length-1]][1]=n,t.pop());e.push([r.Control.return,0,-1]);const n=new Set,i=new Set;for(let t=0;t<e.length;t++)-1===e[t][2]||n.has(e[t][2])||(n.add(e[t][2]),i.add(t));const o=this.ctx.getCurrentFunc();this.wasmJSON.functions.push({name:o.name,fileName:o.fileName,displayName:o.displayName,locals:o.local.map(e=>r.getNativeType(e)),codes:e,type:o.type.toEncoding(),signatureId:o.signatureId,lineIdx:i,dataStart:o.dataStart,bssStart:o.bssStart,scope:null,memoryInfo:this.memoryInfo,sourceRange:[this.ctx.getStartLine(o.location),this.ctx.getEndLine(o.location)]}),this.memoryInfo=[],this.ctx.setCurrentFunc(null)}getJSON(){return this.wasmJSON}}},{"../tool/constant":"Mjkt","./emitter":"Oljm"}],ZUlG:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../emitter/json_emitter"),i=e("../tool/constant"),o=e("./wsection");n.WDataSection=class WDataSection extends o.WSection{constructor(e,t){super(t),this.segments=e}emit(e){e.writeByte(i.SectionCode.data);const t=e.createLengthSlot();e.emit(i.WType.u32,this.segments.length),this.segments.map(t=>t.emit(e)),e.fillLengthSlot(t),e instanceof r.JSONEmitter&&(e.getJSON().data=this.segments.map(e=>({offset:e.offsetNumber,data:e.dataBuffer})))}}},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wsection":"l0JX"}],phuN:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../emitter/json_emitter"),i=e("../node"),o=e("../tool/constant");n.WExportFunction=class WExportFunction extends i.WNode{constructor(e,t){super(t),this.name=e}emit(e){e.emit(o.WType.str,this.name),e.writeByte(0),e.emit(o.WType.u32,e.ctx.getFuncInfo(this.name).id),e instanceof r.JSONEmitter&&(e.getJSON().exports[this.name]=e.ctx.getFuncInfo(this.name).id)}}},{"../emitter/json_emitter":"NDfV","../node":"2721","../tool/constant":"Mjkt"}],"39xj":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant");n.WMemorySection=class WMemorySection extends r.WNode{constructor(e,t){super(t),this.pageInfo=e}emit(e){e.writeByte(i.SectionCode.memory);const t=e.createLengthSlot();e.emit(i.WType.u32,this.pageInfo.length),this.pageInfo.map(t=>{const n=t[1];null===n?(e.writeByte(0),e.emit(i.WType.u32,t[0])):(e.writeByte(1),e.emit(i.WType.u32,t[0]),e.emit(i.WType.u32,n))}),e.fillLengthSlot(t)}}},{"../node":"2721","../tool/constant":"Mjkt"}],S9g4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wsection");n.WFunctionSection=class WFunctionSection extends i.WSection{constructor(e,t){super(t),this.functions=e}emit(e){e.writeByte(r.SectionCode.function);const t=e.createLengthSlot();e.emit(r.WType.u32,this.functions.length),this.functions.map(t=>e.ctx.submitFunc(t.name,t.type)),this.functions.map(t=>e.emit(r.WType.u32,t.signatureId)),e.fillLengthSlot(t)}}},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],"/p2P":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node"),i=e("../tool/constant");n.WTable=class WTable extends r.WNode{constructor(e,t){super(t),this.len=e}emit(e){e.writeByte(112),e.writeByte(0),e.emit(i.WType.u32,this.len)}}},{"../node":"2721","../tool/constant":"Mjkt"}],oShx:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node");n.WExpression=class WExpression extends r.WNode{fold(){return this}},function(e){e[e.RAW=0]="RAW",e[e.DATA=1]="DATA",e[e.BSS=2]="BSS",e[e.EXTERN=3]="EXTERN"}(n.WMemoryLocation||(n.WMemoryLocation={}))},{"../node":"2721"}],PxFK:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wexpression");n.WConst=class WConst extends i.WExpression{constructor(e,t,n){super(n),this.type=e,this.constant=t}emit(e){switch(r.getNativeType(this.type)){case r.WType.i32:e.emitIns(r.I32.const,r.WType.i32,parseInt(this.constant),this.location);break;case r.WType.i64:e.emitIns(r.I64.const,r.WType.i64,this.constant.split(".")[0],this.location);break;case r.WType.f32:e.emitIns(r.F32.const,r.WType.f32,parseFloat(this.constant),this.location);break;case r.WType.f64:e.emitIns(r.F64.const,r.WType.f64,parseFloat(this.constant),this.location)}}deduceType(e){return this.type}isPure(){return!0}}},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],"1gFT":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../emitter/json_emitter"),o=e("../expression/wconst"),s=e("../node"),a=e("../tool/constant");n.WGlobalVariable=class WGlobalVariable extends s.WNode{constructor(e,t,n,r){super(r),this.name=e,this.type=t,this.init=n}emit(e){if(e.ctx.submitGlobal(this.name,this.type),e.writeByte(a.getNativeType(this.type)),e.writeByte(1),this.init.emit(e),e.writeByte(a.Control.end),e instanceof i.JSONEmitter){if(!(this.init instanceof o.WConst))throw new r.EmitError("unknown error");e.getJSON().globals.push({name:this.name,type:a.getNativeType(this.type),init:this.init.constant})}}}},{"../../common/error":"nOPH","../emitter/json_emitter":"NDfV","../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],uAfS:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../expression/wconst"),i=e("../node"),o=e("../tool/constant");n.WElement=class WElement extends i.WNode{constructor(e,t){super(t),this.len=e,this.offset=new r.WConst(o.WType.i32,"0",t)}emit(e){e.writeByte(0),this.offset.emit(e),e.writeByte(o.Control.end),e.emit(o.WType.u32,this.len);for(let t=0;t<this.len;t++)e.emit(o.WType.u32,t)}}},{"../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],tUq0:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./welement"),o=e("./wsection");n.WElementSection=class WElementSection extends o.WSection{constructor(e,t){super(t),this.elems=[new i.WElement(e,t)]}emit(e){e.writeByte(r.SectionCode.element);const t=e.createLengthSlot();e.emit(r.WType.u32,this.elems.length),this.elems.map(t=>t.emit(e)),e.fillLengthSlot(t)}}},{"../tool/constant":"Mjkt","./welement":"uAfS","./wsection":"l0JX"}],ijtQ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../emitter/json_emitter"),i=e("../tool/constant"),o=e("./wfunction_type"),s=e("./wimport_item");n.WImportFunction=class WImportFunction extends s.WImportItem{constructor(e,t,n,r,i){super(e,t,i),this.module=e,this.name=t,this.type=new o.WFunctionType(n,r,this.location),this.signatureId=0}emit(e){super.emit(e),e.writeByte(0),e.emit(i.WType.u32,this.signatureId),e.ctx.submitFunc(this.name,this.type),e instanceof r.JSONEmitter&&e.getJSON().imports.push({module:this.module,name:this.name,type:this.type.toEncoding()})}}},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wfunction_type":"ojST","./wimport_item":"FxaF"}],QzxS:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(".."),i=e("../tool/constant"),o=e("./wsection");n.WTypeSection=class WTypeSection extends o.WSection{constructor(e,t){super(t),this.types=e}emit(e){e.writeByte(i.SectionCode.type);const t=e.createLengthSlot();e.emit(i.WType.u32,this.types.length);for(let t=0;t<this.types.length;t++)e.ctx.setTypeIdxFromEncoding(this.types[t].toEncoding(),t),this.types[t].emit(e);e.fillLengthSlot(t),e instanceof r.JSONEmitter&&(e.getJSON().types=this.types.map(e=>e.toEncoding()))}}},{"..":"Jo9c","../tool/constant":"Mjkt","./wsection":"l0JX"}],tP0H:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wsection");n.WTableSection=class WTableSection extends i.WSection{constructor(e,t){super(t),this.tables=e}emit(e){e.writeByte(r.SectionCode.table);const t=e.createLengthSlot();e.emit(r.WType.u32,this.tables.length),this.tables.map(t=>t.emit(e)),e.fillLengthSlot(t)}}},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],fjK8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wsection");n.WGlobalSection=class WGlobalSection extends i.WSection{constructor(e,t){super(t),this.globals=e}emit(e){e.writeByte(r.SectionCode.global);const t=e.createLengthSlot();e.emit(r.WType.u32,this.globals.length),this.globals.map(t=>t.emit(e)),e.fillLengthSlot(t)}}},{"../tool/constant":"Mjkt","./wsection":"l0JX"}],KHMQ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../expression/wconst"),i=e("../node"),o=e("../tool/constant");n.WDataSegment=class WDataSegment extends i.WNode{constructor(e,t,n){super(n),this.memIdx=0,this.offsetNumber=e,this.offset=new r.WConst(o.WType.i32,e.toString(),n),this.dataBuffer=t}emit(e){e.emit(o.WType.u32,this.memIdx),this.offset.emit(e),e.writeByte(o.Control.end),e.emit(o.WType.u32,this.dataBuffer.byteLength);const t=new Uint8Array(this.dataBuffer);for(let n=0;n<this.dataBuffer.byteLength;n++)e.writeByte(t[n])}}},{"../expression/wconst":"PxFK","../node":"2721","../tool/constant":"Mjkt"}],jCtJ:[function(e,t,n){},{}],BOxy:[function(e,t,n){e("buffer").Buffer;!function(t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof t?t.exports=o:n.BN=o,o.BN=o,o.wordSize=26;try{s=e("buffer").Buffer}catch(e){}function a(e,t,n){for(var r=0,i=Math.min(e.length,n),o=t;o<i;o++){var s=e.charCodeAt(o)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function u(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=e.length-6,r=0;n>=t;n-=6)i=a(e,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==t&&(i=a(e,t,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,c=0,l=n;l<a;l+=r)c=u(e,l,l+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var p=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)p*=t;this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,p=67108863&u,h=Math.min(c,t.length-1),m=Math.max(0,c-e.length+1);m<=h;m++){var d=c-m|0;l+=(s=(i=0|e.words[d])*(o=0|t.words[m])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],m=p[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var f=d.modn(m).toString(e);n=(d=d.idivn(m)).isZero()?f+n:c[h-f.length]+f+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],p=8191&l,h=l>>>13,m=0|s[1],d=8191&m,f=m>>>13,y=0|s[2],g=8191&y,_=y>>>13,w=0|s[3],x=8191&w,T=w>>>13,C=0|s[4],v=8191&C,E=C>>>13,A=0|s[5],b=8191&A,S=A>>>13,F=0|s[6],M=8191&F,I=F>>>13,P=0|s[7],L=8191&P,D=P>>>13,B=0|s[8],N=8191&B,O=B>>>13,k=0|s[9],W=8191&k,R=k>>>13,U=0|a[0],$=8191&U,j=U>>>13,H=0|a[1],z=8191&H,q=H>>>13,V=0|a[2],G=8191&V,Y=V>>>13,X=0|a[3],Z=8191&X,J=X>>>13,K=0|a[4],Q=8191&K,ee=K>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],pe=8191&le,he=le>>>13,me=0|a[9],de=8191&me,fe=me>>>13;n.negative=e.negative^t.negative,n.length=19;var ye=(c+(r=Math.imul(p,$))|0)+((8191&(i=(i=Math.imul(p,j))+Math.imul(h,$)|0))<<13)|0;c=((o=Math.imul(h,j))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(d,$),i=(i=Math.imul(d,j))+Math.imul(f,$)|0,o=Math.imul(f,j);var ge=(c+(r=r+Math.imul(p,z)|0)|0)+((8191&(i=(i=i+Math.imul(p,q)|0)+Math.imul(h,z)|0))<<13)|0;c=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,$),i=(i=Math.imul(g,j))+Math.imul(_,$)|0,o=Math.imul(_,j),r=r+Math.imul(d,z)|0,i=(i=i+Math.imul(d,q)|0)+Math.imul(f,z)|0,o=o+Math.imul(f,q)|0;var _e=(c+(r=r+Math.imul(p,G)|0)|0)+((8191&(i=(i=i+Math.imul(p,Y)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,Y)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,$),i=(i=Math.imul(x,j))+Math.imul(T,$)|0,o=Math.imul(T,j),r=r+Math.imul(g,z)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,q)|0,r=r+Math.imul(d,G)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(f,G)|0,o=o+Math.imul(f,Y)|0;var we=(c+(r=r+Math.imul(p,Z)|0)|0)+((8191&(i=(i=i+Math.imul(p,J)|0)+Math.imul(h,Z)|0))<<13)|0;c=((o=o+Math.imul(h,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(v,$),i=(i=Math.imul(v,j))+Math.imul(E,$)|0,o=Math.imul(E,j),r=r+Math.imul(x,z)|0,i=(i=i+Math.imul(x,q)|0)+Math.imul(T,z)|0,o=o+Math.imul(T,q)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(f,Z)|0,o=o+Math.imul(f,J)|0;var xe=(c+(r=r+Math.imul(p,Q)|0)|0)+((8191&(i=(i=i+Math.imul(p,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(b,$),i=(i=Math.imul(b,j))+Math.imul(S,$)|0,o=Math.imul(S,j),r=r+Math.imul(v,z)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,q)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,Y)|0,r=r+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,J)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,ee)|0)+Math.imul(f,Q)|0,o=o+Math.imul(f,ee)|0;var Te=(c+(r=r+Math.imul(p,ne)|0)|0)+((8191&(i=(i=i+Math.imul(p,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((o=o+Math.imul(h,re)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(M,$),i=(i=Math.imul(M,j))+Math.imul(I,$)|0,o=Math.imul(I,j),r=r+Math.imul(b,z)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(S,z)|0,o=o+Math.imul(S,q)|0,r=r+Math.imul(v,G)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,J)|0,r=r+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(d,ne)|0,i=(i=i+Math.imul(d,re)|0)+Math.imul(f,ne)|0,o=o+Math.imul(f,re)|0;var Ce=(c+(r=r+Math.imul(p,oe)|0)|0)+((8191&(i=(i=i+Math.imul(p,se)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,se)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,$),i=(i=Math.imul(L,j))+Math.imul(D,$)|0,o=Math.imul(D,j),r=r+Math.imul(M,z)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(I,z)|0,o=o+Math.imul(I,q)|0,r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,Y)|0,r=r+Math.imul(v,Z)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,J)|0,r=r+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(d,oe)|0,i=(i=i+Math.imul(d,se)|0)+Math.imul(f,oe)|0,o=o+Math.imul(f,se)|0;var ve=(c+(r=r+Math.imul(p,ue)|0)|0)+((8191&(i=(i=i+Math.imul(p,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(N,$),i=(i=Math.imul(N,j))+Math.imul(O,$)|0,o=Math.imul(O,j),r=r+Math.imul(L,z)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(D,z)|0,o=o+Math.imul(D,q)|0,r=r+Math.imul(M,G)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,Y)|0,r=r+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,r=r+Math.imul(d,ue)|0,i=(i=i+Math.imul(d,ce)|0)+Math.imul(f,ue)|0,o=o+Math.imul(f,ce)|0;var Ee=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,he)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(W,$),i=(i=Math.imul(W,j))+Math.imul(R,$)|0,o=Math.imul(R,j),r=r+Math.imul(N,z)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,q)|0,r=r+Math.imul(L,G)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,ee)|0,r=r+Math.imul(v,ne)|0,i=(i=i+Math.imul(v,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(d,pe)|0,i=(i=i+Math.imul(d,he)|0)+Math.imul(f,pe)|0,o=o+Math.imul(f,he)|0;var Ae=(c+(r=r+Math.imul(p,de)|0)|0)+((8191&(i=(i=i+Math.imul(p,fe)|0)+Math.imul(h,de)|0))<<13)|0;c=((o=o+Math.imul(h,fe)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(W,z),i=(i=Math.imul(W,q))+Math.imul(R,z)|0,o=Math.imul(R,q),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(O,G)|0,o=o+Math.imul(O,Y)|0,r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,re)|0,r=r+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(T,ue)|0,o=o+Math.imul(T,ce)|0,r=r+Math.imul(g,pe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(_,pe)|0,o=o+Math.imul(_,he)|0;var be=(c+(r=r+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,fe)|0)+Math.imul(f,de)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(W,G),i=(i=Math.imul(W,Y))+Math.imul(R,G)|0,o=Math.imul(R,Y),r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,J)|0,r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(M,ne)|0,i=(i=i+Math.imul(M,re)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,r=r+Math.imul(v,ue)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(x,pe)|0,i=(i=i+Math.imul(x,he)|0)+Math.imul(T,pe)|0,o=o+Math.imul(T,he)|0;var Se=(c+(r=r+Math.imul(g,de)|0)|0)+((8191&(i=(i=i+Math.imul(g,fe)|0)+Math.imul(_,de)|0))<<13)|0;c=((o=o+Math.imul(_,fe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(W,Z),i=(i=Math.imul(W,J))+Math.imul(R,Z)|0,o=Math.imul(R,J),r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,r=r+Math.imul(L,ne)|0,i=(i=i+Math.imul(L,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(S,ue)|0,o=o+Math.imul(S,ce)|0,r=r+Math.imul(v,pe)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(E,pe)|0,o=o+Math.imul(E,he)|0;var Fe=(c+(r=r+Math.imul(x,de)|0)|0)+((8191&(i=(i=i+Math.imul(x,fe)|0)+Math.imul(T,de)|0))<<13)|0;c=((o=o+Math.imul(T,fe)|0)+(i>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,r=Math.imul(W,Q),i=(i=Math.imul(W,ee))+Math.imul(R,Q)|0,o=Math.imul(R,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(O,ne)|0,o=o+Math.imul(O,re)|0,r=r+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(I,ue)|0,o=o+Math.imul(I,ce)|0,r=r+Math.imul(b,pe)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(S,pe)|0,o=o+Math.imul(S,he)|0;var Me=(c+(r=r+Math.imul(v,de)|0)|0)+((8191&(i=(i=i+Math.imul(v,fe)|0)+Math.imul(E,de)|0))<<13)|0;c=((o=o+Math.imul(E,fe)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(W,ne),i=(i=Math.imul(W,re))+Math.imul(R,ne)|0,o=Math.imul(R,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,se)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,r=r+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(M,pe)|0,i=(i=i+Math.imul(M,he)|0)+Math.imul(I,pe)|0,o=o+Math.imul(I,he)|0;var Ie=(c+(r=r+Math.imul(b,de)|0)|0)+((8191&(i=(i=i+Math.imul(b,fe)|0)+Math.imul(S,de)|0))<<13)|0;c=((o=o+Math.imul(S,fe)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(W,oe),i=(i=Math.imul(W,se))+Math.imul(R,oe)|0,o=Math.imul(R,se),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,r=r+Math.imul(L,pe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(D,pe)|0,o=o+Math.imul(D,he)|0;var Pe=(c+(r=r+Math.imul(M,de)|0)|0)+((8191&(i=(i=i+Math.imul(M,fe)|0)+Math.imul(I,de)|0))<<13)|0;c=((o=o+Math.imul(I,fe)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(W,ue),i=(i=Math.imul(W,ce))+Math.imul(R,ue)|0,o=Math.imul(R,ce),r=r+Math.imul(N,pe)|0,i=(i=i+Math.imul(N,he)|0)+Math.imul(O,pe)|0,o=o+Math.imul(O,he)|0;var Le=(c+(r=r+Math.imul(L,de)|0)|0)+((8191&(i=(i=i+Math.imul(L,fe)|0)+Math.imul(D,de)|0))<<13)|0;c=((o=o+Math.imul(D,fe)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(W,pe),i=(i=Math.imul(W,he))+Math.imul(R,pe)|0,o=Math.imul(R,he);var De=(c+(r=r+Math.imul(N,de)|0)|0)+((8191&(i=(i=i+Math.imul(N,fe)|0)+Math.imul(O,de)|0))<<13)|0;c=((o=o+Math.imul(O,fe)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863;var Be=(c+(r=Math.imul(W,de))|0)+((8191&(i=(i=Math.imul(W,fe))+Math.imul(R,de)|0))<<13)|0;return c=((o=Math.imul(R,fe))+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ye,u[1]=ge,u[2]=_e,u[3]=we,u[4]=xe,u[5]=Te,u[6]=Ce,u[7]=ve,u[8]=Ee,u[9]=Ae,u[10]=be,u[11]=Se,u[12]=Fe,u[13]=Me,u[14]=Ie,u[15]=Pe,u[16]=Le,u[17]=De,u[18]=Be,0!==c&&(u[19]=c,n.length++),n};function d(e,t,n){return(new f).mulp(e,t,n)}function f(e,t){this.x=e,this.y=t}Math.imul||(m=h),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,p=(0|e.words[l])*(0|t.words[c]),h=67108863&p;a=67108863&(h=h+a|0),i+=(s=(s=s+(p/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):d(this,e,t)},f.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},f.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},f.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},f.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var p=u,h=c,m=0;m<s;m++){var d=n[l+m],f=r[l+m],y=n[l+m+s],g=r[l+m+s],_=p*y-h*g;g=p*g+h*y,y=_,n[l+m]=d+y,r[l+m]=f+g,n[l+m+s]=d-y,r[l+m+s]=f-g,m!==a&&(_=u*p-c*h,h=u*h+c*p,p=_)}},f.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},f.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},f.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},f.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},f.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},f.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),p=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,p,r,i);for(var m=0;m<r;m++){var d=a[m]*l[m]-u[m]*p[m];u[m]=a[m]*p[m]+u[m]*l[m],a[m]=d}return this.conjugate(a,u,r),this.transform(a,u,h,o,r,i),this.conjugate(h,o,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),d(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var p=0|this.words[c];this.words[c]=l<<26-o|p>>>o,l=p&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var p=u-1;p>=0;p--){var h=67108864*(0|r.words[i.length+p])+(0|r.words[i.length+p-1]);for(h=Math.min(h/s|0,67108863),r._ishlnsubmul(i,h,p);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,p),r.isZero()||(r.negative^=1);a&&(a.words[p]=h)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),p=t.clone();!t.isZero();){for(var h=0,m=1;0==(t.words[0]&m)&&h<26;++h,m<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(p)),i.iushrn(1),s.iushrn(1);for(var d=0,f=1;0==(n.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(p)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var p=0,h=1;0==(n.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(n.iushrn(p);p-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new C(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function v(e){C.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},i(_,g),_.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,g),i(x,g),i(T,g),T.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new w;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return y[e]=t,t},C.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},C.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},C.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},C.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},C.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},C.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},C.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},C.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},C.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},C.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},C.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},C.prototype.isqr=function(e){return this.imul(e,e.clone())},C.prototype.sqr=function(e){return this.mul(e,e)},C.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var p=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),m=this.pow(e,i),d=s;0!==m.cmp(a);){for(var f=m,y=0;0!==f.cmp(a);y++)f=f.redSqr();r(y<d);var g=this.pow(p,new o(1).iushln(d-y-1));h=h.redMul(g),p=g.redSqr(),m=m.redMul(p),d=y}return h},C.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},C.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var p=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==p||0!==s?(s<<=1,s|=p,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},C.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},C.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new v(e)},i(v,C),v.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},v.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},v.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},v.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},v.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:"jCtJ"}],vx3y:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("bn.js");n.readLeb128Int=function(e){const t=new r(0);let n,i=0;for(;n=e.view.getUint8(e.now++),t.ior(new r(127&n).shln(i)),i+=7,n>>7!=0;);return 64&n&&t.setn(i),t.fromTwos(i)},n.writeLeb128Int=function(e,t){let n=new r(t);const i=n.isNeg();for(i&&(n=n.toTwos(n.bitLength()+8));;){const t=n.maskn(7).toNumber();if(n.ishrn(7),o=n,i&&o.toString(2).indexOf("0")<0&&0!=(64&t)||n.isZero()&&0==(64&t)){e.view.setUint8(e.now++,t),e.nowSize++;break}e.view.setUint8(e.now++,128|t),e.nowSize++}var o},n.readLeb128Uint=function(e){const t=new r(0);let n,i=0;for(;n=e.view.getUint8(e.now++),t.ior(new r(127&n).shln(i)),n>>7!=0;)i+=7;return t},n.writeLeb128Uint=function(e,t){const n=new r(t);for(;;){const t=n.maskn(7).toNumber();if(n.ishrn(7),n.isZero()){e.view.setUint8(e.now++,t),e.nowSize++;break}e.view.setUint8(e.now++,128|t),e.nowSize++}},n.getLeb128IntLength=function(e){let t=0,n=new r(e);const i=n.isNeg();for(i&&(n=n.toTwos(n.bitLength()+8));;){const e=n.maskn(7).toNumber();if(n.ishrn(7),o=n,i&&o.toString(2).indexOf("0")<0&&0!=(64&e)||n.isZero()&&0==(64&e)){t++;break}t++}var o;return t},n.getLeb128UintLength=function(e){let t=0;const n=new r(e);for(;;){if(n.ishrn(7),n.isZero()){t++;break}t++}return t}},{"bn.js":"BOxy"}],IP4m:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./leb128"),i=new TextEncoder,o=new TextDecoder;n.readUtf8Str=function(e){const t=r.readLeb128Uint(e).toNumber();return o.decode(e.view.buffer.slice(0,t))},n.writeUtf8String=function(e,t){const n=i.encode(t);r.writeLeb128Uint(e,n.byteLength),new Uint8Array(e.view.buffer).set(n,e.now),e.now+=n.byteLength,e.nowSize+=n.byteLength},n.getUtf8StringLength=function(e){const t=i.encode(e).byteLength;return r.getLeb128UintLength(t)+t}},{"./leb128":"vx3y"}],"xpa/":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../tool/constant"),o=e("../tool/leb128"),s=e("../tool/utf8"),a=e("./emitter");n.WASMEmitter=class WASMEmitter extends a.Emitter{constructor(e,t){super(e,t),this.buffer=new ArrayBuffer(2e4),this.view=new DataView(this.buffer),this.now=0,this.nowSize=0,this.slots=[]}createLengthSlot(){const e=[this.nowSize,this.now];return this.slots.push(e),this.now+=4,e}fillLengthSlot(e){const t=this.nowSize-e[0];this.nowSize+=o.getLeb128UintLength(t),this.view.setUint32(e[1],t)}writeByte(e){this.view.setUint8(this.now++,e),this.nowSize++}writeBytes(e){for(const t of e)this.view.setUint8(this.now++,t),this.nowSize++}emit(e,t){switch(e){case i.WType.none:break;case i.WType.u8:if("string"==typeof t)throw new r.InternalError("unexpected string");this.view.setUint8(this.now,t),this.now+=1,this.nowSize+=1;break;case i.WType.u32:case i.WType.u64:o.writeLeb128Uint(this,t);break;case i.WType.i32:case i.WType.i64:o.writeLeb128Int(this,t);break;case i.WType.f32:if("string"==typeof t)throw new r.InternalError("unexpected string");this.view.setFloat32(this.now,t,!0),this.now+=4,this.nowSize+=4;break;case i.WType.f64:if("string"==typeof t)throw new r.InternalError("unexpected string");this.view.setFloat64(this.now,t,!0),this.now+=8,this.nowSize+=8;break;case i.WType.str:if("number"==typeof t)throw new r.InternalError("unexpected string");s.writeUtf8String(this,t);break;default:throw new r.InternalError("unexpected wtype")}}emitIns(e,t,n,r,o){this.writeByte(e),o&&this.emit(i.WType.u32,0),this.emit(t,n)}enterFunction(e){this.ctx.setCurrentFunc(e)}submitFunction(){this.ctx.setCurrentFunc(null)}toArrayBuffer(){const e=new ArrayBuffer(this.nowSize),t=new Uint8Array(e),n=new DataView(e),i=new Uint8Array(this.buffer),s={view:n,now:0,nowSize:0};let a=0;for(const e of this.slots){e[1]!==a&&(t.set(i.slice(a,e[1]),s.now),s.now+=e[1]-a);const n=this.view.getUint32(e[1]);o.writeLeb128Uint(s,n),a=e[1]+4}if(t.set(i.slice(a,this.now),s.now),s.now+=this.now-a,s.now!==this.nowSize)throw new r.InternalError("something wrong");return e}}},{"../../common/error":"nOPH","../tool/constant":"Mjkt","../tool/leb128":"vx3y","../tool/utf8":"IP4m","./emitter":"Oljm"}],"4+4S":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../node");n.WStatement=class WStatement extends r.WNode{}},{"../node":"2721"}],jyf9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../tool/constant"),o=e("./wstatement");n.WReturn=class WReturn extends o.WStatement{constructor(e,t){super(t),this.expr=e,null!==e&&(this.expr=e)}emit(e){const t=e.ctx.getCurrentFunc();if(0===t.type.returnTypes.length&&null!==this.expr)throw new r.EmitError("type mismatch at WReturn");if(0!==t.type.returnTypes.length){if(null===this.expr)throw new r.EmitError("type mismatch at WReturn");const n=this.expr.deduceType(e);if(i.getNativeType(n)!==i.getNativeType(t.type.returnTypes[0]))throw new r.EmitError("type mismatch at WReturn")}null!==this.expr&&this.expr.emit(e),e.emitIns(i.Control.return,i.WType.none,0,this.location)}optimize(e){null!==this.expr&&(this.expr=this.expr.fold(),this.expr.optimize(e))}}},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wstatement":"4+4S"}],YvD4:[function(e,t,n){t.exports=i;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=o;var s={},a={};function u(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=l(e,e<0?-1:0,!1),i&&(s[e]=n),n)}function c(e,t){if(isNaN(e))return t?w:_;if(t){if(e<0)return w;if(e>=f)return E}else{if(e<=-y)return A;if(e+1>=y)return v}return e<0?c(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,n){return new i(e,t,n)}i.fromInt=u,i.fromNumber=c,i.fromBits=l;var p=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var i=c(p(n,8)),o=_,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);if(a<8){var l=c(p(n,a));o=o.mul(l).add(c(u))}else o=(o=o.mul(i)).add(c(u))}return o.unsigned=t,o}function m(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=h,i.fromValue=m;var d=4294967296,f=d*d,y=f/2,g=u(1<<24),_=u(0);i.ZERO=_;var w=u(0,!0);i.UZERO=w;var x=u(1);i.ONE=x;var T=u(1,!0);i.UONE=T;var C=u(-1);i.NEG_ONE=C;var v=l(-1,2147483647,!1);i.MAX_VALUE=v;var E=l(-1,-1,!0);i.MAX_UNSIGNED_VALUE=E;var A=l(0,-2147483648,!1);i.MIN_VALUE=A;var b=i.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},b.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(p(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),u=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},b.isZero=function(){return 0===this.high&&0===this.low},b.eqz=b.isZero,b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return 1==(1&this.low)},b.isEven=function(){return 0==(1&this.low)},b.equals=function(e){return o(e)||(e=m(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},b.eq=b.equals,b.notEquals=function(e){return!this.eq(e)},b.neq=b.notEquals,b.ne=b.notEquals,b.lessThan=function(e){return this.comp(e)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(e){return this.comp(e)<=0},b.lte=b.lessThanOrEqual,b.le=b.lessThanOrEqual,b.greaterThan=function(e){return this.comp(e)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(e){return this.comp(e)>=0},b.gte=b.greaterThanOrEqual,b.ge=b.greaterThanOrEqual,b.compare=function(e){if(o(e)||(e=m(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(x)},b.neg=b.negate,b.add=function(e){o(e)||(e=m(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,p=0,h=0,d=0;return h+=(d+=i+(65535&e.low))>>>16,p+=(h+=r+u)>>>16,c+=(p+=n+a)>>>16,c+=t+s,l((h&=65535)<<16|(d&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},b.subtract=function(e){return o(e)||(e=m(e)),this.add(e.neg())},b.sub=b.subtract,b.multiply=function(e){if(this.isZero())return _;if(o(e)||(e=m(e)),r)return l(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return _;if(this.eq(A))return e.isOdd()?A:_;if(e.eq(A))return this.isOdd()?A:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,p=e.low>>>16,h=65535&e.low,d=0,f=0,y=0,w=0;return y+=(w+=s*h)>>>16,f+=(y+=i*h)>>>16,y&=65535,f+=(y+=s*p)>>>16,d+=(f+=n*h)>>>16,f&=65535,d+=(f+=i*p)>>>16,f&=65535,d+=(f+=s*u)>>>16,d+=t*h+n*p+i*u+s*a,l((y&=65535)<<16|(w&=65535),(d&=65535)<<16|(f&=65535),this.unsigned)},b.mul=b.multiply,b.divide=function(e){if(o(e)||(e=m(e)),e.isZero())throw Error("division by zero");var t,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?w:_;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return w;if(e.gt(this.shru(1)))return T;i=w}else{if(this.eq(A))return e.eq(x)||e.eq(C)?A:e.eq(A)?x:(t=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?x:C:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(A))return this.unsigned?w:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=_}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:p(2,s-48),u=c(t),h=u.mul(e);h.isNegative()||h.gt(n);)h=(u=c(t-=a,this.unsigned)).mul(e);u.isZero()&&(u=x),i=i.add(u),n=n.sub(h)}return i},b.div=b.divide,b.modulo=function(e){return o(e)||(e=m(e)),r?l((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},b.mod=b.modulo,b.rem=b.modulo,b.not=function(){return l(~this.low,~this.high,this.unsigned)},b.and=function(e){return o(e)||(e=m(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},b.or=function(e){return o(e)||(e=m(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},b.xor=function(e){return o(e)||(e=m(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},b.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},b.shru=b.shiftRightUnsigned,b.shr_u=b.shiftRightUnsigned,b.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},b.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},{}],eYtb:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/error"),s=e("./constant");n.doUnaryCompute=function(e,t){switch(e){case s.F32Unary.abs:case s.F64Unary.abs:return Math.abs(t);case s.F32Unary.ceil:case s.F64Unary.ceil:return Math.ceil(t);case s.F32Unary.floor:case s.F64Unary.floor:return Math.floor(t);case s.F32Unary.nearest:case s.F64Unary.nearest:return Math.floor(t+.5);case s.F32Unary.trunc:case s.F64Unary.trunc:return 0|t;case s.F32Unary.sqrt:case s.F64Unary.sqrt:return Math.sqrt(t);case s.I32Unary.eqz:case s.I64Unary.eqz:return+(0===t);case s.F32Unary.neg:case s.F64Unary.neg:return-t}throw new o.RuntimeError(`unsupport operator ${e}`)},n.doLongUnaryCompute=function(e,t){switch(e){case s.I64Unary.eqz:return i.fromNumber(+t.eq(0))}throw new o.RuntimeError(`unsupport operator ${e}`)},n.doLongBinaryCompute=function(e,t,n){switch(e){case s.I64Binary.add:return t.add(n);case s.I64Binary.sub:case s.I64Binary.mul:return t.sub(n);case s.I64Binary.div_s:case s.I64Binary.div_u:return t.div(n);case s.I64Binary.rem_s:case s.I64Binary.rem_u:return t.mod(n);case s.I64Binary.ge_s:case s.I64Binary.ge_u:return i.fromNumber(+t.gte(n));case s.I64Binary.gt_s:case s.I64Binary.gt_u:return i.fromNumber(+t.gt(n));case s.I64Binary.le_s:case s.I64Binary.le_u:return i.fromNumber(+t.lte(n));case s.I64Binary.lt_s:case s.I64Binary.lt_u:return i.fromNumber(+t.lt(n));case s.I64Binary.ne:return i.fromNumber(+t.neq(n));case s.I64Binary.eq:return i.fromNumber(+t.eq(n));case s.I64Binary.and:return t.and(n);case s.I64Binary.or:return t.or(n);case s.I64Binary.xor:return t.xor(n);case s.I64Binary.shl:return t.shl(n);case s.I64Binary.shr_s:return t.shr(n);case s.I64Binary.shr_u:return t.shru(n)}throw new o.RuntimeError(`unsupport operator ${e}`)},n.doBinaryCompute=function(e,t,n){switch(e){case s.I32Binary.add:case s.F32Binary.add:case s.F64Binary.add:return t+n;case s.I32Binary.sub:case s.F32Binary.sub:case s.F64Binary.sub:return t-n;case s.I32Binary.mul:case s.F32Binary.mul:case s.F64Binary.mul:return t*n;case s.I32Binary.div_s:case s.I32Binary.div_u:case s.F32Binary.div:case s.F64Binary.div:return t/n;case s.I32Binary.rem_s:case s.I32Binary.rem_u:return t%n;case s.I32Binary.ge_s:case s.I32Binary.ge_u:return+(t>=n);case s.I32Binary.gt_s:case s.I32Binary.gt_u:case s.F32Binary.gt:case s.F64Binary.gt:return+(t>n);case s.I32Binary.le_s:case s.I32Binary.le_u:case s.F32Binary.le:case s.F64Binary.le:return+(t<=n);case s.I32Binary.lt_s:case s.I32Binary.lt_u:case s.F32Binary.lt:case s.F64Binary.lt:return+(t<n);case s.I32Binary.eq:case s.F32Binary.eq:case s.F64Binary.eq:return+(t===n);case s.I32Binary.ne:case s.F32Binary.ne:case s.F64Binary.ne:return+(t!==n);case s.I32Binary.and:return+(t&n);case s.I32Binary.or:return+(t|n);case s.I32Binary.xor:return+(t^n);case s.I32Binary.shl:return t<<n;case s.I32Binary.shr_s:return t>>n;case s.I32Binary.shr_u:return t>>>n;case s.F32Binary.copysign:case s.F64Binary.copysign:return n>0?Math.abs(t):-Math.abs(t);case s.F32Binary.max:case s.F64Binary.max:return Math.max(t,n);case s.F32Binary.min:case s.F64Binary.min:return Math.min(t,n)}throw new o.RuntimeError(`unsupport operator ${e}`)}},{long:"YvD4","../../common/error":"nOPH","./constant":"Mjkt"}],F3ye:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/error"),s=e("../tool/calculator"),a=e("../tool/constant"),u=e("./wconst"),c=e("./wexpression");n.WBinaryOperation=class WBinaryOperation extends c.WExpression{constructor(e,t,n,r){super(r),this.ope=e,this.lhs=t,this.rhs=n}emit(e){this.lhs.emit(e),this.rhs.emit(e),e.emitIns(this.ope,a.WType.none,0,this.location)}deduceType(e){const t=a.getNativeType(this.lhs.deduceType(e));if(t!==a.getNativeType(this.rhs.deduceType(e))||a.OpTypeMap.get(this.ope)!==t)throw new o.EmitError("type mismatch in binaryope");return t}fold(){if(this.lhs=this.lhs.fold(),this.rhs=this.rhs.fold(),this.lhs instanceof u.WConst&&this.rhs instanceof u.WConst){const e=a.OpTypeMap.get(this.ope);return e===a.WType.f32||e===a.WType.f64?new u.WConst(e,s.doBinaryCompute(this.ope,parseFloat(this.lhs.constant),parseFloat(this.rhs.constant)).toString(),this.location):e===a.WType.i32?new u.WConst(e,s.doBinaryCompute(this.ope,parseInt(this.lhs.constant),parseInt(this.rhs.constant)).toString(),this.location):new u.WConst(e,s.doLongBinaryCompute(this.ope,i.fromString(this.lhs.constant),i.fromString(this.rhs.constant)).toString(),this.location)}return this}isPure(){return this.lhs.isPure()&&this.rhs.isPure()}}},{long:"YvD4","../../common/error":"nOPH","../tool/calculator":"eYtb","../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],"7ccR":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../emitter/json_emitter"),o=e("../expression/wbinary_operation"),s=e("../expression/wconst"),a=e("../expression/wexpression"),u=e("../tool/constant"),c=e("./wstatement");n.WStore=class WStore extends c.WStatement{constructor(e,t,n,r=a.WMemoryLocation.RAW,i){super(i),this.type=e,this.address=t,this.value=n,this.offset=0,this.form=r,this.offsetName=""}getOp(){switch(this.type){case u.WType.u8:case u.WType.i8:return u.I32.store8;case u.WType.i16:case u.WType.u16:return u.I32.store16;case u.WType.i32:case u.WType.u32:return u.I32.store;case u.WType.f32:return u.F32.store;case u.WType.f64:return u.F64.store;case u.WType.i64:case u.WType.u64:return u.I64.store}}emit(e){const t=this.computeOffset(e);this.address.emit(e),this.value.emit(e),e.emitIns(this.getOp(),u.WType.u32,t,this.location,!0),e instanceof i.JSONEmitter&&e.memoryInfo.push([e.insBuffer.length,this.form,this.offset])}replaceAddress(){this.address=new o.WBinaryOperation(u.I32Binary.add,this.address,new s.WConst(u.WType.i32,this.offset.toString(),this.location),this.location),this.offset=0}optimize(e){this.value=this.value.fold(),this.value.optimize(e),this.address=this.address.fold(),this.address.optimize(e)}computeOffset(e){if(u.getNativeType(this.value.deduceType(e))!==u.getNativeType(this.type))throw new r.EmitError(`type mismatch at store: ${this.value.deduceType(e)} and ${this.type}`);if(this.address.deduceType(e)!==u.WType.u32&&this.address.deduceType(e)!==u.WType.i32)throw new r.EmitError("type mismatch at store, address");let t=this.offset;return this.form===a.WMemoryLocation.DATA?t+=e.ctx.getCurrentFunc().dataStart:this.form===a.WMemoryLocation.BSS?t+=e.ctx.getCurrentFunc().bssStart:this.form===a.WMemoryLocation.EXTERN&&(t+=e.ctx.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),t}}},{"../../common/error":"nOPH","../emitter/json_emitter":"NDfV","../expression/wbinary_operation":"F3ye","../expression/wconst":"PxFK","../expression/wexpression":"oShx","../tool/constant":"Mjkt","./wstatement":"4+4S"}],naKk:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WBr=class WBr extends i.WStatement{constructor(e,t){super(t),this.labelIdx=e}emit(e){e.emitIns(r.Control.br,r.WType.u32,this.labelIdx,this.location)}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"0T5+":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./wstatement");n.WExprStatement=class WExprStatement extends r.WStatement{constructor(e,t){super(t),this.expr=e}emit(e){this.expr.emit(e)}optimize(e){this.expr=this.expr.fold(),this.expr.optimize(e)}}},{"./wstatement":"4+4S"}],RZJs:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WBlock=class WBlock extends i.WStatement{constructor(e,t){super(t),this.body=e}emit(e){e.emitIns(r.Control.block,r.WType.u8,64,this.location),this.body.map(t=>t.emit(e)),e.emitIns(r.Control.end,r.WType.none,0,this.location)}optimize(e){this.body.map(t=>t.optimize(e))}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"4qtc":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WSetLocal=class WSetLocal extends i.WStatement{constructor(e,t,n,r){super(r),this.type=e,this.offset=t,this.value=n}emit(e){this.value.emit(e),e.emitIns(r.Control.set_local,r.WType.u32,this.offset,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"0pic":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../tool/constant"),o=e("./wstatement");n.WSetGlobal=class WSetGlobal extends o.WStatement{constructor(e,t,n,r){super(r),this.type=e,this.name=t,this.value=n}emit(e){if(e.ctx.getGlobalInfo(this.name).type!==this.type)throw new r.EmitError("type mismatch at set_global");this.value.emit(e),e.emitIns(i.Control.set_global,i.WType.u32,e.ctx.getGlobalInfo(this.name).id,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}}},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wstatement":"4+4S"}],mruT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WLoop=class WLoop extends i.WStatement{constructor(e,t){super(t),this.body=e}emit(e){e.emitIns(r.Control.loop,r.WType.u8,64,this.location),this.body.map(t=>t.emit(e)),e.emitIns(r.Control.end,r.WType.none,0,this.location)}optimize(e){this.body.map(t=>t.optimize(e))}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"Pex/":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WBrIf=class WBrIf extends i.WStatement{constructor(e,t,n){super(n),this.labelIdx=e,this.expression=t}emit(e){this.expression.emit(e),e.emitIns(r.Control.br_if,r.WType.u32,this.labelIdx,this.location)}optimize(e){this.expression=this.expression.fold(),this.expression.optimize(e)}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"ZrC/":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WIfElseBlock=class WIfElseBlock extends i.WStatement{constructor(e,t,n,r){super(r),this.condition=e,this.consequence=t,this.alternative=n}emit(e){this.condition.emit(e),e.emitIns(r.Control.if,r.WType.u8,64,this.location),this.consequence.map(t=>t.emit(e)),null!==this.alternative&&(e.emitIns(r.Control.else,r.WType.none,0,this.location),this.alternative.map(t=>t.emit(e))),e.emitIns(r.Control.end,r.WType.none,0,this.location)}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.consequence.map(t=>t.optimize(e)),null!==this.alternative&&this.alternative.map(t=>t.optimize(e))}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],"/IVp":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wstatement");n.WDrop=class WDrop extends i.WStatement{constructor(e,t){super(t),this.value=e}emit(e){this.value.emit(e),e.emitIns(r.Control.drop,r.WType.none,0,this.location)}optimize(e){this.value=this.value.fold(),this.value.optimize(e)}}},{"../tool/constant":"Mjkt","./wstatement":"4+4S"}],tSX5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../emitter/json_emitter"),i=e("../tool/constant"),o=e("./wexpression");n.WGetAddress=class WGetAddress extends o.WExpression{constructor(e,t){super(t),this.form=e,this.offset=0,this.offsetName=""}emit(e){let t=this.offset;this.form===o.WMemoryLocation.DATA?t+=e.ctx.getCurrentFunc().dataStart:this.form===o.WMemoryLocation.BSS?t+=e.ctx.getCurrentFunc().bssStart:this.form===o.WMemoryLocation.EXTERN&&(t+=e.ctx.getExternLocation(this.offsetName)),e.emitIns(i.I32.const,i.WType.u32,t,this.location),e instanceof r.JSONEmitter&&e.memoryInfo.push([e.insBuffer.length,this.form,this.offset])}deduceType(e){return i.WType.i32}fold(){return this}isPure(){return!0}}},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wexpression":"oShx"}],OYOz:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wexpression");n.WGetFunctionAddress=class WGetFunctionAddress extends i.WExpression{constructor(e,t){super(t),this.name=e}emit(e){e.emitIns(r.I32.const,r.WType.u32,e.ctx.getFuncInfo(this.name).id,this.location)}deduceType(e){return r.WType.i32}isPure(){return!0}}},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],plV9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../tool/constant"),o=e("./wexpression");n.WGetGlobal=class WGetGlobal extends o.WExpression{constructor(e,t,n){super(n),this.type=e,this.name=t}emit(e){e.emitIns(i.Control.get_global,i.WType.u32,e.ctx.getGlobalInfo(this.name).id,this.location)}deduceType(e){if(this.type!==e.ctx.getGlobalInfo(this.name).type)throw new r.EmitError("type mismatch at getglobal");return this.type}isPure(){return!0}}},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wexpression":"oShx"}],MsEL:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("./wexpression");class WEmptyExpression extends o.WExpression{constructor(e){super(e)}deduceType(e){throw new r.EmitError("internal error")}emit(e){throw new r.EmitError("internal error")}isPure(){return!0}}n.WEmptyExpression=WEmptyExpression,WEmptyExpression.instance=new WEmptyExpression(i.EmptyLocation)},{"../../common/error":"nOPH","../../common/node":"PoXi","./wexpression":"oShx"}],RunS:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("./wexpression");n.WFakeExpression=class WFakeExpression extends i.WExpression{constructor(e,t){super(t),this.statement=e}deduceType(e){throw new r.EmitError("internal error")}emit(e){this.statement.emit(e)}isPure(){return!1}}},{"../../common/error":"nOPH","./wexpression":"oShx"}],"+Xtb":[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/error"),s=e("../tool/calculator"),a=e("../tool/constant"),u=e("./wconst"),c=e("./wexpression");n.WUnaryOperation=class WUnaryOperation extends c.WExpression{constructor(e,t,n){super(n),this.ope=e,this.operand=t}emit(e){this.operand.emit(e),e.emitIns(this.ope,a.WType.none,0,this.location)}deduceType(e){if(a.getNativeType(this.operand.deduceType(e))!==a.OpTypeMap.get(this.ope))throw new o.EmitError("type mismatch at unary ope");return this.operand.deduceType(e)}fold(){if(this.operand=this.operand.fold(),this.operand instanceof u.WConst){const e=a.OpTypeMap.get(this.ope);return e===a.WType.f32||e===a.WType.f64?new u.WConst(e,s.doUnaryCompute(this.ope,parseFloat(this.operand.constant)).toString(),this.location):e===a.WType.i32?new u.WConst(e,s.doUnaryCompute(this.ope,parseInt(this.operand.constant)).toString(),this.location):new u.WConst(e,s.doLongUnaryCompute(this.ope,i.fromString(this.operand.constant)).toString(),this.location)}return this}isPure(){return this.operand.isPure()}}},{long:"YvD4","../../common/error":"nOPH","../tool/calculator":"eYtb","../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],nyM5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../tool/constant"),o=e("./wexpression");n.WConditionalExpression=class WConditionalExpression extends o.WExpression{constructor(e,t,n,r){super(r),this.condition=e,this.consequence=t,this.alternative=n}deduceType(e){const t=this.consequence.deduceType(e),n=this.alternative.deduceType(e);if(i.getNativeType(t)===i.getNativeType(n))return i.getNativeType(t);throw new r.EmitError("type mismatch at contional expression")}isPure(){return this.condition.isPure()&&this.alternative.isPure()&&this.alternative.isPure()}emit(e){this.condition.emit(e),e.emitIns(i.Control.if,i.WType.u8,this.deduceType(e),this.location),this.consequence.emit(e),e.emitIns(i.Control.else,i.WType.none,0,this.location),this.alternative.emit(e),e.emitIns(i.Control.end,i.WType.none,0,this.location)}optimize(e){this.condition=this.condition.fold(),this.condition.optimize(e),this.alternative=this.alternative.fold(),this.alternative.optimize(e),this.consequence=this.consequence.fold(),this.consequence.optimize(e)}}},{"../../common/error":"nOPH","../tool/constant":"Mjkt","./wexpression":"oShx"}],by6o:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wexpression");n.WGetLocal=class WGetLocal extends i.WExpression{constructor(e,t,n){super(n),this.type=e,this.offset=t}emit(e){e.emitIns(r.Control.get_local,r.WType.u32,this.offset,this.location)}deduceType(e){return this.type}isPure(){return!0}}},{"../tool/constant":"Mjkt","./wexpression":"oShx"}],RUVF:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../section/wfunction_type"),i=e("../tool/constant"),o=e("./wexpression");n.WCallIndirect=class WCallIndirect extends o.WExpression{constructor(e,t,n,r,i){super(i),this.target=e,this.typeEncoding=t,this.argument=n,this.afterStatements=r}emit(e){this.argument.map(t=>t.emit(e)),this.target.emit(e),e.emitIns(i.Control.call_indirect,i.WType.u8,e.ctx.getTypeIdxFromEncoding(this.typeEncoding),this.location),e.writeByte(0),this.afterStatements.map(t=>t.emit(e))}deduceType(e){return"v"===this.typeEncoding.charAt(0)?i.WType.none:r.WFunctionType.s2n(this.typeEncoding.charAt(0))}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}}},{"../section/wfunction_type":"ojST","../tool/constant":"Mjkt","./wexpression":"oShx"}],r5Cf:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../emitter/json_emitter"),i=e("../tool/constant"),o=e("./wbinary_operation"),s=e("./wconst"),a=e("./wexpression");n.WLoad=class WLoad extends a.WExpression{constructor(e,t,n=a.WMemoryLocation.RAW,r){super(r),this.type=e,this.address=t,this.form=n,this.offset=0,this.offsetName=""}getOp(){switch(this.type){case i.WType.u8:return i.I32.load8_u;case i.WType.u16:return i.I32.load16_u;case i.WType.i8:return i.I32.load8_s;case i.WType.i16:return i.I32.load16_s;case i.WType.i32:case i.WType.u32:return i.I32.load;case i.WType.f32:return i.F32.load;case i.WType.f64:return i.F64.load;case i.WType.i64:case i.WType.u64:return i.I64.load}}emit(e){let t=this.offset;this.form===a.WMemoryLocation.DATA?t+=e.ctx.getCurrentFunc().dataStart:this.form===a.WMemoryLocation.BSS?t+=e.ctx.getCurrentFunc().bssStart:this.form===a.WMemoryLocation.EXTERN&&(t+=e.ctx.getExternLocation(this.offsetName)),t<0&&(this.replaceAddress(),t=0),this.address.emit(e),e.emitIns(this.getOp(),i.WType.u32,t,this.location,!0),e instanceof r.JSONEmitter&&e.memoryInfo.push([e.insBuffer.length,this.form,this.offset])}replaceAddress(){this.address=new o.WBinaryOperation(i.I32Binary.add,this.address,new s.WConst(i.WType.i32,this.offset.toString(),this.location),this.location),this.offset=0}deduceType(e){return this.type}fold(){return this.address=this.address.fold(),this}isPure(){return this.address.isPure()}}},{"../emitter/json_emitter":"NDfV","../tool/constant":"Mjkt","./wbinary_operation":"F3ye","./wconst":"PxFK","./wexpression":"oShx"}],GMhh:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(".."),i=e("../../common/error");n.WCall=class WCall extends r.WExpression{constructor(e,t,n,r){super(r),this.target=e,this.argument=t,this.afterStatements=n}emit(e){this.argument.map(t=>t.emit(e)),e.emitIns(r.Control.call,r.WType.u32,e.ctx.getFuncInfo(this.target).id,this.location),this.afterStatements.map(t=>t.emit(e))}deduceType(e){const t=e.ctx.getFuncInfo(this.target).type,n=this.argument.filter(e=>!(e instanceof r.WFakeExpression)).map(t=>t.deduceType(e));if(t.parameters.map(e=>r.getNativeType(e)).join(",")!==n.map(e=>r.getNativeType(e)).join(","))throw new i.EmitError("type mismatch at call");return 0===t.returnTypes.length?r.WType.none:t.returnTypes[0]}fold(){return this.argument=this.argument.map(e=>e.fold()),this}isPure(){return!1}}},{"..":"Jo9c","../../common/error":"nOPH"}],Qt9t:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../tool/constant"),i=e("./wconst"),o=e("./wexpression");n.WCovertOperation=class WCovertOperation extends o.WExpression{constructor(e,t,n,r,i){super(i),this.srcType=e,this.dstType=t,this.operand=n,this.ope=r}emit(e){this.operand.emit(e),e.emitIns(this.ope,r.WType.none,0,this.location)}deduceType(e){return this.dstType}fold(){return this.operand=this.operand.fold(),this.operand instanceof i.WConst?(this.dstType===r.WType.f32||this.dstType===r.WType.f64?this.operand.constant=parseFloat(this.operand.constant).toString():this.operand.constant=parseInt(this.operand.constant).toString(),this.operand.type=this.dstType,this.operand):this}isPure(){return this.operand.isPure()}}},{"../tool/constant":"Mjkt","./wconst":"PxFK","./wexpression":"oShx"}],anfc:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./node"),i=e("./section/wcode_section"),o=e("./section/wdata_section"),s=e("./section/welement_section"),a=e("./section/wexport_function"),u=e("./section/wexport_section"),c=e("./section/wfunction_section"),l=e("./section/wfunction_type"),p=e("./section/wglobal_section"),h=e("./section/wimport_function"),m=e("./section/wimport_section"),d=e("./section/wmemory_section"),f=e("./section/wtable"),y=e("./section/wtable_section"),g=e("./section/wtype_section");n.WModule=class WModule extends r.WNode{constructor(e,t){super(t),this.functions=e.functions,this.funcTypes=[],this.importFunctions=e.imports.filter(e=>e instanceof h.WImportFunction).map(e=>e);for(const t of[...this.importFunctions,...e.functions])t.signatureId=this.funcTypes.length,this.funcTypes.push(t.type);const n=this.funcTypes.length;for(const t of e.requiredFuncTypes)this.funcTypes.push(l.WFunctionType.fromEncoding(t,this.location));this.generateMemory=e.generateMemory;const r=e.exports.map(e=>new a.WExportFunction(e,this.location));this.globalSection=new p.WGlobalSection(e.globals,this.location),this.importSection=new m.WImportSection(e.imports,this.location),this.memorySection=new d.WMemorySection([[2,null]],this.location),this.functionSection=new c.WFunctionSection(e.functions,this.location),this.typeSection=new g.WTypeSection(this.funcTypes,this.location),this.codeSection=new i.WCodeSection(e.functions,this.location),this.exportSection=new u.WExportSection(r,this.location),this.dataSection=new o.WDataSection(e.data,this.location),this.tableSection=new y.WTableSection([new f.WTable(n,this.location)],this.location),this.elementSection=new s.WElementSection(n,this.location)}emit(e){e.writeBytes([0,97,115,109]),e.writeBytes([1,0,0,0]),this.typeSection.emit(e),this.importSection.emit(e),this.functionSection.emit(e),this.tableSection.emit(e),this.generateMemory&&this.memorySection.emit(e),this.globalSection.emit(e),this.exportSection.emit(e),this.elementSection.emit(e),this.codeSection.emit(e),this.dataSection.emit(e)}optimize(e){this.codeSection.optimize(e)}}},{"./node":"2721","./section/wcode_section":"F72u","./section/wdata_section":"ZUlG","./section/welement_section":"tUq0","./section/wexport_function":"phuN","./section/wexport_section":"F1I7","./section/wfunction_section":"S9g4","./section/wfunction_type":"ojST","./section/wglobal_section":"fjK8","./section/wimport_function":"ijtQ","./section/wimport_section":"vZqF","./section/wmemory_section":"39xj","./section/wtable":"/p2P","./section/wtable_section":"tP0H","./section/wtype_section":"QzxS"}],Jo9c:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0});const i=e("./tool/constant");n.i32=i.WType.i32,n.i64=i.WType.i64,n.f32=i.WType.f32,n.f64=i.WType.f64,n.u32=i.WType.u32,n.u64=i.WType.u64,n.i8=i.WType.i8,n.u8=i.WType.u8,n.i16=i.WType.i16,n.u16=i.WType.u16,r(e("./section/wcode_section")),r(e("./section/wexport_section")),r(e("./section/wimport_memory")),r(e("./section/wfunction")),r(e("./section/wimport_section")),r(e("./section/wdata_section")),r(e("./section/wexport_function")),r(e("./section/wfunction_type")),r(e("./section/wmemory_section")),r(e("./section/wfunction_section")),r(e("./section/wtable")),r(e("./section/wglobal_variable")),r(e("./section/welement_section")),r(e("./section/wimport_item")),r(e("./section/wimport_function")),r(e("./section/wsection")),r(e("./section/wtype_section")),r(e("./section/welement")),r(e("./section/wtable_section")),r(e("./section/wglobal_section")),r(e("./section/wdata_segment")),r(e("./emitter/emitter")),r(e("./emitter/emitter_context")),r(e("./emitter/wasm_emitter")),r(e("./emitter/json_emitter")),r(e("./statement/wreturn")),r(e("./statement/wstore")),r(e("./statement/wbr")),r(e("./statement/wexpr_statement")),r(e("./statement/wblock")),r(e("./statement/wset_local")),r(e("./statement/wset_global")),r(e("./statement/wloop")),r(e("./statement/wbr_if")),r(e("./statement/wif_else_block")),r(e("./statement/wstatement")),r(e("./statement/wdrop")),r(e("./expression/wget_address")),r(e("./expression/wget_function_address")),r(e("./expression/wexpression")),r(e("./expression/wget_global")),r(e("./expression/wempty_expression")),r(e("./expression/wfake_expression")),r(e("./expression/wunary_operation")),r(e("./expression/wbinary_operation")),r(e("./expression/wconst")),r(e("./expression/wconditional_expression")),r(e("./expression/wget_local")),r(e("./expression/wcall_indirect")),r(e("./expression/wload")),r(e("./expression/wcall")),r(e("./expression/wcovert_operation")),r(e("./tool/constant")),r(e("./module"))},{"./tool/constant":"Mjkt","./section/wcode_section":"F72u","./section/wexport_section":"F1I7","./section/wimport_memory":"NgQr","./section/wfunction":"qolR","./section/wimport_section":"vZqF","./section/wdata_section":"ZUlG","./section/wexport_function":"phuN","./section/wfunction_type":"ojST","./section/wmemory_section":"39xj","./section/wfunction_section":"S9g4","./section/wtable":"/p2P","./section/wglobal_variable":"1gFT","./section/welement_section":"tUq0","./section/wimport_item":"FxaF","./section/wimport_function":"ijtQ","./section/wsection":"l0JX","./section/wtype_section":"QzxS","./section/welement":"uAfS","./section/wtable_section":"tP0H","./section/wglobal_section":"fjK8","./section/wdata_segment":"KHMQ","./emitter/emitter":"Oljm","./emitter/emitter_context":"7DOa","./emitter/wasm_emitter":"xpa/","./emitter/json_emitter":"NDfV","./statement/wreturn":"jyf9","./statement/wstore":"7ccR","./statement/wbr":"naKk","./statement/wexpr_statement":"0T5+","./statement/wblock":"RZJs","./statement/wset_local":"4qtc","./statement/wset_global":"0pic","./statement/wloop":"mruT","./statement/wbr_if":"Pex/","./statement/wif_else_block":"ZrC/","./statement/wstatement":"4+4S","./statement/wdrop":"/IVp","./expression/wget_address":"tSX5","./expression/wget_function_address":"OYOz","./expression/wexpression":"oShx","./expression/wget_global":"plV9","./expression/wempty_expression":"MsEL","./expression/wfake_expression":"RunS","./expression/wunary_operation":"+Xtb","./expression/wbinary_operation":"F3ye","./expression/wconst":"PxFK","./expression/wconditional_expression":"nyM5","./expression/wget_local":"by6o","./expression/wcall_indirect":"RUVF","./expression/wload":"r5Cf","./expression/wcall":"GMhh","./expression/wcovert_operation":"Qt9t","./module":"anfc"}],ZWBU:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../wasm"),o=e("./index"),s=4;class CompoundType extends o.Type{constructor(e){super(),this.elementType=e}get length(){return s}equals(e){return super.equals(e)&&e instanceof CompoundType&&this.elementType.equals(e.elementType)}}n.CompoundType=CompoundType;class PointerType extends CompoundType{toString(){return this.elementType.toString()+"*"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"*"}clone(){const e=new PointerType(this.elementType.clone());return e.isConst=this.isConst,e}}n.PointerType=PointerType;class ReferenceType extends CompoundType{constructor(e){if(super(e),e instanceof ReferenceType)throw new r.InternalError("ref to ref is illegal")}}n.ReferenceType=ReferenceType;class LeftReferenceType extends ReferenceType{toString(){return this.elementType.toString()+"&"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&"}clone(){const e=new LeftReferenceType(this.elementType.clone());return e.isConst=this.isConst,e}}n.LeftReferenceType=LeftReferenceType;class RightReferenceType extends ReferenceType{toString(){return this.elementType.toString()+"&&"}toWType(){return i.WType.u32}toMangledName(){return this.elementType.toMangledName()+"&&"}clone(){const e=new RightReferenceType(this.elementType.clone());return e.isConst=this.isConst,e}}n.RightReferenceType=RightReferenceType;class ArrayType extends o.Type{constructor(e,t){super(),this.elementType=e,this.size=t}get length(){return this.elementType.length*this.size}equals(e){return super.equals(e)&&e instanceof ArrayType&&this.elementType.equals(e.elementType)&&this.size===e.size}toString(){return this.elementType.toString()+`[${this.length}]`}toWType(){throw new r.InternalError("could not to Wtype of func")}toMangledName(){return this.elementType.toMangledName()+"["+this.size+"]"}clone(){const e=new ArrayType(this.elementType.clone(),this.size);return e.isConst=this.isConst,e}}n.ArrayType=ArrayType},{"../common/error":"nOPH","../wasm":"Jo9c","./index":"Rt13"}],HxYe:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const wasm_1=require("../wasm"),index_1=require("./index");class PrimitiveType extends index_1.Type{clone(){const result=eval("new this.constructor()");return result.isConst=this.isConst,result}}exports.PrimitiveType=PrimitiveType;class VoidType extends PrimitiveType{get length(){return 1}toWType(){return wasm_1.WType.i32}toMangledName(){return"v"}toString(){return"void"}}exports.VoidType=VoidType;class NullptrType extends PrimitiveType{get length(){return 1}toWType(){return wasm_1.WType.i32}toMangledName(){return"nullptr"}toString(){return"nullptr"}}exports.NullptrType=NullptrType;class ArithmeticType extends PrimitiveType{can(e){return e instanceof ArithmeticType}}exports.ArithmeticType=ArithmeticType;class IntegerType extends ArithmeticType{}exports.IntegerType=IntegerType;class FloatingType extends ArithmeticType{}exports.FloatingType=FloatingType;class SignedIntegerType extends IntegerType{}exports.SignedIntegerType=SignedIntegerType;class UnsignedIntegerType extends IntegerType{}exports.UnsignedIntegerType=UnsignedIntegerType;class BoolType extends UnsignedIntegerType{get length(){return 1}toWType(){return wasm_1.WType.i8}toMangledName(){return"b"}toString(){return"bool"}}exports.BoolType=BoolType;class CharType extends SignedIntegerType{get length(){return 1}toWType(){return wasm_1.WType.i8}toMangledName(){return"c"}toString(){return"char"}}exports.CharType=CharType;class Int16Type extends SignedIntegerType{get length(){return 2}toWType(){return wasm_1.WType.i16}toMangledName(){return"s"}toString(){return"short"}}exports.Int16Type=Int16Type;class Int32Type extends SignedIntegerType{get length(){return 4}toWType(){return wasm_1.WType.i32}toMangledName(){return"i"}toString(){return"int"}}exports.Int32Type=Int32Type;class Int64Type extends SignedIntegerType{get length(){return 8}toWType(){return wasm_1.WType.i64}toMangledName(){return"l"}toString(){return"long long"}}exports.Int64Type=Int64Type;class UnsignedCharType extends UnsignedIntegerType{get length(){return 1}toWType(){return wasm_1.WType.u8}toMangledName(){return"uc"}toString(){return"unsigned char"}}exports.UnsignedCharType=UnsignedCharType;class UnsignedInt16Type extends UnsignedIntegerType{get length(){return 2}toWType(){return wasm_1.WType.u16}toMangledName(){return"us"}toString(){return"unsigned short"}}exports.UnsignedInt16Type=UnsignedInt16Type;class UnsignedInt32Type extends UnsignedIntegerType{get length(){return 4}toWType(){return wasm_1.WType.u32}toMangledName(){return"ui"}toString(){return"unsigned int"}}exports.UnsignedInt32Type=UnsignedInt32Type;class UnsignedInt64Type extends UnsignedIntegerType{get length(){return 8}toWType(){return wasm_1.WType.u64}toMangledName(){return"ul"}toString(){return"unsigned long long"}}exports.UnsignedInt64Type=UnsignedInt64Type;class FloatType extends FloatingType{get length(){return 4}toWType(){return wasm_1.WType.f32}toMangledName(){return"f"}toString(){return"float"}}exports.FloatType=FloatType;class DoubleType extends FloatingType{get length(){return 8}toWType(){return wasm_1.WType.f64}toMangledName(){return"d"}toString(){return"double"}}exports.DoubleType=DoubleType,exports.PrimitiveTypes={void:new VoidType,nullptr:new NullptrType,bool:new BoolType,char:new CharType,uchar:new UnsignedCharType,int16:new Int16Type,uint16:new UnsignedInt16Type,int32:new Int32Type,uint32:new UnsignedInt32Type,int64:new Int64Type,uint64:new UnsignedInt64Type,float:new FloatType,double:new DoubleType},exports.PrimitiveTypesNameMap=new Map([[[["void"]],()=>new VoidType],[[["bool"]],()=>new BoolType],[[["char"],["signed","char"].sort()],()=>new CharType],[[["unsigned","char"].sort()],()=>new UnsignedCharType],[[["short"],["signed","short"].sort(),["short","int"].sort(),["signed","short","int"].sort()],()=>new Int16Type],[[["unsigned","short"].sort(),["unsigned","short","int"].sort()],()=>new UnsignedInt16Type],[[["int"],["signed"],["signed","int"].sort()],()=>new Int32Type],[[["unsigned"],["unsigned","int"].sort()],()=>new UnsignedInt32Type],[[["long"],["signed","long"].sort(),["long","int"].sort(),["signed","long","int"].sort()],()=>new Int32Type],[[["unsigned","long"].sort(),["unsigned","long","int"].sort()],()=>new UnsignedInt32Type],[[["long","long"],["signed","long","long"].sort(),["long","long","int"].sort(),["signed","long","long","int"].sort()],()=>new Int64Type],[[["unsigned","long","long"].sort(),["unsigned","long","long","int"].sort()],()=>new UnsignedInt64Type],[[["float"]],()=>new FloatType],[[["double"]],()=>new DoubleType],[[["bool"]],()=>exports.PrimitiveTypes.bool]])},{"../wasm":"Jo9c","./index":"Rt13"}],pe9I:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type/primitive_type");function i(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;if(e[0].equals){for(let n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}n.isArrayEqual=i,n.getPrimitiveTypeFromSpecifiers=function(e){for(const[t,n]of r.PrimitiveTypesNameMap.entries())for(const r of t)if(i(e,r))return n();return null};const o=["void","bool","char","long","int","unsigned","signed","double","float","short"];n.isTypeSpecifier=function(e){return-1!==o.indexOf(e)};const s=["const","volatile"];n.isTypeQualifier=function(e){return-1!==s.indexOf(e)};const a="0123456789ABCDEF";n.toHexString=function(e){let t="";for(let n=0;n<8;n++)t=a.charAt(e%16)+t,e=parseInt((e/16).toString());return 7===t.length&&console.log("fuck"),"0x"+t},n.fromBytesToString=function(e,t,n){let r="";if(void 0===n){let n=t,i=e.getUint8(n);for(;0!==i;)r+=String.fromCharCode(i),n++,i=e.getUint8(n)}else for(let i=t;i<t+n;i++)r+=String.fromCharCode(e.getUint8(i));return r},n.getIndent=function(e){let t="";for(let n=0;n<e;n++)t+="\t";return t}},{"../type/primitive_type":"HxYe"}],xWpI:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("./index");class TemplateType extends i.Type{get length(){throw new r.InternalError("undefined behavior")}toMangledName(){throw new r.InternalError("undefined behavior")}toWType(){throw new r.InternalError("undefined behavior")}toString(){throw new r.InternalError("undefined behavior")}clone(){throw new TemplateType}}n.TemplateType=TemplateType,TemplateType.instance=new TemplateType;class TemplateParameterPlaceHolderType extends i.Type{constructor(e){super(),this.index=e}get length(){throw new r.InternalError("undefined behavior")}toMangledName(){return"^"+this.index}toWType(){throw new r.InternalError("undefined behavior")}toString(){return"^"+this.index}clone(){throw new TemplateParameterPlaceHolderType(this.index)}}n.TemplateParameterPlaceHolderType=TemplateParameterPlaceHolderType},{"../common/error":"nOPH","./index":"Rt13"}],"+hnY":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type/template_type"),i=e("./symbol");n.FunctionTemplate=class FunctionTemplate extends i.OverloadSymbol{constructor(e,t,n,r,i,o,s){super(s),this.shortName=e,this.fullName=t,this.functionConfig=n,this.templateParams=r,this.functionBody=i,this.instanceMap=new Map,this.specializationMap=new Map,this.scopeContext=o}getType(){return r.TemplateType.instance}isDefine(){return!0}getFullName(){return this.fullName}getIndexName(){return this.shortName.split("@")[0]}};n.ClassTemplate=class ClassTemplate extends i.Symbol{constructor(e,t,n,r,i,o,s){super(s),this.templateParams=r,this.classBody=i,this.shortName=e,this.fileName=n,this.fullName=t,this.specializationMap=new Map,this.scopeContext=o}getType(){return r.TemplateType.instance}isDefine(){return!0}}},{"../type/template_type":"xWpI","./symbol":"HcQt"}],vaEy:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/template"),o=e("./index");n.ClassEntity=class ClassEntity{constructor(e,t,n,r,i,s){this.shortName=e,this.fileName=n,this.fullName=t,this.fields=r,this.isComplete=!1,this.fieldMap=new Map,this.isUnion=i,this.inheritance=s,this.selfSize=0,this.vTablePtr=0,this.objectSize=this.inheritance.map(e=>e.classEntity.length).reduce((e,t)=>e+t,0),this.requireVPtr=!1,this.VPtrOffset=0,this.accessControl=o.AccessControl.Public,this.vTable={className:t,vFunctions:[]}}initialize(){this.fieldMap=new Map(this.fields.map(e=>[e.name,e])),this.isUnion?this.selfSize=Math.max(...this.fields.map(e=>e.type.length)):this.selfSize=this.fields.map(e=>e.type.length).reduce((e,t)=>e+t,0),this.requireVPtr&&(this.selfSize+=4),this.objectSize=this.selfSize+this.inheritance.map(e=>e.classEntity.length).reduce((e,t)=>e+t,0),this.isComplete=!0}getField(e){if(!this.isComplete)throw new r.InternalError(`class ${this.shortName} is incomplete`);const t=this.fieldMap.get(e);if(t)return t;for(const t of this.inheritance){const n=t.classEntity.getField(e);if(n)return n}return null}getMember(e,t){const n=e.scopeManager.lookup(this.fullName+"::"+t);if(null!==n)return n instanceof o.Type||n instanceof i.ClassTemplate?null:n;const r=this.fieldMap.get(t);if(r)return r;for(const n of this.inheritance){const r=n.classEntity.getMember(e,t);if(r)return r}return null}setUpVPtr(){let e=0;for(const t of this.inheritance){if(t.classEntity.requireVPtr){this.requireVPtr=!0,this.VPtrOffset=t.classEntity.VPtrOffset+e,t.classEntity.vTable.vFunctions.map(e=>this.vTable.vFunctions.push({indexName:e.indexName,fullName:e.fullName}));break}e+=t.classEntity.objectSize}this.requireVPtr||(this.requireVPtr=!0,this.VPtrOffset=this.objectSize,this.objectSize+=4,this.selfSize+=4)}registerVFunction(e,t,n){const r=this.vTable.vFunctions.filter(e=>e.indexName===t);0===r.length?this.vTable.vFunctions.push({indexName:t,fullName:n}):r[0].fullName=n}getVCallInfo(e){for(let t=0;t<this.vTable.vFunctions.length;t++)if(this.vTable.vFunctions[t].indexName===e)return[this.VPtrOffset,4*t];let t=0;for(const n of this.inheritance){const r=n.classEntity.vTable.vFunctions;for(let t=0;t<r.length;t++)if(r[t].indexName===e)return[n.classEntity.VPtrOffset,4*t];t+=n.classEntity.objectSize}return null}isSubClassOf(e){for(const t of this.inheritance)if(t.classEntity.isSubClassOf(e))return!0;return e===this}get length(){if(!this.isComplete)throw new r.InternalError(`class ${this.shortName} is incomplete`);return this.objectSize}};class ClassType extends o.Type{constructor(e){super(),this.body=e}get length(){return this.body.length}toWType(){throw new r.InternalError("could not to Wtype of func")}toString(){return this.body.shortName}toMangledName(){return"$"+this.body.fullName.replace(/::/g,"!!")+"$"}isDefine(){return this.body.isComplete}equals(e){return e instanceof ClassType&&e.body===this.body}clone(){const e=new ClassType(this.body);return e.isConst=this.isConst,e}}n.ClassType=ClassType},{"../common/error":"nOPH","../common/template":"+hnY","./index":"Rt13"}],VPTZ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/utils"),o=e("../wasm"),s=e("./class_type"),a=e("./compound_type"),u=e("./index"),c=e("./primitive_type");var l;!function(e){e[e.Normal=0]="Normal",e[e.Constructor=1]="Constructor",e[e.Destructor=2]="Destructor",e[e.MemberFunction=3]="MemberFunction"}(l=n.CppFunctionType||(n.CppFunctionType={}));class FunctionType extends u.Type{constructor(e,t,n=!1){super(),this.returnType=e,this.parameterTypes=t,this.variableArguments=n,this.cppFunctionType=l.Normal,this.isVirtual=!1,this.referenceClass=null,this.isTemplateInstance=!1;for(let e=0;e<this.parameterTypes.length;e++){const t=this.parameterTypes[e];t instanceof a.ArrayType&&(this.parameterTypes[e]=new a.PointerType(t.elementType))}}get length(){return 0}equals(e){return super.equals(e)&&e instanceof FunctionType&&this.returnType.equals(e.returnType)&&i.isArrayEqual(this.parameterTypes,e.parameterTypes)}toDisplayString(e){"#"===e.charAt(0)&&(e="$"===e.charAt(1)?e.substring(2):"operator"+e.substring(1));const t=e.split("@");return e=t.length>2?t[0]+"<"+t[2]+">":t[0],this.cppFunctionType===l.Constructor?e=this.referenceClass.body.shortName+"::"+this.referenceClass.body.shortName:this.cppFunctionType===l.Destructor?e="~"+this.referenceClass.body.shortName+"::"+this.referenceClass.body.shortName:this.cppFunctionType===l.MemberFunction&&(e=this.referenceClass.body.shortName+"::"+e),this.returnType.toString()+" "+e+"("+this.parameterTypes.map(e=>e.toString()).join(", ")+")"}toString(){return this.returnType.toString()+"("+this.parameterTypes.map(e=>e.toString()).join(", ")+")"}toWType(){throw new r.InternalError("could not to Wtype of func")}toMangledName(){return this.parameterTypes.map(e=>e.toMangledName()).join(",")}isMemberFunction(){return this.cppFunctionType===l.Destructor||this.cppFunctionType===l.MemberFunction}toWASMEncoding(){let e="";return this.returnType.equals(c.PrimitiveTypes.void)||this.returnType instanceof s.ClassType?e+="v":e+=o.WFunctionType.n2s(o.getNativeType(this.returnType.toWType())),this.parameterTypes.filter(e=>!(e instanceof s.ClassType)).map(t=>e+=o.WFunctionType.n2s(o.getNativeType(t.toWType()))),e}clone(){const e=new FunctionType(this.returnType.clone(),this.parameterTypes.map(e=>e.clone()),this.variableArguments);return e.cppFunctionType=this.cppFunctionType,e.isVirtual=this.isVirtual,e.cppFunctionType=this.cppFunctionType,e.referenceClass=this.referenceClass,e.isTemplateInstance=this.isTemplateInstance,e.isConst=this.isConst,e}}n.FunctionType=FunctionType;n.UnresolvedFunctionOverloadType=class UnresolvedFunctionOverloadType extends u.Type{constructor(e){super(),this.functionLookupResult=e}equals(e){return!1}toString(){return"[UnresolveFunctionOverloadType]"}get length(){return 0}toWType(){throw new r.InternalError("UnresolveFunctionOverloadType()")}clone(){throw new r.InternalError("UnresolveFunctionOverloadType()")}toMangledName(){return"[UnresolveFunctionOverloadType]"}}},{"../common/error":"nOPH","../common/utils":"pe9I","../wasm":"Jo9c","./class_type":"vaEy","./compound_type":"ZWBU","./index":"Rt13","./primitive_type":"HxYe"}],JsMC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),o=e("../type/class_type"),s=e("../type/compound_type"),a=e("../type/primitive_type"),u=e("../wasm");class WAddressHolder extends u.WExpression{static fromVariable(e,t,n){return t.type instanceof s.ArrayType?new WAddressHolder(t.location,t.addressType,n.location).createLoadAddress(e):t.type instanceof s.LeftReferenceType?new WAddressHolder(new WAddressHolder(t.location,t.addressType,n.location).createLoad(e,a.PrimitiveTypes.int32),i.AddressType.RVALUE,n.location):new WAddressHolder(t.location,t.addressType,n.location)}constructor(e,t,n){super(n),this.place=e,this.type=t,this.offset=0}createStore(e,t,n,a=!1){let c=null;if(t instanceof s.ArrayType||t instanceof o.ClassType)throw new r.InternalError("could not assign a array or class");{const o=a?u.getNativeType(t.toWType()):t.toWType();switch(this.type){case i.AddressType.LOCAL:if(c=new u.WSetLocal(o,this.place,n,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.MEMORY_DATA:(c=new u.WStore(o,new u.WConst(u.WType.i32,"0",this.location),n,u.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(c=new u.WStore(o,new u.WConst(u.WType.i32,"0",this.location),n,u.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(c=new u.WStore(o,new u.WConst(u.WType.i32,"0",this.location),n,u.WMemoryLocation.EXTERN,this.location)).offset=this.offset,c.offsetName=this.place;break;case i.AddressType.CONSTANT:throw new r.InternalError("store a constant()");case i.AddressType.STACK:if(null===e.currentFuncContext.currentFunction)throw new r.InternalError("not in function");(c=new u.WStore(o,new u.WGetLocal(u.WType.i32,e.currentFuncContext.currentFunction.$sp,this.location),n,u.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.GLOBAL:if(c=new u.WSetGlobal(o,this.place,n,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.GLOBAL_SP:(c=new u.WStore(o,new u.WGetGlobal(u.WType.u32,"$sp",this.location),n,u.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.RVALUE:c=new u.WStore(o,new u.WBinaryOperation(u.I32Binary.add,this.place,new u.WConst(u.WType.i32,this.offset.toString(),this.location),this.location),n,u.WMemoryLocation.RAW,this.location)}}if(null===c)throw new r.InternalError("createStore()");return c}createLoad(e,t){let n=null;if(t instanceof s.ArrayType||t instanceof o.ClassType)throw new r.InternalError("unsupport");switch(this.type){case i.AddressType.LOCAL:if(n=new u.WGetLocal(t.toWType(),this.place,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.MEMORY_DATA:(n=new u.WLoad(t.toWType(),new u.WConst(u.WType.i32,"0",this.location),u.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(n=new u.WLoad(t.toWType(),new u.WConst(u.WType.i32,"0",this.location),u.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(n=new u.WLoad(t.toWType(),new u.WConst(u.WType.i32,"0",this.location),u.WMemoryLocation.EXTERN,this.location)).offsetName=this.place,n.offset=this.offset;break;case i.AddressType.CONSTANT:if(n=new u.WConst(u.WType.i32,this.place.toString(),this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.STACK:if(null===e.currentFuncContext.currentFunction)throw new r.InternalError("not in function");(n=new u.WLoad(t.toWType(),new u.WGetLocal(u.WType.i32,e.currentFuncContext.currentFunction.$sp,this.location),u.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.GLOBAL:if(n=new u.WGetGlobal(t.toWType(),this.place,this.location),0!==this.offset)throw new r.InternalError("illegal offset");break;case i.AddressType.GLOBAL_SP:(n=new u.WLoad(t.toWType(),new u.WGetGlobal(u.WType.u32,"$sp",this.location),u.WMemoryLocation.RAW,this.location)).offset=this.place+this.offset;break;case i.AddressType.RVALUE:n=new u.WLoad(t.toWType(),new u.WBinaryOperation(u.I32Binary.add,this.place,new u.WConst(u.WType.i32,this.offset.toString(),this.location),this.location),u.WMemoryLocation.RAW,this.location)}if(null===n)throw new r.InternalError("createLoad()");return n}createLoadAddress(e){let t=null;switch(this.type){case i.AddressType.LOCAL:throw new r.InternalError("could not get address of local variable");case i.AddressType.MEMORY_DATA:(t=new u.WGetAddress(u.WMemoryLocation.DATA,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_BSS:(t=new u.WGetAddress(u.WMemoryLocation.BSS,this.location)).offset=this.place+this.offset;break;case i.AddressType.MEMORY_EXTERN:(t=new u.WGetAddress(u.WMemoryLocation.EXTERN,this.location)).offset=this.offset,t.offsetName=this.place;break;case i.AddressType.CONSTANT:throw new r.InternalError("store a constant()");case i.AddressType.STACK:if(null===e.currentFuncContext.currentFunction)throw new r.InternalError("not in function");t=new u.WBinaryOperation(u.I32Binary.add,new u.WGetLocal(u.WType.i32,e.currentFuncContext.currentFunction.$sp,this.location),new u.WConst(u.WType.i32,(this.place+this.offset).toString(),this.location),this.location);break;case i.AddressType.GLOBAL_SP:if(null===e.currentFuncContext.currentFunction)throw new r.InternalError("not in function");t=new u.WBinaryOperation(u.I32Binary.add,new u.WGetGlobal(u.WType.i32,"$sp",this.location),new u.WConst(u.WType.i32,(this.place+this.offset).toString(),this.location),this.location);break;case i.AddressType.RVALUE:t=new u.WBinaryOperation(u.I32Binary.add,this.place,new u.WConst(u.WType.i32,this.offset.toString(),this.location),this.location);break;case i.AddressType.GLOBAL:throw new r.InternalError("could not get address of global variable")}if(null===t)throw new r.InternalError("createStore()");return t}makeOffset(e){if(this.type===i.AddressType.LOCAL)throw new r.InternalError("could not get address of local variable");return this.offset+=e,this}deduceType(e){throw new r.EmitError("WAddressHolder()")}emit(e){throw new r.EmitError("WAddressHolder()")}isPure(){return!(this.place instanceof u.WExpression)}}n.WAddressHolder=WAddressHolder},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","../wasm":"Jo9c"}],TaUa:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../type/primitive_type"),s=e("../../wasm"),a=e("../address");n.Expression=class Expression extends i.Node{constructor(e){super(e)}evaluate(e){const t=this.codegen(e);if(!(t.type instanceof o.ArithmeticType))throw new r.SyntaxError("illegal template parameter",this);const n=t.expr.fold();if(!(n instanceof s.WConst))throw new r.SyntaxError("template parameter must be static value",this);return n.constant}},n.recycleExpressionResult=function(e,t){t.expr.isPure()||(t.expr instanceof a.WAddressHolder&&(t.expr=t.expr.createLoad(e,t.type)),t.type.equals(o.PrimitiveTypes.void)?e.submitStatement(new s.WExprStatement(t.expr.fold(),t.expr.location)):e.submitStatement(new s.WDrop(t.expr.fold(),t.expr.location)))}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC"}],"x+Tr":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./expression");n.Constant=class Constant extends r.Expression{constructor(e){super(e)}}},{"./expression":"TaUa"}],aB1x:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/node"),s=e("../../type/primitive_type"),a=e("../../wasm"),u=e("./constant");class IntegerConstant extends u.Constant{static fromNumber(e,t){return new IntegerConstant(e,10,i.fromInt(t),t.toString(),null)}constructor(e,t,n,r,i){super(e),this.base=t,this.value=n,this.raw=r,this.suffix=i}codegen(e){const t=this.deduceType(e);return{type:t,expr:new a.WConst(t.toWType(),this.raw,this.location)}}deduceType(e){let t=s.PrimitiveTypes.int32;return this.suffix&&(t=-1!==this.suffix.toUpperCase().indexOf("U")?-1!==this.suffix.toUpperCase().indexOf("LL")?s.PrimitiveTypes.uint64:s.PrimitiveTypes.uint32:-1!==this.suffix.toUpperCase().indexOf("LL")?s.PrimitiveTypes.int64:s.PrimitiveTypes.int32),t}}n.IntegerConstant=IntegerConstant,IntegerConstant.ZeroConstant=IntegerConstant.fromNumber(o.EmptyLocation,0),IntegerConstant.OneConstant=IntegerConstant.fromNumber(o.EmptyLocation,1),IntegerConstant.NegOneConstant=IntegerConstant.fromNumber(o.EmptyLocation,-1)},{long:"YvD4","../../common/node":"PoXi","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],"y+tL":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),o=e("../common/template"),s=e("../type");class FunctionLookUpResult{constructor(e){this.functions=e,this.instance=null,this.instanceType=null,this.isDynamicCall=!1,this.templateArguments=[]}}function a(e){const t=e.split("::");return t[t.length-1]}n.FunctionLookUpResult=FunctionLookUpResult,n.getShortName=a;class Scope{constructor(e,t,n){this.shortName=e,null===t?(this.parent=this,this.fullName=""):(this.parent=t,this.fullName=this.parent.fullName+"::"+this.shortName),this.children=[],this.map=new Map,this.isCpp=n,this.isInnerScope=!1,this.classType=null}getScopeOfLookupName(e){"::"===e.slice(0,2)&&(e=e.slice(2));const t=e.split("::");if(1===t.length)return this;for(const e of this.children)if(e.shortName===t[0])return e.getScopeOfLookupName(t.slice(1).join("::"));return null}mergeSymbolInScope(e,t,n){const a=this.map.get(e);if(!a)return void this.map.set(e,[t]);const u=a[0];if(!(u instanceof i.OverloadSymbol)){if(u instanceof i.Variable){if(t.isDefine()&&u.isDefine())throw new r.SyntaxError(`redefine of ${e}`,n);if(t instanceof i.Variable){if(u.type.equals(t.type)&&u.fullName===t.fullName)return void(t.isDefine()&&(t.accessControl===s.AccessControl.Unknown&&(t.accessControl=u.accessControl),a[0]=t));throw new r.SyntaxError(`conflict declaration of ${e}`,n)}throw new r.SyntaxError(`${e} has been declared as variable`+`but a ${t.constructor.name} found`,n)}if(u instanceof s.Type){if(t instanceof s.Type){if(u.equals(t))return;throw new r.SyntaxError(`conflict declaration of ${e}`,n)}throw new r.SyntaxError(`${e} has been declared as type`+`but a ${t.constructor.name} found`,n)}if(u instanceof o.ClassTemplate){if(t.isDefine()&&u.isDefine())throw new r.SyntaxError(`redefine of ${e}`,n);if(t instanceof o.ClassTemplate){if(u.templateParams.length!==t.templateParams.length)throw new r.SyntaxError(`conflict declaration of ${e}`,n);for(let i=0;i<u.templateParams.length;i++)if(!u.templateParams[i].type.equals(t.templateParams[i].type))throw new r.SyntaxError(`conflict declaration of ${e}`,n);return void(t.isDefine()&&(a[0]=t))}throw new r.SyntaxError(`${e} has been declared as class template`+`but a ${t.constructor.name} found`,n)}throw new r.InternalError("assertCompatible()")}if(!(t instanceof i.OverloadSymbol))throw new r.SyntaxError(`${e} has been declared as function`+`but a ${t.constructor.name} found`,n);for(let i=0;i<a.length;i++){const o=a[i];if(o.getFullName()===t.getFullName()){if(o.isDefine()&&!t.isDefine())return;if(o.isDefine()&&t.isDefine())throw new r.SyntaxError(`redefine of ${e}`,n);if(!o.isDefine()&&t.isDefine())return t.accessControl===s.AccessControl.Unknown&&(t.accessControl=o.accessControl),void(a[i]=t);if(!o.isDefine()&&!t.isDefine())return}}a.push(t)}lookupInScope(e){if("::"===e.slice(0,2))throw new r.InternalError("public lookupInScope(anyName: string){");const t=this.getScopeOfLookupName(e),n=a(e);return t&&t.map.get(n)||null}}n.Scope=Scope;n.ScopeManager=class ScopeManager{constructor(e){this.isCpp=e,this.root=new Scope("",null,e),this.scopeId=0,this.tmpVarId=0,this.contextStack=[],this.currentContext={scope:this.root,activeScopes:[this.root]}}allocTmpVarName(){return"$__"+this.tmpVarId++}getFullName(e){if("::"===e.slice(0,2))return e;for(let t=this.currentContext.activeScopes.length-1;t>=0;t--){const n=this.currentContext.activeScopes[t].getScopeOfLookupName(e),r=a(e);if(n&&n.map.has(r))return n.fullName+"::"+r}return this.currentContext.scope.fullName+"::"+e}lookupFunction(e){const t="::"===e.slice(0,2)?[this.root]:this.currentContext.activeScopes,n="::"===e.slice(0,2)?e.slice(2):e,r=a(n).split("@")[0],s=a(n).includes("@"),u=new Set,c=[];for(let e=t.length-1;e>=0;e--){const l=t[e].getScopeOfLookupName(n);if(l){const e=l.map.get(r);if(e)for(const t of e)(t instanceof o.FunctionTemplate||t instanceof i.FunctionEntity)&&((u.has(t.shortName)||s)&&t.getFullName()!==l.fullName+"::"+a(n)||(u.add(t.shortName),c.push(t)))}}return new FunctionLookUpResult(c)}lookup(e){const t="::"===e.slice(0,2)?[this.root]:this.currentContext.activeScopes,n="::"===e.slice(0,2)?e.slice(2):e;for(let r=t.length-1;r>=0;r--){const t=this.currentContext.activeScopes[r].lookupInScope(n);if(t){const n=t[0];return n instanceof i.OverloadSymbol?this.lookupFunction(e):n}}return null}declare(e,t,n){const i=e.includes("::");if("::"===e.slice(0,2)){const i=e.slice(2),o=this.root.getScopeOfLookupName(i);if(!o)throw new r.SyntaxError(`unresolved name ${e}`,n);const s=o.getScopeOfLookupName(i),u=a(i);if(s&&s.map.has(u))return void o.mergeSymbolInScope(u,t,n);throw new r.SyntaxError(`unresolved name ${e}`,n)}if(i){for(const r of this.currentContext.activeScopes){const i=r.getScopeOfLookupName(e),o=a(e);if(i&&i.map.has(o))return void r.mergeSymbolInScope(o,t,n)}throw new r.SyntaxError(`unresolved name ${e}`,n)}this.currentContext.scope.mergeSymbolInScope(e,t,n)}define(e,t,n){const i=e.includes("::");if("::"===e.slice(0,2)){const i=e.slice(2),o=this.root.getScopeOfLookupName(i);if(!o)throw new r.SyntaxError(`unresolved name ${e}`,n);const s=o.getScopeOfLookupName(i),u=a(i);if(s&&s.map.has(u))return void o.mergeSymbolInScope(u,t,n);throw new r.SyntaxError(`unresolved name ${e}`,n)}if(i){for(const r of this.currentContext.activeScopes){const i=r.getScopeOfLookupName(e),o=a(e);if(i&&i.map.has(o))return void r.mergeSymbolInScope(o,t,n)}throw new r.SyntaxError(`unresolved name ${e}`,n)}this.currentContext.scope.mergeSymbolInScope(e,t,n)}enterScope(e){this.contextStack.push(this.currentContext);const t=this.getFullName(e),n=this.root.getScopeOfLookupName(t);if(!n)throw new r.InternalError(`the scope of ${t} is not exist`);let i=[];for(let e=n;e!==this.root;e=e.parent)i.push(e);i.push(this.root),i=i.reverse();const o=n.children.filter(e=>e.fullName===t);if(o.length)i.push(o[0]),this.currentContext={scope:o[0],activeScopes:i};else{const e=new Scope(a(t),n,this.isCpp);n.children.push(e),i.push(e),this.currentContext={scope:e,activeScopes:i}}}enterSavedScope(e){this.contextStack.push(this.currentContext),this.currentContext=e}exitScope(){if(0===this.contextStack.length)throw new r.InternalError("this.contextStack.length === 0");this.currentContext=this.contextStack.pop()}enterUnnamedScope(e){const t=new Scope("$"+this.scopeId++,this.currentContext.scope,this.isCpp);e&&(t.fullName=this.currentContext.scope.fullName),t.isInnerScope=!0,this.currentContext.scope.children.push(t),this.contextStack.push(this.currentContext);const n=this.currentContext.activeScopes.map(e=>e);n.push(t),this.currentContext={scope:t,activeScopes:n}}detachCurrentScope(){const e=this.currentContext.scope.parent;for(let t=0;t<e.children.length;t++)if(e.children[t]===this.currentContext.scope){for(let n=t;n<e.children.length-1;n++)e.children[n]=e.children[n+1];break}e.children.pop()}isRoot(){return this.currentContext.scope===this.root}activeScopes(e){const t=new Set(this.currentContext.activeScopes.map(e=>e.fullName)),n=e.filter(e=>e.isInnerScope||!t.has(e.fullName)),r=this.currentContext.activeScopes.filter(e=>e.fullName!==this.currentContext.scope.fullName);this.currentContext.activeScopes=[...r,...n,this.currentContext.scope]}getOldOverloadSymbol(e){const t=this.lookup(e.split("@")[0]);if(t&&t instanceof FunctionLookUpResult){const n=t.functions.filter(t=>t.fullName===e);if(n.length)return n[0]}return null}}},{"../common/error":"nOPH","../common/symbol":"HcQt","../common/template":"+hnY","../type":"Rt13"}],QzhC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../common/template"),a=e("../../type");function u(e,t,n,r){const i=n.map(e=>e.toString()).join(",");e.scopeManager.enterSavedScope(t.scopeContext),e.scopeManager.enterUnnamedScope(!0);for(let i=0;i<n.length;i++){const s=t.templateParams[i].name,u=n[i];u instanceof a.Type?e.scopeManager.define(s,u,r):e.scopeManager.define(s,new o.Variable(s,e.scopeManager.getFullName(s),e.fileName,t.templateParams[i].type,o.AddressType.CONSTANT,u,a.AccessControl.Public),r)}let s=t.classBody;const u=t.specializationMap.get(i);u&&(s=u);const c=s.identifier.name[s.identifier.name.length-1].name;s.identifier.name[s.identifier.name.length-1].name+="<"+i+">";const l=s.identifier.getShortName(e),p=s.codegen(e);return s.identifier.name[s.identifier.name.length-1].name=c,e.scopeManager.currentContext.scope.children.map(t=>e.scopeManager.currentContext.scope.parent.children.push(t)),e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.define(l,p,r),e.scopeManager.exitScope(),p}n.ClassTemplateInstantiation=class ClassTemplateInstantiation extends i.ClassDirective{constructor(e,t){super(e),this.specifier=t}codegen(e){const t=this.specifier.identifier,n=t.getLookupName(e),i=e.scopeManager.lookup(n);if(!(i instanceof s.ClassTemplate))throw new r.SyntaxError(`${n} is not a class template`,this);const o=t.fillInBlank(e,t.getLastID().args,i),a="<"+o.map(e=>e.toString).join(",")+">";e.scopeManager.lookup(i.fullName+a)||u(e,i,o,this)}declare(e,t){throw new r.InternalError("todo")}},n.instantiateClassTemplate=u},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13"}],"5fRK":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../common/template"),a=e("../../type"),u=e("../../type/class_type"),c=e("../../type/function_type"),l=e("../../wasm"),p=e("../address"),h=e("../class/member_expression"),m=e("../scope"),d=e("../template/class_template_instantiation"),f=e("./expression");var y;!function(e){e[e.ID=0]="ID",e[e.TYPE=1]="TYPE",e[e.T_FUNC=2]="T_FUNC",e[e.T_FUNC_INS=3]="T_FUNC_INS",e[e.T_CLASS=4]="T_CLASS",e[e.T_CLASS_INS=5]="T_CLASS_INS",e[e.OPE_TYPE=6]="OPE_TYPE"}(y=n.IDType||(n.IDType={}));class SingleIdentifier extends i.Node{static fromString(e,t){return new SingleIdentifier(e,t,y.ID,[])}constructor(e,t,n,r){super(e),this.name=t,this.type=n,this.args=r}clone(){return new SingleIdentifier(this.location,this.name,this.type,this.args)}}n.SingleIdentifier=SingleIdentifier;class Identifier extends f.Expression{static fromString(e,t,n=!1){const r="::"===t.slice(0,2);r&&(t=t.slice(2));const i=new Identifier(e,t.split("::").map(t=>new SingleIdentifier(e,t,y.ID,[])),r);return n&&(i.getLastID().type=y.TYPE),i}static allocTmpVar(e,t,n){const r=e.scopeManager.allocTmpVarName(),i=new o.Variable(r,r,n.location.fileName,t,o.AddressType.STACK,e.memory.allocStack(t.length),a.AccessControl.Public);return e.scopeManager.define(r,i,n),Identifier.fromString(n.location,r)}constructor(e,t,n){super(e),this.name=t,this.isFullName=n}getLastID(){return this.name[this.name.length-1]}getType(){return this.getLastID().type}clone(){return new Identifier(this.location,this.name.map(e=>e.clone()),this.isFullName)}getPlainName(e){if(1!==this.name.length||this.name[0].type!==y.ID&&this.name[0].type!==y.TYPE)throw new r.SyntaxError(`${this.getLookupName(e)} is not a valid identifier`,this);return this.getShortName(e)}getOverloadName(e,t){const n=e.scopeManager.lookup(t);if(n instanceof u.ClassType)return"#"+n.toMangledName();throw new r.SyntaxError(`${t} is not a valid function overload type`,this)}getShortName(e){return this.getLastID().type===y.OPE_TYPE?this.getOverloadName(e,this.getLastID().name):this.getLastID().name}getFullName(e){return this.isFullName?this.getLookupName(e):e.scopeManager.getFullName(this.getLookupName(e))}fillInBlank(e,t,n){const i=t.map(t=>t.evaluate(e));for(;i.length<n.templateParams.length;){const e=n.templateParams[i.length].init;if(null===e)throw new r.SyntaxError(`template number mismatch of template ${n.shortName}`,this);i.push(e)}return i}getLookupName(e){let t="";this.isFullName&&(t+="::");for(let n=0;n<this.name.length;n++)if(0!==n&&(t+="::"),t+=this.name[n].name,n!==this.name.length-1&&(this.name[n].type===y.T_FUNC_INS||this.name[n].type===y.T_CLASS_INS)){const i=new Identifier(this.location,this.name.slice(0,n+1),this.isFullName).getLookupName(e),o=e.scopeManager.lookup(i);if(!o)throw new r.SyntaxError(`undefined template name ${t}`,this);if(this.name[n].type===y.T_FUNC_INS)throw new r.SyntaxError(`illegal function template name ${t}`,this);{if(!(o instanceof s.ClassTemplate))throw new r.SyntaxError(`${t} is not class template name`,this);const a=this.fillInBlank(e,this.name[n].args,o),u=i+"<"+a.join(",")+">";e.scopeManager.lookup(u)||d.instantiateClassTemplate(e,o,a,this),t=u}}return this.getLastID().type===y.OPE_TYPE?this.getOverloadName(e,t):t}tryLookupImplicitThis(e){if(null===e.scopeManager.lookup("this"))throw new r.SyntaxError(`Unresolve Name ${this.getLookupName(e)}`,this);try{return new h.MemberExpression(this.location,Identifier.fromString(this.location,"this"),!0,this)}catch(t){throw new r.SyntaxError(`Unresolve Name ${this.getLookupName(e)}`,this)}}codegen(e){const t=this.getLookupName(e);let n=e.scopeManager.lookup(t);if(n=this.filterMemberFunction(n)){if(n instanceof o.Variable)return{type:n.type,expr:p.WAddressHolder.fromVariable(e,n,this)};if(n instanceof m.FunctionLookUpResult)return{type:new c.UnresolvedFunctionOverloadType(n),expr:l.WEmptyExpression.instance};throw new r.SyntaxError(`name ${t} is a ${n.constructor.name}`,this)}return this.tryLookupImplicitThis(e).codegen(e)}filterMemberFunction(e){return e&&e instanceof m.FunctionLookUpResult&&(e.functions=e.functions.filter(e=>!(e instanceof o.FunctionEntity&&e.type.cppFunctionType===c.CppFunctionType.MemberFunction)),0===e.functions.length&&(e=null)),e}deduceType(e){const t=this.getLookupName(e);let n=e.scopeManager.lookup(t);if(!(n=this.filterMemberFunction(n)))return this.tryLookupImplicitThis(e).deduceType(e);if(this.getLastID().type===y.ID){if(n instanceof o.Variable)return n.type;if(n instanceof m.FunctionLookUpResult)return new c.UnresolvedFunctionOverloadType(n);throw new r.SyntaxError(`name ${t} should be variable`+` but it is a ${n.constructor.name}`,this)}if(this.getLastID().type===y.TYPE){if(n instanceof a.Type)return n;throw new r.SyntaxError(`name ${t} should be type`+` but it is a ${n.constructor.name}`,this)}if(this.getLastID().type===y.T_FUNC)throw new r.SyntaxError(`name ${t} is a function template`,this);if(this.getLastID().type===y.T_FUNC_INS){if(n instanceof m.FunctionLookUpResult)return n.templateArguments=this.getLastID().args.map(t=>t.evaluate(e)),new c.UnresolvedFunctionOverloadType(n);throw new r.SyntaxError(`name ${t} should be template function`+` but it is a ${n.constructor.name}`,this)}if(this.getLastID().type===y.T_CLASS)throw new r.SyntaxError(`name ${t} is a class template`,this);if(this.getLastID().type===y.T_CLASS_INS){if(n instanceof s.ClassTemplate){const i=this.fillInBlank(e,this.getLastID().args,n),o=t+"<"+i.join(",")+">",s=e.scopeManager.lookup(o);if(!s)return d.instantiateClassTemplate(e,n,i,this);if(!(s instanceof u.ClassType))throw new r.SyntaxError(`name ${t} should be class template`+` but it is a ${n.constructor.name}`,this);return s}throw new r.SyntaxError(`name ${t} should be template function`+` but it is a ${n.constructor.name}`,this)}throw new r.InternalError("unreachable")}}n.Identifier=Identifier},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13","../../type/class_type":"vaEy","../../type/function_type":"VPTZ","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../scope":"y+tL","../template/class_template_instantiation":"QzhC","./expression":"TaUa"}],DcaS:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/class_type"),o=e("../expression/expression"),s=e("../expression/identifier"),a=e("../expression/unary_expression"),u=e("../function/call_expression");n.ConstructorCallExpression=class ConstructorCallExpression extends o.Expression{constructor(e,t,n){super(e),this.name=t,this.arguments=n}codegen(e){if(!e.isCpp())throw new r.LanguageError("constructor is noly support in c++",this);const t=this.deduceType(e);if(!(t instanceof i.ClassType))throw new r.SyntaxError("constructor call must be class type",this);const n=t.body.fullName+"::#"+t.body.shortName,c=s.Identifier.fromString(this.location,n),l=s.Identifier.allocTmpVar(e,t,this),p=new a.UnaryExpression(this.location,"&",l);return o.recycleExpressionResult(e,new u.CallExpression(this.location,c,[p,...this.arguments]).codegen(e)),l.codegen(e)}deduceType(e){return this.name.deduceType(e)}}},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM"}],"/aCp":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./expression");n.AnonymousExpression=class AnonymousExpression extends r.Expression{constructor(e,t){super(e),this.expr=t}codegen(e){return this.expr}deduceType(e){return this.expr.type}};n.AnonymousCastExpression=class AnonymousCastExpression extends r.Expression{constructor(e,t,n){super(e),this.expr=t,this.type=n}codegen(e){const t=this.expr.codegen(e);return t.type=this.type,t}deduceType(e){return this.type}}},{"./expression":"TaUa"}],"atX+":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type"),o=e("../../type/compound_type"),s=e("../../type/function_type"),a=e("../../type/template_type"),u=e("../type_converter");function c(e,t,n,r,l){if(n instanceof s.FunctionType){if(!(r instanceof s.FunctionType))throw{};if(r.parameterTypes.length!==n.parameterTypes.length)throw{};c(e,t,n.returnType,r.returnType,l);for(let i=0;i<n.parameterTypes.length;i++)c(e,t,n.parameterTypes[i],r.parameterTypes[i],l)}else if(n instanceof o.PointerType){if(!(r instanceof o.PointerType))throw{};c(e,t,n.elementType,r.elementType,l)}else if(n instanceof o.ReferenceType){if(!(r instanceof o.ReferenceType))throw{};c(e,t,n.elementType,r.elementType,l)}else if(n instanceof o.ArrayType){if(!(r instanceof o.ArrayType))throw{};c(e,t,n.elementType,r.elementType,l)}else if(n instanceof a.TemplateParameterPlaceHolderType){const o=t[n.index];if(null===o)t[n.index]=r;else{if(!(o instanceof i.Type))throw{};if(r instanceof a.TemplateParameterPlaceHolderType){if(n.index!==r.index)throw{}}else if(l){if(!u.isCompatWith(e,o,r))throw{}}else if(!o.equals(r))throw{}}}else if(l){if(!u.isCompatWith(e,n,r))throw{}}else if(!n.equals(r))throw{}}n.deduceFunctionTypeOfTemplate=function e(t,n){if(t instanceof s.FunctionType){const r=new s.FunctionType(e(t.returnType,n),t.parameterTypes.map(t=>e(t,n)),t.variableArguments);return r.cppFunctionType=t.cppFunctionType,r.referenceClass=t.referenceClass,r.isVirtual=t.isVirtual,r}if(t instanceof o.PointerType)return new o.PointerType(e(t.elementType,n));if(t instanceof o.RightReferenceType)return new o.RightReferenceType(e(t.elementType,n));if(t instanceof o.LeftReferenceType)return new o.LeftReferenceType(e(t.elementType,n));if(t instanceof o.ArrayType)return new o.ArrayType(e(t.elementType,n),t.size);if(t instanceof a.TemplateParameterPlaceHolderType){const e=n[t.index];if(null===e)throw new r.InternalError("deduceFunctionTypeOfTemplate()");if(e instanceof i.Type)return e;throw new r.InternalError("deduceFunctionTypeOfTemplate()")}return t},n.deduceFunctionTemplateParameters=function(e,t,n,r,i){if(r.length>t.templateParams.length)return null;const o=n.parameterTypes.filter(()=>!0);if(t.functionConfig.functionType.parameterTypes.length!==o.length){if(!i)return null;if(o.length>t.functionConfig.functionType.parameterTypes.length)return null;for(let e=o.length;e<t.functionConfig.functionType.parameterTypes.length;e++)null!==t.functionConfig.parameterInits[e]&&o.push(t.functionConfig.functionType.parameterTypes[e])}const s=[];for(let e=0;e<t.templateParams.length;e++)s.push(null);for(let e=0;e<r.length;e++)s[e]=r[e];try{for(let n=0;n<o.length;n++)c(e,s,t.functionConfig.functionType.parameterTypes[n],o[n],i)}catch(e){return null}for(let e=0;e<t.templateParams.length;e++)if(null===s[e]){if(null===t.templateParams[e].init)return null;s[e]=t.templateParams[e].init}return s},n.tryMatchTemplateType=c},{"../../common/error":"nOPH","../../type":"Rt13","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/template_type":"xWpI","../type_converter":"vGpT"}],"4WIk":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../common/template"),a=e("../../type"),u=e("../../type/function_type"),c=e("../function/function"),l=e("./template_deduce");function p(e,t,n,r){const i=l.deduceFunctionTypeOfTemplate(t.functionConfig.functionType,n),s=n.map(e=>e.toString()).join(","),u=t.shortName+"@"+s,p=u+"@"+i.toMangledName();e.scopeManager.enterSavedScope(t.scopeContext),t.instanceMap.set(s,new o.FunctionEntity(p+"@"+i.toMangledName(),e.scopeManager.getFullName(p),e.fileName,i,t.functionConfig.parameterInits,!1,!0,a.AccessControl.Public,[])),e.scopeManager.enterUnnamedScope(!0);for(let i=0;i<n.length;i++){const s=t.templateParams[i].name,u=n[i];u instanceof a.Type?e.scopeManager.define(s,u,r):e.scopeManager.define(s,new o.Variable(s,e.scopeManager.getFullName(s),e.fileName,t.templateParams[i].type,o.AddressType.CONSTANT,u,a.AccessControl.Public),r)}let h=t.functionBody.body.body;const m=t.specializationMap.get(s);m&&(h=m.body.body),i.isTemplateInstance=!0;const d={name:u,functionType:i,parameterNames:t.functionConfig.parameterNames,parameterInits:t.functionConfig.parameterInits,isLibCall:t.functionConfig.isLibCall,accessControl:t.functionConfig.accessControl};c.defineFunction(e,d,h,[...t.scopeContext.activeScopes,e.scopeManager.currentContext.scope],r),e.scopeManager.currentContext.scope.children.map(t=>e.scopeManager.currentContext.scope.parent.children.push(t)),e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.exitScope()}n.FunctionTemplateInstantiation=class FunctionTemplateInstantiation extends i.ClassDirective{constructor(e,t,n){super(e),this.specifiers=t,this.declarator=n}declare(e,t){throw new r.InternalError("todo")}codegen(e){const t=this.declarator.getNameRequired(),n=t.deduceType(e),i=this.declarator.getType(e,this.specifiers.getType(e));if(!(n instanceof u.UnresolvedFunctionOverloadType&&i instanceof u.FunctionType))throw new r.SyntaxError(`${t.getLookupName(e)} is not a function template`,this);const o=n.functionLookupResult;for(const t of o.functions)if(t instanceof s.FunctionTemplate){const n=l.deduceFunctionTemplateParameters(e,t,i,o.templateArguments,!1);if(null!==n)return void p(e,t,n,this)}throw new r.SyntaxError("no matched function template",this)}},n.instantiateFunctionTemplate=p},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../common/template":"+hnY","../../type":"Rt13","../../type/function_type":"VPTZ","../function/function":"rsVP","./template_deduce":"atX+"}],sV6L:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/template"),o=e("../type/compound_type"),s=e("../type/function_type"),a=e("../type/primitive_type"),u=e("./scope"),c=e("./template/function_template_instantiation"),l=e("./template/template_deduce"),p=e("./type_converter");function h(e,t,n){return t instanceof o.ReferenceType&&(t=t.elementType),n instanceof o.ReferenceType&&(n=n.elementType),t.equals(n)}function m(e,t,n){return t instanceof o.ReferenceType&&(t=t.elementType),n instanceof o.ReferenceType&&(n=n.elementType),p.isCompatWith(e,t,n)}function d(e,t,n,r,i){if(t.type.isMemberFunction()){const s=t.type.parameterTypes[0];return null!==r.instanceType&&s instanceof o.PointerType&&(p.isCompatWith(e,s.elementType,r.instanceType)&&t.type.parameterTypes.slice(1).every((t,r)=>i(e,t,n[r])))}return t.type.parameterTypes.every((t,r)=>i(e,t,n[r]))}function f(e){const t=new Set,n=[];for(const r of e)t.has(r.fullName)||(n.push(r),t.add(r.fullName));return n}function y(e,t,n,u){const p=t.templateArguments.map(e=>e.toString()).join(","),y=[],g=[];for(const e of t.functions)if(e instanceof i.FunctionTemplate){g.push(e);for(const n of e.instanceMap.keys())(0===t.templateArguments.length||n.startsWith(p))&&y.push(e.instanceMap.get(n))}const _=f(t.functions.filter(e=>!(e instanceof i.FunctionTemplate)).concat(y).filter(e=>e.type.isMemberFunction()&&e.type.parameterTypes.length===n.length+1||!e.type.isMemberFunction()&&e.type.parameterTypes.length===n.length||e.type.variableArguments)),w=_.filter(r=>d(e,r,n,t,h));if(w.length>=1)return w.length>1&&e.raiseWarning(`call for ${t.functions[0].shortName} is ambiguous`,u),w[0];const x=_.filter(e=>!e.type.isTemplateInstance).filter(r=>d(e,r,n,t,m));if(x.length>=1)return x.length>1&&e.raiseWarning(`call for ${t.functions[0].shortName} is ambiguous`,u),x[0];const T=_.filter(e=>e.type.variableArguments);if(T.length>=1)return T.length>1&&e.raiseWarning(`call for ${t.functions[0].shortName} is ambiguous`,u),T[0];const C=t.instanceType?[new o.PointerType(t.instanceType),...n]:n;for(const n of g){const r=new s.FunctionType(a.PrimitiveTypes.void,C,!1),i=l.deduceFunctionTemplateParameters(e,n,r,t.templateArguments,!0);if(null!==i){const t=i.map(e=>e.toString()).join(",");if(!n.instanceMap.get(t))return c.instantiateFunctionTemplate(e,n,i,u),n.instanceMap.get(t)}}throw new r.SyntaxError(`no matching function for ${t.functions[0].shortName.split("@")[0]}`,u)}n.doStrictTypeMatch=h,n.doWeakTypeMatch=m,n.doFunctionFilter=d,n.removeDuplicatedFunctions=f,n.doFunctionOverloadResolution=y,n.isFunctionExists=function(e,t,n,r=null){const i=e.scopeManager.lookup(t);if(!(i instanceof u.FunctionLookUpResult))return!1;try{return i.instanceType=r,y(e,i,n,{}),!0}catch(e){return!1}}},{"../common/error":"nOPH","../common/template":"+hnY","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./scope":"y+tL","./template/function_template_instantiation":"4WIk","./template/template_deduce":"atX+","./type_converter":"vGpT"}],sfIM:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/class_type"),o=e("../../type/compound_type"),s=e("../../type/primitive_type"),a=e("../../wasm"),u=e("../class/member_expression"),c=e("../function/call_expression"),l=e("../type_converter"),p=e("./expression"),h=e("./identifier");function m(e,t){return e instanceof s.FloatingType||t instanceof s.FloatingType?s.PrimitiveTypes.double:e instanceof s.UnsignedInt64Type||t instanceof s.UnsignedInt64Type?s.PrimitiveTypes.uint64:e instanceof s.Int64Type||t instanceof s.Int64Type?s.PrimitiveTypes.int64:e instanceof s.UnsignedIntegerType||t instanceof s.UnsignedIntegerType?s.PrimitiveTypes.uint32:s.PrimitiveTypes.int32}n.BinaryExpression=class BinaryExpression extends p.Expression{constructor(e,t,n,r){super(e),void 0===t[1]?this.operator=t[0]:this.operator=t,this.left=n,this.right=r}codegen(e){if(","===this.operator)return p.recycleExpressionResult(e,this.left.codegen(e)),this.right.codegen(e);const t=this.left.deduceType(e),n=this.right.deduceType(e);if(t instanceof i.ClassType)return new c.CallExpression(this.location,new u.MemberExpression(this.location,this.left,!1,h.Identifier.fromString(this.location,"#"+this.operator)),[this.right]).codegen(e);if(n instanceof i.ClassType)throw new r.SyntaxError("current not support right overload",this);let m=this.left.codegen(e),d=this.right.codegen(e);const f=this.deduceType(e),y=a.getOpFromStr(this.operator,f.toWType());if(null===y)throw new r.InternalError(`unsupport op ${this.operator}`);f instanceof o.PointerType&&(m.type instanceof s.IntegerType?(m=new l.TypeConverter(m).toRValue(e),m={type:f,expr:new a.WBinaryOperation(a.I32Binary.mul,m.expr,new a.WConst(a.WType.u32,f.elementType.length.toString(),this.location),this.location)}):d.type instanceof s.IntegerType&&(d=new l.TypeConverter(d).toRValue(e),d={type:f,expr:new a.WBinaryOperation(a.I32Binary.mul,d.expr,new a.WConst(a.WType.u32,f.elementType.length.toString(),this.location),this.location)}));let g=new l.TypeConverter(m).tryConvertTo(e,f).expr,_=new l.TypeConverter(d).tryConvertTo(e,f).expr;return"&&"!==this.operator&&"||"!==this.operator||(g=new a.WBinaryOperation(a.I32Binary.ne,g,new a.WConst(a.WType.i32,"0",this.location),this.location),_=new a.WBinaryOperation(a.I32Binary.ne,_,new a.WConst(a.WType.i32,"0",this.location),this.location)),{type:f,expr:new a.WBinaryOperation(y,g,_,this.location)}}deduceType(e){const t=l.TypeConverter.fromType(this.left.deduceType(e)).toRValue(e).type,n=l.TypeConverter.fromType(this.right.deduceType(e)).toRValue(e).type;if(t instanceof i.ClassType)return new c.CallExpression(this.location,new u.MemberExpression(this.location,this.left,!1,h.Identifier.fromString(this.location,"#"+this.operator)),[this.right]).deduceType(e);if("+-*%/".includes(this.operator)){if(t instanceof s.ArithmeticType&&n instanceof s.ArithmeticType)return m(t,n);if(t instanceof o.PointerType||n instanceof o.PointerType){if(t instanceof o.PointerType&&n instanceof o.PointerType)throw new r.TypeError("could not apply ope on two pointer",this);if(t instanceof o.PointerType){if(!(n instanceof s.IntegerType))throw new r.TypeError(`could not apply ${n.toString()} to pointer`,this);return t}if(n instanceof o.PointerType){if(!(t instanceof s.IntegerType))throw new r.TypeError(`could not apply ${t.toString()} to pointer`,this);if("-"===this.operator)throw new r.TypeError("could - a pointer",this);return n}throw new r.TypeError("bad operator on pointer",this)}throw new r.TypeError(`could not apply ${this.operator} on ${t.toString()}`+` and ${n.toString()}`,this)}if([">=","<=",">","<","==","!="].includes(this.operator)){if(t instanceof s.ArithmeticType&&n instanceof s.ArithmeticType)return s.PrimitiveTypes.bool;if(t instanceof o.PointerType&&n instanceof o.PointerType)return s.PrimitiveTypes.bool;throw new r.TypeError("unsupport relation compute",this)}if(["&&","||"].includes(this.operator))return s.PrimitiveTypes.bool;if(["&","|","^",">>","<<"].includes(this.operator)){if(!(t instanceof s.IntegerType&&n instanceof s.IntegerType))throw new r.TypeError("binary operator could only be applied on integer",this);return s.PrimitiveTypes.int32}if(","===this.operator)return this.right.deduceType(e);throw new r.InternalError("no impl at BinaryExpression()")}},n.arithmeticDeduce=m},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../class/member_expression":"5MB0","../function/call_expression":"sKlM","../type_converter":"vGpT","./expression":"TaUa","./identifier":"5fRK"}],Laai:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/error"),s=e("../../common/symbol"),a=e("../../type/class_type"),u=e("../../type/compound_type"),c=e("../../type/primitive_type"),l=e("../../wasm"),p=e("../address"),h=e("../class/member_expression"),m=e("../function/call_expression"),d=e("../overload"),f=e("../type_converter"),y=e("./binary_expression"),g=e("./expression"),_=e("./identifier"),w=e("./integer_constant"),x=e("./unary_expression"),T=new u.PointerType(new c.CharType),C=new u.PointerType(new c.CharType);function v(e,t,n,r,s){if(t instanceof c.UnsignedCharType)e.memory.data.setUint8(r,parseInt(s));else if(t instanceof c.CharType)e.memory.data.setInt8(r,parseInt(s));else if(t instanceof c.UnsignedInt16Type)e.memory.data.setUint16(r,parseInt(s),!0);else if(t instanceof c.UnsignedInt32Type)e.memory.data.setUint32(r,parseInt(s),!0);else if(t instanceof c.UnsignedInt64Type)e.memory.data.setUint32(r,i.fromString(s).low,!0),e.memory.data.setUint32(r+4,i.fromString(s).low,!0);else if(t instanceof c.Int16Type)e.memory.data.setInt16(r,parseInt(s),!0);else if(t instanceof c.Int32Type)e.memory.data.setInt32(r,parseInt(s),!0);else if(t instanceof c.Int64Type)e.memory.data.setInt32(r,i.fromString(s).low),e.memory.data.setInt32(r+4,i.fromString(s).high,!0);else if(t instanceof c.FloatType)e.memory.data.setFloat32(r,parseFloat(s),!0);else{if(!(t instanceof c.DoubleType))throw new o.InternalError("unsupport type assignment");e.memory.data.setFloat64(r,parseFloat(s),!0)}}n.AssignmentExpression=class AssignmentExpression extends g.Expression{constructor(e,t,n,r){super(e),this.operator=t,this.left=n,this.right=r,this.isInitExpr=!1}codegen(e){if("="!==this.operator){const e=this.operator.split("=")[0];this.operator="=",this.right=new y.BinaryExpression(this.location,e,this.left,this.right)}const t=this.left.deduceType(e),n=this.right.deduceType(e);if(t instanceof a.ClassType){const r=t.body.fullName+"::#=";if(d.isFunctionExists(e,r,[n],t))return new m.CallExpression(this.location,new h.MemberExpression(this.location,this.left,!1,_.Identifier.fromString(this.location,"#=")),[this.right]).codegen(e);if(n.equals(t)){const n=t.length;return new m.CallExpression(this.location,_.Identifier.fromString(this.location,"::memcpy"),[new x.UnaryExpression(this.location,"&",this.left),new x.UnaryExpression(this.location,"&",this.right),new w.IntegerConstant(this.location,10,i.fromInt(n),n.toString(),null)]).codegen(e)}{const n=t.body.fullName+"::#"+t.body.shortName,r=_.Identifier.fromString(this.location,n);return new m.CallExpression(this.location,r,[new x.UnaryExpression(this.location,"&",this.left),this.right]).codegen(e)}}let r=this.left.codegen(e);const g=this.right.codegen(e);if(this.isInitExpr&&r.type instanceof u.LeftReferenceType)return this.doReferenceBinding(e,g),r;if(!((r=new f.TypeConverter(r).removeReference(e)).expr instanceof p.WAddressHolder))throw new o.SyntaxError("could not assign to a right value",this);if(r.type instanceof u.ArrayType)throw new o.SyntaxError("unsupport array assignment",this);if(this.isInitExpr&&this.left instanceof _.Identifier&&r.expr.type===s.AddressType.MEMORY_DATA){if(g.expr instanceof l.WConst&&(g.type instanceof c.IntegerType||g.type instanceof c.FloatingType))return v(e,r.type,g.type,r.expr.place,g.expr.constant),r;if(g.expr instanceof l.WGetAddress&&g.expr.form===l.WMemoryLocation.DATA&&g.type.equals(C)){if(!r.type.equals(T)&&!r.type.equals(C))throw new o.SyntaxError(`unsupport init from ${r.type} to ${g.type}`,this);return e.memory.data.setUint32(r.expr.place,g.expr.offset,!0),r}}const E=new f.TypeConverter(g).tryConvertTo(e,r.type).expr;return e.submitStatement(r.expr.createStore(e,r.type,E)),r}deduceType(e){return this.left.deduceType(e)}doReferenceBinding(e,t){if(!(this.left instanceof _.Identifier))throw new o.InternalError("you can only bind to an identifer");const n=this.left.getLookupName(e),r=e.scopeManager.lookup(n);if(!(r instanceof s.Variable&&r.type instanceof u.LeftReferenceType))throw new o.InternalError("you can only bind to an reference");const i=new p.WAddressHolder(r.location,r.addressType,this.location);if(t.type instanceof u.LeftReferenceType){const n=t.type.elementType,s=r.type.elementType;if(n instanceof a.ClassType&&s instanceof a.ClassType){if(!n.body.isSubClassOf(s.body))throw new o.InternalError(`could not convert from ${t.type} to ${r.type}`)}else if(!t.type.elementType.equals(r.type.elementType))throw new o.InternalError(`could not convert from ${t.type} to ${r.type}`);if(!(t.expr instanceof p.WAddressHolder))throw new o.InternalError("you could only bind to a left value");e.submitStatement(i.createStore(e,c.PrimitiveTypes.uint32,t.expr.createLoadAddress(e)))}else{const n=t.type,s=r.type.elementType;if(n instanceof a.ClassType&&s instanceof a.ClassType){if(!n.body.isSubClassOf(s.body))throw new o.InternalError(`could not convert from ${t.type} to ${r.type}`)}else if(!t.type.equals(r.type.elementType))throw new o.InternalError(`could not convert from ${t.type} to ${r.type}`);if(!(t.expr instanceof p.WAddressHolder))throw new o.InternalError("you could only bind from a left value");e.submitStatement(i.createStore(e,c.PrimitiveTypes.uint32,t.expr.createLoadAddress(e)))}}},n.doVarInit=v},{long:"YvD4","../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../function/call_expression":"sKlM","../overload":"sV6L","../type_converter":"vGpT","./binary_expression":"sfIM","./expression":"TaUa","./identifier":"5fRK","./integer_constant":"aB1x","./unary_expression":"6Etb"}],vGpT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/symbol"),o=e("../type/class_type"),s=e("../type/compound_type"),a=e("../type/function_type"),u=e("../type/primitive_type"),c=e("../wasm"),l=e("./address"),p=e("./class/constructor_call_expression"),h=e("./expression/anonymous_expression"),m=e("./expression/assignment_expression"),d=e("./expression/expression"),f=e("./expression/identifier"),y=e("./function/call_expression"),g=e("./overload");class TypeConverter{static fromType(e){return new TypeConverter({type:e,expr:c.WEmptyExpression.instance})}constructor(e){this.type=e.type,this.expr=e.expr}removeReference(e){if(this.type instanceof s.LeftReferenceType){if(!(this.expr instanceof l.WAddressHolder))throw new r.InternalError("reference must be reference");return{type:this.type.elementType,expr:new l.WAddressHolder(this.expr.createLoadAddress(e),i.AddressType.RVALUE,this.expr.location)}}return{type:this.type,expr:this.expr}}promote(e){let t=this.type;if(t instanceof o.ClassType)throw new r.SyntaxError("class type could not be promote",this.expr);return t instanceof s.ArrayType&&(t=new s.PointerType(t.elementType)),t instanceof u.IntegerType&&t.length<4&&(t=u.PrimitiveTypes.int32),t instanceof u.FloatType&&(t=u.PrimitiveTypes.double),t instanceof s.LeftReferenceType&&(t=t.elementType),this.tryConvertTo(e,t,!1)}tryConvertTo(e,t,n=!0,i=!1){const o=this.convertTo(e,t,i,n);if(!o)throw new r.SyntaxError(`cannot convert from ${this.type.toString()}`+` to ${t.toString()}`,this.expr);return{type:t,expr:o}}convertByConstructor(e,t,n,r){try{const i=new p.ConstructorCallExpression(r.location,f.Identifier.fromString(r.location,t.body.fullName,!0),[new h.AnonymousExpression(r.location,{expr:r,type:n})]);if(this.expr instanceof c.WEmptyExpression)return i.deduceType(e),this.expr;{const t=i.codegen(e);return t.expr instanceof l.WAddressHolder&&(t.expr=t.expr.createLoad(e,t.type)),t.expr}}catch(e){return null}}convertByOverload(e,t,n,r){try{const i=f.Identifier.fromString(r.location,n.body.fullName+"::#"+t.toMangledName());if(t instanceof o.ClassType){if(r instanceof c.WEmptyExpression){const o=new h.AnonymousExpression(r.location,{type:t,expr:c.WEmptyExpression.instance});return new y.CallExpression(r.location,i,[o,new h.AnonymousExpression(r.location,{expr:r,type:n})]).deduceType(e),this.expr}{const o=f.Identifier.allocTmpVar(e,t,r),s=new y.CallExpression(r.location,i,[o,new h.AnonymousExpression(r.location,{expr:r,type:n})]);d.recycleExpressionResult(e,s.codegen(e));const a=o.codegen(e);return a.expr instanceof l.WAddressHolder&&(a.expr=a.expr.createLoad(e,a.type)),a.expr}}{const t=new y.CallExpression(r.location,i,[new h.AnonymousExpression(r.location,{expr:r,type:n})]);if(r instanceof c.WEmptyExpression)return t.deduceType(e),this.expr;{const n=t.codegen(e);return n.expr instanceof l.WAddressHolder&&(n.expr=n.expr.createLoad(e,n.type)),n.expr}}}catch(e){return null}}toRValue(e){let t=this.type;return t instanceof s.LeftReferenceType&&(t=t.elementType),t instanceof s.ArrayType&&(t=new s.PointerType(t.elementType)),this.tryConvertTo(e,t,!0,!1)}convertTo(e,t,n,i){let p=this.type,y=this.expr;p instanceof s.ArrayType&&(p=new s.PointerType(p.elementType),y instanceof l.WAddressHolder&&(y=y.createLoadAddress(e)));const _=!i&&t instanceof s.LeftReferenceType;if(t instanceof s.ReferenceType&&(p.equals(t.elementType)||t.elementType instanceof u.IntegerType&&p instanceof u.IntegerType)){if(y instanceof l.WAddressHolder)return y.createLoadAddress(e);if(t.elementType.isConst){const n=f.Identifier.allocTmpVar(e,u.PrimitiveTypes.int32,y),r=new m.AssignmentExpression(y.location,"=",n,new h.AnonymousExpression(y.location,{expr:y,type:t.elementType})).codegen(e);d.recycleExpressionResult(e,r);const{expr:i}=n.codegen(e);return i.createLoadAddress(e)}throw new r.SyntaxError("you could not convert a right value to reference",this.expr)}if(t instanceof o.ClassType){const n=this.convertByConstructor(e,t,p,y);if(n)return n}if(y instanceof l.WAddressHolder)if(p instanceof s.LeftReferenceType)_?y=y.createLoadAddress(e):(p=p.elementType)instanceof s.ArrayType?(p=new s.PointerType(p.elementType),y=y.createLoadAddress(e)):y=y.createLoad(e,p);else{if(!(p instanceof u.ArithmeticType||p instanceof s.PointerType))return console.log("FAIL at WAddressHolder"),null;_?(p=new s.LeftReferenceType(p),y=y.createLoadAddress(e)):y=y.createLoad(e,p)}y instanceof c.WEmptyExpression&&(p instanceof s.LeftReferenceType?_||(p=p.elementType)instanceof s.ArrayType&&(p=new s.PointerType(p.elementType)):(p instanceof u.ArithmeticType||p instanceof s.PointerType)&&_&&(p=new s.LeftReferenceType(p)));const w=(y=y.fold())instanceof c.WConst&&"0"===y.constant;if(p instanceof u.ArithmeticType){if(t instanceof u.ArithmeticType){const e=p.toWType(),n=t.toWType(),r=c.getTypeConvertOpe(e,n);return null!==r?new c.WCovertOperation(e,n,y,r,y.location):y}if(t instanceof s.PointerType&&p instanceof u.IntegerType&&(n||w))return y}else if(p instanceof s.PointerType){if(t instanceof s.PointerType){if(n)return y;const e=t.elementType,r=p.elementType;return e.equals(u.PrimitiveTypes.void)||r.equals(e)?y:e instanceof o.ClassType&&r instanceof o.ClassType&&r.body.isSubClassOf(e.body)?y:null}if(t instanceof u.IntegerType&&n)return y}else if(p instanceof s.LeftReferenceType){if(t instanceof s.LeftReferenceType&&t.equals(p))return y}else if(p instanceof a.UnresolvedFunctionOverloadType){if(t instanceof s.PointerType&&t.elementType instanceof a.FunctionType){const n=g.doFunctionOverloadResolution(e,p.functionLookupResult,t.elementType.parameterTypes,y);return new c.WGetFunctionAddress(n.fullName,y.location)}}else if(p instanceof o.ClassType)return this.convertByOverload(e,t,p,y);return console.log("FAIL at Final"),null}}n.TypeConverter=TypeConverter,n.isCompatWith=function(e,t,n){return!!n.equals(t)||(n instanceof o.ClassType&&t instanceof o.ClassType?n.body.isSubClassOf(t.body):null!==new TypeConverter({type:n,expr:c.WEmptyExpression.instance}).convertTo(e,t,!1,!1))}},{"../common/error":"nOPH","../common/symbol":"HcQt","../type/class_type":"vaEy","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","../wasm":"Jo9c","./address":"JsMC","./class/constructor_call_expression":"DcaS","./expression/anonymous_expression":"/aCp","./expression/assignment_expression":"Laai","./expression/expression":"TaUa","./expression/identifier":"5fRK","./function/call_expression":"sKlM","./overload":"sV6L"}],"22up":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/class_type"),i=e("../class/member_expression"),o=e("../function/call_expression"),s=e("./binary_expression"),a=e("./expression"),u=e("./identifier"),c=e("./unary_expression");n.SubscriptExpression=class SubscriptExpression extends a.Expression{constructor(e,t,n){super(e),this.array=t,this.subscript=n,this.unaryExpr=new c.UnaryExpression(this.location,"*",new s.BinaryExpression(this.location,"+",this.array,this.subscript))}codegen(e){const t=this.array.deduceType(e);return t instanceof r.ClassType&&null!=e.scopeManager.lookup(t.body.fullName+"::#[]")?new o.CallExpression(this.location,new i.MemberExpression(this.location,this.array,!1,u.Identifier.fromString(this.location,"#[]")),[this.subscript]).codegen(e):this.unaryExpr.codegen(e)}deduceType(e){const t=this.array.deduceType(e);return t instanceof r.ClassType&&null!=e.scopeManager.lookup(t.body.fullName+"::#[]")?new o.CallExpression(this.location,new i.MemberExpression(this.location,this.array,!1,u.Identifier.fromString(this.location,"#[]")),[this.subscript]).deduceType(e):this.unaryExpr.deduceType(e)}}},{"../../type/class_type":"vaEy","../class/member_expression":"5MB0","../function/call_expression":"sKlM","./binary_expression":"sfIM","./expression":"TaUa","./identifier":"5fRK","./unary_expression":"6Etb"}],"6Etb":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type/class_type"),s=e("../../type/compound_type"),a=e("../../type/primitive_type"),u=e("../../wasm"),c=e("../address"),l=e("../class/member_expression"),p=e("../function/call_expression"),h=e("../type_converter"),m=e("./assignment_expression"),d=e("./binary_expression"),f=e("./expression"),y=e("./identifier"),g=e("./integer_constant"),_=e("./subscript_expression");class UnaryExpression extends f.Expression{constructor(e,t,n){super(e),this.operator=t,this.operand=n}codegen(e){if("sizeof"===this.operator)return{type:a.PrimitiveTypes.uint32,expr:new u.WConst(u.WType.u32,this.operand.deduceType(e).length.toString(),this.location)};const t=this.operand.deduceType(e);if(t instanceof o.ClassType){if(null!=e.scopeManager.lookup(t.body.fullName+"::#"+this.operator))return new p.CallExpression(this.location,new l.MemberExpression(this.location,this.operand,!1,y.Identifier.fromString(this.location,"#"+this.operator)),[]).codegen(e)}if("++"===this.operator||"--"===this.operator)return new m.AssignmentExpression(this.location,"=",this.operand,new d.BinaryExpression(this.location,this.operator.charAt(0),this.operand,g.IntegerConstant.OneConstant)).codegen(e);if("&"===this.operator){if(this.operand instanceof _.SubscriptExpression)return new d.BinaryExpression(this.location,"+",this.operand.array,this.operand.subscript).codegen(e);if(this.operand instanceof UnaryExpression&&"*"===this.operand.operator)return this.operand.operand.codegen(e)}let n=this.operand.codegen(e);if("*"===this.operator){if((n=new h.TypeConverter(n).toRValue(e)).type instanceof s.PointerType)return{type:new s.LeftReferenceType(n.type.elementType),expr:new c.WAddressHolder(n.expr,i.AddressType.RVALUE,this.location)};throw new r.SyntaxError(`you could not apply * on ${n.type.toString()} `,this)}if("&"===this.operator){if(n.type instanceof s.ArrayType)return{type:new s.PointerType(n.type.elementType),expr:n.expr};if(!(n.expr instanceof c.WAddressHolder))throw new r.SyntaxError("you could not get address of a right value ",this);return n.type instanceof s.ArrayType&&(n.type=n.type.elementType),{type:new s.PointerType(n.type),expr:n.expr.createLoadAddress(e)}}if("+"===this.operator)return new h.TypeConverter(this.operand.codegen(e)).toRValue(e);if("-"===this.operator)return new d.BinaryExpression(this.location,"-",g.IntegerConstant.ZeroConstant,this.operand).codegen(e);if("!"===this.operator){const t=new h.TypeConverter(this.operand.codegen(e)).tryConvertTo(e,a.PrimitiveTypes.int32).expr;return{type:a.PrimitiveTypes.int32,expr:new u.WUnaryOperation(u.I32Unary.eqz,t,this.location)}}if("~"===this.operator)return new d.BinaryExpression(this.location,"^",g.IntegerConstant.NegOneConstant,this.operand).codegen(e);throw new r.InternalError(`no_impl at unary ope=${this.operator}`)}deduceType(e){if("sizeof"===this.operator)return a.PrimitiveTypes.uint32;if("++"===this.operator||"--"===this.operator)return new d.BinaryExpression(this.location,this.operator.charAt(0),this.operand,g.IntegerConstant.OneConstant).deduceType(e);const t=this.operand.deduceType(e);if(t instanceof o.ClassType){if(null!=e.scopeManager.lookup(t.body.fullName+"::#"+this.operator))return new p.CallExpression(this.location,new l.MemberExpression(this.location,this.operand,!1,y.Identifier.fromString(this.location,"#"+this.operator)),[]).deduceType(e)}const n=h.TypeConverter.fromType(t).toRValue(e).type;if("*"===this.operator){if(n instanceof s.PointerType||n instanceof s.ArrayType)return n.elementType;if(n instanceof s.LeftReferenceType&&(n.elementType instanceof s.PointerType||n.elementType instanceof s.ArrayType))return n.elementType.elementType;throw new r.TypeError(`could not apply * on ${n.toString()}`,this)}if("&"===this.operator)return new s.PointerType(n);if("!"===this.operator||"~"===this.operator)return a.PrimitiveTypes.int32;if("+"===this.operator||"-"===this.operator)return this.operand.deduceType(e);throw new r.InternalError("no imple at UnaryExpression().deduce")}}n.UnaryExpression=UnaryExpression},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../function/call_expression":"sKlM","../type_converter":"vGpT","./assignment_expression":"Laai","./binary_expression":"sfIM","./expression":"TaUa","./identifier":"5fRK","./integer_constant":"aB1x","./subscript_expression":"22up"}],"5MB0":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type/class_type"),s=e("../../type/compound_type"),a=e("../../type/function_type"),u=e("../../wasm"),c=e("../address"),l=e("../expression/expression"),p=e("../expression/unary_expression"),h=e("../scope");n.MemberExpression=class MemberExpression extends l.Expression{constructor(e,t,n,r){super(e),this.object=t,this.pointed=n,this.member=r,this.forceDynamic=!1}codegen(e){const t=this.member.getPlainName(e),n=this.pointed?new p.UnaryExpression(this.location,"*",this.object).codegen(e):this.object.codegen(e);let l=this.pointed;if(n.type instanceof s.ReferenceType&&(n.type=n.type.elementType,l=!0),!(n.expr instanceof c.WAddressHolder))throw new r.InternalError("unsupport rvalue of member expression");if(!(n.type instanceof o.ClassType))throw new r.SyntaxError("only struct/class could be get member",this);const m=n.type.body.getMember(e,t);if(null===m)throw new r.SyntaxError(`name ${this.member.getLookupName(e)} is not on class `+`${n.type.body.shortName}`,this);return m instanceof i.Variable?{type:m.type,expr:c.WAddressHolder.fromVariable(e,m,this)}:m instanceof h.FunctionLookUpResult?(m.instance=n.expr,m.instanceType=n.type,l&&(t.includes("~")?m.isDynamicCall=this.forceDynamic:m.isDynamicCall=!0),{type:new a.UnresolvedFunctionOverloadType(m),expr:new u.WConst(u.WType.any,"0",this.location)}):{type:m.type,expr:n.expr.makeOffset(m.startOffset)}}deduceType(e){const t=this.member.getPlainName(e),n=this.pointed?new p.UnaryExpression(this.location,"*",this.object).deduceType(e):this.object.deduceType(e),u=n instanceof s.ReferenceType;let c=n;if(c instanceof s.LeftReferenceType&&(c=c.elementType),!(c instanceof o.ClassType))throw new r.SyntaxError("only struct/class could be get member",this);const l=c.body.getMember(e,t);if(null===l)throw new r.SyntaxError(`name ${this.member.getLookupName(e)} is not on`+`class ${c.body.shortName}`,this);return l instanceof i.Variable?l.type:l instanceof h.FunctionLookUpResult?(l.instanceType=c,(this.pointed||u)&&(t.includes("~")?l.isDynamicCall=this.forceDynamic:l.isDynamicCall=!0),new a.UnresolvedFunctionOverloadType(l)):l.type}}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../wasm":"Jo9c","../address":"JsMC","../expression/expression":"TaUa","../expression/unary_expression":"6Etb","../scope":"y+tL"}],sKlM:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=e("../../common/error"),s=e("../../common/symbol"),a=e("../../type/class_type"),u=e("../../type/compound_type"),c=e("../../type/function_type"),l=e("../../type/primitive_type"),p=e("../../wasm"),h=e("../address"),m=e("../class/member_expression"),d=e("../expression/anonymous_expression"),f=e("../expression/expression"),y=e("../expression/identifier"),g=e("../expression/integer_constant"),_=e("../expression/unary_expression"),w=e("../overload"),x=e("../type_converter");class CallExpression extends f.Expression{constructor(e,t,n){super(e),this.callee=t,this.arguments=n}getTargetFunction(e){let t=this.callee.deduceType(e);if(t instanceof a.ClassType&&(this.callee=new m.MemberExpression(this.location,this.callee,!1,y.Identifier.fromString(this.location,"#()")),t=this.callee.deduceType(e)),t instanceof u.PointerType&&t.elementType instanceof c.FunctionType)return t.elementType;if(!(t instanceof c.UnresolvedFunctionOverloadType))throw new o.TypeError("the callee is not function",this);const n=t.functionLookupResult,r=n.functions.filter(e=>e instanceof s.FunctionEntity);let i=0===r.length?null:r[0];if(e.isCpp()&&(i=w.doFunctionOverloadResolution(e,n,this.arguments.map(t=>t.deduceType(e)),this)),null===i)throw new o.SyntaxError(`no matching function for ${n.functions[0].shortName}`,this);return i}generateFunctionBody(e,t,n){const r=t instanceof s.FunctionEntity?t.type:t;let c=0;const l=[...n.map(e=>e.type),...this.arguments.map(t=>t.deduceType(e))];if(r.variableArguments)for(let t=l.length-1;t>r.parameterTypes.length-1;t--){c+=T(x.TypeConverter.fromType(l[t]).promote(e).type.length)}for(let e=r.parameterTypes.length-1;e>=0;e--){let t=r.parameterTypes[e];t instanceof u.ArrayType&&(t=new u.PointerType(t.elementType)),t instanceof a.ClassType?c+=T(t.length):r.variableArguments&&(c+=T(t.length))}e.memory.currentState.stackPtr-=c;const m=[...n,...this.arguments.map(t=>t.codegen(e))];if(e.memory.currentState.stackPtr+=c,t instanceof s.FunctionEntity&&r.parameterTypes.length>m.length)for(let e=m.length;e<r.parameterTypes.length;e++){const n=t.parameterInits[e];if(null===n)throw new o.SyntaxError("function call parameters number mismatch",this);m.push({type:r.parameterTypes[e],expr:new p.WConst(r.parameterTypes[e].toWType(),n,this.location)})}const f=[];let C=e.memory.currentState.stackPtr;if(r.variableArguments)for(let t=m.length-1;t>r.parameterTypes.length-1;t--){const n=new x.TypeConverter(m[t]).promote(e);C-=T(n.type.length),f.push(new p.WFakeExpression(new h.WAddressHolder(C,s.AddressType.GLOBAL_SP,this.location).createStore(e,n.type,n.expr,!0),this.location))}else if(r.parameterTypes.length<this.arguments.length)throw new o.SyntaxError("function call parameters number mismatch",this);for(let t=r.parameterTypes.length-1;t>=0;t--){let n=r.parameterTypes[t];n instanceof u.ArrayType&&(n=new u.PointerType(n.elementType));const o=m[t];if(n instanceof a.ClassType){const t=o.type,r=new u.PointerType(n);C-=T(n.length);const a=new d.AnonymousExpression(this.location,{type:r,expr:new h.WAddressHolder(C,s.AddressType.GLOBAL_SP,this.location).createLoadAddress(e)}),c=new d.AnonymousExpression(this.location,o),l=n.body.fullName+"::#"+n.body.shortName;let p;if(w.isFunctionExists(e,l,[r,t],null))p=new CallExpression(this.location,y.Identifier.fromString(this.location,l),[a,c]).codegen(e);else{const t=n.length;p=new CallExpression(this.location,y.Identifier.fromString(this.location,"::memcpy"),[new _.UnaryExpression(this.location,"&",a),new _.UnaryExpression(this.location,"&",c),new g.IntegerConstant(this.location,10,i.fromInt(t),t.toString(),null)]).codegen(e)}f.push(p.expr)}else{const t=new x.TypeConverter(o).tryConvertTo(e,n,!1,!1).expr;r.variableArguments?(C-=T(n.length),f.push(new p.WFakeExpression(new h.WAddressHolder(C,s.AddressType.GLOBAL_SP,this.location).createStore(e,o.type,t,!0),this.location))):f.push(t)}}f.reverse();const v=[];return 0!==C&&(f.push(new p.WFakeExpression(new p.WSetGlobal(p.WType.u32,"$sp",new p.WBinaryOperation(p.I32Binary.add,new p.WGetGlobal(p.WType.u32,"$sp",this.location),new p.WConst(p.WType.i32,C.toString(),this.location),this.location),this.location),this.location)),v.push(new p.WFakeExpression(new p.WSetGlobal(p.WType.u32,"$sp",new p.WBinaryOperation(p.I32Binary.sub,new p.WGetGlobal(p.WType.u32,"$sp",this.location),new p.WConst(p.WType.i32,C.toString(),this.location),this.location),this.location),this.location))),[f,v]}codegen(e){const t=this.getTargetFunction(e),n=t instanceof s.FunctionEntity?t.type:t,r=this.callee.codegen(e),i=[];let m=null;if(t instanceof s.FunctionEntity&&t.type.isMemberFunction()){if(!(r.type instanceof c.UnresolvedFunctionOverloadType))throw new o.InternalError("callee.type instanceof UnresolvedFunctionOverloadType");const n=r.type.functionLookupResult;if(null===n.instance||null===n.instanceType)throw new o.SyntaxError("call a member function must bind a object",this);if(i.push({expr:n.instance.createLoadAddress(e),type:new u.PointerType(n.instanceType)}),t.type.isVirtual&&n.isDynamicCall){const r=t.type.cppFunctionType===c.CppFunctionType.Destructor?"~":t.shortName.split("@")[0]+"@"+t.type.parameterTypes.slice(1).map(e=>e.toString()).join(","),i=n.instanceType.body.getVCallInfo(r);if(null===i)throw new o.SyntaxError(`${t.shortName} is not a virtual function`,this);const[s,a]=i,u=new p.WLoad(p.WType.i32,new p.WBinaryOperation(p.I32Binary.add,n.instance.createLoadAddress(e),new p.WConst(p.WType.i32,s.toString(),this.location),this.location),p.WMemoryLocation.RAW,this.location);m=new p.WLoad(p.WType.i32,new p.WBinaryOperation(p.I32Binary.add,u,new p.WConst(p.WType.i32,a.toString(),this.location),this.location),p.WMemoryLocation.RAW,this.location)}}const[d,f]=this.generateFunctionBody(e,t,i);let y;if(null!==m)e.requiredWASMFuncTypes.add(n.toWASMEncoding()),y=new p.WCallIndirect(m,n.toWASMEncoding(),d,f,this.location);else if(t instanceof s.FunctionEntity)y=new p.WCall(t.fullName,d,f,this.location);else{const t=new x.TypeConverter(r).tryConvertTo(e,l.PrimitiveTypes.int32,!0,!0);e.requiredWASMFuncTypes.add(n.toWASMEncoding()),y=new p.WCallIndirect(t.expr,n.toWASMEncoding(),d,f,this.location)}return n.returnType instanceof a.ClassType||n.returnType instanceof u.ReferenceType?{type:n.returnType,expr:new h.WAddressHolder(y,s.AddressType.RVALUE,this.location)}:{type:n.returnType,expr:y}}deduceType(e){const t=this.getTargetFunction(e);return t instanceof s.FunctionEntity?t.type.returnType:t.returnType}}function T(e){return e%4==0?e:e+4-e%4}n.CallExpression=CallExpression,n.getInStackSize=T},{long:"YvD4","../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/member_expression":"5MB0","../expression/anonymous_expression":"/aCp","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../overload":"sV6L","../type_converter":"vGpT"}],ef0b:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type/class_type"),s=e("../expression/expression"),a=e("../expression/identifier"),u=e("../function/call_expression"),c=e("./member_expression");function l(e,t,n){const i=t.type;if(!(i instanceof o.ClassType))throw new r.InternalError("triggerDestructor()");const l=i.body.fullName+"::~"+i.body.shortName;null!==e.scopeManager.lookup(l)&&s.recycleExpressionResult(e,new u.CallExpression(n.location,new c.MemberExpression(n.location,a.Identifier.fromString(n.location,t.shortName),!1,a.Identifier.fromString(n.location,"~"+i.body.shortName)),[]).codegen(e))}n.triggerDestructor=l,n.triggerAllDestructor=function(e,t){for(const n of e.scopeManager.currentContext.scope.map.values()){const r=n[0];r instanceof i.Variable&&r.type instanceof o.ClassType&&l(e,r,t)}}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../function/call_expression":"sKlM","./member_expression":"5MB0"}],"0pYg":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node");n.Statement=class Statement extends r.Directive{constructor(e){super(e)}}},{"../../common/node":"PoXi"}],k1ya:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/class_type"),o=e("../../type/compound_type"),s=e("../../type/primitive_type"),a=e("../../wasm"),u=e("../address"),c=e("../class/destructor"),l=e("../statement/statement"),p=e("../type_converter");n.ReturnStatement=class ReturnStatement extends l.Statement{constructor(e,t){super(e),this.argument=t}codegen(e){if(null===e.currentFuncContext.currentFunction)throw new r.SyntaxError("return outside function",this);if(c.triggerAllDestructor(e,this),e.submitStatement(new a.WSetGlobal(a.WType.u32,"$sp",new a.WGetLocal(a.WType.u32,e.currentFuncContext.currentFunction.$sp,this.location),this.location)),null!==this.argument){const t=e.currentFuncContext.currentFunction.type.returnType;if(t.equals(s.PrimitiveTypes.void))throw new r.SyntaxError("return type mismatch",this);let n=this.argument.codegen(e);if(t instanceof i.ClassType||t instanceof o.ReferenceType){if(!((n=new p.TypeConverter(n).removeReference(e)).expr instanceof u.WAddressHolder))throw new r.InternalError("class / ref must be lavlue");e.submitStatement(new a.WReturn(n.expr.createLoadAddress(e),this.location))}else n=new p.TypeConverter(n).tryConvertTo(e,e.currentFuncContext.currentFunction.type.returnType),e.submitStatement(new a.WReturn(n.expr.fold(),this.location))}else{if(!e.currentFuncContext.currentFunction.type.returnType.equals(s.PrimitiveTypes.void))throw new r.SyntaxError("return type mismatch",this);e.submitStatement(new a.WReturn(null,this.location))}}}},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../class/destructor":"ef0b","../statement/statement":"0pYg","../type_converter":"vGpT"}],rsVP:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type"),s=e("../../type/class_type"),a=e("../../type/compound_type"),u=e("../../type/primitive_type"),c=e("../../wasm"),l=e("../expression/integer_constant"),p=e("../scope"),h=e("./call_expression"),m=e("./return_statement");function d(e,t,n){const r=p.getShortName(t.name)+"@"+t.functionType.toMangledName(),o=e.scopeManager.currentContext.scope.fullName+"::"+r;return new i.FunctionEntity(r,o,e.fileName,t.functionType,t.parameterInits,t.isLibCall,n,t.accessControl,e.scopeManager.currentContext.activeScopes)}n.createFunctionEntity=d,n.declareFunction=function(e,t,n){const r=d(e,t,!1);if(t.isLibCall){r.shortName=r.shortName.split("@")[0],r.fullName=r.fullName.split("@")[0];const t=[],i=[];for(let e=r.type.parameterTypes.length-1;e>=0;e--){const t=r.type.parameterTypes[e];t instanceof s.ClassType||t instanceof a.ArrayType||r.type.variableArguments&&e===r.type.parameterTypes.length-1||i.push(t.toWType())}const o=r.type.returnType;o.equals(u.PrimitiveTypes.void)||(o instanceof s.ClassType||o instanceof a.ArrayType?t.push(c.WType.i32):t.push(c.getNativeType(o.toWType()))),e.scopeManager.lookup(r.fullName)||e.imports.push({name:r.fullName,type:new c.WFunctionType(t,i,n.location)})}e.scopeManager.declare(t.name,r,n)},n.defineFunction=function(e,t,n,p,f){if(t.parameterInits.length!==t.parameterNames.length||t.parameterNames.length!==t.functionType.parameterTypes.length)throw new r.SyntaxError("parameter length mismatch",f);const y=d(e,t,!0);e.scopeManager.define(t.name,y,f),e.enterFunction(y),e.scopeManager.activeScopes(p);const g=[],_=[];let w=0;for(let n=y.type.parameterTypes.length-1;n>=0;n--){const o=y.type.parameterTypes[n],a=t.parameterNames[n];if(!a)throw new r.SyntaxError("unnamed parameter",f);(o instanceof s.ClassType||y.type.variableArguments)&&(e.scopeManager.define(a,new i.Variable(a,e.scopeManager.getFullName(a),e.fileName,o,i.AddressType.STACK,w,t.accessControl),f),w+=h.getInStackSize(o.length))}for(let n=0;n<y.type.parameterTypes.length;n++){const a=y.type.parameterTypes[n],u=t.parameterNames[n];if(!u)throw new r.SyntaxError("unnamed parameter",f);a instanceof s.ClassType||y.type.variableArguments||(_.push(a.toWType()),e.scopeManager.define(u,new i.Variable(u,e.scopeManager.getFullName(u),e.fileName,a,i.AddressType.LOCAL,e.memory.allocLocal(a.toWType(),!0),o.AccessControl.Public),f))}const x=y.type.returnType;x.equals(u.PrimitiveTypes.void)||(x instanceof s.ClassType||x instanceof a.ArrayType?g.push(c.WType.i32):g.push(c.getNativeType(x.toWType()))),y.$sp=e.memory.allocLocal(c.WType.u32),e.submitStatement(new c.WSetLocal(c.WType.u32,y.$sp,new c.WGetGlobal(c.WType.u32,"$sp",f.location),f.location));const T=new c.WConst(c.WType.i32,"0",f.location);e.submitStatement(new c.WSetGlobal(c.WType.u32,"$sp",new c.WBinaryOperation(c.I32Binary.add,new c.WGetLocal(c.WType.u32,y.$sp,f.location),T,f.location),f.location)),n.map(t=>t.codegen(e)),T.constant=e.memory.currentState.stackPtr.toString();const C=e.getStatementContainer();if(!y.type.returnType.equals(u.PrimitiveTypes.void)){let t=C;for(;t.length>0&&t[t.length-1]instanceof c.WBlock||t[t.length-1]instanceof c.WIfElseBlock||t[t.length-1]instanceof c.WLoop;){const e=t[t.length-1];if(e instanceof c.WBlock||e instanceof c.WLoop)t=e.body;else{if(!(e instanceof c.WIfElseBlock))throw new r.SyntaxError(`not all path of function contains return in ${y.fullName}`,f);if(null===e.alternative)throw new r.SyntaxError("not all path of function contains return in "+`${y.fullName}`,f);t=e.alternative}}if(0===t.length||!(t[t.length-1]instanceof c.WReturn))throw new r.SyntaxError(`not all path of function contains return in ${y.fullName}`,f);C.length>0&&C[C.length-1]instanceof c.WIfElseBlock&&new m.ReturnStatement(f.location,l.IntegerConstant.ZeroConstant).codegen(e)}const v=e.memory.currentState.localTypes;e.exitFunction(),e.submitFunction(new c.WFunction(y.fullName,t.functionType.toDisplayString(y.shortName),g,_,v,C,f.location))}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../expression/integer_constant":"aB1x","../scope":"y+tL","./call_expression":"sKlM","./return_statement":"k1ya"}],FIFg:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type"),i=e("../type/compound_type"),o=e("../type/function_type"),s=e("../type/primitive_type"),a=e("./function/function");function u(e,t,n,i,s){a.declareFunction(e,{name:t,functionType:new o.FunctionType(n,i,!1),parameterInits:i.map(e=>null),parameterNames:i.map(e=>""),accessControl:r.AccessControl.Public,isLibCall:!0},s)}n.codegen=function(e,t){const n=s.PrimitiveTypes.void,r=new i.PointerType(s.PrimitiveTypes.void);t.isCpp()&&(u(t,"memcpy",n,[r,r,s.PrimitiveTypes.uint32],e),u(t,"memset",n,[r,s.PrimitiveTypes.int32,s.PrimitiveTypes.uint32],e),u(t,"malloc",r,[s.PrimitiveTypes.uint32],e),u(t,"malloc_array",r,[s.PrimitiveTypes.uint32,s.PrimitiveTypes.uint32],e),u(t,"free",n,[r],e)),e.codegen(t)}},{"../type":"Rt13","../type/compound_type":"ZWBU","../type/function_type":"VPTZ","../type/primitive_type":"HxYe","./function/function":"rsVP"}],KRc9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MemoryLayout=class MemoryLayout{constructor(e){this.dataPtr=0,this.bssPtr=0,this.dataBuffer=new ArrayBuffer(e),this.data=new DataView(this.dataBuffer),this.stringMap=new Map,this.MEMORY_$BP=0,this.MEMORY_$SP=0,this.currentState={stackPtr:0,localPtr:0,localTypes:[]},this.states=[]}allocData(e){const t=this.dataPtr;return this.dataPtr+=e,t}allocBss(e){const t=this.bssPtr;return this.bssPtr+=e,t}allocLocal(e,t=!1){return t||this.currentState.localTypes.push(e),this.currentState.localPtr++}allocStack(e){return e%4!=0&&(e+=4-e%4),this.currentState.stackPtr-=e,this.currentState.stackPtr}allocString(e){const t=this.stringMap.get(e);if(void 0!==t)return t;const n=this.allocData(e.length+1);return this.setDataString(n,e),this.stringMap.set(e,n),n}setDataString(e,t){for(let n=0;n<t.length;n++)this.data.setUint8(e+n,t.charCodeAt(n));this.data.setUint8(e+t.length,0)}enterFunction(){this.states.push(this.currentState),this.currentState={stackPtr:0,localPtr:0,localTypes:[]}}exitFunction(){this.currentState=this.states.pop()}}},{}],cKzO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("./class/destructor"),o=e("./memory"),s=e("./scope");n.CompileContext=class CompileContext{constructor(e,t={},n,r){this.scopeManager=new s.ScopeManager(!!t.isCpp),this.functionMap=new Map,this.memory=new o.MemoryLayout(1e3),this.options=t,this.fileName=e,this.sourceMap=r,this.source=n,this.functions=[],this.imports=[],this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:null},this.funcContexts=[],this.requiredWASMFuncTypes=new Set}isCpp(){return!!this.options.isCpp}enterFunction(e){this.functionMap.set(e.shortName,e),this.scopeManager.enterScope(e.fullName),this.memory.enterFunction(),this.funcContexts.push(this.currentFuncContext),this.currentFuncContext={statementContainer:[],switchContext:null,breakStack:[],continueStack:[],blockLevel:0,currentFunction:e}}exitFunction(){if(this.funcContexts.length<=0)throw new r.InternalError("this.currentFunction==null");this.memory.exitFunction(),this.scopeManager.exitScope(),this.currentFuncContext=this.funcContexts.pop()}enterScope(){this.scopeManager.enterUnnamedScope(!1)}exitScope(e){i.triggerAllDestructor(this,e),this.scopeManager.exitScope()}setStatementContainer(e){this.currentFuncContext.statementContainer=e}getStatementContainer(){return this.currentFuncContext.statementContainer}submitStatement(e){this.currentFuncContext.statementContainer.push(e)}submitFunction(e){this.functions.push(e)}raiseWarning(e,t){console.log("[Warning]: "+e)}toCompiledObject(){return{fileName:this.fileName,dataSize:this.memory.dataPtr,functions:this.functions,imports:this.imports,exports:[],data:this.memory.dataBuffer,globalStatements:this.currentFuncContext.statementContainer,source:this.source,sourceMap:this.sourceMap,requiredWASMFuncTypes:this.requiredWASMFuncTypes,scope:this.scopeManager.root}}}},{"../common/error":"nOPH","./class/destructor":"ef0b","./memory":"KRc9","./scope":"y+tL"}],uhSO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Headers=new Map([["assert.h","#ifndef _ASSERT_H\n#define _ASSERT_H\n\n#ifdef NDEBUG\n#define assert(EX)\n#else\n#define assert(EX) (void)((EX) || (__assert (#EX, __FILE__, __LINE__),0))\n#endif\n\nvoid __assert (const char *msg, const char *file, int line);\n\n#endif"],["ctype.h","#ifndef _CTYPE_H\n#define _CTYPE_H\n\n__libcall int isalnum(int);\n__libcall int isalpha(int);\n__libcall int isblank(int);\n__libcall int iscntrl(int);\n__libcall int isdigit(int);\n__libcall int isgraph(int);\n__libcall int islower(int);\n__libcall int isprint(int);\n__libcall int ispunct(int);\n__libcall int isspace(int);\n__libcall int isupper(int);\n__libcall int isxdigit(int);\n__libcall int tolower(int);\n__libcall int toupper(int);\n\n#undef"],["limit.h","#ifndef _LIMIT_H\n#define _LIMIT_H\n\n#define CHAR_BIT 8\n#define SCHAR_MIN -128\n#define SCHAR_MAX 127\n#define UCHAR_MAX 255\n#define CHAR_MIN 0\n#define CHAR_MAX 255\n#define MB_LEN_MAX 1\n#define SHRT_MIN  -32768\n#define SHRT_MAX  32767\n#define USHRT_MAX 65535\n#define INT_MIN  -2147483648\n#define INT_MAX  2147483647\n#define UINT_MAX 4294967296U\n#define LONG_MIN -2147483648\n#define LONG_MAX 2147483647\n#define ULONG_MAX 4294967296U\n#define LLONG_MIN -9223372036854775807LL\n#define LLONG_MAX 9223372036854775808LL\n#define ULLONG_MAX 18446744073709551616\n\n#endif"],["math.h","#ifndef _MATH_H\n#define _MATH_H\n\n__libcall double cos(double);\n__libcall double sin(double);\n__libcall double tan(double);\n__libcall double acos(double);\n__libcall double asin(double);\n__libcall double atan(double);\n__libcall double atan2(double, double);\n\n__libcall double cosh(double);\n__libcall double sinh(double);\n__libcall double tanh(double);\n__libcall double acosh(double);\n__libcall double asinh(double);\n__libcall double atanh(double);\n\n__libcall double cbrt(double);\n__libcall double ceil(double);\n__libcall double exp(double);\n__libcall double expm1(double);\n__libcall double fabs(double);\n__libcall double floor(double);\n__libcall double fmax(double, double);\n__libcall double fmin(double, double);\n//__libcall double fmod(double, double);\n__libcall double hypot(double, double);\n__libcall double log(double);\n__libcall double log10(double);\n__libcall double log1p(double);\n__libcall double log2(double);\n__libcall double logb(double);\n__libcall double pow(double, double);\n__libcall double round(double);\n__libcall double sinh(double);\n__libcall double sqrt(double);\n__libcall double trunc(double);\n\n#endif"],["stdarg.h","#ifndef _STDARG_H\n#define _STDARG_H\n\ntypedef void* va_list;\n#define va_start(ptr,arg) (ptr) = &(arg) + sizeof(arg) + 4\n#define va_arg(ptr,type) ((ptr) += sizeof(type), *((type *)(ptr - sizeof(type))))\n#define va_end(ptr) (ptr) = 0;\n\n#endif"],["stdio.h","#ifndef _STDIO_H\n#define _STDIO_H\n\n__libcall void dump_stack_info();\n\n\n__libcall int scanf(const char * format, ...);\n__libcall int printf(const char * format, ...);\n__libcall int getchar();\nint puts(const char * str);\n\n#endif"],["stdlib.h","#ifndef _STDLIB_H\n#define _STDLIB_H\n\n__libcall void *malloc(unsigned int num_bytes);\n__libcall void *memset(void * ptr, int ch, unsigned int num_bytes);\n__libcall void free(void * ptr);\n__libcall void srand( unsigned seed ):\n__libcall int rand():\n\n#endif"],["string.h","#ifndef _STRING_H\n#define _STRING_H\n\ntypedef unsigned int size_t;\n__libcall int    memcmp(const void *, const void *, size_t);\n__libcall void*  memcpy(void *, const void *, size_t);\n__libcall void*  memset(void *, int, size_t);\n__libcall void*  memmove(void *, const void *, size_t);\n\n__libcall char*  strcpy(char *, const char *);\n__libcall int    strcmp(const char *, const char *);\n__libcall char*  strcat(char *, const char *);\n__libcall size_t strlen(const char *);\n__libcall char*  strchr(const char *, int);\n__libcall char*  strncat(char *, const char *, size_t);\n__libcall int    strncmp(const char *, const char *, size_t);\n__libcall char*  strncpy(char *, const char *, size_t);\n\n/*\n__libcall void*  memccpy(void *, const void *, int, size_t);\n__libcall void*  memchr(const void *, int, size_t);\n__libcall int    strcoll(const char *, const char *);\n__libcall size_t strcspn(const char *, const char *);\n__libcall char*  strdup(const char *);\n__libcall char*  strerror(int);\n__libcall char*  strpbrk(const char *, const char *);\n__libcall char*  strrchr(const char *, int);\n__libcall size_t strspn(const char *, const char *);\n__libcall char*  strstr(const char *, const char *);\n__libcall char*  strtok(char *, const char *);\n__libcall char*  strtok_r(char *, const char *, char **);\n__libcall size_t strxfrm(char *, const char *, size_t);\n*/\n\n#endif"],["syscall.h","#ifndef _SYSCALL_H\n#define _SYSCALL_H\n\n__libcall int write(unsigned int fd, void * buffer, unsigned int size);\n__libcall int read(unsigned int fd, void * buffer, unsigned int size);\n__libcall void memcpy(void * dst, void * src, unsigned int size);\n__libcall void * malloc(unsigned int size);\n__libcall void free(void * ptr);\n__libcall void * malloc_array(unsigned int element_size, unsigned int length);\n__libcall void __print_stack();\n#endif"],["time.h","#ifndef _TIME_H\n#define _TIME_H\n\n__libcall int time(void * time_ptr);\n\n#endif"]]),n.Impls=new Map([["assert.cpp",'#include <stdio.h>\n\nvoid __assert (const char *msg, const char *file, int line){\n    //printf("assert failed in %s#%d: %s", file, line, msg);\n    //exit(255);\n}']])},{}],Ysx2:[function(e,t,n){"use strict";function r(e){return function(t){return Math[e](t)}}function i(e){return function(t,n){return Math[e](t,n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.abs=r("abs"),n.cos=r("cos"),n.sin=r("sin"),n.tan=r("tan"),n.acos=r("acos"),n.asin=r("asin"),n.atan=r("atan"),n.cosh=r("cosh"),n.sinh=r("sinh"),n.tanh=r("tanh"),n.acosh=r("acosh"),n.asinh=r("asinh"),n.atanh=r("atanh"),n.cbrt=r("cbrt"),n.ceil=r("ceil"),n.exp=r("exp"),n.expm1=r("expm1"),n.fabs=r("abs"),n.floor=r("floor"),n.log=r("log"),n.log10=r("log10"),n.log1p=r("log1p"),n.log2=r("log2"),n.logb=r("logb"),n.round=r("round"),n.sqrt=r("sqrt"),n.trunc=r("trunc"),n.atan2=i("atan2"),n.pow=i("pow"),n.fmax=i("max"),n.fmin=i("min"),n.hypot=i("pow")},{}],DfLT:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});const i=r(e("long")),o=new ArrayBuffer(1e3),s=new DataView(o);function a(){let e=this.sp,t=this.memory.getUint32(e,!0);e+=4;let n=this.memory.getUint8(t),r=0;for(;0!==n;){if(n==="%".charCodeAt(0)){t++;let n=String.fromCharCode(this.memory.getUint8(t)),o=0,a=0,u=!1;if("."===n||n.charCodeAt(0)>="0".charCodeAt(0)&&n.charCodeAt(0)<="9".charCodeAt(0))for(;"."===n||n.charCodeAt(0)>="0".charCodeAt(0)&&n.charCodeAt(0)<="9".charCodeAt(0);)"."===n?u=!0:u?a=10*a+ +n:o=10*o+ +n,t++,n=String.fromCharCode(this.memory.getUint8(t));let c=!1;if("l"===n&&(c=!0,t++,n=String.fromCharCode(this.memory.getUint8(t))),"%"===n)s.setUint8(r,"%".charCodeAt(0)),r++;else if("d"===n||"i"===n||"u"===n||"X"===n||"x"===n||"o"===n||"p"===n||"n"===n){let t;if("u"===n||"X"===n||"x"===n||"o"===n||"p"===n){let r=10;if("X"===n||"x"===n||"p"===n?r=16:"o"===n&&(r=8),c){const n=this.memory.getUint32(e,!0),o=this.memory.getUint32(e+4,!0);t=i.fromBits(n,o).toString(r),e+=8}else t=this.memory.getUint32(e,!0).toString(r),e+=4}else if(c){const n=this.memory.getUint32(e,!0),r=this.memory.getInt32(e+4,!0);t=i.fromBits(n,r).toString(),e+=8}else t=this.memory.getInt32(e,!0).toString(),e+=4;"n"===n&&(t="");for(let e=0;e<t.length;e++)s.setUint8(r,t.charCodeAt(e)),r++}else if("s"===n){let t=this.memory.getInt32(e,!0);e+=4;let n=this.memory.getUint8(t);for(;0!==n;)s.setUint8(r,n),r++,t++,n=this.memory.getUint8(t)}else if("f"===n){let t;if(t=this.memory.getFloat64(e,!0).toString(),e+=8,0!==a){const e=t.split(".");e.length>=2&&(e[1]=e[1].substr(0,a)),t=e.join(".")}for(let e=0;e<t.length;e++)s.setUint8(r,t.charCodeAt(e)),r++}else s.setUint8(r,"%".charCodeAt(0)),r++,s.setUint8(r,n.charCodeAt(0)),r++}else s.setUint8(r,n),r++;t++,n=this.memory.getUint8(t)}return r}n.printf=function(){const e=a.apply(this);return this.files[1].write(o.slice(0,e))},n.sprintf=function(){const e=this.memory.getUint32(this.sp,!0);this.sp+=4;const t=a.apply(this);this.sp-=4;for(let n=0;n<t;n++)this.memory.setUint8(e+n,s.getUint8(n));return t};const u=new ArrayBuffer(10),c=new DataView(u);function l(){return 0===this.files[0].read(u,0,1)?-1:c.getUint8(0)}n.getchar=l;const p="0".charCodeAt(0),h="9".charCodeAt(0),m=" ".charCodeAt(0),d="\t".charCodeAt(0),f="\n".charCodeAt(0),y="-".charCodeAt(0),g=".".charCodeAt(0);n.scanf=function(){let e=0,t=this.sp,n=this.memory.getUint32(t,!0);t+=4;let r=this.memory.getUint8(n);for(;0!==r;){if(r==="%".charCodeAt(0)){n++;let r=String.fromCharCode(this.memory.getUint8(n)),o=!1;if("l"===r&&(o=!0,n++,r=String.fromCharCode(this.memory.getUint8(n))),"d"===r||"i"===r||"u"===r){const n=r;let s=i.fromNumber(0),a=0,u=l.apply(this),c=0;for(;-1!==u&&!(u>=p&&u<=h);)c=u,u=l.apply(this);for(c===y&&(a=1);-1!==u&&u>=p&&u<=h;)s=s.mul(10).add(u-p),u=l.apply(this);const m=this.memory.getInt32(t,!0);t+=4,a&&(s=s.neg()),"u"===n?o?(this.memory.setUint32(m,s.low,!0),this.memory.setUint32(m+4,s.high,!0)):this.memory.setUint32(m,s.toNumber(),!0):o?(this.memory.setInt32(m,s.low,!0),this.memory.setUint32(m+4,s.high,!0)):this.memory.setInt32(m,s.toNumber(),!0),e++}else if("s"===r){let n=this.memory.getInt32(t,!0),r=l.apply(this);for(;-1!==r&&r!==f&&r!==m&&r!==d;)this.memory.setUint8(n++,r),r=l.apply(this);e++}else if("f"===r){let n=0,r=0,i=l.apply(this),s=0;for(;-1!==i&&!(i>=p&&i<=h||i===g);)s=i,i=l.apply(this);s===y&&(r=1);let a=0,u=.1;for(;-1!==i&&(i>=p&&i<=h||!a&&i===g);)i===g?a=1:a?(n+=(i-p)*u,u/=10):n=10*n+i-p,i=l.apply(this);const c=this.memory.getInt32(t,!0);t+=4,r&&(n=-n),o?this.memory.setFloat64(c,n,!0):this.memory.setFloat32(c,n,!0),e++}}n++,r=this.memory.getUint8(n)}return e}},{long:"YvD4"}],IiVC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.memcpy=function(e,t,n){const r=this.memoryUint8Array.slice(t,t+n);return this.memoryUint8Array.set(r,e),e},n.memcmp=function(e,t,n){for(let r=0;r<n;r++){const r=this.memory.getUint8(e+n),i=this.memory.getUint8(t+n);if(r<i)return-1;if(r>i)return 1}return 0},n.memmove=function(e,t,n){throw{}},n.memset=function(e,t,n){const r=255&t;for(let t=0;t<n;t++)this.memory.setUint8(e+t,r);return e},n.strlen=function(e){let t=this.memory.getUint8(e),n=0;for(;0!==t;)e++,n++,t=this.memory.getUint8(e);return n},n.strcpy=function(e,t){let n=e,r=t,i=this.memory.getUint8(r);for(;0!==i;)this.memory.setUint8(n,i),r++,n++,i=this.memory.getUint8(r);return e},n.strcmp=function(e,t){let n=this.memory.getUint8(t),r=this.memory.getUint8(e);for(;r===n&&0!==r;)t++,e++,n=this.memory.getUint8(t),r=this.memory.getUint8(e);return n>r?1:n===r?0:-1},n.strcat=function(e,t){let n=e,r=this.memory.getUint8(n);for(;0!==r;)n++,r=this.memory.getUint8(n);for(r=this.memory.getUint8(t);0!==r;)this.memory.setUint8(n,r),n++,t++,r=this.memory.getUint8(t);return this.memory.setUint8(n,0),e},n.strchr=function(e,t){let n=this.memory.getUint8(e);for(;0!==n;){if(n===t)return e;e++,n=this.memory.getUint8(e)}return 0},n.strncpy=function(e,t,n){let r=0;for(let i=0;i<n;i++){const n=this.memory.getUint8(t+i);0===n&&(r=1),r?this.memory.setUint8(e+i,0):this.memory.setUint8(e+i,n)}return e},n.strncmp=function(e,t,n){for(let e=0;e<n;e++){const n=this.memory.getUint8(t+e),r=this.memory.getUint8(t+e);if(n<r)return-1;if(r>n)return 1}return 0},n.strncat=function(e,t,n){let r=e,i=this.memory.getUint8(r);for(;0!==i;)r++,i=this.memory.getUint8(r);i=this.memory.getUint8(t);for(let e=0;e<n;e++)0===i?this.memory.setUint8(r,0):(this.memory.setUint8(r,i),t++,i=this.memory.getUint8(t)),r++;return this.memory.setUint8(r,0),e}},{}],HM34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r="a".charCodeAt(0),i="A".charCodeAt(0),o="z".charCodeAt(0),s="Z".charCodeAt(0),a="0".charCodeAt(0),u="9".charCodeAt(0),c=" ".charCodeAt(0),l="\t".charCodeAt(0);function p(e){return-1===e?0:+(e>=a&&e<=u)}function h(e){return-1===e?0:+(e>=r&&e<=o)}function m(e){return-1===e?0:+(e>=i&&e<=s)}function d(e){return-1===e?0:+(e>=33||e<=126)}function f(e){return h.call(this,e)||m.call(this,e)}function y(e){return f.call(this,e)||p.call(this,e)}n.isdigit=p,n.islower=h,n.isupper=m,n.isblank=function(e){return-1===e?0:+(e===c||e===l)},n.isspace=function(e){return-1===e?0:+(e===c||e>=9&&e<=13)},n.iscntrl=function(e){return-1===e?0:+(e<=32||127===e)},n.isgraph=d,n.isprint=function(e){return-1===e?0:+(e>=32||e<=126)},n.isalpha=f,n.isalnum=y,n.ispunct=function(e){return d.call(this,e)&&+!y.call(this,e)},n.isxdigit=function(e){return-1===e?-1:p.call(this,e)||+(e>=65&&e<=70)||+(e>=91&&e<=96)},n.toupper=function(e){return-1===e?-1:h.call(this,e)?e-32:e},n.tolower=function(e){return-1===e?-1:m.call(this,e)?e+32:e}},{}],QMgZ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.malloc=function(e){return this.heapAllocator.allocHeap(this,e)},n.free=function(e){return this.heapAllocator.freeHeap(this,e)},n.malloc_array=function(e,t){const n=this.heapAllocator.allocHeap(this,e*t+4);return this.memory.setInt32(n,t,!0),n+4},n.srand=function(e){},n.rand=function(){return parseInt(2147483647*Math.random()+"")}},{}],PyPK:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),n.write=function(e,t,n){return e>=this.files.length?-1:this.files[e].write(this.memory.buffer.slice(t,t+n))},n.read=function(e,t,n){return e>=this.files.length?-1:this.files[e].read(this.memory.buffer,t,n)},n.dump_stack_info=function(){console.log("$sp = "+this.sp)},n.time=function(e){return Math.round((new Date).getTime()/1e3)},n.__print_stack=function(){this.printStack()},r(e("./math")),r(e("./stdio")),r(e("./string")),r(e("./ctype")),r(e("./stdlib"))},{"./math":"Ysx2","./stdio":"DfLT","./string":"IiVC","./ctype":"HM34","./stdlib":"QMgZ"}],bjS5:[function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./library");n.Headers=i.Headers,n.Impls=i.Impls;const o=r(e("./syscall"));n.JsAPIMap=Object.assign({},o)},{"./library":"uhSO","./syscall":"PyPK"}],EoHT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(".."),i=e("../../common/node");function o(e){let t="";for(let n=0;n<e;n++)t+=" ";return t}const s=["RAW","DATA","BSS","EXTERN"];n.dumpWASMJSON=function(e,t){let n="",a=0,u="";for(const c of e.functions){const e=new Map;c.memoryInfo.map(t=>e.set(t[0],[t[1],t[2]]));const l=t.get(c.fileName);let p=c.sourceRange[0]-1;const h=r.WFunctionType.fromEncoding(c.type,i.EmptyLocation);n+=`func ${c.name} (param ${h.parameters.map(e=>r.WType[e])})`,n+=`(ret ${h.returnTypes.map(e=>r.WType[e])}) (\n`,n+=(u=o(a+=1))+`(locals ${c.locals.map(e=>r.WType[e])})\n`;for(let t=0;t<c.codes.length;t++){const i=c.codes[t];if(c.fileName&&l)for(;p<=c.sourceRange[1]&&p<=i[2];)n+="# "+l.source[p++]+"\n";let o=r.OpCodes.get(i[0]);const a=e.get(t+1);a&&(o+=`(${s[a[0]]}, ${a[1]})`),n+=u+`${o} ${i[1]}\n`}if(c.fileName&&l)for(;p<=c.sourceRange[1];)n+="# "+l.source[p++]+"\n";n+=")\n",u=o(a-=1)}return n}},{"..":"Jo9c","../../common/node":"PoXi"}],dGoJ:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/node"),o=e("../wasm"),s=e("../wasm/tool/dumper");n.link=function(e,t,n){const a=[],u=[],c=[],l=[],p=[],h=new Map,m=new Map,d=new Set;for(const e of t)m.set(e.fileName,{source:e.source.split("\n"),sourceMap:e.sourceMap,lastLine:0}),Array.from(e.requiredWASMFuncTypes.keys()).map(e=>d.add(e));const f=[];let y=0;for(const e of t){for(const t of e.functions)t.dataStart=y,t.fileName=e.fileName,/^::main@.*/.test(t.name)&&f.push(t.name),c.push(t);l.push(new o.WDataSegment(y,e.data.slice(0,e.dataSize),i.EmptyLocation));const t=`$init$${e.fileName}`,n=new o.WFunction(t,t,[],[],[],e.globalStatements,i.EmptyLocation);n.dataStart=y,c.push(n),p.push(t),y+=e.dataSize}let g=y;for(const e of t){for(const t of e.functions)t.bssStart=g;g+=e.dataSize}const _=new o.WFunction("$start","__start",[],[],[],p.map(e=>new o.WCall(e,[],[],i.EmptyLocation)),i.EmptyLocation);c.push(_);for(const e of t)for(const t of e.exports){if(h.get(t.name))throw new r.LinkerError(`duplicated symbol of ${t.name}`);h.set(t.name,t.location)}for(const e of t)for(const t of e.imports)a.includes(t.name)||(a.push(t.name),u.push(new o.WImportFunction("system",t.name,t.type.returnTypes,t.type.parameters,i.EmptyLocation)));const w=t[t.length-1].scope;if(u.push(new o.WImportMemory("system","memory",1,10,i.EmptyLocation)),c.push(new o.WFunction("$get_sp","get_sp",[o.WType.u32],[],[],[new o.WReturn(new o.WGetGlobal(o.WType.u32,"$sp",i.EmptyLocation),i.EmptyLocation)],i.EmptyLocation)),c.push(new o.WFunction("$set_sp","set_sp",[],[o.WType.u32],[],[new o.WSetGlobal(o.WType.u32,"$sp",new o.WGetLocal(o.WType.u32,0,i.EmptyLocation),i.EmptyLocation)],i.EmptyLocation)),0===f.length)throw new r.LinkerError("no main function found");if(f.length>1)throw new r.LinkerError("multiple main function found");const x=new o.WModule({functions:c,imports:u,exports:["$start",f[0],"$get_sp","$set_sp"],globals:[new o.WGlobalVariable("$sp",o.u32,new o.WConst(o.u32,"1000",i.EmptyLocation),i.EmptyLocation)],data:l,generateMemory:!1,requiredFuncTypes:Array.from(d.keys())},i.EmptyLocation),T=new o.WASMEmitter(h,m);x.optimize(T),x.emit(T);const C=new o.JSONEmitter(h,m);x.optimize(C),x.emit(C);let v="";return n.debug&&(v=s.dumpWASMJSON(C.getJSON(),m)),{fileName:e,heapStart:4*(parseInt((g+1)/4)+1),entry:f[0],sourceMap:m,scope:w,binary:T.toArrayBuffer(),json:C.getJSON(),dumpInfo:v}}},{"../common/error":"nOPH","../common/node":"PoXi","../wasm":"Jo9c","../wasm/tool/dumper":"EoHT"}],Btp4:[function(e,t,n){"use strict";var r={range:function(e,t){var n,r,i=t-e,o=new Array(i);for(n=0,r=e;n<i;n++,r++)o[n]=r;return o},find:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return e[n]}else for(n=0;n<r;n++)if(e[n]===t)return e[n]},indexOf:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return n}else for(n=0;n<r;n++)if(e[n]===t)return n;return-1},contains:function(e,t){return-1!==r.indexOf(e,t)},each:function(e,t){var n,r=e.length;for(n=0;n<r;n++)t(e[n],n)},map:function(e,t){var n,r=e.length,i=new Array(r);for(n=0;n<r;n++)i[n]=t(e[n],n);return i},pluck:function(e,t){return r.map(e,function(e){return e[t]})},every:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(!t(e[n]))return!1;return!0},some:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t(e[n]))return!0;return!1}};t.exports=r},{}],Saqe:[function(e,t,n){"use strict";t.exports={keys:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},values:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},defaults:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(n in e||(e[n]=t[n]))}}},{}],T5R9:[function(e,t,n){"use strict";t.exports={subclass:function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}}},{}],RCHO:[function(e,t,n){"use strict";function r(e,t){this.name="GrammarError",this.message=e,this.location=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}e("./utils/classes").subclass(r,Error),t.exports=r},{"./utils/classes":"T5R9"}],DLue:[function(e,t,n){"use strict";function r(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],n[i.type](i));if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},t.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,i={},o={Grammar:Gr},s=Gr,a=function(e,t){return{type:"grammar",initializer:(n=e,r=0,n?n[r]:null),rules:Mi(t,0),location:Rr()};var n,r},u=function(e){return{type:"initializer",code:e,location:Rr()}},c="=",l=Ur("=",!1),p=function(e,t,n){return{type:"rule",name:e,expression:null!==t?{type:"named",name:t[0],expression:n,location:Rr()}:n,location:Rr()}},h="/",m=Ur("/",!1),d=function(e,t){return t.length>0?{type:"choice",alternatives:Ii(e,t,3),location:Rr()}:e},f=function(e,t){return null!==t?{type:"action",expression:e,code:t[1],location:Rr()}:e},y=function(e,t){return t.length>0?{type:"sequence",elements:Ii(e,t,1),location:Rr()}:e},g=":",_=Ur(":",!1),w=function(e,t){return{type:"labeled",label:e,expression:t,location:Rr()}},x=function(e,t){return{type:Ai[e],expression:t,location:Rr()}},T="$",C=Ur("$",!1),v="&",E=Ur("&",!1),A="!",b=Ur("!",!1),S=function(e,t){return{type:bi[t],expression:e,location:Rr()}},F="?",M=Ur("?",!1),I="*",P=Ur("*",!1),L="+",D=Ur("+",!1),B="(",N=Ur("(",!1),O=")",k=Ur(")",!1),W=function(e){return"labeled"===e.type||"sequence"===e.type?{type:"group",expression:e}:e},R=function(e){return{type:"rule_ref",name:e,location:Rr()}},U=function(e,t){return{type:Si[e],code:t,location:Rr()}},$={type:"any"},j=jr("whitespace"),H="\t",z=Ur("\t",!1),q="\v",V=Ur("\v",!1),G="\f",Y=Ur("\f",!1),X=" ",Z=Ur(" ",!1),J="",K=Ur("",!1),Q="\ufeff",ee=Ur("\ufeff",!1),te=/^[\n\r\u2028\u2029]/,ne=$r(["\n","\r","\u2028","\u2029"],!1,!1),re=jr("end of line"),ie="\n",oe=Ur("\n",!1),se="\r\n",ae=Ur("\r\n",!1),ue="\r",ce=Ur("\r",!1),le="\u2028",pe=Ur("\u2028",!1),he="\u2029",me=Ur("\u2029",!1),de=jr("comment"),fe="/*",ye=Ur("/*",!1),ge="*/",_e=Ur("*/",!1),we="//",xe=Ur("//",!1),Te=function(e){return e},Ce=jr("identifier"),ve=function(e,t){return e+t.join("")},Ee="_",Ae=Ur("_",!1),be="\\",Se=Ur("\\",!1),Fe=function(e){return e},Me="",Ie=Ur("",!1),Pe="",Le=Ur("",!1),De=jr("literal"),Be="i",Ne=Ur("i",!1),Oe=function(e,t){return{type:"literal",value:e,ignoreCase:null!==t,location:Rr()}},ke=jr("string"),We='"',Re=Ur('"',!1),Ue=function(e){return e.join("")},$e="'",je=Ur("'",!1),He=function(){return Wr()},ze=jr("character class"),qe="[",Ve=Ur("[",!1),Ge="^",Ye=Ur("^",!1),Xe="]",Ze=Ur("]",!1),Je=function(e,t,n){return{type:"class",parts:Fi(t),inverted:null!==e,ignoreCase:null!==n,location:Rr()}},Ke="-",Qe=Ur("-",!1),et=function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)&&function(e,t){throw t=void 0!==t?t:zr(Dr,Lr),function(e,t){return new r(e,null,null,t)}(e,t)}("Invalid character range: "+Wr()+"."),[e,t]},tt=function(){return""},nt="0",rt=Ur("0",!1),it=function(){return"\0"},ot="b",st=Ur("b",!1),at=function(){return"\b"},ut="f",ct=Ur("f",!1),lt=function(){return"\f"},pt="n",ht=Ur("n",!1),mt=function(){return"\n"},dt="r",ft=Ur("r",!1),yt=function(){return"\r"},gt="t",_t=Ur("t",!1),wt=function(){return"\t"},xt="v",Tt=Ur("v",!1),Ct=function(){return"\v"},vt="x",Et=Ur("x",!1),At="u",bt=Ur("u",!1),St=function(e){return String.fromCharCode(parseInt(e,16))},Ft=/^[0-9]/,Mt=$r([["0","9"]],!1,!1),It=/^[0-9a-f]/i,Pt=$r([["0","9"],["a","f"]],!1,!0),Lt=".",Dt=Ur(".",!1),Bt=function(){return{type:"any",location:Rr()}},Nt=jr("code block"),Ot="{",kt=Ur("{",!1),Wt="}",Rt=Ur("}",!1),Ut=function(e){return e},$t=/^[{}]/,jt=$r(["{","}"],!1,!1),Ht=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,zt=$r([["a","z"],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","",["",""],"","","","","",["",""],"","","","",["",""],["",""],"","","","","","","","","","",["",""],"","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"","","","","",["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],"","","","","","","","","","","",["",""],"","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","","","",["",""],["",""],"","",["",""],"",["",""],"","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","",["",""],"","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),qt=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Vt=$r([["",""],["",""],["",""],"","","","","","",["",""],["",""],"","","","","","","","","","","",["",""],["",""],"",["",""],"","",["",""],["",""],"","","",["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],"","",["",""],"","","","",["",""],["",""],"",["",""]],!1,!1),Gt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Yt=$r(["","","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Xt=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Zt=$r(["","","","",["",""],["",""],["",""],"","",""],!1,!1),Jt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,Kt=$r([["A","Z"],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""],"","","","","","","","","",["",""],"",["",""],["",""],["",""],"",["",""],"","","","","","","","","","","","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],"","",["",""],"",["",""],"","","",["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""]],!1,!1),Qt=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,en=$r(["","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],"","","",["",""],["",""],"","",["",""],"","",["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],"",["",""],["",""],["",""],""],!1,!1),tn=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,nn=$r([["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],"","",["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","",["",""],"","",["",""],"","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],"",["",""],"",["",""],"",["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","","","",["",""],["",""],["",""],"",["",""],"","","","","",["",""],["",""]],!1,!1),rn=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,on=$r([["0","9"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),sn=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,an=$r([["",""],["",""],["",""],"",["",""],["",""],["",""]],!1,!1),un=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,cn=$r(["_",["",""],"",["",""],["",""],""],!1,!1),ln=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,pn=$r([" ","","",["",""],"","",""],!1,!1),hn="break",mn=Ur("break",!1),dn="case",fn=Ur("case",!1),yn="catch",gn=Ur("catch",!1),_n="class",wn=Ur("class",!1),xn="const",Tn=Ur("const",!1),Cn="continue",vn=Ur("continue",!1),En="debugger",An=Ur("debugger",!1),bn="default",Sn=Ur("default",!1),Fn="delete",Mn=Ur("delete",!1),In="do",Pn=Ur("do",!1),Ln="else",Dn=Ur("else",!1),Bn="enum",Nn=Ur("enum",!1),On="export",kn=Ur("export",!1),Wn="extends",Rn=Ur("extends",!1),Un="false",$n=Ur("false",!1),jn="finally",Hn=Ur("finally",!1),zn="for",qn=Ur("for",!1),Vn="function",Gn=Ur("function",!1),Yn="if",Xn=Ur("if",!1),Zn="import",Jn=Ur("import",!1),Kn="instanceof",Qn=Ur("instanceof",!1),er="in",tr=Ur("in",!1),nr="new",rr=Ur("new",!1),ir="null",or=Ur("null",!1),sr="return",ar=Ur("return",!1),ur="super",cr=Ur("super",!1),lr="switch",pr=Ur("switch",!1),hr="this",mr=Ur("this",!1),dr="throw",fr=Ur("throw",!1),yr="true",gr=Ur("true",!1),_r="try",wr=Ur("try",!1),xr="typeof",Tr=Ur("typeof",!1),Cr="var",vr=Ur("var",!1),Er="void",Ar=Ur("void",!1),br="while",Sr=Ur("while",!1),Fr="with",Mr=Ur("with",!1),Ir=";",Pr=Ur(";",!1),Lr=0,Dr=0,Br=[{line:1,column:1}],Nr=0,Or=[],kr=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function Wr(){return e.substring(Dr,Lr)}function Rr(){return zr(Dr,Lr)}function Ur(e,t){return{type:"literal",text:e,ignoreCase:t}}function $r(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function jr(e){return{type:"other",description:e}}function Hr(t){var n,r=Br[t];if(r)return r;for(n=t-1;!Br[n];)n--;for(r={line:(r=Br[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Br[t]=r,r}function zr(e,t){var n=Hr(e),r=Hr(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function qr(e){Lr<Nr||(Lr>Nr&&(Nr=Lr,Or=[]),Or.push(e))}function Vr(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function Gr(){var e,t,n,r,o,s;if(e=Lr,vi()!==i)if(t=Lr,(n=function(){var e,t;return e=Lr,(t=Ci())!==i&&Ei()!==i?(Dr=e,t=u(t),e=t):(Lr=e,e=i),e}())!==i&&(r=vi())!==i?t=n=[n,r]:(Lr=t,t=i),t===i&&(t=null),t!==i){if(n=[],r=Lr,(o=Yr())!==i&&(s=vi())!==i?r=o=[o,s]:(Lr=r,r=i),r!==i)for(;r!==i;)n.push(r),r=Lr,(o=Yr())!==i&&(s=vi())!==i?r=o=[o,s]:(Lr=r,r=i);else n=i;n!==i?(Dr=e,e=a(t,n)):(Lr=e,e=i)}else Lr=e,e=i;else Lr=e,e=i;return e}function Yr(){var t,n,r,o,s,a;return t=Lr,(n=ui())!==i&&vi()!==i?(r=Lr,(o=pi())!==i&&(s=vi())!==i?r=o=[o,s]:(Lr=r,r=i),r===i&&(r=null),r!==i?(61===e.charCodeAt(Lr)?(o=c,Lr++):(o=i,0===kr&&qr(l)),o!==i&&(s=vi())!==i&&(a=Xr())!==i&&Ei()!==i?(Dr=t,t=n=p(n,r,a)):(Lr=t,t=i)):(Lr=t,t=i)):(Lr=t,t=i),t}function Xr(){var t,n,r,o,s,a,u,c;if(t=Lr,(n=Zr())!==i){for(r=[],o=Lr,(s=vi())!==i?(47===e.charCodeAt(Lr)?(a=h,Lr++):(a=i,0===kr&&qr(m)),a!==i&&(u=vi())!==i&&(c=Zr())!==i?o=s=[s,a,u,c]:(Lr=o,o=i)):(Lr=o,o=i);o!==i;)r.push(o),o=Lr,(s=vi())!==i?(47===e.charCodeAt(Lr)?(a=h,Lr++):(a=i,0===kr&&qr(m)),a!==i&&(u=vi())!==i&&(c=Zr())!==i?o=s=[s,a,u,c]:(Lr=o,o=i)):(Lr=o,o=i);r!==i?(Dr=t,t=n=d(n,r)):(Lr=t,t=i)}else Lr=t,t=i;return t}function Zr(){var e,t,n,r,o;return e=Lr,(t=function(){var e,t,n,r,o,s;if(e=Lr,(t=Jr())!==i){for(n=[],r=Lr,(o=vi())!==i&&(s=Jr())!==i?r=o=[o,s]:(Lr=r,r=i);r!==i;)n.push(r),r=Lr,(o=vi())!==i&&(s=Jr())!==i?r=o=[o,s]:(Lr=r,r=i);n!==i?(Dr=e,t=y(t,n),e=t):(Lr=e,e=i)}else Lr=e,e=i;return e}())!==i?(n=Lr,(r=vi())!==i&&(o=Ci())!==i?n=r=[r,o]:(Lr=n,n=i),n===i&&(n=null),n!==i?(Dr=e,e=t=f(t,n)):(Lr=e,e=i)):(Lr=e,e=i),e}function Jr(){var t,n,r,o;return t=Lr,(n=function(){var t,n,r;return t=Lr,n=Lr,kr++,r=function(){var t;return(t=function(){var t;return(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===hn?(n=hn,Lr+=5):(n=i,0===kr&&qr(mn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===dn?(n=dn,Lr+=4):(n=i,0===kr&&qr(fn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===yn?(n=yn,Lr+=5):(n=i,0===kr&&qr(gn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,8)===Cn?(n=Cn,Lr+=8):(n=i,0===kr&&qr(vn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,8)===En?(n=En,Lr+=8):(n=i,0===kr&&qr(An)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,7)===bn?(n=bn,Lr+=7):(n=i,0===kr&&qr(Sn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===Fn?(n=Fn,Lr+=6):(n=i,0===kr&&qr(Mn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,2)===In?(n=In,Lr+=2):(n=i,0===kr&&qr(Pn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===Ln?(n=Ln,Lr+=4):(n=i,0===kr&&qr(Dn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,7)===jn?(n=jn,Lr+=7):(n=i,0===kr&&qr(Hn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,3)===zn?(n=zn,Lr+=3):(n=i,0===kr&&qr(qn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,8)===Vn?(n=Vn,Lr+=8):(n=i,0===kr&&qr(Gn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,2)===Yn?(n=Yn,Lr+=2):(n=i,0===kr&&qr(Xn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,10)===Kn?(n=Kn,Lr+=10):(n=i,0===kr&&qr(Qn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,2)===er?(n=er,Lr+=2):(n=i,0===kr&&qr(tr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,3)===nr?(n=nr,Lr+=3):(n=i,0===kr&&qr(rr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===sr?(n=sr,Lr+=6):(n=i,0===kr&&qr(ar)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===lr?(n=lr,Lr+=6):(n=i,0===kr&&qr(pr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===hr?(n=hr,Lr+=4):(n=i,0===kr&&qr(mr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===dr?(n=dr,Lr+=5):(n=i,0===kr&&qr(fr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,3)===_r?(n=_r,Lr+=3):(n=i,0===kr&&qr(wr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===xr?(n=xr,Lr+=6):(n=i,0===kr&&qr(Tr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,3)===Cr?(n=Cr,Lr+=3):(n=i,0===kr&&qr(vr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===Er?(n=Er,Lr+=4):(n=i,0===kr&&qr(Ar)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===br?(n=br,Lr+=5):(n=i,0===kr&&qr(Sr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===Fr?(n=Fr,Lr+=4):(n=i,0===kr&&qr(Mr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}()),t}())===i&&(t=function(){var t;return(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===_n?(n=_n,Lr+=5):(n=i,0===kr&&qr(wn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===xn?(n=xn,Lr+=5):(n=i,0===kr&&qr(Tn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===Bn?(n=Bn,Lr+=4):(n=i,0===kr&&qr(Nn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===On?(n=On,Lr+=6):(n=i,0===kr&&qr(kn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,7)===Wn?(n=Wn,Lr+=7):(n=i,0===kr&&qr(Rn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,6)===Zn?(n=Zn,Lr+=6):(n=i,0===kr&&qr(Jn)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===ur?(n=ur,Lr+=5):(n=i,0===kr&&qr(cr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}()),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===ir?(n=ir,Lr+=4):(n=i,0===kr&&qr(or)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t;return(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,4)===yr?(n=yr,Lr+=4):(n=i,0===kr&&qr(gr)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r,o;return t=Lr,e.substr(Lr,5)===Un?(n=Un,Lr+=5):(n=i,0===kr&&qr($n)),n!==i?(r=Lr,kr++,o=li(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t}()),t}()),t}(),kr--,r===i?n=void 0:(Lr=n,n=i),n!==i&&(r=ui())!==i?(Dr=t,n=Te(r),t=n):(Lr=t,t=i),t}())!==i&&vi()!==i?(58===e.charCodeAt(Lr)?(r=g,Lr++):(r=i,0===kr&&qr(_)),r!==i&&vi()!==i&&(o=Kr())!==i?(Dr=t,t=n=w(n,o)):(Lr=t,t=i)):(Lr=t,t=i),t===i&&(t=Kr()),t}function Kr(){var t,n,r;return t=Lr,(n=function(){var t;return 36===e.charCodeAt(Lr)?(t=T,Lr++):(t=i,0===kr&&qr(C)),t===i&&(38===e.charCodeAt(Lr)?(t=v,Lr++):(t=i,0===kr&&qr(E)),t===i&&(33===e.charCodeAt(Lr)?(t=A,Lr++):(t=i,0===kr&&qr(b)))),t}())!==i&&vi()!==i&&(r=Qr())!==i?(Dr=t,t=n=x(n,r)):(Lr=t,t=i),t===i&&(t=Qr()),t}function Qr(){var t,n,r;return t=Lr,(n=ei())!==i&&vi()!==i&&(r=function(){var t;return 63===e.charCodeAt(Lr)?(t=F,Lr++):(t=i,0===kr&&qr(M)),t===i&&(42===e.charCodeAt(Lr)?(t=I,Lr++):(t=i,0===kr&&qr(P)),t===i&&(43===e.charCodeAt(Lr)?(t=L,Lr++):(t=i,0===kr&&qr(D)))),t}())!==i?(Dr=t,t=n=S(n,r)):(Lr=t,t=i),t===i&&(t=ei()),t}function ei(){var t,n,r,o;return(t=function(){var t,n,r;return kr++,t=Lr,(n=pi())!==i?(105===e.charCodeAt(Lr)?(r=Be,Lr++):(r=i,0===kr&&qr(Ne)),r===i&&(r=null),r!==i?(Dr=t,n=Oe(n,r),t=n):(Lr=t,t=i)):(Lr=t,t=i),kr--,t===i&&(n=i,0===kr&&qr(De)),t}())===i&&(t=function(){var t,n,r,o,s,a;if(kr++,t=Lr,91===e.charCodeAt(Lr)?(n=qe,Lr++):(n=i,0===kr&&qr(Ve)),n!==i)if(94===e.charCodeAt(Lr)?(r=Ge,Lr++):(r=i,0===kr&&qr(Ye)),r===i&&(r=null),r!==i){for(o=[],(s=di())===i&&(s=fi());s!==i;)o.push(s),(s=di())===i&&(s=fi());o!==i?(93===e.charCodeAt(Lr)?(s=Xe,Lr++):(s=i,0===kr&&qr(Ze)),s!==i?(105===e.charCodeAt(Lr)?(a=Be,Lr++):(a=i,0===kr&&qr(Ne)),a===i&&(a=null),a!==i?(Dr=t,n=Je(r,o,a),t=n):(Lr=t,t=i)):(Lr=t,t=i)):(Lr=t,t=i)}else Lr=t,t=i;else Lr=t,t=i;return kr--,t===i&&(n=i,0===kr&&qr(ze)),t}())===i&&(t=function(){var t,n;return t=Lr,46===e.charCodeAt(Lr)?(n=Lt,Lr++):(n=i,0===kr&&qr(Dt)),n!==i&&(Dr=t,n=Bt()),t=n}())===i&&(t=function(){var t,n,r,o,s,a,u,p;return t=Lr,(n=ui())!==i?(r=Lr,kr++,o=Lr,(s=vi())!==i?(a=Lr,(u=pi())!==i&&(p=vi())!==i?a=u=[u,p]:(Lr=a,a=i),a===i&&(a=null),a!==i?(61===e.charCodeAt(Lr)?(u=c,Lr++):(u=i,0===kr&&qr(l)),u!==i?o=s=[s,a,u]:(Lr=o,o=i)):(Lr=o,o=i)):(Lr=o,o=i),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?(Dr=t,n=R(n),t=n):(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=function(){var t,n,r;return t=Lr,(n=function(){var t;return 38===e.charCodeAt(Lr)?(t=v,Lr++):(t=i,0===kr&&qr(E)),t===i&&(33===e.charCodeAt(Lr)?(t=A,Lr++):(t=i,0===kr&&qr(b))),t}())!==i&&vi()!==i&&(r=Ci())!==i?(Dr=t,n=U(n,r),t=n):(Lr=t,t=i),t}())===i&&(t=Lr,40===e.charCodeAt(Lr)?(n=B,Lr++):(n=i,0===kr&&qr(N)),n!==i&&vi()!==i&&(r=Xr())!==i&&vi()!==i?(41===e.charCodeAt(Lr)?(o=O,Lr++):(o=i,0===kr&&qr(k)),o!==i?(Dr=t,t=n=W(r)):(Lr=t,t=i)):(Lr=t,t=i)),t}function ti(){var t;return e.length>Lr?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr($)),t}function ni(){var t;return kr++,9===e.charCodeAt(Lr)?(t=H,Lr++):(t=i,0===kr&&qr(z)),t===i&&(11===e.charCodeAt(Lr)?(t=q,Lr++):(t=i,0===kr&&qr(V)),t===i&&(12===e.charCodeAt(Lr)?(t=G,Lr++):(t=i,0===kr&&qr(Y)),t===i&&(32===e.charCodeAt(Lr)?(t=X,Lr++):(t=i,0===kr&&qr(Z)),t===i&&(160===e.charCodeAt(Lr)?(t=J,Lr++):(t=i,0===kr&&qr(K)),t===i&&(65279===e.charCodeAt(Lr)?(t=Q,Lr++):(t=i,0===kr&&qr(ee)),t===i&&(t=function(){var t;return ln.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(pn)),t}())))))),kr--,t===i&&0===kr&&qr(j),t}function ri(){var t;return te.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(ne)),t}function ii(){var t;return kr++,10===e.charCodeAt(Lr)?(t=ie,Lr++):(t=i,0===kr&&qr(oe)),t===i&&(e.substr(Lr,2)===se?(t=se,Lr+=2):(t=i,0===kr&&qr(ae)),t===i&&(13===e.charCodeAt(Lr)?(t=ue,Lr++):(t=i,0===kr&&qr(ce)),t===i&&(8232===e.charCodeAt(Lr)?(t=le,Lr++):(t=i,0===kr&&qr(pe)),t===i&&(8233===e.charCodeAt(Lr)?(t=he,Lr++):(t=i,0===kr&&qr(me)))))),kr--,t===i&&0===kr&&qr(re),t}function oi(){var t;return kr++,(t=function(){var t,n,r,o,s,a;if(t=Lr,e.substr(Lr,2)===fe?(n=fe,Lr+=2):(n=i,0===kr&&qr(ye)),n!==i){for(r=[],o=Lr,s=Lr,kr++,e.substr(Lr,2)===ge?(a=ge,Lr+=2):(a=i,0===kr&&qr(_e)),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);o!==i;)r.push(o),o=Lr,s=Lr,kr++,e.substr(Lr,2)===ge?(a=ge,Lr+=2):(a=i,0===kr&&qr(_e)),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);r!==i?(e.substr(Lr,2)===ge?(o=ge,Lr+=2):(o=i,0===kr&&qr(_e)),o!==i?t=n=[n,r,o]:(Lr=t,t=i)):(Lr=t,t=i)}else Lr=t,t=i;return t}())===i&&(t=ai()),kr--,t===i&&0===kr&&qr(de),t}function si(){var t,n,r,o,s,a;if(t=Lr,e.substr(Lr,2)===fe?(n=fe,Lr+=2):(n=i,0===kr&&qr(ye)),n!==i){for(r=[],o=Lr,s=Lr,kr++,e.substr(Lr,2)===ge?(a=ge,Lr+=2):(a=i,0===kr&&qr(_e)),a===i&&(a=ri()),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);o!==i;)r.push(o),o=Lr,s=Lr,kr++,e.substr(Lr,2)===ge?(a=ge,Lr+=2):(a=i,0===kr&&qr(_e)),a===i&&(a=ri()),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);r!==i?(e.substr(Lr,2)===ge?(o=ge,Lr+=2):(o=i,0===kr&&qr(_e)),o!==i?t=n=[n,r,o]:(Lr=t,t=i)):(Lr=t,t=i)}else Lr=t,t=i;return t}function ai(){var t,n,r,o,s,a;if(t=Lr,e.substr(Lr,2)===we?(n=we,Lr+=2):(n=i,0===kr&&qr(xe)),n!==i){for(r=[],o=Lr,s=Lr,kr++,a=ri(),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);o!==i;)r.push(o),o=Lr,s=Lr,kr++,a=ri(),kr--,a===i?s=void 0:(Lr=s,s=i),s!==i&&(a=ti())!==i?o=s=[s,a]:(Lr=o,o=i);r!==i?t=n=[n,r]:(Lr=t,t=i)}else Lr=t,t=i;return t}function ui(){var e,t,n,r;if(kr++,e=Lr,(t=ci())!==i){for(n=[],r=li();r!==i;)n.push(r),r=li();n!==i?(Dr=e,e=t=ve(t,n)):(Lr=e,e=i)}else Lr=e,e=i;return kr--,e===i&&(t=i,0===kr&&qr(Ce)),e}function ci(){var t,n,r;return(t=function(){var t;return(t=function(){var t;return Jt.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Kt)),t}())===i&&(t=function(){var t;return Ht.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(zt)),t}())===i&&(t=function(){var t;return Xt.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Zt)),t}())===i&&(t=function(){var t;return qt.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Vt)),t}())===i&&(t=function(){var t;return Gt.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Yt)),t}())===i&&(t=function(){var t;return sn.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(an)),t}()),t}())===i&&(36===e.charCodeAt(Lr)?(t=T,Lr++):(t=i,0===kr&&qr(C)),t===i&&(95===e.charCodeAt(Lr)?(t=Ee,Lr++):(t=i,0===kr&&qr(Ae)),t===i&&(t=Lr,92===e.charCodeAt(Lr)?(n=be,Lr++):(n=i,0===kr&&qr(Se)),n!==i&&(r=wi())!==i?(Dr=t,t=n=Fe(r)):(Lr=t,t=i)))),t}function li(){var t;return(t=ci())===i&&(t=function(){var t;return(t=function(){var t;return tn.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(nn)),t}())===i&&(t=function(){var t;return Qt.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(en)),t}()),t}())===i&&(t=function(){var t;return rn.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(on)),t}())===i&&(t=function(){var t;return un.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(cn)),t}())===i&&(8204===e.charCodeAt(Lr)?(t=Me,Lr++):(t=i,0===kr&&qr(Ie)),t===i&&(8205===e.charCodeAt(Lr)?(t=Pe,Lr++):(t=i,0===kr&&qr(Le)))),t}function pi(){var t,n,r,o;if(kr++,t=Lr,34===e.charCodeAt(Lr)?(n=We,Lr++):(n=i,0===kr&&qr(Re)),n!==i){for(r=[],o=hi();o!==i;)r.push(o),o=hi();r!==i?(34===e.charCodeAt(Lr)?(o=We,Lr++):(o=i,0===kr&&qr(Re)),o!==i?(Dr=t,t=n=Ue(r)):(Lr=t,t=i)):(Lr=t,t=i)}else Lr=t,t=i;if(t===i)if(t=Lr,39===e.charCodeAt(Lr)?(n=$e,Lr++):(n=i,0===kr&&qr(je)),n!==i){for(r=[],o=mi();o!==i;)r.push(o),o=mi();r!==i?(39===e.charCodeAt(Lr)?(o=$e,Lr++):(o=i,0===kr&&qr(je)),o!==i?(Dr=t,t=n=Ue(r)):(Lr=t,t=i)):(Lr=t,t=i)}else Lr=t,t=i;return kr--,t===i&&(n=i,0===kr&&qr(ke)),t}function hi(){var t,n,r;return t=Lr,n=Lr,kr++,34===e.charCodeAt(Lr)?(r=We,Lr++):(r=i,0===kr&&qr(Re)),r===i&&(92===e.charCodeAt(Lr)?(r=be,Lr++):(r=i,0===kr&&qr(Se)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Lr=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=He()):(Lr=t,t=i),t===i&&(t=Lr,92===e.charCodeAt(Lr)?(n=be,Lr++):(n=i,0===kr&&qr(Se)),n!==i&&(r=gi())!==i?(Dr=t,t=n=Fe(r)):(Lr=t,t=i),t===i&&(t=yi())),t}function mi(){var t,n,r;return t=Lr,n=Lr,kr++,39===e.charCodeAt(Lr)?(r=$e,Lr++):(r=i,0===kr&&qr(je)),r===i&&(92===e.charCodeAt(Lr)?(r=be,Lr++):(r=i,0===kr&&qr(Se)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Lr=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=He()):(Lr=t,t=i),t===i&&(t=Lr,92===e.charCodeAt(Lr)?(n=be,Lr++):(n=i,0===kr&&qr(Se)),n!==i&&(r=gi())!==i?(Dr=t,t=n=Fe(r)):(Lr=t,t=i),t===i&&(t=yi())),t}function di(){var t,n,r,o;return t=Lr,(n=fi())!==i?(45===e.charCodeAt(Lr)?(r=Ke,Lr++):(r=i,0===kr&&qr(Qe)),r!==i&&(o=fi())!==i?(Dr=t,t=n=et(n,o)):(Lr=t,t=i)):(Lr=t,t=i),t}function fi(){var t,n,r;return t=Lr,n=Lr,kr++,93===e.charCodeAt(Lr)?(r=Xe,Lr++):(r=i,0===kr&&qr(Ze)),r===i&&(92===e.charCodeAt(Lr)?(r=be,Lr++):(r=i,0===kr&&qr(Se)),r===i&&(r=ri())),kr--,r===i?n=void 0:(Lr=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,t=n=He()):(Lr=t,t=i),t===i&&(t=Lr,92===e.charCodeAt(Lr)?(n=be,Lr++):(n=i,0===kr&&qr(Se)),n!==i&&(r=gi())!==i?(Dr=t,t=n=Fe(r)):(Lr=t,t=i),t===i&&(t=yi())),t}function yi(){var t,n;return t=Lr,92===e.charCodeAt(Lr)?(n=be,Lr++):(n=i,0===kr&&qr(Se)),n!==i&&ii()!==i?(Dr=t,t=n=tt()):(Lr=t,t=i),t}function gi(){var t,n,r,o;return(t=function(){var t;return(t=_i())===i&&(t=function(){var t,n,r;return t=Lr,n=Lr,kr++,(r=function(){var t;return(t=_i())===i&&(t=xi())===i&&(120===e.charCodeAt(Lr)?(t=vt,Lr++):(t=i,0===kr&&qr(Et)),t===i&&(117===e.charCodeAt(Lr)?(t=At,Lr++):(t=i,0===kr&&qr(bt)))),t}())===i&&(r=ri()),kr--,r===i?n=void 0:(Lr=n,n=i),n!==i&&(r=ti())!==i?(Dr=t,n=He(),t=n):(Lr=t,t=i),t}()),t}())===i&&(t=Lr,48===e.charCodeAt(Lr)?(n=nt,Lr++):(n=i,0===kr&&qr(rt)),n!==i?(r=Lr,kr++,o=xi(),kr--,o===i?r=void 0:(Lr=r,r=i),r!==i?(Dr=t,t=n=it()):(Lr=t,t=i)):(Lr=t,t=i),t===i&&(t=function(){var t,n,r,o,s,a;return t=Lr,120===e.charCodeAt(Lr)?(n=vt,Lr++):(n=i,0===kr&&qr(Et)),n!==i?(r=Lr,o=Lr,(s=Ti())!==i&&(a=Ti())!==i?o=s=[s,a]:(Lr=o,o=i),(r=o!==i?e.substring(r,Lr):o)!==i?(Dr=t,n=St(r),t=n):(Lr=t,t=i)):(Lr=t,t=i),t}())===i&&(t=wi())),t}function _i(){var t,n;return 39===e.charCodeAt(Lr)?(t=$e,Lr++):(t=i,0===kr&&qr(je)),t===i&&(34===e.charCodeAt(Lr)?(t=We,Lr++):(t=i,0===kr&&qr(Re)),t===i&&(92===e.charCodeAt(Lr)?(t=be,Lr++):(t=i,0===kr&&qr(Se)),t===i&&(t=Lr,98===e.charCodeAt(Lr)?(n=ot,Lr++):(n=i,0===kr&&qr(st)),n!==i&&(Dr=t,n=at()),(t=n)===i&&(t=Lr,102===e.charCodeAt(Lr)?(n=ut,Lr++):(n=i,0===kr&&qr(ct)),n!==i&&(Dr=t,n=lt()),(t=n)===i&&(t=Lr,110===e.charCodeAt(Lr)?(n=pt,Lr++):(n=i,0===kr&&qr(ht)),n!==i&&(Dr=t,n=mt()),(t=n)===i&&(t=Lr,114===e.charCodeAt(Lr)?(n=dt,Lr++):(n=i,0===kr&&qr(ft)),n!==i&&(Dr=t,n=yt()),(t=n)===i&&(t=Lr,116===e.charCodeAt(Lr)?(n=gt,Lr++):(n=i,0===kr&&qr(_t)),n!==i&&(Dr=t,n=wt()),(t=n)===i&&(t=Lr,118===e.charCodeAt(Lr)?(n=xt,Lr++):(n=i,0===kr&&qr(Tt)),n!==i&&(Dr=t,n=Ct()),t=n)))))))),t}function wi(){var t,n,r,o,s,a,u,c;return t=Lr,117===e.charCodeAt(Lr)?(n=At,Lr++):(n=i,0===kr&&qr(bt)),n!==i?(r=Lr,o=Lr,(s=Ti())!==i&&(a=Ti())!==i&&(u=Ti())!==i&&(c=Ti())!==i?o=s=[s,a,u,c]:(Lr=o,o=i),(r=o!==i?e.substring(r,Lr):o)!==i?(Dr=t,t=n=St(r)):(Lr=t,t=i)):(Lr=t,t=i),t}function xi(){var t;return Ft.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Mt)),t}function Ti(){var t;return It.test(e.charAt(Lr))?(t=e.charAt(Lr),Lr++):(t=i,0===kr&&qr(Pt)),t}function Ci(){var t,n,r,o;return kr++,t=Lr,123===e.charCodeAt(Lr)?(n=Ot,Lr++):(n=i,0===kr&&qr(kt)),n!==i&&(r=function t(){var n,r,o,s,a,u;if(n=Lr,r=[],o=[],s=Lr,a=Lr,kr++,$t.test(e.charAt(Lr))?(u=e.charAt(Lr),Lr++):(u=i,0===kr&&qr(jt)),kr--,u===i?a=void 0:(Lr=a,a=i),a!==i&&(u=ti())!==i?s=a=[a,u]:(Lr=s,s=i),s!==i)for(;s!==i;)o.push(s),s=Lr,a=Lr,kr++,$t.test(e.charAt(Lr))?(u=e.charAt(Lr),Lr++):(u=i,0===kr&&qr(jt)),kr--,u===i?a=void 0:(Lr=a,a=i),a!==i&&(u=ti())!==i?s=a=[a,u]:(Lr=s,s=i);else o=i;for(o===i&&(o=Lr,123===e.charCodeAt(Lr)?(s=Ot,Lr++):(s=i,0===kr&&qr(kt)),s!==i&&(a=t())!==i?(125===e.charCodeAt(Lr)?(u=Wt,Lr++):(u=i,0===kr&&qr(Rt)),u!==i?o=s=[s,a,u]:(Lr=o,o=i)):(Lr=o,o=i));o!==i;){if(r.push(o),o=[],s=Lr,a=Lr,kr++,$t.test(e.charAt(Lr))?(u=e.charAt(Lr),Lr++):(u=i,0===kr&&qr(jt)),kr--,u===i?a=void 0:(Lr=a,a=i),a!==i&&(u=ti())!==i?s=a=[a,u]:(Lr=s,s=i),s!==i)for(;s!==i;)o.push(s),s=Lr,a=Lr,kr++,$t.test(e.charAt(Lr))?(u=e.charAt(Lr),Lr++):(u=i,0===kr&&qr(jt)),kr--,u===i?a=void 0:(Lr=a,a=i),a!==i&&(u=ti())!==i?s=a=[a,u]:(Lr=s,s=i);else o=i;o===i&&(o=Lr,123===e.charCodeAt(Lr)?(s=Ot,Lr++):(s=i,0===kr&&qr(kt)),s!==i&&(a=t())!==i?(125===e.charCodeAt(Lr)?(u=Wt,Lr++):(u=i,0===kr&&qr(Rt)),u!==i?o=s=[s,a,u]:(Lr=o,o=i)):(Lr=o,o=i))}return n=r!==i?e.substring(n,Lr):r}())!==i?(125===e.charCodeAt(Lr)?(o=Wt,Lr++):(o=i,0===kr&&qr(Rt)),o!==i?(Dr=t,t=n=Ut(r)):(Lr=t,t=i)):(Lr=t,t=i),kr--,t===i&&(n=i,0===kr&&qr(Nt)),t}function vi(){var e,t;for(e=[],(t=ni())===i&&(t=ii())===i&&(t=oi());t!==i;)e.push(t),(t=ni())===i&&(t=ii())===i&&(t=oi());return e}function Ei(){var t,n,r,o;return t=Lr,(n=vi())!==i?(59===e.charCodeAt(Lr)?(r=Ir,Lr++):(r=i,0===kr&&qr(Pr)),r!==i?t=n=[n,r]:(Lr=t,t=i)):(Lr=t,t=i),t===i&&(t=Lr,(n=function(){var e,t;for(e=[],(t=ni())===i&&(t=si());t!==i;)e.push(t),(t=ni())===i&&(t=si());return e}())!==i?((r=ai())===i&&(r=null),r!==i&&(o=ii())!==i?t=n=[n,r,o]:(Lr=t,t=i)):(Lr=t,t=i),t===i&&(t=Lr,(n=vi())!==i&&(r=function(){var t,n;return t=Lr,kr++,e.length>Lr?(n=e.charAt(Lr),Lr++):(n=i,0===kr&&qr($)),kr--,n===i?t=void 0:(Lr=t,t=i),t}())!==i?t=n=[n,r]:(Lr=t,t=i))),t}var Ai={$:"text","&":"simple_and","!":"simple_not"},bi={"?":"optional","*":"zero_or_more","+":"one_or_more"},Si={"&":"semantic_and","!":"semantic_not"};function Fi(e){var t,n=[];for(t=0;t<e.length;t++)""!==e[t]&&n.push(e[t]);return n}function Mi(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n][t];return r}function Ii(e,t,n){return[e].concat(Mi(t,n))}if((n=s())!==i&&Lr===e.length)return n;throw n!==i&&Lr<e.length&&qr({type:"end"}),Vr(Or,Nr<e.length?e.charAt(Nr):null,Nr<e.length?zr(Nr,Nr+1):zr(Nr,Nr))}}},{}],"N/0e":[function(e,t,n){"use strict";var r=e("../utils/objects"),i=e("../utils/arrays"),o={build:function(e){function t(t){return e[t.type].apply(null,arguments)}function n(){}function o(e){var n=Array.prototype.slice.call(arguments,1);t.apply(null,[e.expression].concat(n))}function s(e){return function(n){var r=Array.prototype.slice.call(arguments,1);i.each(n[e],function(e){t.apply(null,[e].concat(r))})}}var a={grammar:function(e){var n=Array.prototype.slice.call(arguments,1);e.initializer&&t.apply(null,[e.initializer].concat(n)),i.each(e.rules,function(e){t.apply(null,[e].concat(n))})},initializer:n,rule:o,named:o,choice:s("alternatives"),action:o,sequence:s("elements"),labeled:o,text:o,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:o,group:o,semantic_and:n,semantic_not:n,rule_ref:n,literal:n,class:n,any:n};return r.defaults(e,a),t}};t.exports=o},{"../utils/objects":"Saqe","../utils/arrays":"Btp4"}],ckuz:[function(e,t,n){"use strict";var r=e("../utils/arrays"),i=e("./visitor"),o={findRule:function(e,t){return r.find(e.rules,function(e){return e.name===t})},indexOfRule:function(e,t){return r.indexOf(e.rules,function(e){return e.name===t})},alwaysConsumesOnSuccess:function(e,t){function n(){return!0}function s(){return!1}function a(e){return u(e.expression)}var u=i.build({rule:a,named:a,choice:function(e){return r.every(e.alternatives,u)},action:a,sequence:function(e){return r.some(e.elements,u)},labeled:a,text:a,simple_and:s,simple_not:s,optional:s,zero_or_more:s,one_or_more:a,group:a,semantic_and:s,semantic_not:s,rule_ref:function(t){return u(o.findRule(e,t.name))},literal:function(e){return""!==e.value},class:n,any:n});return u(t)}};t.exports=o},{"../utils/arrays":"Btp4","./visitor":"N/0e"}],"6Wkb":[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../asts"),o=e("../visitor");t.exports=function(e){o.build({rule_ref:function(t){if(!i.findRule(e,t.name))throw new r('Rule "'+t.name+'" is not defined.',t.location)}})(e)}},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],nPjr:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../visitor");t.exports=function(e){var t={};i.build({rule:function(e){if(t.hasOwnProperty(e.name))throw new r('Rule "'+e.name+'" is already defined at line '+t[e.name].start.line+", column "+t[e.name].start.column+".",e.location);t[e.name]=e.location}})(e)}},{"../../grammar-error":"RCHO","../visitor":"N/0e"}],nn7N:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../../utils/arrays"),o=e("../../utils/objects"),s=e("../visitor");t.exports=function(e){function t(e,t){n(e.expression,o.clone(t))}var n=s.build({rule:function(e){n(e.expression,{})},choice:function(e,t){i.each(e.alternatives,function(e){n(e,o.clone(t))})},action:t,labeled:function(e,t){if(t.hasOwnProperty(e.label))throw new r('Label "'+e.label+'" is already defined at line '+t[e.label].start.line+", column "+t[e.label].start.column+".",e.location);n(e.expression,t),t[e.label]=e.location},text:t,simple_and:t,simple_not:t,optional:t,zero_or_more:t,one_or_more:t,group:t});n(e)}},{"../../grammar-error":"RCHO","../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../visitor":"N/0e"}],"50GR":[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../../grammar-error"),o=e("../asts"),s=e("../visitor");t.exports=function(e){var t=[],n=s.build({rule:function(e){t.push(e.name),n(e.expression),t.pop(e.name)},sequence:function(t){r.every(t.elements,function(t){return n(t),!o.alwaysConsumesOnSuccess(e,t)})},rule_ref:function(s){if(r.contains(t,s.name))throw t.push(s.name),new i("Possible infinite loop when parsing (left recursion: "+t.join(" -> ")+").",s.location);n(o.findRule(e,s.name))}});n(e)}},{"../../utils/arrays":"Btp4","../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],VZe4:[function(e,t,n){"use strict";var r=e("../../grammar-error"),i=e("../asts"),o=e("../visitor");t.exports=function(e){o.build({zero_or_more:function(t){if(!i.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)},one_or_more:function(t){if(!i.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)}})(e)}},{"../../grammar-error":"RCHO","../asts":"ckuz","../visitor":"N/0e"}],E6LJ:[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../visitor");t.exports=function(e,t){var n=[];r.each(e.rules,function(o,s){var a;"rule"===(a=o).type&&"rule_ref"===a.expression.type&&(function(e,t,n){i.build({rule_ref:function(e){e.name===t&&(e.name=n)}})(e)}(e,o.name,o.expression.name),r.contains(t.allowedStartRules,o.name)||n.push(s))}),n.reverse(),r.each(n,function(t){e.rules.splice(t,1)})}},{"../../utils/arrays":"Btp4","../visitor":"N/0e"}],"TA/v":[function(e,t,n){"use strict";t.exports={PUSH:0,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29}},{}],LEGa:[function(e,t,n){"use strict";function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}var i={stringEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+r(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+r(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+r(e)})},regexpClassEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\x0B").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+r(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+r(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+r(e)})}};t.exports=i},{}],"9PmR":[function(e,t,n){"use strict";var r=e("../../utils/arrays"),i=e("../../utils/objects"),o=e("../asts"),s=e("../visitor"),a=e("../opcodes"),u=e("../js");t.exports=function(e){var t=[];function n(e){var n=r.indexOf(t,e);return-1===n?t.push(e)-1:n}function c(e,t){return n("function("+e.join(", ")+") {"+t+"}")}function l(){return Array.prototype.concat.apply([],arguments)}function p(e,t,n){return e.concat([t.length,n.length],t,n)}function h(e,t,n,o){var s=r.map(i.values(n),function(e){return o-e});return[a.CALL,e,t,s.length].concat(s)}function m(e,t,n){return l([a.PUSH_CURR_POS],[a.SILENT_FAILS_ON],y(e,{sp:n.sp+1,env:i.clone(n.env),action:null}),[a.SILENT_FAILS_OFF],p([t?a.IF_ERROR:a.IF_NOT_ERROR],l([a.POP],[t?a.POP:a.POP_CURR_POS],[a.PUSH_UNDEFINED]),l([a.POP],[t?a.POP_CURR_POS:a.POP],[a.PUSH_FAILED])))}function d(e,t,n){var r=c(i.keys(n.env),e);return l([a.UPDATE_SAVED_POS],h(r,0,n.env,n.sp),p([a.IF],l([a.POP],t?[a.PUSH_FAILED]:[a.PUSH_UNDEFINED]),l([a.POP],t?[a.PUSH_UNDEFINED]:[a.PUSH_FAILED])))}function f(e){return t=[a.WHILE_NOT_ERROR],n=l([a.APPEND],e),t.concat([n.length],n);var t,n}var y=s.build({grammar:function(e){r.each(e.rules,y),e.consts=t},rule:function(e){e.bytecode=y(e.expression,{sp:-1,env:{},action:null})},named:function(e,t){var r=n('peg$otherExpectation("'+u.stringEscape(e.name)+'")');return l([a.SILENT_FAILS_ON],y(e.expression,t),[a.SILENT_FAILS_OFF],p([a.IF_ERROR],[a.FAIL,r],[]))},choice:function(e,t){return function e(t,n){return l(y(t[0],{sp:n.sp,env:i.clone(n.env),action:null}),t.length>1?p([a.IF_ERROR],l([a.POP],e(t.slice(1),n)),[]):[])}(e.alternatives,t)},action:function(e,t){var n=i.clone(t.env),r="sequence"!==e.expression.type||0===e.expression.elements.length,o=y(e.expression,{sp:t.sp+(r?1:0),env:n,action:e}),s=c(i.keys(n),e.code);return r?l([a.PUSH_CURR_POS],o,p([a.IF_NOT_ERROR],l([a.LOAD_SAVED_POS,1],h(s,1,n,t.sp+2)),[]),[a.NIP]):o},sequence:function(e,t){return l([a.PUSH_CURR_POS],function t(n,r){var o,s;return n.length>0?(o=e.elements.length-n.slice(1).length,l(y(n[0],{sp:r.sp,env:r.env,action:null}),p([a.IF_NOT_ERROR],t(n.slice(1),{sp:r.sp+1,env:r.env,action:r.action}),l(o>1?[a.POP_N,o]:[a.POP],[a.POP_CURR_POS],[a.PUSH_FAILED])))):r.action?(s=c(i.keys(r.env),r.action.code),l([a.LOAD_SAVED_POS,e.elements.length],h(s,e.elements.length,r.env,r.sp),[a.NIP])):l([a.WRAP,e.elements.length],[a.NIP])}(e.elements,{sp:t.sp+1,env:t.env,action:t.action}))},labeled:function(e,t){var n=i.clone(t.env);return t.env[e.label]=t.sp+1,y(e.expression,{sp:t.sp,env:n,action:null})},text:function(e,t){return l([a.PUSH_CURR_POS],y(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null}),p([a.IF_NOT_ERROR],l([a.POP],[a.TEXT]),[a.NIP]))},simple_and:function(e,t){return m(e.expression,!1,t)},simple_not:function(e,t){return m(e.expression,!0,t)},optional:function(e,t){return l(y(e.expression,{sp:t.sp,env:i.clone(t.env),action:null}),p([a.IF_ERROR],l([a.POP],[a.PUSH_NULL]),[]))},zero_or_more:function(e,t){var n=y(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null});return l([a.PUSH_EMPTY_ARRAY],n,f(n),[a.POP])},one_or_more:function(e,t){var n=y(e.expression,{sp:t.sp+1,env:i.clone(t.env),action:null});return l([a.PUSH_EMPTY_ARRAY],n,p([a.IF_NOT_ERROR],l(f(n),[a.POP]),l([a.POP],[a.POP],[a.PUSH_FAILED])))},group:function(e,t){return y(e.expression,{sp:t.sp,env:i.clone(t.env),action:null})},semantic_and:function(e,t){return d(e.code,!1,t)},semantic_not:function(e,t){return d(e.code,!0,t)},rule_ref:function(t){return[a.RULE,o.indexOfRule(e,t.name)]},literal:function(e){var t,r;return e.value.length>0?(t=n('"'+u.stringEscape(e.ignoreCase?e.value.toLowerCase():e.value)+'"'),r=n('peg$literalExpectation("'+u.stringEscape(e.value)+'", '+e.ignoreCase+")"),p(e.ignoreCase?[a.MATCH_STRING_IC,t]:[a.MATCH_STRING,t],e.ignoreCase?[a.ACCEPT_N,e.value.length]:[a.ACCEPT_STRING,t],[a.FAIL,r])):(t=n('""'),[a.PUSH,t])},class:function(e){var t,i,o,s;return t=e.parts.length>0?"/^["+(e.inverted?"^":"")+r.map(e.parts,function(e){return e instanceof Array?u.regexpClassEscape(e[0])+"-"+u.regexpClassEscape(e[1]):u.regexpClassEscape(e)}).join("")+"]/"+(e.ignoreCase?"i":""):e.inverted?"/^[\\S\\s]/":"/^(?!)/",i="["+r.map(e.parts,function(e){return e instanceof Array?'["'+u.stringEscape(e[0])+'", "'+u.stringEscape(e[1])+'"]':'"'+u.stringEscape(e)+'"'}).join(", ")+"]",o=n(t),s=n("peg$classExpectation("+i+", "+e.inverted+", "+e.ignoreCase+")"),p([a.MATCH_REGEXP,o],[a.ACCEPT_N,1],[a.FAIL,s])},any:function(){var e=n("peg$anyExpectation()");return p([a.MATCH_ANY],[a.ACCEPT_N,1],[a.FAIL,e])}});y(e)}},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../visitor":"N/0e","../opcodes":"TA/v","../js":"LEGa"}],y0wl:[function(require,module,exports){"use strict";var arrays=require("../../utils/arrays"),objects=require("../../utils/objects"),asts=require("../asts"),op=require("../opcodes"),js=require("../js");function generateJS(ast,options){function indent2(e){return e.replace(/^(.+)$/gm,"  $1")}function indent6(e){return e.replace(/^(.+)$/gm,"      $1")}function indent10(e){return e.replace(/^(.+)$/gm,"          $1")}function generateTables(){return"size"===options.optimize?["peg$consts = [",indent2(ast.consts.join(",\n")),"],","","peg$bytecode = [",indent2(arrays.map(ast.rules,function(e){return'peg$decode("'+js.stringEscape(arrays.map(e.bytecode,function(e){return String.fromCharCode(e+32)}).join(""))+'")'}).join(",\n")),"],"].join("\n"):arrays.map(ast.consts,function(e,t){return"peg$c"+t+" = "+e+","}).join("\n")}function generateRuleHeader(e,t){var n=[];return n.push(""),options.trace&&n.push(["peg$tracer.trace({",'  type:     "rule.enter",',"  rule:     "+e+",","  location: peg$computeLocation(startPos, startPos)","});",""].join("\n")),options.cache&&(n.push(["var key    = peg$currPos * "+ast.rules.length+" + "+t+",","    cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""].join("\n")),options.trace&&n.push(["if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""].join("\n")),n.push(["  return cached.result;","}",""].join("\n"))),n.join("\n")}function generateRuleFooter(e,t){var n=[];return options.cache&&n.push(["","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+t+" };"].join("\n")),options.trace&&n.push(["","if ("+t+" !== peg$FAILED) {","  peg$tracer.trace({",'    type:   "rule.match",',"    rule:   "+e+",","    result: "+t+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}"].join("\n")),n.push(["","return "+t+";"].join("\n")),n.join("\n")}function generateInterpreter(){var e,t=[];function n(e,t){var n=t+3,r="bc[ip + "+(n-2)+"]",i="bc[ip + "+(n-1)+"]";return["ends.push(end);","ips.push(ip + "+n+" + "+r+" + "+i+");","","if ("+e+") {","  end = ip + "+n+" + "+r+";","  ip += "+n+";","} else {","  end = ip + "+n+" + "+r+" + "+i+";","  ip += "+n+" + "+r+";","}","","break;"].join("\n")}return t.push(["function peg$decode(s) {","  var bc = new Array(s.length), i;","","  for (i = 0; i < s.length; i++) {","    bc[i] = s.charCodeAt(i) - 32;","  }","","  return bc;","}","","function peg$parseRule(index) {"].join("\n")),options.trace?t.push(["  var bc       = peg$bytecode[index],","      ip       = 0,","      ips      = [],","      end      = bc.length,","      ends     = [],","      stack    = [],","      startPos = peg$currPos,","      params, i;"].join("\n")):t.push(["  var bc    = peg$bytecode[index],","      ip    = 0,","      ips   = [],","      end   = bc.length,","      ends  = [],","      stack = [],","      params, i;"].join("\n")),t.push(indent2(generateRuleHeader("peg$ruleNames[index]","index"))),t.push(["  while (true) {","    while (ip < end) {","      switch (bc[ip]) {","        case "+op.PUSH+":","          stack.push(peg$consts[bc[ip + 1]]);","          ip += 2;","          break;","","        case "+op.PUSH_UNDEFINED+":","          stack.push(void 0);","          ip++;","          break;","","        case "+op.PUSH_NULL+":","          stack.push(null);","          ip++;","          break;","","        case "+op.PUSH_FAILED+":","          stack.push(peg$FAILED);","          ip++;","          break;","","        case "+op.PUSH_EMPTY_ARRAY+":","          stack.push([]);","          ip++;","          break;","","        case "+op.PUSH_CURR_POS+":","          stack.push(peg$currPos);","          ip++;","          break;","","        case "+op.POP+":","          stack.pop();","          ip++;","          break;","","        case "+op.POP_CURR_POS+":","          peg$currPos = stack.pop();","          ip++;","          break;","","        case "+op.POP_N+":","          stack.length -= bc[ip + 1];","          ip += 2;","          break;","","        case "+op.NIP+":","          stack.splice(-2, 1);","          ip++;","          break;","","        case "+op.APPEND+":","          stack[stack.length - 2].push(stack.pop());","          ip++;","          break;","","        case "+op.WRAP+":","          stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.TEXT+":","          stack.push(input.substring(stack.pop(), peg$currPos));","          ip++;","          break;","","        case "+op.IF+":",indent10(n("stack[stack.length - 1]",0)),"","        case "+op.IF_ERROR+":",indent10(n("stack[stack.length - 1] === peg$FAILED",0)),"","        case "+op.IF_NOT_ERROR+":",indent10(n("stack[stack.length - 1] !== peg$FAILED",0)),"","        case "+op.WHILE_NOT_ERROR+":",indent10((e="stack[stack.length - 1] !== peg$FAILED",["if ("+e+") {","  ends.push(end);","  ips.push(ip);","","  end = ip + 2 + bc[ip + 1];","  ip += 2;","} else {","  ip += 2 + bc[ip + 1];","}","","break;"].join("\n"))),"","        case "+op.MATCH_ANY+":",indent10(n("input.length > peg$currPos",0)),"","        case "+op.MATCH_STRING+":",indent10(n("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_STRING_IC+":",indent10(n("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_REGEXP+":",indent10(n("peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))",1)),"","        case "+op.ACCEPT_N+":","          stack.push(input.substr(peg$currPos, bc[ip + 1]));","          peg$currPos += bc[ip + 1];","          ip += 2;","          break;","","        case "+op.ACCEPT_STRING+":","          stack.push(peg$consts[bc[ip + 1]]);","          peg$currPos += peg$consts[bc[ip + 1]].length;","          ip += 2;","          break;","","        case "+op.FAIL+":","          stack.push(peg$FAILED);","          if (peg$silentFails === 0) {","            peg$fail(peg$consts[bc[ip + 1]]);","          }","          ip += 2;","          break;","","        case "+op.LOAD_SAVED_POS+":","          peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];","          ip += 2;","          break;","","        case "+op.UPDATE_SAVED_POS+":","          peg$savedPos = peg$currPos;","          ip++;","          break;","","        case "+op.CALL+":",indent10(["params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);","for (i = 0; i < bc[ip + 3]; i++) {","  params[i] = stack[stack.length - 1 - params[i]];","}","","stack.splice(","  stack.length - bc[ip + 2],","  bc[ip + 2],","  peg$consts[bc[ip + 1]].apply(null, params)",");","","ip += 4 + bc[ip + 3];","break;"].join("\n")),"","        case "+op.RULE+":","          stack.push(peg$parseRule(bc[ip + 1]));","          ip += 2;","          break;","","        case "+op.SILENT_FAILS_ON+":","          peg$silentFails++;","          ip++;","          break;","","        case "+op.SILENT_FAILS_OFF+":","          peg$silentFails--;","          ip++;","          break;","","        default:",'          throw new Error("Invalid opcode: " + bc[ip] + ".");',"      }","    }","","    if (ends.length > 0) {","      end = ends.pop();","      ip = ips.pop();","    } else {","      break;","    }","  }"].join("\n")),t.push(indent2(generateRuleFooter("peg$ruleNames[index]","stack[0]"))),t.push("}"),t.join("\n")}function generateRuleFunction(rule){var parts=[],code;function c(e){return"peg$c"+e}function s(e){return"s"+e}var stack={sp:-1,maxSp:-1,push:function(e){var t=s(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t},pop:function(e){var t;return void 0===e?s(this.sp--):(t=arrays.map(arrays.range(this.sp-e+1,this.sp+1),s),this.sp-=e,t)},top:function(){return s(this.sp)},index:function(e){return s(this.sp-e)}};function compile(bc){var ip=0,end=bc.length,parts=[],value;function compileCondition(e,t){var n,r,i,o,s=t+3,a=bc[ip+s-2],u=bc[ip+s-1],c=stack.sp;if(ip+=s,n=compile(bc.slice(ip,ip+a)),i=stack.sp,ip+=a,u>0&&(stack.sp=c,r=compile(bc.slice(ip,ip+u)),o=stack.sp,ip+=u,i!==o))throw new Error("Branches of a condition must move the stack pointer in the same way.");parts.push("if ("+e+") {"),parts.push(indent2(n)),u>0&&(parts.push("} else {"),parts.push(indent2(r))),parts.push("}")}function compileLoop(e){var t,n,r=bc[ip+2-1],i=stack.sp;if(ip+=2,t=compile(bc.slice(ip,ip+r)),n=stack.sp,ip+=r,n!==i)throw new Error("Body of a loop can't move the stack pointer.");parts.push("while ("+e+") {"),parts.push(indent2(t)),parts.push("}")}function compileCall(){var e=bc[ip+4-1],t=c(bc[ip+1])+"("+arrays.map(bc.slice(ip+4,ip+4+e),function(e){return stack.index(e)}).join(", ")+")";stack.pop(bc[ip+2]),parts.push(stack.push(t)),ip+=4+e}for(;ip<end;)switch(bc[ip]){case op.PUSH:parts.push(stack.push(c(bc[ip+1]))),ip+=2;break;case op.PUSH_CURR_POS:parts.push(stack.push("peg$currPos")),ip++;break;case op.PUSH_UNDEFINED:parts.push(stack.push("void 0")),ip++;break;case op.PUSH_NULL:parts.push(stack.push("null")),ip++;break;case op.PUSH_FAILED:parts.push(stack.push("peg$FAILED")),ip++;break;case op.PUSH_EMPTY_ARRAY:parts.push(stack.push("[]")),ip++;break;case op.POP:stack.pop(),ip++;break;case op.POP_CURR_POS:parts.push("peg$currPos = "+stack.pop()+";"),ip++;break;case op.POP_N:stack.pop(bc[ip+1]),ip+=2;break;case op.NIP:value=stack.pop(),stack.pop(),parts.push(stack.push(value)),ip++;break;case op.APPEND:value=stack.pop(),parts.push(stack.top()+".push("+value+");"),ip++;break;case op.WRAP:parts.push(stack.push("["+stack.pop(bc[ip+1]).join(", ")+"]")),ip+=2;break;case op.TEXT:parts.push(stack.push("input.substring("+stack.pop()+", peg$currPos)")),ip++;break;case op.IF:compileCondition(stack.top(),0);break;case op.IF_ERROR:compileCondition(stack.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:compileCondition(stack.top()+" !== peg$FAILED",0);break;case op.WHILE_NOT_ERROR:compileLoop(stack.top()+" !== peg$FAILED",0);break;case op.MATCH_ANY:compileCondition("input.length > peg$currPos",0);break;case op.MATCH_STRING:compileCondition(eval(ast.consts[bc[ip+1]]).length>1?"input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+") === "+c(bc[ip+1]):"input.charCodeAt(peg$currPos) === "+eval(ast.consts[bc[ip+1]]).charCodeAt(0),1);break;case op.MATCH_STRING_IC:compileCondition("input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+").toLowerCase() === "+c(bc[ip+1]),1);break;case op.MATCH_REGEXP:compileCondition(c(bc[ip+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:parts.push(stack.push(bc[ip+1]>1?"input.substr(peg$currPos, "+bc[ip+1]+")":"input.charAt(peg$currPos)")),parts.push(bc[ip+1]>1?"peg$currPos += "+bc[ip+1]+";":"peg$currPos++;"),ip+=2;break;case op.ACCEPT_STRING:parts.push(stack.push(c(bc[ip+1]))),parts.push(eval(ast.consts[bc[ip+1]]).length>1?"peg$currPos += "+eval(ast.consts[bc[ip+1]]).length+";":"peg$currPos++;"),ip+=2;break;case op.FAIL:parts.push(stack.push("peg$FAILED")),parts.push("if (peg$silentFails === 0) { peg$fail("+c(bc[ip+1])+"); }"),ip+=2;break;case op.LOAD_SAVED_POS:parts.push("peg$savedPos = "+stack.index(bc[ip+1])+";"),ip+=2;break;case op.UPDATE_SAVED_POS:parts.push("peg$savedPos = peg$currPos;"),ip++;break;case op.CALL:compileCall();break;case op.RULE:parts.push(stack.push("peg$parse"+ast.rules[bc[ip+1]].name+"()")),ip+=2;break;case op.SILENT_FAILS_ON:parts.push("peg$silentFails++;"),ip++;break;case op.SILENT_FAILS_OFF:parts.push("peg$silentFails--;"),ip++;break;default:throw new Error("Invalid opcode: "+bc[ip]+".")}return parts.join("\n")}return code=compile(rule.bytecode),parts.push("function peg$parse"+rule.name+"() {"),options.trace?parts.push(["  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+",","      startPos = peg$currPos;"].join("\n")):parts.push("  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+";"),parts.push(indent2(generateRuleHeader('"'+js.stringEscape(rule.name)+'"',asts.indexOfRule(ast,rule.name)))),parts.push(indent2(code)),parts.push(indent2(generateRuleFooter('"'+js.stringEscape(rule.name)+'"',s(0)))),parts.push("}"),parts.join("\n")}function generateToplevel(){var e,t,n,r,i,o=[];return o.push(["function peg$subclass(child, parent) {","  function ctor() { this.constructor = child; }","  ctor.prototype = parent.prototype;","  child.prototype = new ctor();","}","","function peg$SyntaxError(message, expected, found, location) {","  this.message  = message;","  this.expected = expected;","  this.found    = found;","  this.location = location;",'  this.name     = "SyntaxError";',"",'  if (typeof Error.captureStackTrace === "function") {',"    Error.captureStackTrace(this, peg$SyntaxError);","  }","}","","peg$subclass(peg$SyntaxError, Error);","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","        literal: function(expectation) {",'          return "\\"" + literalEscape(expectation.text) + "\\"";',"        },","",'        "class": function(expectation) {','          var escapedParts = "",',"              i;","","          for (i = 0; i < expectation.parts.length; i++) {","            escapedParts += expectation.parts[i] instanceof Array",'              ? classEscape(expectation.parts[i][0]) + "-" + classEscape(expectation.parts[i][1])',"              : classEscape(expectation.parts[i]);","          }","",'          return "[" + (expectation.inverted ? "^" : "") + escapedParts + "]";',"        },","","        any: function(expectation) {",'          return "any character";',"        },","","        end: function(expectation) {",'          return "end of input";',"        },","","        other: function(expectation) {","          return expectation.description;","        }","      };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\"/g,  '\\\\\"')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function classEscape(s) {","    return s","      .replace(/\\\\/g, '\\\\\\\\')","      .replace(/\\]/g, '\\\\]')","      .replace(/\\^/g, '\\\\^')","      .replace(/-/g,  '\\\\-')","      .replace(/\\0/g, '\\\\0')","      .replace(/\\t/g, '\\\\t')","      .replace(/\\n/g, '\\\\n')","      .replace(/\\r/g, '\\\\r')","      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })","      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });","  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = new Array(expected.length),","        i, j;","","    for (i = 0; i < expected.length; i++) {","      descriptions[i] = describeExpectation(expected[i]);","    }","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""].join("\n")),options.trace&&o.push(["function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};",""].join("\n")),o.push(["function peg$parse(input, options) {","  options = options !== void 0 ? options : {};","","  var peg$FAILED = {},",""].join("\n")),"size"===options.optimize?(e="{ "+arrays.map(options.allowedStartRules,function(e){return e+": "+asts.indexOfRule(ast,e)}).join(", ")+" }",t=asts.indexOfRule(ast,options.allowedStartRules[0]),o.push(["      peg$startRuleIndices = "+e+",","      peg$startRuleIndex   = "+t+","].join("\n"))):(n="{ "+arrays.map(options.allowedStartRules,function(e){return e+": peg$parse"+e}).join(", ")+" }",r="peg$parse"+options.allowedStartRules[0],o.push(["      peg$startRuleFunctions = "+n+",","      peg$startRuleFunction  = "+r+","].join("\n"))),o.push(""),o.push(indent6(generateTables())),o.push(["","      peg$currPos          = 0,","      peg$savedPos         = 0,","      peg$posDetailsCache  = [{ line: 1, column: 1 }],","      peg$maxFailPos       = 0,","      peg$maxFailExpected  = [],","      peg$silentFails      = 0,",""].join("\n")),options.cache&&o.push(["      peg$resultsCache = {},",""].join("\n")),options.trace&&("size"===options.optimize&&(i="["+arrays.map(ast.rules,function(e){return'"'+js.stringEscape(e.name)+'"'}).join(", ")+"]",o.push(["      peg$ruleNames = "+i+",",""].join("\n"))),o.push(['      peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer(),',""].join("\n"))),o.push(["      peg$result;",""].join("\n")),"size"===options.optimize?o.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleIndices)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleIndex = peg$startRuleIndices[options.startRule];","  }"].join("\n")):o.push(['  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }"].join("\n")),o.push(["","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos], p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line:   details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos),","        endPosDetails   = peg$computePosDetails(endPos);","","    return {","      start: {","        offset: startPos,","        line:   startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line:   endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""].join("\n")),"size"===options.optimize?(o.push(indent2(generateInterpreter())),o.push("")):arrays.each(ast.rules,function(e){o.push(indent2(generateRuleFunction(e))),o.push("")}),ast.initializer&&(o.push(indent2(ast.initializer.code)),o.push("")),"size"===options.optimize?o.push("  peg$result = peg$parseRule(peg$startRuleIndex);"):o.push("  peg$result = peg$startRuleFunction();"),o.push(["","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"].join("\n")),o.join("\n")}function generateWrapper(e){function t(){return["/*"," * Generated by PEG.js 0.10.0."," *"," * http://pegjs.org/"," */"].join("\n")}function n(){return options.trace?["{","  SyntaxError:   peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse:         peg$parse","}"].join("\n"):["{","  SyntaxError: peg$SyntaxError,","  parse:       peg$parse","}"].join("\n")}return{bare:function(){return[t(),"(function() {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"})()"].join("\n")},commonjs:function(){var r=[],i=objects.keys(options.dependencies),o=arrays.map(i,function(e){return e+' = require("'+js.stringEscape(options.dependencies[e])+'")'});return r.push([t(),"",'"use strict";',""].join("\n")),o.length>0&&(r.push("var "+o.join(", ")+";"),r.push("")),r.push([e,"","module.exports = "+n()+";",""].join("\n")),r.join("\n")},amd:function(){var r=objects.values(options.dependencies),i=objects.keys(options.dependencies),o="["+arrays.map(r,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",s=i.join(", ");return[t(),"define("+o+", function("+s+") {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"});",""].join("\n")},globals:function(){return[t(),"(function(root) {",'  "use strict";',"",indent2(e),"",indent2("root."+options.exportVar+" = "+n()+";"),"})(this);",""].join("\n")},umd:function(){var r=[],i=objects.values(options.dependencies),o=objects.keys(options.dependencies),s="["+arrays.map(i,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",a=arrays.map(i,function(e){return'require("'+js.stringEscape(e)+'")'}).join(", "),u=o.join(", ");return r.push([t(),"(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+s+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+a+");"].join("\n")),null!==options.exportVar&&r.push(["  } else {","    root."+options.exportVar+" = factory();"].join("\n")),r.push(["  }","})(this, function("+u+") {",'  "use strict";',"",indent2(e),"",indent2("return "+n()+";"),"});",""].join("\n")),r.join("\n")}}[options.format]()}ast.code=generateWrapper(generateToplevel())}module.exports=generateJS},{"../../utils/arrays":"Btp4","../../utils/objects":"Saqe","../asts":"ckuz","../opcodes":"TA/v","../js":"LEGa"}],eOkX:[function(require,module,exports){"use strict";var arrays=require("../utils/arrays"),objects=require("../utils/objects"),compiler={visitor:require("./visitor"),passes:{check:{reportUndefinedRules:require("./passes/report-undefined-rules"),reportDuplicateRules:require("./passes/report-duplicate-rules"),reportDuplicateLabels:require("./passes/report-duplicate-labels"),reportInfiniteRecursion:require("./passes/report-infinite-recursion"),reportInfiniteRepetition:require("./passes/report-infinite-repetition")},transform:{removeProxyRules:require("./passes/remove-proxy-rules")},generate:{generateBytecode:require("./passes/generate-bytecode"),generateJS:require("./passes/generate-js")}},compile:function(ast,passes,options){var stage;for(stage in options=void 0!==options?options:{},options=objects.clone(options),objects.defaults(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",optimize:"speed",output:"parser",trace:!1}),passes)passes.hasOwnProperty(stage)&&arrays.each(passes[stage],function(e){e(ast,options)});switch(options.output){case"parser":return eval(ast.code);case"source":return ast.code}}};module.exports=compiler},{"../utils/arrays":"Btp4","../utils/objects":"Saqe","./visitor":"N/0e","./passes/report-undefined-rules":"6Wkb","./passes/report-duplicate-rules":"nPjr","./passes/report-duplicate-labels":"nn7N","./passes/report-infinite-recursion":"50GR","./passes/report-infinite-repetition":"VZe4","./passes/remove-proxy-rules":"E6LJ","./passes/generate-bytecode":"9PmR","./passes/generate-js":"y0wl"}],LOSa:[function(e,t,n){"use strict";var r=e("./utils/arrays"),i=e("./utils/objects"),o={VERSION:"0.10.0",GrammarError:e("./grammar-error"),parser:e("./parser"),compiler:e("./compiler"),generate:function(e,t){t=void 0!==t?t:{};var n="plugins"in(t=i.clone(t))?t.plugins:[],s={parser:o.parser,passes:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=i.values(e[t]));return n}(o.compiler.passes)};return r.each(n,function(e){e.use(s,t)}),o.compiler.compile(s.parser.parse(e),s.passes,t)}};t.exports=o},{"./utils/arrays":"Btp4","./utils/objects":"Saqe","./grammar-error":"RCHO","./parser":"DLue","./compiler":"eOkX"}],lA6R:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node");n.TypeName=class TypeName extends r.Node{constructor(e,t,n){super(e),this.specifierQualifiers=t,this.declarator=n}deduceType(e){const t=this.specifierQualifiers.getType(e);return this.declarator?this.declarator.getType(e,t):t}}},{"../../common/node":"PoXi"}],"0eiW":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../scope");n.UsingStatement=class UsingStatement extends i.ClassDirective{constructor(e,t,n){super(e),this.name=t,this.type=n}codegen(e){if(this.type){const t=this.type.deduceType(e);e.scopeManager.define(this.name.getPlainName(e),t,this)}else{const t=e.scopeManager.lookup(this.name.getLookupName(e));if(null===t)throw new r.SyntaxError(`undefine symbol ${this.name.name}`,this);t instanceof o.FunctionLookUpResult?t.functions.map(t=>e.scopeManager.define(t.shortName.split("@")[0],t,this)):e.scopeManager.define(this.name.getPlainName(e),t,this)}}declare(e,t){this.codegen(e)}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../scope":"y+tL"}],naS6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node"),i=e("../../type"),o=e("../class/type_name"),s=e("../expression/identifier"),a=e("../statement/using_statement");n.Declaration=class Declaration extends r.Directive{constructor(e,t,n){super(e),this.specifiers=t,this.initDeclarators=n}declare(e,t){const n=this.specifiers.getType(e),r=this.specifiers.specifiers.includes("typedef");for(const i of this.initDeclarators)if(r){const t=i.declarator.getNameRequired().getPlainName(e);new a.UsingStatement(this.location,s.Identifier.fromString(this.location,t),new o.TypeName(this.location,this.specifiers,i.declarator)).codegen(e)}else i.declareInClass(e,{type:n,isLibCall:this.specifiers.specifiers.includes("__libcall"),isExtern:this.specifiers.specifiers.includes("extern"),isStatic:this.specifiers.specifiers.includes("static"),accessControl:t.accessControl},t)}codegen(e){const t=this.specifiers.getType(e),n=this.specifiers.specifiers.includes("typedef");for(const r of this.initDeclarators)if(n){const t=r.declarator.getNameRequired().getPlainName(e);new a.UsingStatement(this.location,s.Identifier.fromString(this.location,t),new o.TypeName(this.location,this.specifiers,r.declarator)).codegen(e)}else{const n=null!==e.scopeManager.currentContext.scope.classType;r.declare(e,{type:t,isLibCall:this.specifiers.specifiers.includes("__libcall"),isExtern:this.specifiers.specifiers.includes("extern"),isStatic:this.specifiers.specifiers.includes("static"),accessControl:n?i.AccessControl.Unknown:i.AccessControl.Public})}}getTypedefName(){return this.specifiers.specifiers.includes("typedef")?this.initDeclarators.map(e=>e.declarator.getNameRequired()).map(e=>e.getLastID().name):[]}}},{"../../common/node":"PoXi","../../type":"Rt13","../class/type_name":"lA6R","../expression/identifier":"5fRK","../statement/using_statement":"0eiW"}],WYAj:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node");n.Declarator=class Declarator extends i.Node{constructor(e,t){super(e),this.declarator=t}getName(){return this.declarator?this.declarator.getName():null}getNameRequired(){const e=this.getName();if(!e)throw new r.SyntaxError("the name is missing, no name",this);return e}}},{"../../common/error":"nOPH","../../common/node":"PoXi"}],yPyc:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/function_type"),i=e("./declarator");class FunctionDeclarator extends i.Declarator{static getFunctionDeclarator(e){return e instanceof FunctionDeclarator?e:e.declarator?this.getFunctionDeclarator(e.declarator):null}constructor(e,t,n){super(e,t),this.parameters=n}getType(e,t){const n=new r.FunctionType(t,this.parameters.parameters.map(t=>t.getType(e)),this.parameters.variableArguments);return this.declarator?this.declarator.getType(e,n):n}}n.FunctionDeclarator=FunctionDeclarator},{"../../type/function_type":"VPTZ","./declarator":"WYAj"}],"fR4/":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type"),a=e("../../type/compound_type"),u=e("../../type/function_type"),c=e("../declaration/function_declarator"),l=e("./function");n.FunctionDefinition=class FunctionDefinition extends i.ClassDirective{constructor(e,t,n,r){super(e),this.specifiers=t,this.declarator=n,this.body=r,this.parameterNames=[]}deduceType(e){const t=this.declarator.getType(e,this.specifiers.getType(e));if(!(t instanceof u.FunctionType))throw new r.InternalError("this is not a function");return t}getFunctionConfig(e){const t=this.declarator.getNameRequired(),n=c.FunctionDeclarator.getFunctionDeclarator(this.declarator),i=this.deduceType(e);if(!n)throw new r.InternalError("function is not a functionDeclarator");const o=n.parameters.getNameList(e),a=n.parameters.getInitList(e);if(new Set(o).size!==o.length)throw new r.SyntaxError("some of the name of parameters are repeative",this);return{name:t.getLookupName(e),functionType:i,parameterNames:o,parameterInits:a,accessControl:s.AccessControl.Public,isLibCall:this.specifiers.specifiers.includes("__libcall")}}getMemberFunctionConfig(e,t){if(this.specifiers.specifiers.includes("static"))return this.getFunctionConfig(e);const n=this.declarator.getNameRequired(),i=this.deduceType(e),o=c.FunctionDeclarator.getFunctionDeclarator(this.declarator);if(!o)throw new r.InternalError("function is not a functionDeclarator");i.parameterTypes=[new a.PointerType(t),...i.parameterTypes],i.cppFunctionType=u.CppFunctionType.MemberFunction,i.referenceClass=t;const s=["this",...o.parameters.getNameList(e)],l=[null,...o.parameters.getInitList(e)],p=this.specifiers.specifiers.includes("virtual"),h=n.getFullName(e)+"@"+i.toMangledName(),m=n.getShortName(e)+"@"+i.parameterTypes.slice(1).map(e=>e.toString()).join(",");if(p?(i.isVirtual=!0,t.body.registerVFunction(e,m,h)):null!==t.body.getVCallInfo(m)&&(i.isVirtual=!0,t.body.registerVFunction(e,m,h)),new Set(s).size!==s.length)throw new r.SyntaxError("some of the name of parameters are repeative",this);return{name:n.getLookupName(e),functionType:i,parameterNames:s,parameterInits:l,accessControl:t.accessControl,isLibCall:this.specifiers.specifiers.includes("__libcall")}}declare(e,t){const n=this.getMemberFunctionConfig(e,t);l.declareFunction(e,n,this)}codegen(e){const t=this.declarator.getNameRequired().getFullName(e),n=e.scopeManager.root.getScopeOfLookupName(t);if(!n)throw new r.SyntaxError(`unresolvedname ${t}`,this);if(null===n.classType){const n=this.getFunctionConfig(e),r=e.scopeManager.getOldOverloadSymbol(t+"@"+n.functionType.toMangledName()),i=r&&r instanceof o.FunctionEntity?r.declareActiveScopes:[];l.defineFunction(e,n,this.body.body,i,this)}else{const r=n.classType,i=this.getMemberFunctionConfig(e,r),a=e.scopeManager.getOldOverloadSymbol(t+"@"+i.functionType.toMangledName()),u=a&&a instanceof o.FunctionEntity?a.declareActiveScopes:[];i.accessControl=s.AccessControl.Unknown,l.defineFunction(e,i,this.body.body,u,this)}}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../declaration/function_declarator":"yPyc","./function":"rsVP"}],"5Hdw":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node");n.ParameterList=class ParameterList extends i.Node{constructor(e,t=[],n=!1){super(e),this.parameters=t,this.variableArguments=n;let i=this.parameters.length-1;for(;i>=0&&null!==this.parameters[i].init;i--)if(this.variableArguments)throw new r.SyntaxError("var argument function could not apply default param",this);for(i--;i>=0;i--)if(null!==this.parameters[i].init)throw new r.SyntaxError("illegal init expression",this)}getTypeList(e){return this.parameters.map(t=>t.getType(e))}getNameList(e){const t=[];for(const n of this.parameters){if(!n.declarator)throw new r.SyntaxError("the parameter list is not complete, some name is missing",this);const i=n.declarator.getNameRequired();t.push(i.getPlainName(e))}return t}getInitList(e){return this.parameters.map(t=>t.init?t.init.evaluate(e):null)}}},{"../../common/error":"nOPH","../../common/node":"PoXi"}],sqMO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../class/destructor"),i=e("./statement");n.CompoundStatement=class CompoundStatement extends i.Statement{constructor(e,t){super(e),this.body=t}codegen(e){e.enterScope(),this.body.map(t=>t.codegen(e)),r.triggerAllDestructor(e,this),e.exitScope(this)}}},{"../class/destructor":"ef0b","./statement":"0pYg"}],KH9n:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../expression/expression"),i=e("./statement");n.ExpressionStatement=class ExpressionStatement extends i.Statement{constructor(e,t){super(e),this.expression=t}codegen(e){r.recycleExpressionResult(e,this.expression.codegen(e))}}},{"../expression/expression":"TaUa","./statement":"0pYg"}],nUYN:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../type/class_type"),s=e("../expression/expression"),a=e("../expression/identifier"),u=e("../expression/unary_expression"),c=e("../function/call_expression");n.ObjectInitializer=class ObjectInitializer extends i.Node{constructor(e,t){super(e),this.argus=t}initialize(e,t,n){if(!(n instanceof o.ClassType))throw new r.SyntaxError("only class type could apply object initializer",this);const i=n.body.fullName+"::#"+n.body.shortName,l=a.Identifier.fromString(this.location,i),p=new u.UnaryExpression(this.location,"&",a.Identifier.fromString(this.location,t.getPlainName(e))),h=new c.CallExpression(this.location,l,[p,...this.argus]);s.recycleExpressionResult(e,h.codegen(e))}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/class_type":"vaEy","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM"}],"5X0F":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type"),a=e("../../type/class_type"),u=e("../../type/compound_type"),c=e("../../type/function_type"),l=e("../../type/primitive_type"),p=e("../../wasm"),h=e("../declaration/object_initializer"),m=e("../expression/anonymous_expression"),d=e("../expression/assignment_expression"),f=e("../expression/binary_expression"),y=e("../expression/identifier"),g=e("../expression/integer_constant"),_=e("../expression/unary_expression"),w=e("../function/call_expression"),x=e("../function/function"),T=e("../overload"),C=e("../scope"),v=e("../statement/expression_statement"),E=e("./member_expression");n.ConstructorDeclaration=class ConstructorDeclaration extends i.ClassDirective{constructor(e,t,n,r,i){super(e),this.name=t,this.param=n,this.initList=r,this.body=i}getFunctionConfig(e,t,n){const i=this.name.getPlainName(e);if(t.body.shortName.split("<")[0]!==i.split("<")[0])throw new r.SyntaxError(`invaild ctor name ${i.split("<")[0]}`,this);const o=[new u.PointerType(t),...this.param.getTypeList(e)],s=["this",...this.param.getNameList(e)],a=[null,...this.param.getInitList(e)],p=new c.FunctionType(l.PrimitiveTypes.void,o,!1);return p.cppFunctionType=c.CppFunctionType.Constructor,p.referenceClass=t,{name:"#"+t.body.shortName,functionType:p,parameterNames:s,parameterInits:a,accessControl:n,isLibCall:!1}}declare(e,t){const n=this.getFunctionConfig(e,t,t.accessControl);x.declareFunction(e,n,this)}codegen(e){const t=e.scopeManager.currentContext.scope.classType;if(!t)throw new r.SyntaxError(`unresolved name ${this.name.getLookupName(e)}`,this);const n=this.getFunctionConfig(e,t,s.AccessControl.Unknown);if(this.body){const t=[...this.generateStatements(e,n),...this.body.body],r=e.scopeManager.getOldOverloadSymbol(e.scopeManager.currentContext.scope.fullName+"::"+n.name+"@"+n.functionType.toMangledName()),i=r&&r instanceof o.FunctionEntity?r.declareActiveScopes:[];x.defineFunction(e,n,t,i,this)}else x.declareFunction(e,n,this)}generateStatements(e,t){if(t.functionType.cppFunctionType!==c.CppFunctionType.Constructor||null===t.functionType.referenceClass)throw new r.InternalError("getCtorStmts()");const n=t.functionType.referenceClass,i=this.initList,o=new Map,s=[];for(const t of i)if(t.isType){const i=t.key.getPlainName(e);let o=!1;for(let a=0;a<n.body.inheritance.length;a++)if(A(n.body.inheritance[a].classEntity.fullName,n.body.fullName,i)){const i=n.body.inheritance[a].classEntity,u=i.fullName+"::#"+i.shortName,c=e.scopeManager.lookup(u);if(null===c||!(c instanceof C.FunctionLookUpResult))throw new r.SyntaxError(`the base class ${t.key.name}`+" construtor parameters mismatch",this);s[a]=new v.ExpressionStatement(this.location,new w.CallExpression(this.location,y.Identifier.fromString(this.location,u),[y.Identifier.fromString(this.location,"this"),...t.value])),o=!0}if(!o)throw new r.SyntaxError(`class ${t.key.name}`+` is not base class of ${n.body.shortName}`,this)}else{const i=t.key.getPlainName(e);if(1!==t.value.length)throw new r.SyntaxError("the number of argument to init "+i+` is incorrect, exepct 1, actual ${t.value.length}`,this);if(null===n.body.getField(i))throw new r.SyntaxError(`unknown field ${i} in class ${n.body.shortName}`,this);o.set(i,t.value[0])}for(let t=0;t<n.body.inheritance.length;t++)if(!s[t]){const i=n.body.inheritance[t].classEntity,o=i.fullName+"::#"+i.shortName,a=e.scopeManager.lookup(o);if(null===a||!(a instanceof C.FunctionLookUpResult))throw new r.SyntaxError(`the base class ${i.shortName}`+" contains not constructor",this);s[t]=new v.ExpressionStatement(this.location,new w.CallExpression(this.location,y.Identifier.fromString(this.location,o),[y.Identifier.fromString(this.location,"this")]))}const x=[...s];for(const t of n.body.fields){const i=new E.MemberExpression(this.location,y.Identifier.fromString(this.location,"this"),!0,y.Identifier.fromString(this.location,t.name));if(void 0!==o.get(t.name))x.push(new v.ExpressionStatement(this.location,new d.AssignmentExpression(this.location,"=",i,o.get(t.name))));else if(null!==t.initializer)if(t.initializer instanceof h.ObjectInitializer){if(!(t.type instanceof a.ClassType))throw new r.SyntaxError("only class type could apply object initializer",this);const e=t.type.body.fullName+"::#"+t.type.body.shortName,n=y.Identifier.fromString(this.location,e),o=new _.UnaryExpression(this.location,"&",i),s=new w.CallExpression(this.location,n,[o,...t.initializer.argus]);x.push(new v.ExpressionStatement(this.location,s))}else x.push(new v.ExpressionStatement(this.location,new d.AssignmentExpression(this.location,"=",i,t.initializer)));else if(t.type instanceof a.ClassType){const t=n.body.fullName+"#"+n.body.shortName;T.isFunctionExists(e,t,[new u.PointerType(n)])&&x.push(new v.ExpressionStatement(this.location,new w.CallExpression(this.location,y.Identifier.fromString(this.location,t),[new _.UnaryExpression(this.location,"&",i)])))}}if(n.body.requireVPtr){const e=new f.BinaryExpression(this.location,"+",new m.AnonymousCastExpression(this.location,y.Identifier.fromString(this.location,"this"),new u.PointerType(l.PrimitiveTypes.char)),g.IntegerConstant.fromNumber(this.location,n.body.VPtrOffset)),t=new _.UnaryExpression(this.location,"*",new m.AnonymousCastExpression(this.location,e,new u.PointerType(l.PrimitiveTypes.int32))),r=new p.WGetAddress(p.WMemoryLocation.DATA,this.location);r.offset=n.body.vTablePtr;const i=new m.AnonymousExpression(this.location,{type:l.PrimitiveTypes.int32,expr:r});x.push(new v.ExpressionStatement(this.location,new d.AssignmentExpression(this.location,"=",t,i)))}return x}};function A(e,t,n){if("::"===n.slice(0,2))return e===n;const r=t.split("::");return r.slice(0,r.length-1).join("::")+"::"+n===e}n.ConstructorInitializeItem=class ConstructorInitializeItem extends i.Node{constructor(e,t,n,r){super(e),this.key=t,this.value=n,this.isType=r}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../declaration/object_initializer":"nUYN","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","../overload":"sV6L","../scope":"y+tL","../statement/expression_statement":"KH9n","./member_expression":"5MB0"}],eCer:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type"),a=e("../../type/class_type"),u=e("../../type/compound_type"),c=e("../../type/function_type"),l=e("../../type/primitive_type"),p=e("../expression/identifier"),h=e("../expression/unary_expression"),m=e("../function/call_expression"),d=e("../function/function"),f=e("../overload"),y=e("../statement/expression_statement"),g=e("./member_expression");n.DestructorDeclaration=class DestructorDeclaration extends i.ClassDirective{constructor(e,t,n,r){super(e),this.name=t,this.body=n,this.isVirtual=r}getFunctionConfig(e,t,n){const i=this.name.getPlainName(e);if(t.body.shortName!==i)throw new r.SyntaxError(`invaild dtor name ${i}`,this);const o=[new u.PointerType(t)],s=new c.FunctionType(l.PrimitiveTypes.void,o,!1);s.cppFunctionType=c.CppFunctionType.Destructor,s.referenceClass=t;const a=e.scopeManager.getFullName("~"+i)+"@"+s.toMangledName();return this.isVirtual?(s.isVirtual=!0,t.body.registerVFunction(e,"~",a)):null!==t.body.getVCallInfo("~")&&(s.isVirtual=!0,t.body.registerVFunction(e,"~",a)),{name:"~"+i,functionType:s,parameterNames:["this"],parameterInits:[null],accessControl:n,isLibCall:!1}}declare(e,t){const n=this.getFunctionConfig(e,t,t.accessControl);d.declareFunction(e,n,this)}codegen(e){const t=e.scopeManager.lookup(this.name.getLookupName(e));if(!t)throw new r.SyntaxError(`unresolved name ${this.name.getLookupName(e)}`,this);if(!(t instanceof a.ClassType))throw new r.SyntaxError(`name ${this.name.getLookupName(e)} is not a class`,this);const n=this.getFunctionConfig(e,t,s.AccessControl.Unknown);if(this.body){const t=[...this.body.body,...this.generateStatements(e,n)],r=e.scopeManager.getOldOverloadSymbol(n.name+"@"+n.functionType.toMangledName()),i=r&&r instanceof o.FunctionEntity?r.declareActiveScopes:[];d.defineFunction(e,n,t,i,this)}else d.declareFunction(e,n,this)}generateStatements(e,t){if(t.functionType.cppFunctionType!==c.CppFunctionType.Destructor||null===t.functionType.referenceClass)throw new r.InternalError("getDtorStmts()");const n=[],i=t.functionType.referenceClass;for(const t of i.body.fields){const r=new g.MemberExpression(this.location,p.Identifier.fromString(this.location,"this"),!0,p.Identifier.fromString(this.location,t.name));if(t.type instanceof a.ClassType){const t=i.body.fullName+"~"+i.body.shortName;f.isFunctionExists(e,t,[],i)&&n.push(new y.ExpressionStatement(this.location,new m.CallExpression(this.location,p.Identifier.fromString(this.location,t),[new h.UnaryExpression(this.location,"&",r)])))}}for(const t of i.body.inheritance){const r=t.classEntity.fullName+"::~"+t.classEntity.shortName;null!==e.scopeManager.lookup(r)&&n.push(new y.ExpressionStatement(this.location,new m.CallExpression(this.location,new g.MemberExpression(this.location,p.Identifier.fromString(this.location,"this"),!0,p.Identifier.fromString(this.location,"~"+t.classEntity.shortName)),[])))}return n}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../../type/primitive_type":"HxYe","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","../overload":"sV6L","../statement/expression_statement":"KH9n","./member_expression":"5MB0"}],"8Ay1":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type"),a=e("../../type/class_type"),u=e("../../type/primitive_type"),c=e("../../wasm"),l=e("../address"),p=e("../declaration/declaration"),h=e("../expression/anonymous_expression"),m=e("../expression/assignment_expression"),d=e("../function/function_definition"),f=e("../function/parameter_list"),y=e("../statement/compound_statement"),g=e("../statement/expression_statement"),_=e("./constructor_declaration"),w=e("./destructor_declaration");n.ClassSpecifier=class ClassSpecifier extends i.Node{constructor(e,t,n,r,i){super(e),this.typeName=t,this.identifier=n,this.declarations=r,this.inherits=i}isVirtual(e){if(null===this.declarations)throw new r.InternalError("public isVirtual(inheritance: Inheritance[]) ");for(const e of this.declarations)if(e instanceof p.Declaration||e instanceof d.FunctionDefinition){if(e.specifiers.specifiers.includes("virtual"))return!0}else if(e instanceof w.DestructorDeclaration&&e.isVirtual)return!0;for(const t of e)if(t.classEntity.requireVPtr)return!0;return!1}codegen(e){const t=this.identifier.getShortName(e),n=this.identifier.getFullName(e),i=this.identifier.getLookupName(e),o=e.scopeManager.lookup(i);if(null!==o){if(null===this.declarations){if(o instanceof a.ClassType)return o;throw new r.SyntaxError(`conflict type of ${i}`,this)}throw new r.SyntaxError(`redefine of ${i}`,this)}const s=this.inherits.map(t=>t.codegen(e)),u=new a.ClassType(new a.ClassEntity(t,n,e.fileName,[],"union"===this.typeName,s));if(null===this.declarations)return e.scopeManager.declare(i,u,this),u;const c=this.isVirtual(s);c&&u.body.setUpVPtr(),e.scopeManager.define(i,u,this);const l=e.scopeManager.currentContext.activeScopes;return e.scopeManager.enterScope(n),e.scopeManager.activeScopes(l),e.scopeManager.currentContext.scope.classType=u,this.declarations.map(t=>t.declare(e,u)),u.body.initialize(),c&&this.generateVTable(e,u),this.declarations.map(t=>t.codegen(e)),this.generateDefaultConstructor(e),this.generateDefaultDestructor(e),e.scopeManager.exitScope(),u}generateVTable(e,t){const n=4*t.body.vTable.vFunctions.length;t.body.vTablePtr=e.memory.allocData(n);for(let n=0;n<t.body.vTable.vFunctions.length;n++){const r=new c.WGetAddress(c.WMemoryLocation.DATA,this.location);r.offset=t.body.vTablePtr+4*n;const i=new h.AnonymousExpression(this.location,{type:u.PrimitiveTypes.int32,expr:new l.WAddressHolder(r,o.AddressType.RVALUE,this.location)}),s=t.body.vTable.vFunctions[n].fullName;new g.ExpressionStatement(this.location,new m.AssignmentExpression(this.location,"=",i,new h.AnonymousExpression(this.location,{type:u.PrimitiveTypes.int32,expr:new c.WGetFunctionAddress(s,this.location)}))).codegen(e)}}generateDefaultConstructor(e){const t=this.identifier.getShortName(e),n=this.identifier.getFullName(e);null===e.scopeManager.lookup(n+"::#"+t)&&new _.ConstructorDeclaration(this.location,this.identifier,new f.ParameterList(this.location),[],new y.CompoundStatement(this.location,[])).codegen(e)}generateDefaultDestructor(e){const t=this.identifier.getShortName(e),n=this.identifier.getFullName(e);null===e.scopeManager.lookup(n+"::~"+t)&&new w.DestructorDeclaration(this.location,this.identifier,new y.CompoundStatement(this.location,[]),!1).codegen(e)}};n.AccessControlLabel=class AccessControlLabel extends i.ClassDirective{constructor(e,t){super(e),this.label=t}codegen(e){}declare(e,t){t.accessControl=s.getAccessControlFromString(this.label)}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../declaration/declaration":"naS6","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../function/function_definition":"fR4/","../function/parameter_list":"5Hdw","../statement/compound_statement":"sqMO","../statement/expression_statement":"KH9n","./constructor_declaration":"5X0F","./destructor_declaration":"eCer"}],WghI:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node");n.ParameterDeclaration=class ParameterDeclaration extends i.Node{constructor(e,t,n,r){super(e),this.specifiers=t,this.declarator=n,this.init=r}getType(e){const t=this.specifiers.getType(e);return this.declarator?this.declarator.getType(e,t):t}getName(e){if(!this.declarator)throw new r.SyntaxError("this parameter contains no name",this);return this.declarator.getNameRequired().getPlainName(e)}getTemplateParameter(e){if(!this.declarator)throw new r.SyntaxError("unnamed TemplateParameter",this);return{name:this.declarator.getNameRequired().getPlainName(e),type:this.getType(e),init:this.init?this.init.evaluate(e):null}}}},{"../../common/error":"nOPH","../../common/node":"PoXi"}],xErV:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node"),i=e("../../type/template_type");n.TypeParameter=class TypeParameter extends r.Node{constructor(e,t,n){super(e),this.name=t,this.init=n}getTemplateParameter(e){return{name:this.name.getPlainName(e),type:i.TemplateType.instance,init:this.init?this.init.deduceType(e):null}}}},{"../../common/node":"PoXi","../../type/template_type":"xWpI"}],uXFO:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/template"),s=e("../../type"),a=e("../../type/function_type"),u=e("../../type/template_type"),c=e("../class/class_specifier"),l=e("../function/function_definition"),p=e("../function/parameter_declaration"),h=e("../scope"),m=e("./template_deduce"),d=e("./type_parameter");n.TemplateDeclaration=class TemplateDeclaration extends i.ClassDirective{constructor(e,t,n){super(e),this.decl=t,this.args=n}getTemplateNames(){return this.decl instanceof l.FunctionDefinition?[this.decl.declarator.getNameRequired().getLastID().name]:[this.decl.identifier.getLastID().name]}declareClassTemplateSpecialization(e){if(!(this.decl instanceof c.ClassSpecifier))throw new r.InternalError("declareFunctionTemplateSpecialization(ctx: CompileContext): void {");const t=this.decl.identifier,n=t.getLookupName(e),i=e.scopeManager.lookup(n);if(!(i instanceof o.ClassTemplate))throw new r.SyntaxError(`${t.getLookupName(e)} is not a class template`,this);const s=t.fillInBlank(e,t.getLastID().args,i).map(e=>e.toString).join(",");i.specializationMap.set(s,this.decl)}declareFunctionTemplateSpecialization(e){if(!(this.decl instanceof l.FunctionDefinition))throw new r.InternalError("declareFunctionTemplateSpecialization(ctx: CompileContext): void {");const t=this.decl.declarator.getNameRequired(),n=t.deduceType(e);if(!(n instanceof a.UnresolvedFunctionOverloadType))throw new r.SyntaxError(`${t.getLookupName(e)} is not a function template`,this);const i=this.decl.deduceType(e),s=n.functionLookupResult;for(const t of s.functions)if(t instanceof o.FunctionTemplate&&null!==m.deduceFunctionTemplateParameters(e,t,i,s.templateArguments,!1)){const e=s.templateArguments.map(e=>e.toString()).join(",");if(t.specializationMap.has(e))throw new r.SyntaxError("duplication Specialization",this);return void t.specializationMap.set(e,this.decl)}throw new r.SyntaxError("no matched function template",this)}declareFunctionTemplate(e){if(!(this.decl instanceof l.FunctionDefinition))throw new r.InternalError("public declareFunctionTemplate(ctx: CompileContext): void {");const t=e.scopeManager.currentContext,n=t.scope.classType;e.scopeManager.enterUnnamedScope(!0),this.loadTemplateParameters(e);const i=null===n?this.decl.getFunctionConfig(e):this.decl.getMemberFunctionConfig(e,n),a=h.getShortName(i.name)+"@"+i.functionType.toMangledName(),u=e.scopeManager.getFullName(a),c=new o.FunctionTemplate(a,u,i,this.args.map(t=>t.getTemplateParameter(e)),this.decl,t,n?n.accessControl:s.AccessControl.Public);e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.define(c.getIndexName(),c,this)}declareClassTemplate(e){if(!(this.decl instanceof c.ClassSpecifier))throw new r.InternalError(" public declareClassTemplate(ctx: CompileContext): void ");const t=e.scopeManager.currentContext,n=t.scope.classType;e.scopeManager.enterUnnamedScope(!0),this.loadTemplateParameters(e);const i=this.decl.identifier.getShortName(e),a=this.decl.identifier.getFullName(e),u=new o.ClassTemplate(i,a,e.fileName,this.args.map(t=>t.getTemplateParameter(e)),this.decl,t,n?n.accessControl:s.AccessControl.Public);e.scopeManager.detachCurrentScope(),e.scopeManager.exitScope(),e.scopeManager.define(i,u,this)}codegen(e){e.scopeManager.currentContext.scope.classType||(0!==this.args.length?this.decl instanceof c.ClassSpecifier?this.declareClassTemplate(e):this.declareFunctionTemplate(e):this.decl instanceof c.ClassSpecifier?this.declareClassTemplateSpecialization(e):this.declareFunctionTemplateSpecialization(e))}loadTemplateParameters(e){for(let t=0;t<this.args.length;t++){const n=this.args[t];if(n instanceof p.ParameterDeclaration)e.scopeManager.define(n.getName(e),n.getType(e),this);else{if(!(n instanceof d.TypeParameter))throw new r.InternalError("unreachable");e.scopeManager.define(n.name.getPlainName(e),new u.TemplateParameterPlaceHolderType(t),this)}}}declare(e,t){0!==this.args.length?this.decl instanceof c.ClassSpecifier?this.declareClassTemplate(e):this.declareFunctionTemplate(e):this.decl instanceof c.ClassSpecifier?this.declareClassTemplateSpecialization(e):this.declareFunctionTemplateSpecialization(e)}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/template":"+hnY","../../type":"Rt13","../../type/function_type":"VPTZ","../../type/template_type":"xWpI","../class/class_specifier":"8Ay1","../function/function_definition":"fR4/","../function/parameter_declaration":"WghI","../scope":"y+tL","./template_deduce":"atX+","./type_parameter":"xErV"}],d2V6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node"),i=e("../class/type_name");n.TemplateArgument=class TemplateArgument extends r.Node{constructor(e,t){super(e),this.body=t}evaluate(e){return this.body instanceof i.TypeName?this.body.deduceType(e):this.body.evaluate(e)}}},{"../../common/node":"PoXi","../class/type_name":"lA6R"}],"+oRZ":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../wasm"),o=e("./statement");n.BreakStatement=class BreakStatement extends o.Statement{constructor(e){super(e)}codegen(e){if(0===e.currentFuncContext.breakStack.length)throw new r.SyntaxError("break is not in while/do-while/for",this);const t=e.currentFuncContext.breakStack[e.currentFuncContext.breakStack.length-1];e.submitStatement(new i.WBr(e.currentFuncContext.blockLevel-t,this.location))}}},{"../../common/error":"nOPH","../../wasm":"Jo9c","./statement":"0pYg"}],HBxv:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./declarator");n.IdentifierDeclarator=class IdentifierDeclarator extends r.Declarator{constructor(e,t){super(e,null),this.identifier=t}getType(e,t){return this.declarator?this.declarator.getType(e,t):t}getName(){return this.identifier}}},{"./declarator":"WYAj"}],"RKZ+":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../type/compound_type"),s=e("../expression/assignment_expression"),a=e("../expression/expression"),u=e("../expression/integer_constant"),c=e("../expression/subscript_expression"),l=e("../statement/expression_statement");n.InitializerList=class InitializerList extends i.Node{constructor(e,t){super(e),this.items=t}initialize(e,t,n){if(!(n instanceof o.ArrayType))throw new r.InternalError("InitializerList not support");this.initializeArray(e,t,n)}initializeArray(e,t,n){for(let i=0;i<this.items.length;i++){const p=this.items[i];if(p.initializer instanceof a.Expression)new l.ExpressionStatement(this.location,new s.AssignmentExpression(this.location,"=",new c.SubscriptExpression(this.location,t,u.IntegerConstant.fromNumber(this.location,i)),p.initializer)).codegen(e);else{if(!(n.elementType instanceof o.ArrayType))throw new r.SyntaxError("illegal inner initializer list",t);p.initializer.initializeArray(e,new c.SubscriptExpression(t.location,t,u.IntegerConstant.fromNumber(t.location,i)),n.elementType)}}}};n.InitializerListItem=class InitializerListItem extends i.Node{constructor(e,t){super(e),this.initializer=t}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/compound_type":"ZWBU","../expression/assignment_expression":"Laai","../expression/expression":"TaUa","../expression/integer_constant":"aB1x","../expression/subscript_expression":"22up","../statement/expression_statement":"KH9n"}],Wtzn:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type/class_type"),a=e("../../type/compound_type"),u=e("../../type/function_type"),c=e("../expression/assignment_expression"),l=e("../expression/expression"),p=e("../expression/identifier"),h=e("../expression/unary_expression"),m=e("../function/call_expression"),d=e("../function/function"),f=e("./function_declarator"),y=e("./initializer_list"),g=e("./object_initializer");n.InitDeclarator=class InitDeclarator extends i.Node{constructor(e,t,n){super(e),this.declarator=t,this.initializer=n}initialize(e,t){const n=this.declarator.getType(e,t.type),i=this.declarator.getNameRequired(),o=i.getShortName(e);if(null!=this.initializer){if(t.isExtern)throw new r.SyntaxError("extern vaiable could not have initializer",this);if(this.initializer instanceof y.InitializerList)this.initializer.initialize(e,i,n);else if(this.initializer instanceof g.ObjectInitializer)this.initializer.initialize(e,i,n);else{const t=new c.AssignmentExpression(this.location,"=",p.Identifier.fromString(this.location,o),this.initializer);t.isInitExpr=!0,l.recycleExpressionResult(e,t.codegen(e))}}else if(n instanceof s.ClassType){const t=n.body.fullName+"::#"+n.body.shortName,r=p.Identifier.fromString(this.location,t),i=new h.UnaryExpression(this.location,"&",p.Identifier.fromString(this.location,o)),s=new m.CallExpression(this.location,r,[i]);l.recycleExpressionResult(e,s.codegen(e))}}createVariable(e,t){const n=this.declarator.getNameRequired(),i=n.getShortName(e),s=n.getFullName(e),u=this.declarator.getType(e,t.type);let c=o.AddressType.STACK,l=0;if(e.scopeManager.isRoot()||t.isStatic)t.isExtern?(c=o.AddressType.MEMORY_EXTERN,l=s):null===this.initializer||u instanceof a.ArrayType?(c=o.AddressType.MEMORY_BSS,l=e.memory.allocBss(u.length)):(c=o.AddressType.MEMORY_DATA,l=e.memory.allocData(u.length));else{if(t.isExtern)throw new r.SyntaxError("local variable could not be extern:  "+n,this);c=o.AddressType.STACK,l=e.memory.allocStack(u.length)}return new o.Variable(i,s,e.fileName,u,c,l,t.accessControl)}declareGlobal(e,t,n){const i=this.declarator.getType(e,t.type);if(i instanceof s.ClassType&&!i.body.isComplete)throw new r.SyntaxError("cannot instance incomplete type",this);if(i instanceof u.FunctionType){if(!f.FunctionDeclarator.getFunctionDeclarator(this.declarator))throw new r.InternalError("function is not a functionDeclarator");d.declareFunction(e,{name:n,functionType:i,parameterNames:[],parameterInits:[],accessControl:t.accessControl,isLibCall:t.isLibCall},this)}else{if(e.scopeManager.currentContext.scope.classType&&!t.isStatic)return;const r=this.createVariable(e,t);t.isExtern?e.scopeManager.declare(n,r,this):e.scopeManager.define(n,r,this)}}declare(e,t){const n=this.declarator.getNameRequired().getLookupName(e);this.declareGlobal(e,t,n),e.scopeManager.currentContext.scope.classType||this.initialize(e,t)}declareInClass(e,t,n){const i=this.declarator.getType(e,t.type),o=this.declarator.getNameRequired(),s=o.getLookupName(e);if(t.isStatic){if(t.isExtern=!0,this.declareGlobal(e,t,s),this.initializer)throw new r.SyntaxError("the static field could only be initialize outside the class",this)}else{const t=o.getPlainName(e);if(this.initializer instanceof y.InitializerList)throw new r.SyntaxError("unsupport initial list",this);if(n.body.fields.filter(e=>e.name===t).length)throw new r.SyntaxError(`duplicated field name ${t}`,this);n.body.fields.push({name:t,type:i,startOffset:n.body.objectSize,initializer:this.initializer,accessControl:n.accessControl}),n.body.isUnion||(n.body.objectSize+=i.length,n.body.selfSize+=i.length)}}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/function_type":"VPTZ","../expression/assignment_expression":"Laai","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../function/function":"rsVP","./function_declarator":"yPyc","./initializer_list":"RKZ+","./object_initializer":"nUYN"}],oimA:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/symbol"),s=e("../../type"),a=e("../../type/primitive_type"),u=e("../../wasm");n.EnumSpecifier=class EnumSpecifier extends i.Node{constructor(e,t,n){super(e),this.identifier=t,this.enumerators=n}codegen(e){if(null!=this.enumerators){let t=-1,n=0;for(const i of this.enumerators){if(t++,null===i.value)n=t;else{const t=i.value.codegen(e);if(t.expr=t.expr.fold(),!(t.expr instanceof u.WConst&&t.type instanceof a.IntegerType))throw new r.SyntaxError("enum value must be integer",this);n=parseInt(t.expr.constant)}const c=i.identifier.getPlainName(e),l=i.identifier.getFullName(e);e.scopeManager.declare(c,new o.Variable(c,l,e.fileName,a.PrimitiveTypes.int32,o.AddressType.CONSTANT,n,s.AccessControl.Public),this)}}return null!=this.identifier&&e.scopeManager.declare(this.identifier.getLookupName(e),a.PrimitiveTypes.int32,this),a.PrimitiveTypes.int32}};n.Enumerator=class Enumerator extends i.Node{constructor(e,t,n){super(e),this.identifier=t,this.value=n}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/symbol":"HcQt","../../type":"Rt13","../../type/primitive_type":"HxYe","../../wasm":"Jo9c"}],"1C2f":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../common/utils"),s=e("../class/class_specifier"),a=e("../class/enum_specifier"),u=e("../expression/identifier");n.SpecifierList=class SpecifierList extends i.Node{constructor(e,t){super(e),this.specifiers=t}getType(e){let t=null;const n=this.specifiers.filter(e=>"string"!=typeof e),i=this.specifiers.filter(e=>"string"==typeof e);if(0!==n.length){if(1!==n.length)throw new r.SyntaxError("illegal syntax",this);const i=n[0];if(i instanceof s.ClassSpecifier)t=i.codegen(e);else if(i instanceof u.Identifier)t=i.deduceType(e);else{if(!(i instanceof a.EnumSpecifier))throw new r.InternalError("unsupport type");t=i.codegen(e)}}else{const e=i.filter(o.isTypeSpecifier).sort();t=o.getPrimitiveTypeFromSpecifiers(e)}if(null==t)throw new r.SyntaxError("Illegal Return Type",this);return-1!==i.indexOf("const")&&((t=t.clone()).isConst=!0),t}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../common/utils":"pe9I","../class/class_specifier":"8Ay1","../class/enum_specifier":"oimA","../expression/identifier":"5fRK"}],EZ2V:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("../declaration/declaration"),s=e("../declaration/identifier_declarator"),a=e("../declaration/init_declartor"),u=e("../declaration/specifier_list"),c=e("../expression/binary_expression"),l=e("../expression/expression"),p=e("../expression/identifier"),h=e("../expression/integer_constant"),m=e("../expression/unary_expression"),d=e("../type_converter"),f=e("./compound_statement"),y=e("./statement");class ForStatement extends y.Statement{constructor(e,t,n,r,i){super(e),this.init=t,this.test=n,this.update=r,this.body=i}codegen(e){e.enterScope(),null!==this.init&&(this.init instanceof o.Declaration?this.init.codegen(e):l.recycleExpressionResult(e,this.init.codegen(e)));const t=[],n=[],s=[],a=e.getStatementContainer();if(e.setStatementContainer(n),e.currentFuncContext.continueStack.push(e.currentFuncContext.blockLevel+3),e.currentFuncContext.breakStack.push(e.currentFuncContext.blockLevel+1),e.currentFuncContext.blockLevel+=3,this.body,f.CompoundStatement,this.body.codegen(e),e.currentFuncContext.blockLevel+=3,e.currentFuncContext.continueStack.pop(),e.currentFuncContext.breakStack.pop(),e.setStatementContainer(s),null!==this.test){const t=new d.TypeConverter(new m.UnaryExpression(this.location,"!",this.test).codegen(e)).tryConvertTo(e,r.PrimitiveTypes.int32);e.submitStatement(new i.WBrIf(1,t.expr.fold(),this.location))}e.submitStatement(new i.WBlock(n,this.location)),null!==this.update&&l.recycleExpressionResult(e,this.update.codegen(e)),e.submitStatement(new i.WBr(0,this.location)),e.setStatementContainer(t),e.submitStatement(new i.WLoop(s,this.location)),e.exitScope(this),e.setStatementContainer(a),e.submitStatement(new i.WBlock(t,this.location))}}n.ForStatement=ForStatement,n.getForLoop=function(e,t,n){const r=p.Identifier.fromString(n.location,"i");return new ForStatement(n.location,new o.Declaration(n.location,new u.SpecifierList(n.location,["int"]),[new a.InitDeclarator(n.location,new s.IdentifierDeclarator(n.location,r),h.IntegerConstant.ZeroConstant)]),new c.BinaryExpression(n.location,"<",r,e),new m.UnaryExpression(n.location,"++",r),new f.CompoundStatement(n.location,t(r)))}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../declaration/declaration":"naS6","../declaration/identifier_declarator":"HBxv","../declaration/init_declartor":"Wtzn","../declaration/specifier_list":"1C2f","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../type_converter":"vGpT","./compound_statement":"sqMO","./statement":"0pYg"}],i2nu:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/primitive_type"),o=e("../../wasm"),s=e("../scope"),a=e("./statement");n.CaseStatement=class CaseStatement extends a.Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}codegen(e){if(null===e.currentFuncContext.switchContext)throw new r.SyntaxError("case out of switch",this);const t={value:null,statements:[]};if(e.currentFuncContext.switchContext.cases.push(t),null!==this.test){const n=this.test.codegen(e);if(n.expr instanceof s.FunctionLookUpResult)throw new r.SyntaxError("func name not support",this);if(n.expr=n.expr.fold(),!(n.expr instanceof o.WConst&&n.type instanceof i.IntegerType))throw new r.SyntaxError("case value must be integer or enum",this);t.value=n.expr}e.setStatementContainer(t.statements),e.currentFuncContext.blockLevel--,this.body.codegen(e)}}},{"../../common/error":"nOPH","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../scope":"y+tL","./statement":"0pYg"}],"jH/j":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../wasm"),o=e("./statement");n.ContinueStatement=class ContinueStatement extends o.Statement{constructor(e){super(e)}codegen(e){if(0===e.currentFuncContext.continueStack.length)throw new r.SyntaxError("continue is not in while/do-while/for",this);const t=e.currentFuncContext.continueStack[e.currentFuncContext.continueStack.length-1];e.submitStatement(new i.WBr(e.currentFuncContext.blockLevel-t,this.location))}}},{"../../common/error":"nOPH","../../wasm":"Jo9c","./statement":"0pYg"}],kWWe:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node");n.UsingNamespaceStatement=class UsingNamespaceStatement extends i.ClassDirective{constructor(e,t){super(e),this.namespace=t}codegen(e){const t=e.scopeManager.root.getScopeOfLookupName(this.namespace.getLookupName(e)+"::a");if(!t)throw new r.SyntaxError(`${this.namespace.getFullName(e)} is not a namespace`,this);e.scopeManager.currentContext.activeScopes.push(t)}declare(e,t){this.codegen(e)}}},{"../../common/error":"nOPH","../../common/node":"PoXi"}],QtXM:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("../type_converter"),s=e("./statement");n.DoWhileStatement=class DoWhileStatement extends s.Statement{constructor(e,t,n){super(e),this.body=t,this.test=n}codegen(e){const t=[],n=[],s=e.getStatementContainer();e.setStatementContainer(n),e.currentFuncContext.continueStack.push(e.currentFuncContext.blockLevel+2),e.currentFuncContext.breakStack.push(e.currentFuncContext.blockLevel+1),e.currentFuncContext.blockLevel+=2,this.body.codegen(e),e.currentFuncContext.blockLevel-=2,e.currentFuncContext.continueStack.pop(),e.currentFuncContext.breakStack.pop(),e.setStatementContainer(t),e.submitStatement(new i.WBlock(n,this.location));const a=new o.TypeConverter(this.test.codegen(e)).tryConvertTo(e,r.PrimitiveTypes.int32);e.submitStatement(new i.WBrIf(0,a.expr.fold(),this.location)),e.setStatementContainer(s),e.submitStatement(new i.WLoop(t,this.location))}}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../type_converter":"vGpT","./statement":"0pYg"}],rN3j:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type/primitive_type"),s=e("../../wasm"),a=e("../../wasm"),u=e("../address"),c=e("../type_converter"),l=e("./case_statement"),p=e("./statement");n.SwitchStatement=class SwitchStatement extends p.Statement{constructor(e,t,n){super(e),this.discriminant=t,this.body=n}codegen(e){const t=e.currentFuncContext.switchContext,n=e.getStatementContainer(),p=[];if(e.setStatementContainer(p),e.currentFuncContext.switchContext={cases:[]},0!==p.length)throw new r.SyntaxError("illegal content in switch out side all case",this);const h=this.body.body.filter(e=>e instanceof l.CaseStatement).length;let m=h;e.currentFuncContext.breakStack.push(e.currentFuncContext.blockLevel),e.currentFuncContext.blockLevel+=h,this.body.codegen(e);const d=e.currentFuncContext.switchContext.cases.filter(e=>null===e.value);if(d.length>1)throw new r.SyntaxError("only 1 default case is support",this);if(1===d.length)for(let t=0;t<e.currentFuncContext.switchContext.cases.length;t++)if(null===e.currentFuncContext.switchContext.cases[t].value){m=t;break}const f=e.memory.allocStack(4),y=new u.WAddressHolder(f,i.AddressType.STACK,this.location),g=new c.TypeConverter(this.discriminant.codegen(e)).tryConvertTo(e,o.PrimitiveTypes.int32);if(!(g.type instanceof o.IntegerType))throw new r.SyntaxError("illegal switch cond type",this);e.setStatementContainer(n),e.submitStatement(y.createStore(e,g.type,g.expr,!0));let _=new s.WBlock([],this.location);const w=y.createLoad(e,g.type);for(let t=0;t<e.currentFuncContext.switchContext.cases.length;t++){const n=e.currentFuncContext.switchContext.cases[t].value;null!==n&&_.body.push(new a.WBrIf(t,new s.WBinaryOperation(s.I32Binary.eq,w,n,this.location),this.location))}_.body.push(new a.WBr(m,this.location));for(let t=0;t<e.currentFuncContext.switchContext.cases.length;t++)_=new s.WBlock([_,...e.currentFuncContext.switchContext.cases[t].statements],this.location);e.submitStatement(_),e.currentFuncContext.switchContext=t}}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../type_converter":"vGpT","./case_statement":"i2nu","./statement":"0pYg"}],WuVV:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("../type_converter"),s=e("./statement");n.IfStatement=class IfStatement extends s.Statement{constructor(e,t,n,r){super(e),this.test=t,this.consequent=n,this.alternate=r}codegen(e){const t=[],n=[],s=new o.TypeConverter(this.test.codegen(e)).tryConvertTo(e,r.PrimitiveTypes.int32),a=e.getStatementContainer();e.setStatementContainer(t),e.currentFuncContext.blockLevel++,this.consequent.codegen(e),null!==this.alternate&&(e.setStatementContainer(n),this.alternate.codegen(e)),e.setStatementContainer(a),e.currentFuncContext.blockLevel--,null!==this.alternate?e.submitStatement(new i.WIfElseBlock(s.expr.fold(),t,n,this.location)):e.submitStatement(new i.WIfElseBlock(s.expr.fold(),t,null,this.location))}}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../type_converter":"vGpT","./statement":"0pYg"}],B3kT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("./statement");n.GotoStatement=class GotoStatement extends i.Statement{constructor(e,t){super(e),this.label=t}codegen(e){throw new r.SyntaxError("goto statement is not support currently",this)}}},{"../../common/error":"nOPH","./statement":"0pYg"}],nRYT:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./statement");n.LabeledStatement=class LabeledStatement extends r.Statement{constructor(e,t,n){super(e),this.label=t,this.body=n}codegen(e){this.body.codegen(e)}}},{"./statement":"0pYg"}],R1ej:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("../expression/unary_expression"),s=e("../type_converter"),a=e("./statement");n.WhileStatement=class WhileStatement extends a.Statement{constructor(e,t,n){super(e),this.test=t,this.body=n}codegen(e){const t=[],n=[],a=e.getStatementContainer();e.setStatementContainer(n);const u=new s.TypeConverter(new o.UnaryExpression(this.location,"!",this.test).codegen(e)).tryConvertTo(e,r.PrimitiveTypes.int32);e.submitStatement(new i.WBrIf(1,u.expr.fold(),this.location)),e.currentFuncContext.continueStack.push(e.currentFuncContext.blockLevel+2),e.currentFuncContext.breakStack.push(e.currentFuncContext.blockLevel+1),e.currentFuncContext.blockLevel+=2,this.body.codegen(e),e.currentFuncContext.blockLevel-=2,e.currentFuncContext.breakStack.pop(),e.currentFuncContext.continueStack.pop(),e.submitStatement(new i.WBr(0,this.location)),e.setStatementContainer(t),e.submitStatement(new i.WLoop(n,this.location)),e.setStatementContainer(a),e.submitStatement(new i.WBlock(t,this.location))}}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../expression/unary_expression":"6Etb","../type_converter":"vGpT","./statement":"0pYg"}],"2HKu":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/compound_type"),o=e("../../type/primitive_type"),s=e("../../wasm"),a=e("./declarator");n.ArrayDeclarator=class ArrayDeclarator extends a.Declarator{constructor(e,t,n,r,i,o){super(e,t),this.static=n,this.qualifiers=r,this.length=i,this.variableLength=o}getType(e,t){if(t instanceof i.ReferenceType)throw new r.SyntaxError("there is no array of reference",this);if(!this.length)return new i.ArrayType(t,0);const n=this.length.codegen(e);if(n.expr=n.expr.fold(),!(n.expr instanceof s.WConst))throw new r.SyntaxError("var length array is not support currently",this);if(!(n.type instanceof o.IntegerType))throw new r.SyntaxError("length of array must be integer",this);0!==this.qualifiers.length&&e.raiseWarning("unsupport array qualifier",this);const a=new i.ArrayType(t,parseInt(n.expr.constant));return this.declarator?this.declarator.getType(e,a):a}}},{"../../common/error":"nOPH","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./declarator":"WYAj"}],blQX:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../type/class_type"),o=e("../../type/compound_type"),s=e("../../type/primitive_type"),a=e("../declaration/array_declarator"),u=e("../expression/anonymous_expression"),c=e("../expression/assignment_expression"),l=e("../expression/binary_expression"),p=e("../expression/expression"),h=e("../expression/identifier"),m=e("../expression/integer_constant"),d=e("../function/call_expression"),f=e("../statement/expression_statement"),y=e("../statement/for_statement");n.NewExpression=class NewExpression extends p.Expression{constructor(e,t,n,r){super(e),this.name=t,this.arguments=n,this.placement=r,this.arraySize=null,this.name.declarator instanceof a.ArrayDeclarator&&(this.arraySize=this.name.declarator.length,this.name.declarator=null)}codegen(e){if(!e.isCpp())throw new r.LanguageError("new is noly support in c++",this);const t=this.deduceType(e);if(!(t instanceof o.PointerType))throw new r.SyntaxError("new must be pointer",this);const n=t.elementType,a=h.Identifier.allocTmpVar(e,t,this);if(null!==this.arraySize){const r=h.Identifier.allocTmpVar(e,s.PrimitiveTypes.int32,this),o=m.IntegerConstant.fromNumber(this.location,n.length),g=new c.AssignmentExpression(this.location,"=",r,this.arraySize).codegen(e);p.recycleExpressionResult(e,g);const _=new d.CallExpression(this.location,h.Identifier.fromString(this.location,"::malloc_array"),[o,r]).codegen(e);_.type=t;const w=new c.AssignmentExpression(this.location,"=",a,new u.AnonymousExpression(this.location,_)).codegen(e);if(p.recycleExpressionResult(e,w),n instanceof i.ClassType){const t=n.body.fullName+"::#"+n.body.shortName,i=h.Identifier.fromString(this.location,t);y.getForLoop(r,e=>[new f.ExpressionStatement(this.location,new d.CallExpression(this.location,i,[new l.BinaryExpression(this.location,"+",a,e)]))],this).codegen(e)}}else{const r=new d.CallExpression(this.location,h.Identifier.fromString(this.location,"::malloc"),[m.IntegerConstant.fromNumber(this.location,n.length)]).codegen(e);r.type=t;const o=new c.AssignmentExpression(this.location,"=",a,new u.AnonymousExpression(this.location,r)).codegen(e);if(p.recycleExpressionResult(e,o),n instanceof i.ClassType){const t=n.body.fullName+"::#"+n.body.shortName,r=h.Identifier.fromString(this.location,t),i=new d.CallExpression(this.location,r,[a,...this.arguments]).codegen(e);p.recycleExpressionResult(e,i)}}return a.codegen(e)}deduceType(e){return new o.PointerType(this.name.deduceType(e))}}},{"../../common/error":"nOPH","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../declaration/array_declarator":"2HKu","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../function/call_expression":"sKlM","../statement/expression_statement":"KH9n","../statement/for_statement":"EZ2V"}],"kQ+o":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type"),s=e("../../type/class_type"),a=e("../../type/compound_type"),u=e("../../type/primitive_type"),c=e("../../wasm"),l=e("../expression/anonymous_expression"),p=e("../expression/assignment_expression"),h=e("../expression/binary_expression"),m=e("../expression/expression"),d=e("../expression/identifier"),f=e("../expression/integer_constant"),y=e("../expression/unary_expression"),g=e("../function/call_expression"),_=e("../statement/expression_statement"),w=e("../statement/for_statement"),x=e("./member_expression");n.DeleteExpression=class DeleteExpression extends m.Expression{constructor(e,t,n){super(e),this.expr=t,this.isArrayDelete=n}codegen(e){if(!e.isCpp())throw new r.LanguageError("delete is only support in c++",this);return this.isArrayDelete?this.deleteArray(e):this.deleteObject(e),{type:u.PrimitiveTypes.void,expr:c.WEmptyExpression.instance}}deduceType(e){return u.PrimitiveTypes.void}deleteObject(e){const t=this.expr.deduceType(e);if(!(t instanceof a.PointerType))throw new r.SyntaxError(`you can only delete pointer, instead of ${t.toString()}`,this);if(t.elementType instanceof s.ClassType){const n=e.scopeManager.allocTmpVarName(),r=new i.Variable(n,n,this.location.fileName,t,i.AddressType.STACK,e.memory.allocStack(t.length),o.AccessControl.Public);e.scopeManager.define(n,r,this),new p.AssignmentExpression(this.location,"=",d.Identifier.fromString(this.location,n),this.expr).codegen(e);const s=new x.MemberExpression(this.location,d.Identifier.fromString(this.location,n),!0,d.Identifier.fromString(this.location,"~"+t.elementType.body.shortName));s.forceDynamic=!0,new _.ExpressionStatement(this.location,new g.CallExpression(this.location,s,[])).codegen(e),new _.ExpressionStatement(this.location,new g.CallExpression(this.location,d.Identifier.fromString(this.location,"::free"),[d.Identifier.fromString(this.location,n)])).codegen(e)}else new _.ExpressionStatement(this.location,new g.CallExpression(this.location,d.Identifier.fromString(this.location,"::free"),[this.expr])).codegen(e)}deleteArray(e){const t=this.expr.deduceType(e);if(!(t instanceof a.PointerType))throw new r.SyntaxError(`you can only delete pointer, instead of ${t.toString()}`,this);const n=d.Identifier.allocTmpVar(e,t,this),i=d.Identifier.allocTmpVar(e,new a.PointerType(u.PrimitiveTypes.int32),this),o=d.Identifier.allocTmpVar(e,u.PrimitiveTypes.int32,this),c=new p.AssignmentExpression(this.location,"=",n,this.expr).codegen(e);m.recycleExpressionResult(e,c);const T=n.codegen(e);T.type=new a.PointerType(u.PrimitiveTypes.int32);const C=new p.AssignmentExpression(this.location,"=",i,new h.BinaryExpression(this.location,"-",new l.AnonymousExpression(this.location,T),f.IntegerConstant.OneConstant)).codegen(e);m.recycleExpressionResult(e,C);const v=new p.AssignmentExpression(this.location,"=",o,new y.UnaryExpression(this.location,"*",i)).codegen(e);if(m.recycleExpressionResult(e,v),t.elementType instanceof s.ClassType){const r="~"+t.elementType.body.shortName,i=d.Identifier.fromString(this.location,r),s=e=>{const t=new x.MemberExpression(this.location,new h.BinaryExpression(this.location,"+",n,e),!0,i);return t.forceDynamic=!0,t};w.getForLoop(o,e=>[new _.ExpressionStatement(this.location,new g.CallExpression(this.location,s(e),[]))],this).codegen(e)}new _.ExpressionStatement(this.location,new g.CallExpression(this.location,d.Identifier.fromString(this.location,"::free"),[i])).codegen(e)}}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type":"Rt13","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../expression/anonymous_expression":"/aCp","../expression/assignment_expression":"Laai","../expression/binary_expression":"sfIM","../expression/expression":"TaUa","../expression/identifier":"5fRK","../expression/integer_constant":"aB1x","../expression/unary_expression":"6Etb","../function/call_expression":"sKlM","../statement/expression_statement":"KH9n","../statement/for_statement":"EZ2V","./member_expression":"5MB0"}],aVtj:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../type"),s=e("../../type/class_type");n.BaseSpecifier=class BaseSpecifier extends i.Node{constructor(e,t,n){super(e),this.accessControl=t,this.className=n}codegen(e){const t=o.getAccessControlFromString(this.accessControl),n=e.scopeManager.lookup(this.className.getLookupName(e));if(!(n instanceof s.ClassType))throw new r.SyntaxError(`you could not inherit type ${n}, which is not a class type`,this);if(!n.body.isComplete)throw new r.SyntaxError(`you could not inherit type ${n}, which is incomplete`,this);return{classEntity:n.body,accessControl:t}}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type":"Rt13","../../type/class_type":"vaEy"}],u3de:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("./constant");n.FloatingConstant=class FloatingConstant extends o.Constant{constructor(e,t,n,r){super(e),this.value=t,this.raw=n,this.suffix=r}codegen(e){const t=this.deduceType(e);return{type:t,expr:new i.WConst(t.toWType(),this.raw,this.location)}}deduceType(e){return this.suffix&&"F"===this.suffix.toUpperCase()?r.PrimitiveTypes.float:r.PrimitiveTypes.double}}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],"0Bjh":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/compound_type"),i=e("../../type/primitive_type"),o=e("../../wasm"),s=e("./expression"),a=new r.PointerType(new i.CharType);n.StringLiteral=class StringLiteral extends s.Expression{constructor(e,t,n){super(e),this.prefix=t,this.value=n}codegen(e){const t=new o.WGetAddress(o.WMemoryLocation.DATA,this.location);return t.offset=e.memory.allocString(this.value),{type:a,expr:t}}deduceType(e){return a}}},{"../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./expression":"TaUa"}],BEs5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../type_converter"),i=e("./expression");n.CastExpression=class CastExpression extends i.Expression{constructor(e,t,n){super(e),this.typeName=t,this.operand=n}codegen(e){return new r.TypeConverter(this.operand.codegen(e)).tryConvertTo(e,this.deduceType(e),!1,!0)}deduceType(e){return this.typeName.deduceType(e)}}},{"../type_converter":"vGpT","./expression":"TaUa"}],INFt:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/symbol"),o=e("../../type/class_type"),s=e("../../type/compound_type"),a=e("../../type/primitive_type"),u=e("../../wasm"),c=e("../address"),l=e("../type_converter"),p=e("./binary_expression"),h=e("./expression");n.ConditionalExpression=class ConditionalExpression extends h.Expression{constructor(e,t,n,r){super(e),this.test=t,this.consequent=n,this.alternate=r}codegen(e){const t=new l.TypeConverter(this.test.codegen(e)).tryConvertTo(e,a.PrimitiveTypes.int32),n=this.deduceType(e),r=this.consequent.codegen(e),p=this.alternate.codegen(e);if(n instanceof o.ClassType){const o=new s.LeftReferenceType(n);return{type:o,expr:new c.WAddressHolder(new u.WConditionalExpression(t.expr,new l.TypeConverter(r).tryConvertTo(e,o,!1).expr,new l.TypeConverter(p).tryConvertTo(e,o,!1).expr,this.location),i.AddressType.RVALUE,this.location)}}return{type:n,expr:new u.WConditionalExpression(t.expr,new l.TypeConverter(r).tryConvertTo(e,n).expr,new l.TypeConverter(p).tryConvertTo(e,n).expr,this.location)}}deduceType(e){const t=l.TypeConverter.fromType(this.consequent.deduceType(e)).toRValue(e).type,n=l.TypeConverter.fromType(this.alternate.deduceType(e)).toRValue(e).type;if(t instanceof a.ArithmeticType&&n instanceof a.ArithmeticType)return p.arithmeticDeduce(t,n);if(t.equals(n))return t;throw new r.SyntaxError("the type between conditional expression is not same",this)}}},{"../../common/error":"nOPH","../../common/symbol":"HcQt","../../type/class_type":"vaEy","../../type/compound_type":"ZWBU","../../type/primitive_type":"HxYe","../../wasm":"Jo9c","../address":"JsMC","../type_converter":"vGpT","./binary_expression":"sfIM","./expression":"TaUa"}],DzAR:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../type/primitive_type"),i=e("../../wasm"),o=e("./constant");n.CharacterConstant=class CharacterConstant extends o.Constant{constructor(e,t,n){super(e),this.value=t,this.prefix=n}codegen(e){return{type:r.PrimitiveTypes.char,expr:new i.WConst(i.WType.i32,this.value.charCodeAt(0).toString(),this.location)}}deduceType(e){return r.PrimitiveTypes.char}}},{"../../type/primitive_type":"HxYe","../../wasm":"Jo9c","./constant":"x+Tr"}],W05x:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("./assignment_expression"),i=e("./binary_expression"),o=e("./expression"),s=e("./integer_constant");n.PostfixExpression=class PostfixExpression extends o.Expression{constructor(e,t,n){super(e),this.operand=t,this.decrement=n}codegen(e){const t=this.operand.codegen(e);return o.recycleExpressionResult(e,new r.AssignmentExpression(this.location,"=",this.operand,new i.BinaryExpression(this.location,this.decrement?"-":"+",this.operand,s.IntegerConstant.OneConstant)).codegen(e)),t}deduceType(e){return this.operand.deduceType(e)}}},{"./assignment_expression":"Laai","./binary_expression":"sfIM","./expression":"TaUa","./integer_constant":"aB1x"}],iMly:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node"),i=e("../scope");n.NameSpaceBlock=class NameSpaceBlock extends r.Directive{constructor(e,t,n){super(e),this.namespace=t,this.statements=n}codegen(e){const t=new i.Scope(this.namespace.getPlainName(e),e.scopeManager.currentContext.scope,e.isCpp());e.scopeManager.currentContext.scope.children.push(t),e.scopeManager.contextStack.push(e.scopeManager.currentContext),e.scopeManager.currentContext={scope:t,activeScopes:[...e.scopeManager.currentContext.activeScopes,t]},this.statements.map(t=>t.codegen(e)),e.exitScope(this)}}},{"../../common/node":"PoXi","../scope":"y+tL"}],uS1s:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/error"),i=e("../../common/node"),o=e("../../type/compound_type"),s=e("./declarator");n.PointerDeclarator=class PointerDeclarator extends s.Declarator{constructor(e,t,n){super(e,t),this.pointer=n}getType(e,t){let n=this.pointer,i=t;for(;null!=n;){if(i instanceof o.ReferenceType)throw new r.SyntaxError("there is no pointer/reference of reference",this);if("*"===n.type)i=new o.PointerType(i);else if("&"===n.type){if(!e.isCpp())throw new r.LanguageError("reference is only supported in c++",this);i=new o.LeftReferenceType(i)}else if("&&"===n.type)throw new r.SyntaxError("unsupport right value reference",this);n=n.pointer}return this.declarator?this.declarator.getType(e,i):i}};n.Pointer=class Pointer extends i.Node{constructor(e,t,n,r){super(e),this.qualifiers=t,this.pointer=n,this.type=r}}},{"../../common/error":"nOPH","../../common/node":"PoXi","../../type/compound_type":"ZWBU","./declarator":"WYAj"}],lLUD:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../common/node");n.TranslationUnit=class TranslationUnit extends r.Node{constructor(e,t){super(e),this.body=t}codegen(e){this.body.map(t=>t.codegen(e))}}},{"../../common/node":"PoXi"}],"1a9M":[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("../common/node")),r(e("../codegen/template/function_template_instantiation")),r(e("../codegen/template/class_template_instantiation")),r(e("../codegen/template/template_declaration")),r(e("../codegen/template/template_argument")),r(e("../codegen/template/template_deduce")),r(e("../codegen/template/type_parameter")),r(e("../codegen/statement/break_statement")),r(e("../codegen/statement/expression_statement")),r(e("../codegen/statement/for_statement")),r(e("../codegen/statement/case_statement")),r(e("../codegen/statement/using_statement")),r(e("../codegen/statement/continue_statement")),r(e("../codegen/statement/using_namespace_statements")),r(e("../codegen/statement/dowhile_statement")),r(e("../codegen/statement/compound_statement")),r(e("../codegen/statement/statement")),r(e("../codegen/statement/switch_statement")),r(e("../codegen/statement/if_statement")),r(e("../codegen/statement/goto_statement")),r(e("../codegen/statement/labeled_statement")),r(e("../codegen/statement/while_statement")),r(e("../codegen/function/function")),r(e("../codegen/function/return_statement")),r(e("../codegen/function/function_definition")),r(e("../codegen/function/call_expression")),r(e("../codegen/class/new_expression")),r(e("../codegen/class/constructor_call_expression")),r(e("../codegen/class/class_specifier")),r(e("../codegen/class/member_expression")),r(e("../codegen/class/constructor_declaration")),r(e("../codegen/class/destructor_declaration")),r(e("../codegen/class/enum_specifier")),r(e("../codegen/class/delete_expression")),r(e("../codegen/class/destructor")),r(e("../codegen/class/base_specifier")),r(e("../codegen/class/type_name")),r(e("../codegen/expression/expression")),r(e("../codegen/expression/floating_constant")),r(e("../codegen/expression/assignment_expression")),r(e("../codegen/expression/identifier")),r(e("../codegen/expression/string_literal")),r(e("../codegen/expression/binary_expression")),r(e("../codegen/expression/constant")),r(e("../codegen/expression/unary_expression")),r(e("../codegen/expression/integer_constant")),r(e("../codegen/expression/cast_expression")),r(e("../codegen/expression/subscript_expression")),r(e("../codegen/expression/conditional_expression")),r(e("../codegen/expression/character_constant")),r(e("../codegen/expression/postfix_expression")),r(e("../codegen/expression/anonymous_expression")),r(e("../codegen/declaration/object_initializer")),r(e("../codegen/declaration/declarator")),r(e("../codegen/declaration/namepsace_block")),r(e("../codegen/declaration/function_declarator")),r(e("../codegen/declaration/identifier_declarator")),r(e("../codegen/declaration/specifier_list")),r(e("../codegen/declaration/declaration")),r(e("../codegen/declaration/initializer_list")),r(e("../codegen/declaration/init_declartor")),r(e("../codegen/function/parameter_declaration")),r(e("../codegen/declaration/array_declarator")),r(e("../codegen/declaration/pointer_declarator")),r(e("../codegen/function/parameter_list")),r(e("../codegen/declaration/translation_unit"))},{"../common/node":"PoXi","../codegen/template/function_template_instantiation":"4WIk","../codegen/template/class_template_instantiation":"QzhC","../codegen/template/template_declaration":"uXFO","../codegen/template/template_argument":"d2V6","../codegen/template/template_deduce":"atX+","../codegen/template/type_parameter":"xErV","../codegen/statement/break_statement":"+oRZ","../codegen/statement/expression_statement":"KH9n","../codegen/statement/for_statement":"EZ2V","../codegen/statement/case_statement":"i2nu","../codegen/statement/using_statement":"0eiW","../codegen/statement/continue_statement":"jH/j","../codegen/statement/using_namespace_statements":"kWWe","../codegen/statement/dowhile_statement":"QtXM","../codegen/statement/compound_statement":"sqMO","../codegen/statement/statement":"0pYg","../codegen/statement/switch_statement":"rN3j","../codegen/statement/if_statement":"WuVV","../codegen/statement/goto_statement":"B3kT","../codegen/statement/labeled_statement":"nRYT","../codegen/statement/while_statement":"R1ej","../codegen/function/function":"rsVP","../codegen/function/return_statement":"k1ya","../codegen/function/function_definition":"fR4/","../codegen/function/call_expression":"sKlM","../codegen/class/new_expression":"blQX","../codegen/class/constructor_call_expression":"DcaS","../codegen/class/class_specifier":"8Ay1","../codegen/class/member_expression":"5MB0","../codegen/class/constructor_declaration":"5X0F","../codegen/class/destructor_declaration":"eCer","../codegen/class/enum_specifier":"oimA","../codegen/class/delete_expression":"kQ+o","../codegen/class/destructor":"ef0b","../codegen/class/base_specifier":"aVtj","../codegen/class/type_name":"lA6R","../codegen/expression/expression":"TaUa","../codegen/expression/floating_constant":"u3de","../codegen/expression/assignment_expression":"Laai","../codegen/expression/identifier":"5fRK","../codegen/expression/string_literal":"0Bjh","../codegen/expression/binary_expression":"sfIM","../codegen/expression/constant":"x+Tr","../codegen/expression/unary_expression":"6Etb","../codegen/expression/integer_constant":"aB1x","../codegen/expression/cast_expression":"BEs5","../codegen/expression/subscript_expression":"22up","../codegen/expression/conditional_expression":"INFt","../codegen/expression/character_constant":"DzAR","../codegen/expression/postfix_expression":"W05x","../codegen/expression/anonymous_expression":"/aCp","../codegen/declaration/object_initializer":"nUYN","../codegen/declaration/declarator":"WYAj","../codegen/declaration/namepsace_block":"iMly","../codegen/declaration/function_declarator":"yPyc","../codegen/declaration/identifier_declarator":"HBxv","../codegen/declaration/specifier_list":"1C2f","../codegen/declaration/declaration":"naS6","../codegen/declaration/initializer_list":"RKZ+","../codegen/declaration/init_declartor":"Wtzn","../codegen/function/parameter_declaration":"WghI","../codegen/declaration/array_declarator":"2HKu","../codegen/declaration/pointer_declarator":"uS1s","../codegen/function/parameter_list":"5Hdw","../codegen/declaration/translation_unit":"lLUD"}],zrEC:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default="{\n    function newPosition(position) {\n        // For compatibility with source map.\n        return new AST.Position(position.offset, position.line, position.column - 1);\n    }\n\n    function getLocation() {\n        const location_ = location();\n        return new AST.SourceLocation(options.fileName, text(), newPosition(location_.start), newPosition(location_.end));\n    }\n\n    function extractOptional(optional, index) {\n        return optional ? optional[index] : null;\n    }\n\n    function extractList(list, index) {\n        return list.map(element => element[index]);\n    }\n\n    function buildList(head, tail, index) {\n        return [head].concat(extractList(tail, index));\n    }\n\n    function buildBinaryExpression(head, tail) {\n        return tail.reduce((result, element) => new AST.BinaryExpression(getLocation(), element[1], result, element[3]), head);\n    }\n\n    /**\n     * @param {string} hexSequence\n     */\n    function parseUniversalCharacter(hexSequence) {\n        // SAFE_NUMBER: At most 0xFFFFFFFF.\n        const charCode = Number.parseInt(hexSequence, 16);\n        // The disallowed characters are the characters in the basic character set and the code positions reserved by\n        // ISO/IEC 10646 for control characters, the character DELETE, and the S-zone (reserved for use by UTF16).\n        if ((charCode >= 0x0000 && charCode <= 0x001F)\n                || (charCode >= 0x007F && charCode <= 0x009F)\n                || (charCode >= 0xD800 && charCode <= 0xDFFF)) {\n            error('Disallowed character in universal character name: 0x' + hexSequence, getLocation());\n        }\n        return String.fromCharCode(charCode);\n    }\n\n    let scopeRoot = { parent: null, names: new Map() };\n    let currScope = scopeRoot;\n    let globalMap = new Map();\n\n    function enterScope() {\n        currScope = { parent: currScope, names: new Map() };\n    }\n\n    function exitScope() {\n        currScope = currScope.parent;\n    }\n\n    let ID_NAME = 0;\n    let TYPE_NAME = 1;\n    let TEMPLATE_FUNC_NAME = 2;\n    let TEMPLATE_CLASS_NAME = 3;\n\n    function getTypeOfName(name, type) {\n        let c = currScope;\n        while(c != null) {\n            if (c.names.has(name)) {\n                return c.names.get(name);\n            }\n            c = c.parent;\n        }\n        if(globalMap.has(name)){\n            return globalMap.get(name);\n        }\n        return ID_NAME;\n    }\n}\nStart = TranslationUnit\nClassSpecifier\n    = classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier _ ih:BaseClause? _ ScopeStart _ declarations:StructDeclarationList? _ ScopeEnd {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, declarations || [] , ih || []);\n    }\n    / classKey:ClassKeyword _ identifier:TypeDeclarationIdentifier {\n        return new AST.ClassSpecifier(getLocation(), classKey, identifier, null, []);\n    }\n\nClassKeyword\n    = ('struct' / 'class' / 'union') !IdentifierPart {\n        return text();\n    }\n\nBaseSpecifier\n    = lb:AccessControlKey? _ className:TypeIdentifier{\n        return new AST.BaseSpecifier(getLocation(), lb || \"\", className);\n    }\n\nBaseClause\n    = ':' _ head:BaseSpecifier tail:(_ ',' _ BaseSpecifier)* {\n        return buildList(head, tail, 1);\n    }\n\nStructDeclarationList\n    = head:StructDeclaration tail:(_ StructDeclaration)* {\n        return buildList(head, tail, 1);\n    }\n\nAccessControlKey = 'public' / 'private' / 'protect'\n\nStructDeclaration\n    = id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ body:CompoundStatement{\n        return new AST.ConstructorDeclaration(getLocation(), id, param || new AST.ParameterList(getLocation()), initList || [], body);\n    }\n    / id:TypeIdentifier _ '(' _ param:ParameterList? _ ')' _ initList:ConstructorInitializeList? _ ';'{\n        return new AST.ConstructorDeclaration(getLocation(), id, param || new AST.ParameterList(getLocation()), initList || [], nul);\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ body:CompoundStatement{\n        return new AST.DestructorDeclaration(getLocation(), id, body, isVirtual === \"virtual\");\n    }\n    / isVirtual:'virtual'? _ '~' id:TypeIdentifier _ '(' _ ')' _ ';'{\n        return new AST.DestructorDeclaration(getLocation(), id, null, isVirtual === \"virtual\");\n    }\n    / label:AccessControlKey _ ':' {\n        return new AST.AccessControlLabel(getLocation(), label);\n    }\n    / decl:Declaration {\n        return decl;\n    }\n\nConstructorInitializeList\n    = ':' _ head:ConstructorInitializeItem _ tail:(_ ',' _ ConstructorInitializeItem)* {\n         return buildList(head, tail, 3);\n    }\n\nConstructorInitializeItem\n    = key:Identifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, false);\n    }\n    / key:TypeIdentifier _ '(' _ value:ArgumentExpressionList _ ')' {\n        return new AST.ConstructorInitializeItem(getLocation(), key, value, true);\n    }\n\n\nStructDeclaratorList\n    = head:StructDeclarator tail:(_ ',' _ StructDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nStructDeclarator\n    = ':' _ width:ConstantExpression {\n        return new AST.StructDeclarator(getLocation(), null, width, null);\n    }\n    / declarator:Declarator _ initDeclarators:InitDeclaratorList? width:(_ ':' _ ConstantExpression)? {\n        return new AST.StructDeclarator(getLocation(), declarator, extractOptional(width, 3), initDeclarators);\n    }\n\nEnumSpecifier\n    = 'enum' !IdentifierPart _ identifier:Identifier? _ '{' _ enumerators:EnumeratorList _ ','? _ &!'}' {\n        return new AST.EnumSpecifier(getLocation(), identifier, enumerators);\n    }\n    / 'enum' !IdentifierPart _ identifier:Identifier {\n        return new AST.EnumSpecifier(getLocation(), identifier, null);\n    }\n\nEnumeratorList\n    = head:Enumerator tail:(_ comma:','? _ enumerator:Enumerator)* {\n        return buildList(head, tail, 3);\n    }\n\n// MODIFICATION: EnumerationConstant => Identifier\nEnumerator\n    = identifier:Identifier value:(_ '=' _ ConstantExpression)? {\n        return new AST.Enumerator(getLocation(), identifier, extractOptional(value, 3));\n    }\n\n\nConstant\n    = FloatingConstant\n    / IntegerConstant\n    / CharacterConstant\n\nIntegerConstant\n    // REORDER: HexadecimalConstant / OctalConstant\n    = integer:(constant:(DecimalConstant / HexadecimalConstant / OctalConstant) {\n        return {\n            base: constant.base,\n            value: constant.value,\n            raw: text()\n        }\n        }) suffix:$IntegerSuffix? {\n        if (suffix.toLowerCase().includes('u')) {\n            integer.value.unsigned = true;\n        }\n        return new AST.IntegerConstant(getLocation(), integer.base, integer.value, integer.raw, suffix || null);\n    }\n\nDecimalConstant\n    = NonzeroDigit Digit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 10,\n            value: Long.fromString(text())\n        };\n    }\n\nOctalConstant\n    = '0' digits:$OctalDigit* {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 8,\n            value: digits.length ? Long.fromString(digits, 8) : Long.ZERO\n        };\n    }\n\nHexadecimalConstant\n    = HexadecimalPrefix digits:$HexadecimalDigit+ {\n        // SAFE_NUMBER: Using Long.\n        return {\n            base: 16,\n            value: Long.fromString(digits, 16)\n        };\n    }\n\nFloatingConstant\n    = DecimalFloatingConstant\n\nDecimalFloatingConstant\n    = raw:$((FractionalConstant ExponentPart?) / (DigitSequence ExponentPart)) suffix:$FloatingSuffix? {\n        return new AST.FloatingConstant(getLocation(), Number.parseFloat(raw), raw, suffix || null);\n    }\n\nHexadecimalFractionalConstant\n    = HexadecimalDigitSequence '.' HexadecimalDigitSequence?\n    / '.' HexadecimalDigitSequence\n\nCharacterConstant\n    = prefix:$[LuU]? '\\'' value:CCharSequence '\\'' {\n        return new AST.CharacterConstant(getLocation(), value, prefix || null);\n    }\n\nEncodingPrefix\n    = 'u8'\n    / 'u'\n    / 'U'\n    / 'L'\n\nUniversalCharacterName\n    = '\\\\u' hexQuad:$HexQuad {\n        return parseUniversalCharacter(hexQuad);\n    }\n    / '\\\\U' hexQuads:$(HexQuad HexQuad) {\n        return parseUniversalCharacter(hexQuads);\n    }\n\nHexQuad\n    = HexadecimalDigit HexadecimalDigit HexadecimalDigit HexadecimalDigit\n\nStringLiteral\n    = head:SingleStringLiteral tail:(_ SingleStringLiteral)* {\n        return buildList(head, tail, 1).reduce((left, right) => {\n            let prefix = null;\n            if (left.prefix !== right.prefix) {\n                if (left.prefix) {\n                    if (right.prefix) {\n                        error('Unsupported non-standard concatenation of string literals');\n                    } else {\n                        prefix = left.prefix;\n                    }\n                } else {\n                    prefix = right.prefix;\n                }\n            } else {\n                prefix = left.prefix;\n            }\n            const value = left.value.slice(0, -1) + right.value;\n            return new AST.StringLiteral(getLocation(), prefix, value);\n        });\n    }\n\nSingleStringLiteral\n    = prefix:$EncodingPrefix? '\"' value:SCharSequence? &!'\"' {\n        return new AST.StringLiteral(getLocation(), prefix || null, (value || '') + '\\0');\n    }\n\nSCharSequence\n    = chars:SChar+ {\n        return chars.join('');\n    }\n\nSChar\n    = [^\"\\\\\\n] // any member of the source character set except the double-quote \", backslash \\, or new-line character\n    / EscapeSequence\n\nUnaryOperator\n    = [*+\\-~!]\n    / SingleAnd\n\nCCharSequence\n    = chars:CChar+ {\n        return chars.join('');\n    }\n\nCChar\n    = [^'\\\\\\n] // any member of the source character set except the single-quote ', backslash \\, or new-line character\n    / EscapeSequence\n\nEscapeSequence\n    = SimpleEscapeSequence\n    / OctalEscapeSequence\n    / HexadecimalEscapeSequence\n    / UniversalCharacterName\n\nSimpleEscapeSequence\n    = ('\\\\\\''\n    / '\\\\\"'\n    / '\\\\?'\n    / '\\\\\\\\') {\n        return text().charAt(1);\n    }\n    / '\\\\a' {\n        return '\\x07';\n    }\n    / '\\\\b' {\n        return '\\b';\n    }\n    / '\\\\f' {\n        return '\\f';\n    }\n    / '\\\\n' {\n        return '\\n';\n    }\n    / '\\\\r' {\n        return '\\r';\n    }\n    / '\\\\t' {\n        return '\\t';\n    }\n    / '\\\\v' {\n        return '\\v';\n    }\n\nOctalEscapeSequence\n    = '\\\\' digits:$(OctalDigit OctalDigit? OctalDigit?) {\n        // SAFE_NUMBER: At most 0777.\n        return String.fromCharCode(Number.parseInt(digits, 8));\n    }\n\nHexadecimalEscapeSequence\n    = '\\\\x' digits:$HexadecimalDigit+ {\n        // TODO: Guard against very long digits.\n        return String.fromCharCode(Number.parseInt(digits, 16));\n    }\n\nBinaryExponentPart\n    = [pP] Sign? DigitSequence\n\nHexadecimalDigitSequence\n    = HexadecimalDigit+\n\nFloatingSuffix\n    = [flFL]\n\nFractionalConstant\n    = DigitSequence '.' DigitSequence?\n    / '.' DigitSequence\n\nExponentPart\n    = [eE] Sign? DigitSequence\n\nSign\n    = [+\\-]\n\nDigitSequence\n    = Digit+\n\nTryBlock\n    = 'try' _ body:CompoundStatement _ handlers:HandlerSeq {\n        return new AST.TryBlock(getLocation(), body, handlers);\n    }\n\nHandlerSeq\n    = head:ExceptionHandler tail:(_ ExceptionHandler)* {\n        return buildList(head, tail, 1);\n    }\n\nExceptionHandler\n    = 'catch' _ '(' _ decl:ExceptionDeclaration _ ')' _ body:CompoundStatement {\n        return new AST.ExceptionHandler(getLocation(), decl, body);\n    }\n\nExceptionDeclaration\n \t= specifiers:DeclarationSpecifiers _ declarator:Declarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n \t/ specifiers:DeclarationSpecifiers _ declarator:AbstractDeclarator {\n \t    return new AST.ExceptionDeclaration(getLocation(), specifiers, declarator);\n \t}\n\nThrowExpression\n \t= 'throw' _ body:AssignmentExpression? {\n \t    return new AST.ThrowExpression(getLocation(), body);\n \t}\nTranslationUnit\n    = list:DeclarationList{\n        return new AST.TranslationUnit(getLocation(), list);\n    }\n\nDeclarationList\n    = _ head:Declaration tail:(_ Declaration)* _ {\n        return buildList(head, tail, 1);\n    }\n\nDeclaration\n    = BlockDeclaration\n    / FunctionDefinition\n    / NamespaceDefinition\n    / TemplateDeclaration\n    / ExplicitInstantiation\n    / DeclarationMissingSemicolon\n\nBlockDeclaration\n    = SimpleDeclaration\n    / UsingStatements\n\nBlockDeclarationList\n    = head:BlockDeclaration tail:(_ BlockDeclaration)*{\n        return buildList(head, tail, 1);\n    }\n\nNamespaceDefinition\n    = 'namespace' _ name:Identifier _ '{' _ list:DeclarationList? _'}'{\n        currScope.names.set(name.getLastID().name, TYPE_NAME);\n        return new AST.NameSpaceBlock(getLocation(), name, list || []);\n    }\n\nSimpleDeclaration\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList? _ ';' {\n        const declaration = new AST.Declaration(getLocation(), specifiers, initDeclarators || []);\n        declaration.getTypedefName().map(name => currScope.names.set(name, TYPE_NAME));\n        return declaration;\n    }\n\nDeclarationSpecifiers\n    = head:DeclarationSpecifier tail:(_ DeclarationSpecifier)* {\n        return new AST.SpecifierList(getLocation(), buildList(head, tail, 1));\n    }\n\nDeclarationSpecifier\n    = StorageClassSpecifier\n    / FunctionSpecifier\n    / TypeSpecifier\n\nTypeSpecifierList\n    = head:TypeSpecifier tail:( _ TypeSpecifier)* {\n        return buildList(head, tail, 3);\n    }\n\nTypeSpecifier\n    = ClassSpecifier\n    / EnumSpecifier\n    / SimpleTypeSpecifier\n    / TypenameSpecifier\n    / TypeQualifier\n\nPrimitiveTypeSpecifiers\n    = head:PrimitiveTypeSpecifier tail:( _ PrimitiveTypeSpecifier)* {\n        return new AST.PrimitiveTypeSpecifiers(getLocation(), buildList(head, tail, 3));\n    }\n\nSimpleTypeSpecifier\n    = PrimitiveTypeSpecifier\n    / TypeIdentifier\n\nTypenameSpecifier\n    = 'typename' id:TypeIdentifier{\n        return id;\n    }\n\nTypeQualifier\n    = ('const' / 'volatile') !IdentifierPart {\n        return text();\n    }\n\nTypeQualifierList\n    = head:TypeQualifier tail:(_ TypeQualifier)* {\n        return buildList(head, tail, 1);\n    }\n\nDeclarator\n    = pointer:(Pointer _)? declarator:DirectDeclarator {\n        return pointer ? new AST.PointerDeclarator(getLocation(), declarator, extractOptional(pointer, 0)) : declarator;\n    }\n\nDirectDeclarator\n    = head:(identifier:Identifier {\n        return new AST.IdentifierDeclarator(getLocation(), identifier);\n    } / '(' _ declarator:Declarator _ ')' {\n        return declarator;\n    } ) tail:(_ (\n        '[' _ length:AssignmentExpression? _ &!']' {\n            return {\n                location: getLocation(),\n                type: AST.ArrayDeclarator,\n                arguments: [false, [], length, false]\n            };\n        }\n        / '(' _ parameters: ParameterList? _ ')' {\n            return {\n                location: getLocation(),\n                type: AST.FunctionDeclarator,\n                arguments: [parameters || new AST.ParameterList(getLocation())]\n            }\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nPointer\n    = '*' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '*');\n    }\n    /\n    '&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&');\n    }\n    /\n    '&&' _ qualifiers:TypeQualifierList? _ pointer:Pointer? {\n        return new AST.Pointer(getLocation(), qualifiers || [], pointer, '&&');\n    }\n\nDeclarationWithoutSemicolon\n    = specifiers:DeclarationSpecifiers _ initDeclarators:InitDeclaratorList?\n\nDeclarationMissingSemicolon\n    = decl:DeclarationWithoutSemicolon {\n        error('Missing \\';\\' at end of declaration');\n    }\n\nFunctionSpecifier = ('inline' / '__libcall')\n\nInitDeclaratorList\n    = head:InitDeclarator tail:(_ ',' _ InitDeclarator)* {\n        return buildList(head, tail, 3);\n    }\n\nInitDeclarator\n    = declarator:Declarator initializer:CppInitializer? {\n        return new AST.InitDeclarator(getLocation(), declarator, initializer || null);\n    }\n    \nCppInitializer\n    = _'=' _ init:Initializer{\n        return init;\n    }\n    / _ '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return new AST.ObjectInitializer(getLocation(),  arguments_ || []);  \n    }\n\n\nParameterList\n    = head:ParameterDeclaration tail:(_ ',' _ ParameterDeclaration)* ellipsis:(_ ',' _ '...')? {\n        return new AST.ParameterList(getLocation(), buildList(head, tail, 3), !!ellipsis);\n    }\n\nParameterDeclaration\n    = specifiers:DeclarationSpecifiers _ declarator:(Declarator / AbstractDeclarator)? init:( _ '=' _ AssignmentExpression)?{\n        return new AST.ParameterDeclaration(getLocation(), specifiers, declarator, init ? init[3] : null);\n    }\n\nIdentifierList\n    = head:Identifier tail:(_ ',' _ Identifier)* {\n        return buildList(head, tail, 3);\n    }\n\n\nInitializer\n    = AssignmentExpression\n    / '{' _ initializerList:InitializerList _ ','? _ &!'}' {\n        return initializerList;\n    }\n\nInitializerList\n    = head:InitializerListItem tail:(_ ',' _ InitializerListItem)* {\n        return new AST.InitializerList(getLocation(), buildList(head, tail, 3));\n    }\n\nInitializerListItem\n    = designators:(Designation _)? initializer:Initializer {\n        return new AST.InitializerListItem(getLocation(), initializer);\n    }\n\nDesignation\n    = designators:DesignatorList _ '=' {\n        return designators;\n    }\n\nDesignatorList\n    = head:Designator tail:(_ Designator)* {\n        return buildList(head, tail, 1);\n    }\n\nDesignator\n    = '[' _ subscript:ConstantExpression _ &!']' {\n        return new AST.SubscriptDesignator(getLocation(), subscript);\n    }\n    / '.' _ member:Identifier {\n        return new AST.MemberDesignator(getLocation(), member);\n    }\n\nFunctionDefinition\n    = specifiers:DeclarationSpecifiers _ declarator:Declarator _ body:CompoundStatement {\n        return new AST.FunctionDefinition(getLocation(), specifiers, declarator, body);\n    }\n\nNewTypeName\n    =  specifierQualifiers:DeclarationSpecifiers _ declarator:NewDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nTypeName\n    = specifierQualifiers:DeclarationSpecifiers _ declarator:AbstractDeclarator? {\n        return new AST.TypeName(getLocation(), specifierQualifiers, declarator)\n    }\n\nNewDeclarator\n    = pointer:Pointer declarator:(_ DirectNewDeclarator)? {\n        return new AST.PointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectNewDeclarator {\n        return declarator;\n    }\n\nAbstractDeclarator\n    = pointer:Pointer declarator:(_ DirectAbstractDeclarator)? {\n        return new AST.PointerDeclarator(getLocation(), null, pointer, extractOptional(declarator, 1));\n    }\n    / declarator:DirectAbstractDeclarator {\n        return declarator;\n    }\n\nDirectNewDeclarator\n    = head:(element:DirectNewDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectNewDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectAbstractDeclarator\n    = head:(\n        '(' _ declarator:AbstractDeclarator _ ')' {\n            return declarator;\n        }\n        / element:DirectAbstractDeclaratorElement {\n            return new element.type(getLocation(), null, ...element.arguments)\n        }\n    ) tail:(_ DirectAbstractDeclaratorElement)* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(element.location, result, ...element.arguments), head);\n    }\n\nDirectNewDeclaratorElement\n    = '[' _ length:AssignmentExpression? _ &!']' {\n        return {\n            location: getLocation(),\n            type: AST.ArrayDeclarator,\n            arguments: [false, [], length, false]\n        };\n    }\n\nDirectAbstractDeclaratorElement\n    = '(' _ parameters:ParameterList? _ ')' {\n        return {\n            location: getLocation(),\n            type: AST.FunctionDeclarator,\n            arguments: [parameters || new AST.ParameterList(getLocation())]\n        }\n    }\n    / DirectNewDeclaratorElement\nExpression\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAssignmentExpression\n    = left:UnaryExpression _ operator:AssignmentOperator _ right:AssignmentExpression {\n        return new AST.AssignmentExpression(getLocation(), operator, left, right);\n    }\n    / ConditionalExpression\n\nConditionalExpression\n    = test:LogicalOrExpression _ '?' _ consequent:Expression _ &!':' _ alternate:ConditionalExpression {\n        return new AST.ConditionalExpression(getLocation(), test, consequent, alternate);\n    }\n    / LogicalOrExpression\n\n\nConstructorCallExpression\n    = name:TypeIdentifier  _ '(' _ arguments_:ArgumentExpressionList? _ &!')' {\n        return new AST.ConstructorCallExpression(getLocation(), name, arguments_ || []);\n    }\n\nPostfixExpression\n    = head:( PrimaryExpression / ConstructorCallExpression ) tail:(_ (\n        '[' _ subscript:Expression _ &!']' {\n            return {\n                type: AST.SubscriptExpression,\n                arguments: [subscript]\n            };\n        }\n        / '(' _ arguments_:ArgumentExpressionList? _ ')' {\n            return {\n                type: AST.CallExpression,\n                arguments: [arguments_ || []]\n            };\n        }\n        / operator:('.' / '->') _ member:Identifier {\n            return {\n                type: AST.MemberExpression,\n                arguments: [operator === '->', member]\n            };\n        }\n        / operator:('++' / '--') {\n            return {\n                type: AST.PostfixExpression,\n                arguments: [operator === '--']\n            };\n        }\n    ))* {\n        return extractList(tail, 1).reduce((result, element) => new element.type(getLocation(), result, ...element.arguments), head);\n    }\n\nArgumentExpressionList\n    = head:AssignmentExpression tail:(_ ',' _ AssignmentExpression)* {\n        return buildList(head, tail, 3);\n    }\n\nUnaryExpression\n    = operator:('++' / '--') _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:UnaryOperator _ operand:CastExpression { //Hack: when parse '&' operator, the operator variable will be array of 2 elements\n        return new AST.UnaryExpression(getLocation(), operator[0], operand);\n    }\n    / operator:'sizeof' !IdentifierPart _ operand:UnaryExpression {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / operator:'sizeof' _ '(' _ operand:TypeName _ ')' {\n        return new AST.UnaryExpression(getLocation(), operator, operand);\n    }\n    / PostfixExpression\n    / NewExpression\n    / DeleteExpression\n\nCastExpression\n    = '(' _ typeName:TypeName _ ')' _ operand:CastExpression {\n        return new AST.CastExpression(getLocation(), typeName, operand);\n    }\n    / UnaryExpression\n\nMultiplicativeExpression\n    = head:CastExpression tail:(_ [*/%] _ CastExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAdditiveExpression\n    = head:MultiplicativeExpression tail:(_ [+\\-] _ MultiplicativeExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nShiftExpression\n    = head:AdditiveExpression tail:(_ ('<<' / '>>') _ AdditiveExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nRelationalExpression\n    = head:ShiftExpression tail:(_ ('<=' / '>=' / '<' / '>') _ ShiftExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nEqualityExpression\n    = head:RelationalExpression tail:(_ ('==' / '!=') _ RelationalExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nAndExpression\n    = head:EqualityExpression tail:(_ SingleAnd _ EqualityExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nExclusiveOrExpression\n    = head:AndExpression tail:(_ '^' _ AndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nInclusiveOrExpression\n    = head:ExclusiveOrExpression tail:(_ '|' _ ExclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalAndExpression\n    = head:InclusiveOrExpression tail:(_ AndAnd _ InclusiveOrExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nLogicalOrExpression\n    = head:LogicalAndExpression tail:(_ '||' _ LogicalAndExpression)* {\n        return buildBinaryExpression(head, tail);\n    }\n\nConstantExpression\n    = ConditionalExpression\n\nPrimaryExpression\n    = Identifier\n    / Constant\n    / StringLiteral\n    / '(' _ expression:Expression _ &!')' {\n        return expression;\n    }\n\n\n\nNewPlacement\n    = '(' _  item:AssignmentExpression _ ')' {\n        return item;\n    }\n\nNewInitializer\n    = '(' _ arguments_:ArgumentExpressionList? _ ')' {\n        return arguments_;\n    }\n\nNewExpression\n    = '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ type:NewTypeName _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n    / '::'? 'new' !IdentifierPart _ placement:NewPlacement? _ '(' _ name:TypeName _ ')' _ initializer:NewInitializer?{\n        return new AST.NewExpression(getLocation(), type, initializer || [], placement || null);\n    }\n\nDeleteExpression\n    = 'delete' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, false);\n    }\n    / 'delete[]' _ expr:AssignmentExpression {\n        return new AST.DeleteExpression(getLocation(), expr, true);\n    }\nStatement\n    = CaseStatement\n    / SelectionStatement\n    / IterationStatement\n    / JumpStatement\n    / CompoundStatement\n    / LabeledStatement\n    / ExpressionStatement\n    / UsingStatements\n\n// ADDED\nCaseStatement\n    = 'case' !IdentifierPart _ test:ConstantExpression _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), test, body);\n    }\n    / 'default' !IdentifierPart _ &!':' _ body:Statement {\n        return new AST.CaseStatement(getLocation(), null, body)\n    }\n\n// MODIFICATION: No case or default.\nLabeledStatement\n    = label:Identifier _ ':' _ body:Statement {\n        return new AST.LabeledStatement(getLocation(), label, body);\n    }\n\nScopeStart\n    = '{' {\n        enterScope();\n        return getLocation();\n    }\n\nScopeEnd\n    = &!'}' {\n        exitScope();\n        return getLocation();\n    }\n\nCompoundStatement\n    = left:ScopeStart _ body:BlockItemList? _ right:ScopeEnd {\n        return new AST.CompoundStatement(getLocation(), body || []);\n    }\n\nBlockItemList\n    = head:BlockItem tail:(_ BlockItem)* {\n        return buildList(head, tail, 1);\n    }\n\nBlockItem\n    = Statement\n    / Declaration\n    / Expression { // ExpressionStatementMissingSemicolon\n        error('Missing \\';\\' at end of statement');\n    }\n    / DeclarationMissingSemicolon\n\nExpressionStatement\n    = expression:(Expression _)? ';' {\n        return expression ? new AST.ExpressionStatement(getLocation(), extractOptional(expression, 0))\n                : new AST.NullStatement(getLocation());\n    }\n\nSelectionStatement\n    = 'if' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ consequent:Statement alternate:(_ 'else' !IdentifierPart _ Statement)? {\n        return new AST.IfStatement(getLocation(), test, consequent, extractOptional(alternate, 4));\n    }\n    / 'switch' !IdentifierPart _ &!'(' _ discriminant:Expression _ &!')' _ body:Statement {\n        return new AST.SwitchStatement(getLocation(), discriminant, body);\n    }\n\nIterationStatement\n    = 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ body:Statement {\n        return new AST.WhileStatement(getLocation(), test, body);\n    }\n    / 'do' !IdentifierPart _ body:Statement _ 'while' !IdentifierPart _ &!'(' _ test:Expression _ &!')' _ &!';' {\n        return new AST.DoWhileStatement(getLocation(), body, test);\n    }\n    / 'for' !IdentifierPart _ &!'(' _ init:(Declaration / expression:Expression? _ ';' {\n        return expression;\n    } / (DeclarationWithoutSemicolon / Expression) {\n        error('Missing \\';\\'');\n    }) _ test:Expression? _ &!';' _ update:Expression? _ &!')' _ body:Statement {\n        return new AST.ForStatement(getLocation(), init, test, update, body);\n    }\n\nJumpStatement\n    = 'goto' !IdentifierPart _ label:Identifier _ &!';' {\n        return new AST.GotoStatement(getLocation(), label);\n    }\n    / 'continue' !IdentifierPart _ &!';' {\n        return new AST.ContinueStatement(getLocation());\n    }\n    / 'break' !IdentifierPart _ &!';' {\n        return new AST.BreakStatement(getLocation());\n    }\n    / 'return' !IdentifierPart _ argument:Expression? _ &!';' {\n        return new AST.ReturnStatement(getLocation(), argument);\n    }\n\n\nUsingStatements\n    = 'using' _ name:Identifier _ '=' _ decl:TypeName _ ';'{\n        currScope.names.set(name.getLastID().name, TYPE_NAME);\n        return new AST.UsingStatement(getLocation(), name, decl);\n    }\n    / 'using' _ name:(Identifier/TypeIdentifier/TemplateClassIdentifier/TemplateFuncIdentifier) _ ';'{\n        return new AST.UsingStatement(getLocation(), name);\n    }\n    / 'using' _ 'namespace' _ name:TypeIdentifier _ ';'{\n        return new AST.UsingNamespaceStatement(getLocation(), name);\n    }\nId\n    = !Keyword head:IdentifierNondigit tail:IdentifierPart* {\n        return new AST.SingleIdentifier(getLocation(), head + tail.join(''), AST.IDType.ID, []);\n    }\n\nSingleIdentifier\n    = id:Id &{\n        return getTypeOfName(id.name) === ID_NAME;\n    } {\n        return id;\n    }\n    / 'operator' _ ope:OverloadOperator {\n        return new AST.SingleIdentifier(getLocation(), \"#\" + ope, AST.IDType.ID, []);\n    }\n    / 'operator' _ ope:SingleTypeIdentifier {\n        ope.getLastID().type = AST.IDType.OPE_TYPE;\n        return ope;\n    }\n    / 'operator' _ ope:PrimitiveTypeSpecifiers {\n        return new AST.SingleIdentifier(getLocation(), \"#\" + ope.toString(), AST.IDType.ID, []);\n    }\n    / '~' name:TypeIdentifier {\n        const result = name.clone();\n        result.getLastID().name = '~' + result.identifier.name;\n        result.getLastID().type = AST.IDType.ID;\n        return result;\n    }\n\nSingleTypeIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TYPE_NAME;\n    } {\n        id.type = AST.IDType.TYPE;\n        return id;\n    }\n\nSingleTemplateFuncIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_FUNC_NAME;\n    } {\n        id.type = AST.IDType.T_FUNC;\n        return id;\n    }\n\nSingleTemplateClassIdentifier\n    =  id:Id &{\n        return getTypeOfName(id.name) === TEMPLATE_CLASS_NAME;\n    } {\n        id.type = AST.IDType.T_CLASS;\n        return id;\n    }\n\nUnifiedIdentifier\n    = SingleTypeIdentifier/ TemplateClassInstanceIdentifier\n\nIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:(SingleIdentifier/TemplateFuncInstanceIdentifier) {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTypeIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:UnifiedIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTemplateFuncIdentifier\n    = isFullName:'::'? namespace:(UnifiedIdentifier '::')* name:SingleTemplateFuncIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTemplateClassIdentifier\n    = isFullName:'::'? namespace:(SingleTypeIdentifier '::')* name:SingleTemplateClassIdentifier {\n        return new AST.Identifier(getLocation(), namespace.map(x=>x[0]).concat([name]), isFullName);\n    }\n\nTypeDeclarationIdentifier\n    = identifier:Identifier{\n        if( options.isCpp ) {\n            globalMap.set(identifier.getLastID().name, TYPE_NAME);\n            currScope.names.set(identifier.getLastID().name, TYPE_NAME);\n        }\n        return identifier;\n    }\n\nWhiteSpace = [ \\t\\n\\v\\f]\n\n_ = WhiteSpace*\n\nKeyword\n    = ('auto'\n    / 'break'\n    / 'case'\n    / 'char'\n    / 'const'\n    / 'continue'\n    / 'default'\n    / 'double'\n    / 'do'\n    / 'else'\n    / 'enum'\n    / 'extern'\n    / 'float'\n    / 'for'\n    / 'goto'\n    / 'if'\n    / 'inline'\n    / 'int'\n    / 'long'\n    / 'register'\n    / 'restrict'\n    / 'return'\n    / 'short'\n    / 'signed'\n    / 'sizeof'\n    / 'static'\n    / 'struct'\n    / 'switch'\n    / 'typedef'\n    / 'union'\n    / 'unsigned'\n    / 'void'\n    / 'volatile'\n    / 'while'\n    / 'class'\n    / 'new'\n    / 'delete'\n    / 'operator'\n    / 'override'\n    / 'template'\n    / 'typename'\n    / 'namespace'\n    / 'using') !IdentifierPart\n\nStorageClassSpecifier\n    = ('typedef'\n    / 'extern'\n    / 'static'\n    / 'virtual'\n    / 'auto'\n    / 'register') !IdentifierPart {\n        return text();\n    }\n\nPrimitiveTypeSpecifier\n    = ('void'\n    / 'char'\n    / 'short'\n    / 'int'\n    / 'long'\n    / 'float'\n    / 'double'\n    / 'signed'\n    / 'unsigned'\n    / 'bool') !IdentifierPart {\n        return text();\n     }\n\nOverloadOperator\n    = '+' / '-' / '*' / '/' / '%' / '&' / '<' / '>' / '<=' / '>=' / '==' / '!='\n    / '|' / '^' / '!' / '~' / '&&' / '||' / '>>' / '<<' / '++' / '--'\n    /'()' / '[]' / '->'\n    / AssignmentOperator\n\nAssignmentOperator\n    = '=' !'=' {\n        return text();\n    }\n    / '*='\n    / '/='\n    / '%='\n    / '+='\n    / '-='\n    / '<<='\n    / '>>='\n    / '&='\n    / '^='\n    / '|='\n\nAndAnd\n    = '&&'\n\nSingleAnd\n    = '&'!'&'\n\nHexadecimalPrefix\n    = '0x'\n    / '0X'\n\nNonzeroDigit\n    = [1-9]\n\nOctalDigit\n    = [0-7]\n\nHexadecimalDigit\n    = [0-9a-fA-F]\n\nIntegerSuffix\n    = UnsignedSuffix (LongLongSuffix / LongSuffix)?\n    / (LongLongSuffix / LongSuffix) UnsignedSuffix?\n\nUnsignedSuffix\n    = [uU]\n\nLongSuffix\n    = [lL]\n\nLongLongSuffix\n    = 'll'\n    / 'LL'\n\nIdentifierPart\n    = IdentifierNondigit\n    / Digit\n\nIdentifierNondigit\n    = UniversalCharacterName\n    / Nondigit\n\nNondigit\n    = [_a-zA-Z]\n\nDigit\n    = [0-9]\n\nTemplateDeclaration\n    = 'template' _ '<' _ &{\n        enterScope();\n        return true;\n    } param:TemplateParameterList? _ &!'>' _ decl:(ClassSpecifierWithSemi/FunctionDefinition) {\n        exitScope();\n        const result = new AST.TemplateDeclaration(getLocation(), decl, param || []);\n        const names = result.getTemplateNames();\n        const typeId = (decl instanceof AST.FunctionDefinition) ? TEMPLATE_FUNC_NAME : TEMPLATE_CLASS_NAME;\n        names.map(name => {currScope.names.set(name, typeId);\n        if(typeId === TEMPLATE_CLASS_NAME) globalMap.set(name, typeId);});\n        return result;\n    }\n\nClassSpecifierWithSemi\n    = id:ClassSpecifier _ ';' {\n        return id;\n    }\n\nTemplateParameterList\n    = head:TemplateParameter tail:(_ ',' _ TemplateParameter)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateParameter\n    = TypeParameter\n    / ParameterDeclaration;\n\nTypeNameKeyword = 'class' / 'typename'\n\n// TODO:: identifier is optional?\nTypeParameter\n    = TypeNameKeyword _ id:TypeDeclarationIdentifier init:( _ '=' _ TypeName)? {\n        return new AST.TypeParameter(getLocation(), id, init ? init[3] : null);\n    }\n\nTemplateFuncInstanceIdentifier\n    = id:SingleTemplateFuncIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        id.type = AST.IDType.T_FUNC_INS;\n        id.args = opt ? (opt[3] || []) : [];\n        return id;\n    }\n\nTemplateClassInstanceIdentifier\n    = id:SingleTemplateClassIdentifier opt:(_ '<' _ TemplateArgumentList? _ &!'>' _ )? {\n        id.type = AST.IDType.T_CLASS_INS;\n        id.args = opt ? (opt[3] || []) : [];\n        return id;\n    }\n\nTemplateArgumentList\n    = head:TemplateArgument tail:(_ ',' _ TemplateArgument)* {\n        return buildList(head, tail, 3);\n    }\n\nTemplateArgument\n    = item:TypeName {\n        return new AST.TemplateArgument(getLocation(), item);\n    }\n    / item:AdditiveExpression {\n        return new AST.TemplateArgument(getLocation(), item);\n    }\n\nExplicitInstantiation\n    = FunctionTemplateInstantiation\n    / ClassTemplateInstantiation\n\nFunctionTemplateInstantiation\n    = 'template' _ specifiers:DeclarationSpecifiers _ declarator:Declarator _ ';'{\n        return new AST.FunctionTemplateInstantiation(getLocation(), specifiers, declarator);\n    }\n\nClassTemplateInstantiation\n    = 'template' _ spec:ClassSpecifier _ ';'{\n        return new AST.ClassTemplateInstantiation(getLocation(), spec);\n    }"},{}],"4ugX":[function(require,module,exports){var global=arguments[3],__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const fs=__importStar(require("fs")),Long_=__importStar(require("long")),PegJs=__importStar(require("pegjs")),error_1=require("../common/error"),CTree_=__importStar(require("./ast")),c_lang_1=__importDefault(require("./c.lang"));function parseUniversalCharacter(e){const t=Number.parseInt(e,16);return String.fromCharCode(t)}const Helper_={parseUniversalCharacter:parseUniversalCharacter};function loadParser(source,query){const Long=Long_,AST=CTree_;if(void 0===global.window&&fs.existsSync("/tmp/"+query.parserName+".js")){const e=fs.readFileSync("/tmp/"+query.parserName+".js","utf8")}source=source.replace(/&!'((\\.|[^'])*)'/g,(e,t)=>`(expected:'${t}'? {\n        if (!expected) {${t.includes("}")?"/*{*/":""}\n            error('Missing \\'${t}\\'');\n        }\n        return expected;\n    })`),query.output="source",query.cache=!!query.cache,query.optimize=query.optimize||"speed",query.trace=!!query.trace,"string"==typeof query.allowedStartRules&&(query.allowedStartRules=[query.allowedStartRules]);const code=PegJs.generate(source,query);return eval(code)}const ConstantExpressionPegParser=loadParser(c_lang_1.default,{parserName:"ConstantExpression",allowedStartRules:"ConstantExpression"}),TranslationUnitPegParser=loadParser(c_lang_1.default,{parserName:"TranslationUnitPegParser"});function wrapPegParser(e){return{parse(t,n){try{return e.parse(t,n)}catch(t){throw t instanceof e.SyntaxError?new error_1.SyntaxError(t.message,{location:t.location}):t}}}}exports.ConstantExpressionParser=wrapPegParser(ConstantExpressionPegParser),exports.CParser=wrapPegParser(TranslationUnitPegParser)},{fs:"jCtJ",long:"YvD4",pegjs:"LOSa","../common/error":"nOPH","./ast":"1a9M","./c.lang":"zrEC"}],WBcs:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../common/error"),o=e("./index");!function(e){e[e.ON_IF=0]="ON_IF",e[e.ON_ELSE=1]="ON_ELSE"}(n.PreprocessStatus||(n.PreprocessStatus={}));n.PreprocessContext=class PreprocessContext{constructor(e,t){this.sourceFileName=e,this.generatedFileName=e.replace(".cpp",".ii"),this.node=new r.SourceNode(1,0,this.generatedFileName),this.marcoMap=t,this.skipBlock=!1,this.status=[],this.targetLine=0,this.targetColumn=0,this.onMultiLineComment=!1}defineMarco(e,t,n){if(n=n.trim(),this.marcoMap.has(e))throw new i.PreprocessError(`marco ${e} is already defined`);if(null===t){const r=o.parseMarco([],n);this.marcoMap.set(e,{name:e,parameters:t,target:n,parsedTarget:r})}else{const r=o.parseMarco(t,n);this.marcoMap.set(e,{name:e,parameters:t,target:n,parsedTarget:r})}}undefineMarco(e){if(!this.marcoMap.has(e))throw new i.PreprocessError(`marco ${e} is not defined`);this.marcoMap.delete(e)}append(e,t){this.node.add(new r.SourceNode(t.line+1,t.column,this.sourceFileName,e))}}},{"source-map":"aRf0","../common/error":"nOPH","./index":"DY6N"}],DY6N:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../library"),o=e("./context");function s(e,t,n){const s=t.split(/\s|<|"/);if("#define"===s[0]){if(!e.skipBlock){const n=/#define\s+([a-zA-Z0-9_]+)\s*(\(([^)]*)\))?\s*(\s.+)?\s*$/.exec(t);if(!n)throw new r.PreprocessError(`illegal define: ${t}`);if(n[3]&&n[4]){const t=n[3].split(",").map(e=>e.trim());e.defineMarco(n[1],t,n[4])}else n[4]?e.defineMarco(n[1],null,n[4]):e.defineMarco(n[1],null,"")}}else if("#undef"===s[0]){if(!e.skipBlock){if(2!==s.length)throw new r.PreprocessError(`illegal undefine: ${t}`);e.undefineMarco(s[1])}}else if("#include"===s[0]){if(!e.skipBlock){let o="";if(t.includes('"')){const e=/"(.*)"/.exec(t);if(!e||!e[1])throw new r.PreprocessError(`illegal include: ${t}`);o=e[1]}else{const e=/<(.*)>/.exec(t);if(!e||!e[1])throw new r.PreprocessError(`illegal include: ${t}`);o=e[1]}let s=i.Headers.get(o);if(!s&&("c"===o.charAt(0)&&(s=i.Headers.get(o.slice(1)+".h")),!s))throw new r.PreprocessError(`header ${o} does not exist`);const{code:a}=p(o,s,e.marcoMap);e.append(a,{line:n,column:0})}}else{if("#if"===s[0])throw new r.PreprocessError("unsupport #if");if("#elif"===s[0])throw new r.PreprocessError("unsupport #elif");if("#ifdef"===s[0])e.marcoMap.has(s[1])?(e.skipBlock=!1,e.status.push([o.PreprocessStatus.ON_IF,!1])):(e.skipBlock=!0,e.status.push([o.PreprocessStatus.ON_IF,!0]));else if("#ifndef"===s[0])e.marcoMap.has(s[1])?(e.skipBlock=!0,e.status.push([o.PreprocessStatus.ON_IF,!0])):(e.skipBlock=!1,e.status.push([o.PreprocessStatus.ON_IF,!1]));else if("#else"===s[0]){if(!(e.status.length>0&&e.status[e.status.length-1][0]===o.PreprocessStatus.ON_IF))throw new r.PreprocessError("unmatch #else");{const t=e.status[e.status.length-1];e.skipBlock=!t[1],t[0]=o.PreprocessStatus.ON_ELSE}}else{if("#endif"!==s[0]){if("#line"===s[0])throw new r.PreprocessError("unsupport #line");if("#error"===s[0])throw new r.PreprocessError(`Error : ${t}`);if("#progma"===s[0])return;if("#"===s[0])return;throw new r.PreprocessError(`unsupport directive ${t}`)}if(!(e.status.length>0))throw new r.PreprocessError("unmatch #endif");e.status.pop();e.status.length>0?e.skipBlock=e.status[e.status.length-1][1]:e.skipBlock=!1}}}const a=/([\\~!@#$|%^&*()+-={}[\]:";'<>?,.\/]|[A-Za-z_0-9]+|"[^"]*"|'[^']*'|\n|[ \t]+)/y;function u(e){let t=a.exec(e);const n=[];for(;t;)n.push(t[1]),t=a.exec(e);return n}function c(e,t){return e.parsedTarget.map(e=>"string"==typeof e?e:t[e]).join("")}function l(e,t,n){const r=u(t);"\n"!==r[r.length-1]&&r.push("\n");let i="",o=0;e.onMultiLineComment&&(o=2);let s={line:n,column:0},a={line:s.line,column:s.column};function l(){i.length>0&&(e.append(i,a),i="",a={line:s.line,column:s.column})}for(let t=0;t<r.length-1;t++){const n=r[t];function p(e){"\n"===e?(s.line++,s.column=0):s.column+=e.length}if(1===o){"\n"===n&&(i+=n,o=0),p(n);continue}if(2===o){"*"===n&&"/"===r[t+1]&&(o=0,e.onMultiLineComment=!1,t++),p(n);continue}const a=e.marcoMap.get(n);function h(){for(t++;t<r.length&&/^\s*$/.test(r[t]);)t++;return t>=r.length?null:r[t]}if(a){if(null!==a.parameters){const e=t,o={line:s.line,column:s.column};if("("!==h()){s=o,i+=n,p(r[t=e]);continue}const u=[],m={"(":0,"[":0,"{":0};let d=",";for(let c=0;c<a.parameters.length;c++){c===a.parameters.length-1&&(d=")");let l=h(),f="";for(;l!==d||!Object.keys(m).map(e=>m[e]).every(e=>0===e);)null!==l?(m.hasOwnProperty(l)&&m[l]++,")"===l&&m["("]--,"]"===l&&m["["]--,"{"===l&&m["{"]--,f+=l,l=h()):(s=o,p(r[t=e]),i+=n);u.push(f)}l(),i=c(a,u);for(let n=e;n<=t;n++)p(r[n]);l();continue}l(),i=a.target,p(n),l()}else"/"===n&&"/"===r[t+1]?(l(),o=1):"/"===n&&"*"===r[t+1]?(l(),o=2,e.onMultiLineComment=!0):"\n"===n?(i+=n,l()):i+=n;p(n)}return i+="\n",l(),""}function p(e,t,n){const r=new o.PreprocessContext(e,n),i=t.split("\n");let a="",u="",c=0;for(let e=0;e<i.length;e++)"\\"===(u+=i[e]).charAt(u.length-1)?u=u.substring(0,u.length-1):"#"===u.charAt(0)?r.onMultiLineComment?(a+=u+"\n",u=""):(""!==a&&(r.skipBlock||l(r,a,c),a=""),s(r,u,e),u="",c=e+1):(a+=u+"\n",u="");return l(r,a,c),r.node.toStringWithSourceMap()}n.parseMarco=function(e,t){const n=u(t),r=[];let i="";for(let t=0;t<n.length;t++){const o=n[t];t+2<n.length&&"#"===o&&"#"===n[t+1]&&e.includes(n[t+2])?(0!==i.length&&(r.push(i),i=""),r.push(e.indexOf(n[t+2])),t+=2):t+1<n.length&&"#"===o&&e.includes(n[t+1])?(r.push(i+'"'),i='"',r.push(e.indexOf(n[t+1])),t+=1):e.includes(o)?(0!==i.length&&(r.push(i),i=""),r.push(e.indexOf(o))):i+=o}return 0!==i.length&&r.push(i),r},n.preprocess=function(e,t){return p(e,t,new Map)}},{"../common/error":"nOPH","../library":"bjS5","./context":"WBcs"}],PxdH:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error");class HeapAllocator{}n.HeapAllocator=HeapAllocator;class LinkedHeapAllocator extends HeapAllocator{constructor(){super()}init(e){e.heapPointer+=0}allocHeap(e,t){let n=e.heapStart;for(;n<e.heapPointer;){const r=e.memory.getUint32(n),i=e.memory.getUint32(n+4);if(1===r&&i>=t+8)return e.memory.setUint32(n,0),e.memory.setUint32(n+4,t),e.memory.setUint32(n+t+8,1),e.memory.setUint32(n+t+8+4,i-t-8),n+8;if(1===r&&i>=t)return e.memory.setUint32(n,0),n+8;n=n+i+8}if(e.sp-e.heapPointer<=t+8)throw new r.RuntimeError("out of memory");{const n=e.heapPointer;return e.memory.setUint32(e.heapPointer,0),e.memory.setUint32(e.heapPointer+4,t),e.heapPointer+=t+8,n+8}}getBlockSize(e,t){if(!(t>=e.heapStart&&t<=e.heapPointer))throw new r.RuntimeError("free a blk not be malloc");let n=e.heapStart,i=0;for(;n<t-8;){i=n,n=n+e.memory.getUint32(n+4)+8}if(n!==t-8)throw new r.RuntimeError("free a blk not be malloc");return e.memory.getUint32(n+4)}freeHeap(e,t){if(!(t>=e.heapStart&&t<=e.heapPointer))throw new r.RuntimeError("free a blk not be malloc");let n=e.heapStart,i=0;for(;n<t-8;){i=n,n=n+e.memory.getUint32(n+4)+8}if(n!==t-8)throw new r.RuntimeError("free a blk not be malloc");const o=e.memory.getUint32(i),s=e.memory.getUint32(n+4),a=e.memory.getUint32(n+8+s);if(1===o){let t=e.memory.getUint32(i+4)+s+8;1===a&&(t+=e.memory.getUint32(n+8+s+4)+8),e.memory.setUint32(i,1),e.memory.setUint32(i+4,t)}else{let t=s;1===a&&(t+=e.memory.getUint32(n+8+s+4)+8),e.memory.setUint32(n,1),e.memory.setUint32(n+4,t)}}}n.LinkedHeapAllocator=LinkedHeapAllocator;n.FastHeapAllocator=class FastHeapAllocator extends LinkedHeapAllocator{constructor(){super(),this.sizeLimit=[32,128,512],this.poolSize=[64,1,1],this.MAGIC_NUMBER=12450,this.pool=[],this.poolPtr=[]}init(e){super.init(e),this.pool=this.sizeLimit.map((t,n)=>this.createPool(e,n))}allocHeap(e,t){if(t>this.sizeLimit[this.sizeLimit.length-1])return super.allocHeap(e,t);{let n=0;for(;this.sizeLimit[n]<t;)n++;const r=this.pool[n];r.size<=0&&this.extendPool(e,n);const i=r.keys().next().value;return r.delete(i),i}}freeHeap(e,t){const n=e.memory.getUint32(t-4);if(n>=this.MAGIC_NUMBER){const e=n-this.MAGIC_NUMBER;if(e<0||e>=this.pool.length)throw new r.RuntimeError("free a blk not be malloc");this.pool[e].add(t)}else super.freeHeap(e,t)}getBlockSize(e,t){const n=e.memory.getUint32(t-4);if(n>=this.MAGIC_NUMBER){const e=n-this.MAGIC_NUMBER;if(e<0||e>=this.pool.length)throw new r.RuntimeError("free a blk not be malloc");return this.poolSize[e]}return super.getBlockSize(e,t)}createPool(e,t){const n=this.sizeLimit[t],r=this.poolSize[t],i=new Set,o=super.allocHeap(e,(n+4)*r);this.poolPtr.push(o);for(let s=0;s<r;s++){const r=o+s*(n+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}return i}extendPool(e,t){const n=this.sizeLimit[t],r=this.poolSize[t],i=this.pool[t];this.poolSize[t]*=2;const o=super.allocHeap(e,(n+4)*r);this.poolPtr.push(o);for(let s=0;s<r;s++){const r=o+s*(n+4);e.memory.setUint32(r,this.MAGIC_NUMBER+t),i.add(r+4)}}}},{"../common/error":"nOPH"}],"B/OM":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/utils"),i=e("./allocator");n.Runtime=class Runtime{constructor(e){this.memoryBuffer=new ArrayBuffer(e.memorySize),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.memory=new DataView(this.memoryBuffer),this.heapStart=e.heapStart,this.heapPointer=e.heapStart,this.importObjects=e.importObjects,this.files=e.files,this.heapAllocator=new i.FastHeapAllocator,this.entry=e.entry}readMemoryString(e){return r.fromBytesToString(this.memory,e)}}},{"../common/utils":"pe9I","./allocator":"PxdH"}],"/x2e":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("babel-polyfill");const r=e("./runtime");n.NativeRuntime=class NativeRuntime extends r.Runtime{constructor(e){super(e),this.code=e.code,this.options=e,this.wasmMemory=new WebAssembly.Memory({initial:1,maximum:e.memorySize/65536}),this.importObjects.hasOwnProperty("system")||(this.importObjects.system={});const t=this,n=this.importObjects;this.importObjects={};for(const e of Object.keys(n)){const r=n[e];this.importObjects[e]={};for(const n of Object.keys(r)){const i=r[n];this.importObjects[e][n]=function(){return i.apply(t,Array.from(arguments))}}}this.importObjects.system.memory=this.wasmMemory,this.memoryBuffer=this.wasmMemory.buffer,this.memory=new DataView(this.memoryBuffer),this.memoryUint8Array=new Uint8Array(this.memoryBuffer),this.instance=null}async run(){this.heapStart=this.heapPointer=this.options.heapStart;const e=await WebAssembly.instantiate(this.code,this.importObjects);this.instance=e.instance;const t=4*parseInt((this.wasmMemory.buffer.byteLength-1)/4+"");this.sp=t,this.heapAllocator.init(this),e.instance.exports.$start(),this.sp=t,e.instance.exports[this.entry](),this.files.map(e=>e.flush())}get sp(){return this.instance.exports.$get_sp()}set sp(e){this.instance.exports.$set_sp(e)}printStack(){}}},{"babel-polyfill":"wllv","./runtime":"B/OM"}],"9XaA":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("long"),i=e("../codegen/scope"),o=e("../common/symbol"),s=e("../type/compound_type"),a=e("../type/primitive_type"),u=e("../wasm"),c=e("../wasm/tool/calculator"),l=e("./runtime");n.JSRuntime=class JSRuntime extends l.Runtime{constructor(e){super(e),this.options=e,this.program=e.program,this.rootScope=e.scope,this.scopeManager=new i.ScopeManager(!0),this.scopeManager.root=this.rootScope,this.stack=[],this.spIndex=-1;for(let e=0;e<this.program.globals.length;e++)"$sp"===this.program.globals[e].name&&(this.spIndex=e);if(-1===this.spIndex)throw new Error("no $sp found");this.globals=this.program.globals.map(e=>e.type===u.WType.i64?r.fromString(e.init):e.type===u.WType.i32?parseInt(e.init):parseFloat(e.init)),this.returnValue=0,this.convertArray=new ArrayBuffer(64),this.convertDataView=new DataView(this.convertArray);for(const e of this.program.data)this.memoryUint8Array.set(new Uint8Array(e.data),e.offset);for(const e of this.program.functions)e.scope="::"===e.name.substring(0,2)?this.rootScope.getScopeOfLookupName(e.name+"::a"):null;this.stack=[{fn:this.program.functions[0],pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[]}],this.stackTop=this.stack[0]}get sp(){return this.globals[this.spIndex]}set sp(e){this.globals[this.spIndex]=e}runStep(){const e=this.stackTop.fn.codes[this.stackTop.pc];if(u.I32Binary.hasOwnProperty(e[0])||u.F32Binary.hasOwnProperty(e[0])||u.F64Binary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],n=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=c.doBinaryCompute(e[0],n,t)}else if(u.I64Binary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1],n=this.stackTop.stack[this.stackTop.stack.length-2];this.stackTop.stack.pop(),this.stackTop.stack[this.stackTop.stack.length-1]=c.doLongBinaryCompute(e[0],n,t)}else if(u.I32Unary.hasOwnProperty(e[0])||u.F32Unary.hasOwnProperty(e[0])||u.F64Unary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=c.doUnaryCompute(e[0],t)}else if(u.I64Unary.hasOwnProperty(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=c.doLongUnaryCompute(e[0],t)}else if(u.I32Convert.hasOwnProperty(e[0])||u.F32Convert.hasOwnProperty(e[0])||u.F64Convert.hasOwnProperty(e[0])){if(e[0]===u.I32Convert.wrap$i64||e[0]===u.F32Convert.convert_s$i64||e[0]===u.F32Convert.convert_u$i64||e[0]===u.F64Convert.convert_s$i64||e[0]===u.F64Convert.convert_u$i64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=e.toNumber()}else if(e[0]===u.I32Convert.trunc_s$f32||e[0]===u.I32Convert.trunc_s$f64||e[0]===u.I32Convert.trunc_u$f32||e[0]===u.I32Convert.trunc_u$f64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=0|e}else if(e[0]===u.I32Convert.reinterpret$f32){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat32(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getInt32(0)}else if(e[0]===u.F32Convert.reinterpret$i32){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setInt32(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat32(0)}else if(e[0]===u.F64Convert.reinterpret$i64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setUint32(0,e.high),this.convertDataView.setUint32(4,e.low),this.stackTop.stack[this.stackTop.stack.length-1]=this.convertDataView.getFloat64(0)}}else if(u.I64Convert.hasOwnProperty(e[0]))if(e[0]===u.I64Convert.reinterpret$f64){const e=this.stackTop.stack[this.stackTop.stack.length-1];this.convertDataView.setFloat64(0,e),this.stackTop.stack[this.stackTop.stack.length-1]=r.fromBits(this.convertDataView.getUint32(4),this.convertDataView.getUint32(0))}else{const e=this.stackTop.stack[this.stackTop.stack.length-1];this.stackTop.stack[this.stackTop.stack.length-1]=r.fromNumber(e)}else if(e[0]===u.I32.const||e[0]===u.F32.const||e[0]===u.F64.const)this.stackTop.stack.push(e[1]);else if(e[0]===u.I64.const)this.stackTop.stack.push(r.fromString(e[1]));else if(u.WLoadIns.has(e[0])){const t=this.stackTop.stack[this.stackTop.stack.length-1]+e[1];let n=0;e[0]===u.I32.load8_s||e[0]===u.I64.load8_s?n=this.memory.getInt8(t):e[0]===u.I32.load8_u||e[0]===u.I64.load8_u?n=this.memory.getUint8(t):e[0]===u.I32.load16_s||e[0]===u.I64.load16_s?n=this.memory.getInt16(t,!0):e[0]===u.I32.load16_u||e[0]===u.I64.load16_u?n=this.memory.getUint16(t,!0):e[0]===u.I32.load||e[0]===u.I64.load32_s?n=this.memory.getInt32(t,!0):e[0]===u.I64.load32_u?n=this.memory.getUint32(t,!0):e[0]===u.F32.load?n=this.memory.getFloat32(t,!0):e[0]===u.F64.load&&(n=this.memory.getFloat64(t,!0)),e[0]===u.I64.load?this.stackTop.stack[this.stackTop.stack.length-1]=r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0)):e[0]===u.I64.load32_u||e[0]===u.I64.load32_s||e[0]===u.I64.load16_u||e[0]===u.I64.load16_s||e[0]===u.I64.load8_u||e[0]===u.I64.load8_s?this.stackTop.stack[this.stackTop.stack.length-1]=r.fromNumber(n):this.stackTop.stack[this.stackTop.stack.length-1]=n}else if(u.WStoreIns.has(e[0])){const t=this.stackTop.stack.pop(),n=this.stackTop.stack.pop()+e[1];this.stackTop.stack.pop(),e[0]===u.I32.store8?this.memory.setUint8(n,t):e[0]===u.I32.store16?this.memory.setUint16(n,t,!0):e[0]===u.I32.store?this.memory.setInt32(n,t,!0):e[0]===u.F32.store?this.memory.setFloat32(n,t,!0):e[0]===u.F64.store?this.memory.setFloat64(n,t,!0):e[0]===u.I64.store8?this.memory.setUint8(n,t.toNumber()):e[0]===u.I64.store16?this.memory.setUint16(n,t.toNumber(),!0):e[0]===u.I64.store32?this.memory.setUint32(n,t.toNumber(),!0):e[0]===u.I64.store&&(this.memory.setUint32(n,t.low,!0),this.memory.setUint32(n+4,t.high,!0))}else if(e[0]===u.Control.set_local)this.stackTop.locals[e[1]]=this.stackTop.stack.pop();else if(e[0]===u.Control.tee_local)this.stackTop.locals[e[1]]=this.stackTop.stack[this.stackTop.stack.length-1];else if(e[0]===u.Control.set_global){const t=this.stackTop.stack.pop();this.globals[e[1]]=t}else if(e[0]===u.Control.get_local)this.stackTop.stack.push(this.stackTop.locals[e[1]]);else if(e[0]===u.Control.get_global)this.stackTop.stack.push(this.globals[e[1]]);else if(e[0]===u.Control.drop)this.stackTop.stack.pop();else if(e[0]===u.Control.nop);else if(e[0]===u.Control.block)this.stackTop.controlFlow.push(e[1]);else if(e[0]===u.Control.loop)this.stackTop.controlFlow.push(this.stackTop.pc+1);else if(e[0]===u.Control.br||e[0]===u.Control.br_if){if(e[0]===u.Control.br||this.stackTop.stack.pop()){for(let t=0;t<e[1];t++)this.stackTop.controlFlow.pop();this.stackTop.pc=this.stackTop.controlFlow[this.stackTop.controlFlow.length-1]-1}}else if(e[0]===u.Control.if)this.stackTop.controlFlow.push(this.stackTop.pc),this.stackTop.stack.pop()||(this.stackTop.fn.codes[e[1]][0]===u.Control.else?this.stackTop.pc=e[1]:this.stackTop.pc=e[1]-1);else if(e[0]===u.Control.else)this.stackTop.pc=e[1]-1;else if(e[0]===u.Control.end)this.stackTop.controlFlow.pop();else if(e[0]===u.Control.call||e[0]===u.Control.call_indirect){const t=e[0]===u.Control.call_indirect?this.stackTop.stack.pop():e[1],n=this.program.types[t],i=[];for(let e=1;e<n.length;e++)i.push(this.stackTop.stack.pop());if(i.reverse(),t>=this.program.imports.length){const e=this.program.functions[t-this.program.imports.length];this.stack.push({fn:e,pc:-1,sp:this.sp,stack:[],controlFlow:[],locals:i}),this.stackTop=this.stack[this.stack.length-1];for(let e=0;e<this.stackTop.fn.locals.length;e++)this.stackTop.fn.locals[e]===u.WType.i64?this.stackTop.locals.push(r.fromNumber(0)):this.stackTop.locals.push(0)}else{const e=this.program.imports[t],o=this.importObjects[e.module][e.name].apply(this,i);"i"===n.charAt(0)||"f"===n.charAt(0)||"d"===n.charAt(0)?this.stackTop.stack.push(o):"l"===n.charAt(0)&&this.stackTop.stack.push(r.fromNumber(o))}}else if(e[0]===u.Control.return){let e=0;const t="v"===this.stackTop.fn.type.charAt(0);if(t||(e=this.stackTop.stack.pop()),this.stack.pop(),0===this.stack.length)return e instanceof r&&(e=e.toNumber()),this.returnValue=e,!1;this.stackTop=this.stack[this.stack.length-1],t||this.stackTop.stack.push(e)}else if(e[0]===u.Control.br_table||e[0]===u.Control.select)throw new Error("WASM not support");return this.stackTop.pc++,!0}prepareRunFunction(e,t=!1){if(!this.program.exports.hasOwnProperty(e))throw new Error(`no entry:${e} found`);this.sp=4*parseInt((this.memory.buffer.byteLength-1)/4+""),t&&this.heapAllocator.init(this);const n=this.program.functions[this.program.exports[e]-this.program.imports.length];this.stack=[{fn:n,pc:0,sp:this.sp,locals:[],stack:[],controlFlow:[]}],this.stackTop=this.stack[this.stack.length-1]}runFunction(e,t=!1){for(this.prepareRunFunction(e,t);this.runStep(););}async run(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.runFunction(this.entry,!1),this.files.map(e=>e.flush())}getCurrentLine(){return this.stackTop.fn.codes[this.stackTop.pc][2]}prepareRunSingleStepMode(){this.heapStart=this.heapPointer=this.options.heapStart,this.runFunction("$start",!0),this.prepareRunFunction(this.entry,!1)}runSingleStepMode(){for(;this.runStep();)if(this.stackTop.fn.fileName===this.options.entryFileName&&this.stackTop.fn.lineIdx.has(this.stackTop.pc))return this.files.map(e=>e.flush()),!0;return this.files.map(e=>e.flush()),!1}padDigits(e,t){return Array(Math.max(t-e.length+1,0)).join("0")+e}formatVariableOutput(e,t){return e.type instanceof s.PointerType||e.type instanceof s.ReferenceType?"0x"+this.padDigits(t.toString(16),8):t.toString()}getValueOfVariableFromAddress(e,t){return e.type instanceof a.UnsignedCharType?this.formatVariableOutput(e,this.memory.getUint8(t)):e.type instanceof a.UnsignedInt16Type?this.formatVariableOutput(e,this.memory.getUint16(t,!0)):e.type instanceof a.UnsignedInt32Type?this.formatVariableOutput(e,this.memory.getUint32(t,!0)):e.type instanceof a.UnsignedInt64Type?this.formatVariableOutput(e,r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0),!0)):e.type instanceof a.CharType?this.formatVariableOutput(e,this.memory.getInt8(t)):e.type instanceof a.Int16Type?this.formatVariableOutput(e,this.memory.getInt16(t,!0)):e.type instanceof a.Int32Type?this.formatVariableOutput(e,this.memory.getInt32(t,!0)):e.type instanceof a.Int64Type?this.formatVariableOutput(e,r.fromBits(this.memory.getUint32(t,!0),this.memory.getUint32(t+4,!0))):e.type instanceof s.PointerType?this.formatVariableOutput(e,this.memory.getUint32(t,!0)):"N/A"}getValueOfVariable(e,t){switch(e.addressType){case o.AddressType.LOCAL:return t?this.formatVariableOutput(e,t.locals[e.location]):"N/A";case o.AddressType.GLOBAL:return this.formatVariableOutput(e,this.globals[e.location]);case o.AddressType.GLOBAL_SP:return this.getValueOfVariableFromAddress(e,this.sp+e.location);case o.AddressType.STACK:return t?this.getValueOfVariableFromAddress(e,t.sp+e.location):"N/A";case o.AddressType.MEMORY_DATA:return this.getValueOfVariableFromAddress(e,this.stackTop.fn.dataStart+e.location);case o.AddressType.MEMORY_BSS:return this.getValueOfVariableFromAddress(e,this.stackTop.fn.bssStart+e.location);default:return"N/A"}}getLocationOfVariable(e,t){switch(e.addressType){case o.AddressType.GLOBAL_SP:return this.sp+e.location;case o.AddressType.STACK:return t?t.sp+e.location:null;case o.AddressType.MEMORY_DATA:return this.stackTop.fn.dataStart+e.location;case o.AddressType.MEMORY_BSS:return this.stackTop.fn.bssStart+e.location;default:return null}}getSubScopeInfo(e,t,n){for(const r of t.map)for(const t of r[1])t instanceof o.Variable&&e.push({name:t.shortName,size:t.type.length,type:t.type.toString(),value:this.getValueOfVariable(t,n),location:this.getLocationOfVariable(t,n)});for(const r of t.children)r.isInnerScope&&this.getSubScopeInfo(e,r,n)}getScopeInfo(e,t){const n=[];return e?(this.getSubScopeInfo(n,e,t),n):[]}printStack(){console.log("==== WebCpp Stack Dumper ===="),console.log("sp=",this.stackTop.sp);const e=[];for(const t of this.stack)if(t.fn.scope){const n=this.getScopeInfo(t.fn.scope,t);e.push({location:t.sp,name:t.fn.name,type:t.locals.map(e=>e.toString()).join(","),value:"",size:0});for(const t of n)null!==t.location&&e.push(t)}const t=e.sort((e,t)=>e.location-t.location);let n=-1;for(const e of t)e.location!==n&&-1!==n&&console.log(`${n}-${e.location} >>>>unknown`),console.log(`${e.location}-${e.location+e.size}`,e.name," ",e.type," ",e.value),n=e.location+e.size;n!==this.memory.byteLength&&console.log(`${n}-${this.memory.byteLength} >>>>unknown`)}}},{long:"YvD4","../codegen/scope":"y+tL","../common/symbol":"HcQt","../type/compound_type":"ZWBU","../type/primitive_type":"HxYe","../wasm":"Jo9c","../wasm/tool/calculator":"eYtb","./runtime":"B/OM"}],"0bZZ":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/error"),i=e("../common/utils");class VMFile{}n.VMFile=VMFile;n.NoInputFile=class NoInputFile extends VMFile{read(e,t,n){return 0}write(e){throw new r.InternalError("NoInputFile is not support write")}flush(){return 0}};n.CommandOutputFile=class CommandOutputFile extends VMFile{constructor(){super(),this.buffer=""}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){if(this.buffer+=i.fromBytesToString(new DataView(e),0,e.byteLength),this.buffer.includes("\n")){const e=this.buffer.split("\n");this.buffer=e[e.length-1],e.slice(0,e.length-1).map(e=>console.log(e))}return e.byteLength}flush(){const e=this.buffer.length;return 0===this.buffer.length?0:(console.log(this.buffer),this.buffer="",e)}};n.StringInputFile=class StringInputFile extends VMFile{constructor(e){super(),this.str=e,this.offset=0}flush(){return 0}read(e,t,n){let r=0;for(let i=0;i<n;i++){if(this.offset>=this.str.length)return r;new DataView(e).setUint8(t+i,this.str.charCodeAt(this.offset)),this.offset++,r++}return r}write(e){throw new r.InternalError("NoInputFile is not support write")}};n.StringOutputFile=class StringOutputFile extends VMFile{constructor(e){super(),this.output=e}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){return this.output[0]+=i.fromBytesToString(new DataView(e),0,e.byteLength),e.byteLength}flush(){return 0}};n.CallbackOutputFile=class CallbackOutputFile extends VMFile{constructor(e){super(),this.callback=e}read(e,t,n){throw new r.InternalError("CommandOutputFile is not support read")}write(e){return this.callback(i.fromBytesToString(new DataView(e),0,e.byteLength)),e.byteLength}flush(){return 0}}},{"../common/error":"nOPH","../common/utils":"pe9I"}],"47Y6":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("source-map"),i=e("../codegen"),o=e("../codegen/context"),s=e("../common/error"),a=e("../library"),u=e("../linker"),c=e("../parser"),l=e("../preprocessor");function p(e,t,n={}){n.fileName=e;const{code:a,map:u}=l.preprocess(e,t);try{const l=c.CParser.parse(a,n),p=new o.CompileContext(e,n,t,u);return i.codegen(l,p),p.toCompiledObject()}catch(e){const n=new r.SourceMapConsumer(u.toString());if(e instanceof s.CompilerError){const r=n.originalPositionFor(e.location.start);e.errorLine=t.split("\n")[r.line],e.location.start.line=r.line,e.location.start.column=r.column}throw e}}n.getDebugSymbols=function(e,t,n={}){n.fileName=e;const{code:a,map:p}=l.preprocess(e,t);try{const l=c.CParser.parse(a,n),m=new o.CompileContext(e,n,t,p);return i.codegen(l,m),{pre:a,asm:u.link("main.cpp",[...h,m.toCompiledObject()],n).dumpInfo}}catch(e){const n=new r.SourceMapConsumer(p.toString());if(e instanceof s.CompilerError){const r=n.originalPositionFor(e.location.start);e.errorLine=t.split("\n")[r.line],e.location.start.line=r.line,e.location.start.column=r.column}throw e}};const h=Array.from(a.Impls.keys()).map(e=>p(e,a.Impls.get(e),{isCpp:!0}));n.compileFile=function(e,t,n=!0){const r=p(e,t,{isCpp:n});return u.link("main.cpp",[...h,r],{})},n.importObj={system:{}};for(const e of Object.keys(a.JsAPIMap))n.importObj.system["::"+e]=a.JsAPIMap[e];var m=e("../common/error");n.CompilerError=m.CompilerError;var d=e("../runtime/native_runtime");n.NativeRuntime=d.NativeRuntime;var f=e("../runtime/js_runtime");n.JSRuntime=f.JSRuntime;var y=e("../runtime/vmfile");n.VMFile=y.VMFile,n.StringOutputFile=y.StringOutputFile,n.StringInputFile=y.StringInputFile,n.CallbackOutputFile=y.CallbackOutputFile,n.NoInputFile=y.NoInputFile},{"source-map":"aRf0","../codegen":"FIFg","../codegen/context":"cKzO","../common/error":"nOPH","../library":"bjS5","../linker":"dGoJ","../parser":"4ugX","../preprocessor":"DY6N","../runtime/native_runtime":"/x2e","../runtime/js_runtime":"9XaA","../runtime/vmfile":"0bZZ"}]},{},[]);
